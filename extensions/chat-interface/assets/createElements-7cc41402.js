var Uw=Object.defineProperty;var zw=(t,e,r)=>e in t?Uw(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var cn=(t,e,r)=>(zw(t,typeof e!="symbol"?e+"":e,r),r);/* empty css                */function Fw(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var vl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ts(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Bw(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var Fg={exports:{}},_u={},Bg={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var go=Symbol.for("react.element"),Vw=Symbol.for("react.portal"),Hw=Symbol.for("react.fragment"),Zw=Symbol.for("react.strict_mode"),Kw=Symbol.for("react.profiler"),qw=Symbol.for("react.provider"),Ww=Symbol.for("react.context"),Jw=Symbol.for("react.forward_ref"),Gw=Symbol.for("react.suspense"),Yw=Symbol.for("react.memo"),Qw=Symbol.for("react.lazy"),pp=Symbol.iterator;function Xw(t){return t===null||typeof t!="object"?null:(t=pp&&t[pp]||t["@@iterator"],typeof t=="function"?t:null)}var Vg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Hg=Object.assign,Zg={};function js(t,e,r){this.props=t,this.context=e,this.refs=Zg,this.updater=r||Vg}js.prototype.isReactComponent={};js.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};js.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Kg(){}Kg.prototype=js.prototype;function yh(t,e,r){this.props=t,this.context=e,this.refs=Zg,this.updater=r||Vg}var vh=yh.prototype=new Kg;vh.constructor=yh;Hg(vh,js.prototype);vh.isPureReactComponent=!0;var mp=Array.isArray,qg=Object.prototype.hasOwnProperty,_h={current:null},Wg={key:!0,ref:!0,__self:!0,__source:!0};function Jg(t,e,r){var n,i={},s=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)qg.call(e,n)&&!Wg.hasOwnProperty(n)&&(i[n]=e[n]);var o=arguments.length-2;if(o===1)i.children=r;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:go,type:t,key:s,ref:a,props:i,_owner:_h.current}}function eb(t,e){return{$$typeof:go,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function wh(t){return typeof t=="object"&&t!==null&&t.$$typeof===go}function tb(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var gp=/\/+/g;function mc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?tb(""+t.key):e.toString(36)}function nl(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case go:case Vw:a=!0}}if(a)return a=t,i=i(a),t=n===""?"."+mc(a,0):n,mp(i)?(r="",t!=null&&(r=t.replace(gp,"$&/")+"/"),nl(i,e,r,"",function(u){return u})):i!=null&&(wh(i)&&(i=eb(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(gp,"$&/")+"/")+t)),e.push(i)),1;if(a=0,n=n===""?".":n+":",mp(t))for(var o=0;o<t.length;o++){s=t[o];var l=n+mc(s,o);a+=nl(s,e,r,l,i)}else if(l=Xw(t),typeof l=="function")for(t=l.call(t),o=0;!(s=t.next()).done;)s=s.value,l=n+mc(s,o++),a+=nl(s,e,r,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Co(t,e,r){if(t==null)return t;var n=[],i=0;return nl(t,n,"","",function(s){return e.call(r,s,i++)}),n}function rb(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var St={current:null},il={transition:null},nb={ReactCurrentDispatcher:St,ReactCurrentBatchConfig:il,ReactCurrentOwner:_h};de.Children={map:Co,forEach:function(t,e,r){Co(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Co(t,function(){e++}),e},toArray:function(t){return Co(t,function(e){return e})||[]},only:function(t){if(!wh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};de.Component=js;de.Fragment=Hw;de.Profiler=Kw;de.PureComponent=yh;de.StrictMode=Zw;de.Suspense=Gw;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nb;de.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Hg({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=_h.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)qg.call(e,l)&&!Wg.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:go,type:t.type,key:i,ref:s,props:n,_owner:a}};de.createContext=function(t){return t={$$typeof:Ww,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:qw,_context:t},t.Consumer=t};de.createElement=Jg;de.createFactory=function(t){var e=Jg.bind(null,t);return e.type=t,e};de.createRef=function(){return{current:null}};de.forwardRef=function(t){return{$$typeof:Jw,render:t}};de.isValidElement=wh;de.lazy=function(t){return{$$typeof:Qw,_payload:{_status:-1,_result:t},_init:rb}};de.memo=function(t,e){return{$$typeof:Yw,type:t,compare:e===void 0?null:e}};de.startTransition=function(t){var e=il.transition;il.transition={};try{t()}finally{il.transition=e}};de.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};de.useCallback=function(t,e){return St.current.useCallback(t,e)};de.useContext=function(t){return St.current.useContext(t)};de.useDebugValue=function(){};de.useDeferredValue=function(t){return St.current.useDeferredValue(t)};de.useEffect=function(t,e){return St.current.useEffect(t,e)};de.useId=function(){return St.current.useId()};de.useImperativeHandle=function(t,e,r){return St.current.useImperativeHandle(t,e,r)};de.useInsertionEffect=function(t,e){return St.current.useInsertionEffect(t,e)};de.useLayoutEffect=function(t,e){return St.current.useLayoutEffect(t,e)};de.useMemo=function(t,e){return St.current.useMemo(t,e)};de.useReducer=function(t,e,r){return St.current.useReducer(t,e,r)};de.useRef=function(t){return St.current.useRef(t)};de.useState=function(t){return St.current.useState(t)};de.useSyncExternalStore=function(t,e,r){return St.current.useSyncExternalStore(t,e,r)};de.useTransition=function(){return St.current.useTransition()};de.version="18.2.0";Bg.exports=de;var Ie=Bg.exports;const ci=Ts(Ie);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ib=Ie,sb=Symbol.for("react.element"),ab=Symbol.for("react.fragment"),ob=Object.prototype.hasOwnProperty,lb=ib.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ub={key:!0,ref:!0,__self:!0,__source:!0};function Gg(t,e,r){var n,i={},s=null,a=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)ob.call(e,n)&&!ub.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:sb,type:t,key:s,ref:a,props:i,_owner:lb.current}}_u.Fragment=ab;_u.jsx=Gg;_u.jsxs=Gg;Fg.exports=_u;var T=Fg.exports;(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var _l={},Yg={exports:{}},Ht={},Qg={exports:{}},Xg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,$){var F=V.length;V.push($);e:for(;0<F;){var H=F-1>>>1,ye=V[H];if(0<i(ye,$))V[H]=$,V[F]=ye,F=H;else break e}}function r(V){return V.length===0?null:V[0]}function n(V){if(V.length===0)return null;var $=V[0],F=V.pop();if(F!==$){V[0]=F;e:for(var H=0,ye=V.length,Pt=ye>>>1;H<Pt;){var Qe=2*(H+1)-1,qt=V[Qe],Lt=Qe+1,$r=V[Lt];if(0>i(qt,F))Lt<ye&&0>i($r,qt)?(V[H]=$r,V[Lt]=F,H=Lt):(V[H]=qt,V[Qe]=F,H=Qe);else if(Lt<ye&&0>i($r,F))V[H]=$r,V[Lt]=F,H=Lt;else break e}}return $}function i(V,$){var F=V.sortIndex-$.sortIndex;return F!==0?F:V.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],u=[],c=1,d=null,h=3,b=!1,v=!1,O=!1,k=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function f(V){for(var $=r(u);$!==null;){if($.callback===null)n(u);else if($.startTime<=V)n(u),$.sortIndex=$.expirationTime,e(l,$);else break;$=r(u)}}function S(V){if(O=!1,f(V),!v)if(r(l)!==null)v=!0,J(A);else{var $=r(u);$!==null&&me(S,$.startTime-V)}}function A(V,$){v=!1,O&&(O=!1,p(_),_=-1),b=!0;var F=h;try{for(f($),d=r(l);d!==null&&(!(d.expirationTime>$)||V&&!R());){var H=d.callback;if(typeof H=="function"){d.callback=null,h=d.priorityLevel;var ye=H(d.expirationTime<=$);$=t.unstable_now(),typeof ye=="function"?d.callback=ye:d===r(l)&&n(l),f($)}else n(l);d=r(l)}if(d!==null)var Pt=!0;else{var Qe=r(u);Qe!==null&&me(S,Qe.startTime-$),Pt=!1}return Pt}finally{d=null,h=F,b=!1}}var x=!1,j=null,_=-1,P=5,w=-1;function R(){return!(t.unstable_now()-w<P)}function L(){if(j!==null){var V=t.unstable_now();w=V;var $=!0;try{$=j(!0,V)}finally{$?ee():(x=!1,j=null)}}else x=!1}var ee;if(typeof m=="function")ee=function(){m(L)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,ne=Q.port2;Q.port1.onmessage=L,ee=function(){ne.postMessage(null)}}else ee=function(){k(L,0)};function J(V){j=V,x||(x=!0,ee())}function me(V,$){_=k(function(){V(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){v||b||(v=!0,J(A))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(V){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var F=h;h=$;try{return V()}finally{h=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,$){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var F=h;h=V;try{return $()}finally{h=F}},t.unstable_scheduleCallback=function(V,$,F){var H=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?H+F:H):F=H,V){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=F+ye,V={id:c++,callback:$,priorityLevel:V,startTime:F,expirationTime:ye,sortIndex:-1},F>H?(V.sortIndex=F,e(u,V),r(l)===null&&V===r(u)&&(O?(p(_),_=-1):O=!0,me(S,F-H))):(V.sortIndex=ye,e(l,V),v||b||(v=!0,J(A))),V},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(V){var $=h;return function(){var F=h;h=$;try{return V.apply(this,arguments)}finally{h=F}}}})(Xg);Qg.exports=Xg;var cb=Qg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ey=Ie,Bt=cb;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ty=new Set,Ma={};function ki(t,e){os(t,e),os(t+"Capture",e)}function os(t,e){for(Ma[t]=e,t=0;t<e.length;t++)ty.add(e[t])}var Gr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ad=Object.prototype.hasOwnProperty,db=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yp={},vp={};function hb(t){return ad.call(vp,t)?!0:ad.call(yp,t)?!1:db.test(t)?vp[t]=!0:(yp[t]=!0,!1)}function fb(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function pb(t,e,r,n){if(e===null||typeof e>"u"||fb(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Et(t,e,r,n,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){st[t]=new Et(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];st[e]=new Et(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){st[t]=new Et(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){st[t]=new Et(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){st[t]=new Et(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){st[t]=new Et(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){st[t]=new Et(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){st[t]=new Et(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){st[t]=new Et(t,5,!1,t.toLowerCase(),null,!1,!1)});var bh=/[\-:]([a-z])/g;function xh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(bh,xh);st[e]=new Et(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(bh,xh);st[e]=new Et(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(bh,xh);st[e]=new Et(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){st[t]=new Et(t,1,!1,t.toLowerCase(),null,!1,!1)});st.xlinkHref=new Et("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){st[t]=new Et(t,1,!1,t.toLowerCase(),null,!0,!0)});function kh(t,e,r,n){var i=st.hasOwnProperty(e)?st[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(pb(e,r,i,n)&&(r=null),n||i===null?hb(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var nn=ey.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ao=Symbol.for("react.element"),Ui=Symbol.for("react.portal"),zi=Symbol.for("react.fragment"),Sh=Symbol.for("react.strict_mode"),od=Symbol.for("react.profiler"),ry=Symbol.for("react.provider"),ny=Symbol.for("react.context"),Eh=Symbol.for("react.forward_ref"),ld=Symbol.for("react.suspense"),ud=Symbol.for("react.suspense_list"),Oh=Symbol.for("react.memo"),gn=Symbol.for("react.lazy"),iy=Symbol.for("react.offscreen"),_p=Symbol.iterator;function Ms(t){return t===null||typeof t!="object"?null:(t=_p&&t[_p]||t["@@iterator"],typeof t=="function"?t:null)}var Le=Object.assign,gc;function ca(t){if(gc===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);gc=e&&e[1]||""}return`
`+gc+t}var yc=!1;function vc(t,e){if(!t||yc)return"";yc=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=n.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{yc=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?ca(t):""}function mb(t){switch(t.tag){case 5:return ca(t.type);case 16:return ca("Lazy");case 13:return ca("Suspense");case 19:return ca("SuspenseList");case 0:case 2:case 15:return t=vc(t.type,!1),t;case 11:return t=vc(t.type.render,!1),t;case 1:return t=vc(t.type,!0),t;default:return""}}function cd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case zi:return"Fragment";case Ui:return"Portal";case od:return"Profiler";case Sh:return"StrictMode";case ld:return"Suspense";case ud:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ny:return(t.displayName||"Context")+".Consumer";case ry:return(t._context.displayName||"Context")+".Provider";case Eh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Oh:return e=t.displayName||null,e!==null?e:cd(t.type)||"Memo";case gn:e=t._payload,t=t._init;try{return cd(t(e))}catch{}}return null}function gb(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return cd(e);case 8:return e===Sh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function $n(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function sy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function yb(t){var e=sy(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Io(t){t._valueTracker||(t._valueTracker=yb(t))}function ay(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=sy(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function wl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function dd(t,e){var r=e.checked;return Le({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function wp(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=$n(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function oy(t,e){e=e.checked,e!=null&&kh(t,"checked",e,!1)}function hd(t,e){oy(t,e);var r=$n(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?fd(t,e.type,r):e.hasOwnProperty("defaultValue")&&fd(t,e.type,$n(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function bp(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function fd(t,e,r){(e!=="number"||wl(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var da=Array.isArray;function es(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+$n(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function pd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Le({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function xp(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(z(92));if(da(r)){if(1<r.length)throw Error(z(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:$n(r)}}function ly(t,e){var r=$n(e.value),n=$n(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function kp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function uy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function md(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?uy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ro,cy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ro=Ro||document.createElement("div"),Ro.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ro.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ua(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var va={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vb=["Webkit","ms","Moz","O"];Object.keys(va).forEach(function(t){vb.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),va[e]=va[t]})});function dy(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||va.hasOwnProperty(t)&&va[t]?(""+e).trim():e+"px"}function hy(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=dy(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var _b=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gd(t,e){if(e){if(_b[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function yd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vd=null;function Ph(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _d=null,ts=null,rs=null;function Sp(t){if(t=_o(t)){if(typeof _d!="function")throw Error(z(280));var e=t.stateNode;e&&(e=Su(e),_d(t.stateNode,t.type,e))}}function fy(t){ts?rs?rs.push(t):rs=[t]:ts=t}function py(){if(ts){var t=ts,e=rs;if(rs=ts=null,Sp(t),e)for(t=0;t<e.length;t++)Sp(e[t])}}function my(t,e){return t(e)}function gy(){}var _c=!1;function yy(t,e,r){if(_c)return t(e,r);_c=!0;try{return my(t,e,r)}finally{_c=!1,(ts!==null||rs!==null)&&(gy(),py())}}function za(t,e){var r=t.stateNode;if(r===null)return null;var n=Su(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(z(231,e,typeof r));return r}var wd=!1;if(Gr)try{var Us={};Object.defineProperty(Us,"passive",{get:function(){wd=!0}}),window.addEventListener("test",Us,Us),window.removeEventListener("test",Us,Us)}catch{wd=!1}function wb(t,e,r,n,i,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(c){this.onError(c)}}var _a=!1,bl=null,xl=!1,bd=null,bb={onError:function(t){_a=!0,bl=t}};function xb(t,e,r,n,i,s,a,o,l){_a=!1,bl=null,wb.apply(bb,arguments)}function kb(t,e,r,n,i,s,a,o,l){if(xb.apply(this,arguments),_a){if(_a){var u=bl;_a=!1,bl=null}else throw Error(z(198));xl||(xl=!0,bd=u)}}function Si(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function vy(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ep(t){if(Si(t)!==t)throw Error(z(188))}function Sb(t){var e=t.alternate;if(!e){if(e=Si(t),e===null)throw Error(z(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return Ep(i),t;if(s===n)return Ep(i),e;s=s.sibling}throw Error(z(188))}if(r.return!==n.return)r=i,n=s;else{for(var a=!1,o=i.child;o;){if(o===r){a=!0,r=i,n=s;break}if(o===n){a=!0,n=i,r=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===r){a=!0,r=s,n=i;break}if(o===n){a=!0,n=s,r=i;break}o=o.sibling}if(!a)throw Error(z(189))}}if(r.alternate!==n)throw Error(z(190))}if(r.tag!==3)throw Error(z(188));return r.stateNode.current===r?t:e}function _y(t){return t=Sb(t),t!==null?wy(t):null}function wy(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=wy(t);if(e!==null)return e;t=t.sibling}return null}var by=Bt.unstable_scheduleCallback,Op=Bt.unstable_cancelCallback,Eb=Bt.unstable_shouldYield,Ob=Bt.unstable_requestPaint,Fe=Bt.unstable_now,Pb=Bt.unstable_getCurrentPriorityLevel,Th=Bt.unstable_ImmediatePriority,xy=Bt.unstable_UserBlockingPriority,kl=Bt.unstable_NormalPriority,Tb=Bt.unstable_LowPriority,ky=Bt.unstable_IdlePriority,wu=null,Ar=null;function jb(t){if(Ar&&typeof Ar.onCommitFiberRoot=="function")try{Ar.onCommitFiberRoot(wu,t,void 0,(t.current.flags&128)===128)}catch{}}var yr=Math.clz32?Math.clz32:Ib,Cb=Math.log,Ab=Math.LN2;function Ib(t){return t>>>=0,t===0?32:31-(Cb(t)/Ab|0)|0}var No=64,Lo=4194304;function ha(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Sl(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,a=r&268435455;if(a!==0){var o=a&~i;o!==0?n=ha(o):(s&=a,s!==0&&(n=ha(s)))}else a=r&~i,a!==0?n=ha(a):s!==0&&(n=ha(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-yr(e),i=1<<r,n|=t[r],e&=~i;return n}function Rb(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nb(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-yr(s),o=1<<a,l=i[a];l===-1?(!(o&r)||o&n)&&(i[a]=Rb(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}}function xd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Sy(){var t=No;return No<<=1,!(No&4194240)&&(No=64),t}function wc(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function yo(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-yr(e),t[e]=r}function Lb(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-yr(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function jh(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-yr(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var _e=0;function Ey(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Oy,Ch,Py,Ty,jy,kd=!1,$o=[],En=null,On=null,Pn=null,Fa=new Map,Ba=new Map,wn=[],$b="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pp(t,e){switch(t){case"focusin":case"focusout":En=null;break;case"dragenter":case"dragleave":On=null;break;case"mouseover":case"mouseout":Pn=null;break;case"pointerover":case"pointerout":Fa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ba.delete(e.pointerId)}}function zs(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=_o(e),e!==null&&Ch(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Db(t,e,r,n,i){switch(e){case"focusin":return En=zs(En,t,e,r,n,i),!0;case"dragenter":return On=zs(On,t,e,r,n,i),!0;case"mouseover":return Pn=zs(Pn,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return Fa.set(s,zs(Fa.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Ba.set(s,zs(Ba.get(s)||null,t,e,r,n,i)),!0}return!1}function Cy(t){var e=ai(t.target);if(e!==null){var r=Si(e);if(r!==null){if(e=r.tag,e===13){if(e=vy(r),e!==null){t.blockedOn=e,jy(t.priority,function(){Py(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function sl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Sd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);vd=n,r.target.dispatchEvent(n),vd=null}else return e=_o(r),e!==null&&Ch(e),t.blockedOn=r,!1;e.shift()}return!0}function Tp(t,e,r){sl(t)&&r.delete(e)}function Mb(){kd=!1,En!==null&&sl(En)&&(En=null),On!==null&&sl(On)&&(On=null),Pn!==null&&sl(Pn)&&(Pn=null),Fa.forEach(Tp),Ba.forEach(Tp)}function Fs(t,e){t.blockedOn===e&&(t.blockedOn=null,kd||(kd=!0,Bt.unstable_scheduleCallback(Bt.unstable_NormalPriority,Mb)))}function Va(t){function e(i){return Fs(i,t)}if(0<$o.length){Fs($o[0],t);for(var r=1;r<$o.length;r++){var n=$o[r];n.blockedOn===t&&(n.blockedOn=null)}}for(En!==null&&Fs(En,t),On!==null&&Fs(On,t),Pn!==null&&Fs(Pn,t),Fa.forEach(e),Ba.forEach(e),r=0;r<wn.length;r++)n=wn[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<wn.length&&(r=wn[0],r.blockedOn===null);)Cy(r),r.blockedOn===null&&wn.shift()}var ns=nn.ReactCurrentBatchConfig,El=!0;function Ub(t,e,r,n){var i=_e,s=ns.transition;ns.transition=null;try{_e=1,Ah(t,e,r,n)}finally{_e=i,ns.transition=s}}function zb(t,e,r,n){var i=_e,s=ns.transition;ns.transition=null;try{_e=4,Ah(t,e,r,n)}finally{_e=i,ns.transition=s}}function Ah(t,e,r,n){if(El){var i=Sd(t,e,r,n);if(i===null)Cc(t,e,n,Ol,r),Pp(t,n);else if(Db(i,t,e,r,n))n.stopPropagation();else if(Pp(t,n),e&4&&-1<$b.indexOf(t)){for(;i!==null;){var s=_o(i);if(s!==null&&Oy(s),s=Sd(t,e,r,n),s===null&&Cc(t,e,n,Ol,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else Cc(t,e,n,null,r)}}var Ol=null;function Sd(t,e,r,n){if(Ol=null,t=Ph(n),t=ai(t),t!==null)if(e=Si(t),e===null)t=null;else if(r=e.tag,r===13){if(t=vy(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ol=t,null}function Ay(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Pb()){case Th:return 1;case xy:return 4;case kl:case Tb:return 16;case ky:return 536870912;default:return 16}default:return 16}}var kn=null,Ih=null,al=null;function Iy(){if(al)return al;var t,e=Ih,r=e.length,n,i="value"in kn?kn.value:kn.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===i[s-n];n++);return al=i.slice(t,1<n?1-n:void 0)}function ol(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Do(){return!0}function jp(){return!1}function Zt(t){function e(r,n,i,s,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Do:jp,this.isPropagationStopped=jp,this}return Le(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Do)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Do)},persist:function(){},isPersistent:Do}),e}var Cs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rh=Zt(Cs),vo=Le({},Cs,{view:0,detail:0}),Fb=Zt(vo),bc,xc,Bs,bu=Le({},vo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Bs&&(Bs&&t.type==="mousemove"?(bc=t.screenX-Bs.screenX,xc=t.screenY-Bs.screenY):xc=bc=0,Bs=t),bc)},movementY:function(t){return"movementY"in t?t.movementY:xc}}),Cp=Zt(bu),Bb=Le({},bu,{dataTransfer:0}),Vb=Zt(Bb),Hb=Le({},vo,{relatedTarget:0}),kc=Zt(Hb),Zb=Le({},Cs,{animationName:0,elapsedTime:0,pseudoElement:0}),Kb=Zt(Zb),qb=Le({},Cs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Wb=Zt(qb),Jb=Le({},Cs,{data:0}),Ap=Zt(Jb),Gb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xb(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Qb[t])?!!e[t]:!1}function Nh(){return Xb}var e1=Le({},vo,{key:function(t){if(t.key){var e=Gb[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ol(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Yb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nh,charCode:function(t){return t.type==="keypress"?ol(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ol(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),t1=Zt(e1),r1=Le({},bu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ip=Zt(r1),n1=Le({},vo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nh}),i1=Zt(n1),s1=Le({},Cs,{propertyName:0,elapsedTime:0,pseudoElement:0}),a1=Zt(s1),o1=Le({},bu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),l1=Zt(o1),u1=[9,13,27,32],Lh=Gr&&"CompositionEvent"in window,wa=null;Gr&&"documentMode"in document&&(wa=document.documentMode);var c1=Gr&&"TextEvent"in window&&!wa,Ry=Gr&&(!Lh||wa&&8<wa&&11>=wa),Rp=String.fromCharCode(32),Np=!1;function Ny(t,e){switch(t){case"keyup":return u1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ly(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fi=!1;function d1(t,e){switch(t){case"compositionend":return Ly(e);case"keypress":return e.which!==32?null:(Np=!0,Rp);case"textInput":return t=e.data,t===Rp&&Np?null:t;default:return null}}function h1(t,e){if(Fi)return t==="compositionend"||!Lh&&Ny(t,e)?(t=Iy(),al=Ih=kn=null,Fi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ry&&e.locale!=="ko"?null:e.data;default:return null}}var f1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!f1[t.type]:e==="textarea"}function $y(t,e,r,n){fy(n),e=Pl(e,"onChange"),0<e.length&&(r=new Rh("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var ba=null,Ha=null;function p1(t){qy(t,0)}function xu(t){var e=Hi(t);if(ay(e))return t}function m1(t,e){if(t==="change")return e}var Dy=!1;if(Gr){var Sc;if(Gr){var Ec="oninput"in document;if(!Ec){var $p=document.createElement("div");$p.setAttribute("oninput","return;"),Ec=typeof $p.oninput=="function"}Sc=Ec}else Sc=!1;Dy=Sc&&(!document.documentMode||9<document.documentMode)}function Dp(){ba&&(ba.detachEvent("onpropertychange",My),Ha=ba=null)}function My(t){if(t.propertyName==="value"&&xu(Ha)){var e=[];$y(e,Ha,t,Ph(t)),yy(p1,e)}}function g1(t,e,r){t==="focusin"?(Dp(),ba=e,Ha=r,ba.attachEvent("onpropertychange",My)):t==="focusout"&&Dp()}function y1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return xu(Ha)}function v1(t,e){if(t==="click")return xu(e)}function _1(t,e){if(t==="input"||t==="change")return xu(e)}function w1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _r=typeof Object.is=="function"?Object.is:w1;function Za(t,e){if(_r(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!ad.call(e,i)||!_r(t[i],e[i]))return!1}return!0}function Mp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Up(t,e){var r=Mp(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Mp(r)}}function Uy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Uy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function zy(){for(var t=window,e=wl();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=wl(t.document)}return e}function $h(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function b1(t){var e=zy(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Uy(r.ownerDocument.documentElement,r)){if(n!==null&&$h(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=Up(r,s);var a=Up(r,n);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var x1=Gr&&"documentMode"in document&&11>=document.documentMode,Bi=null,Ed=null,xa=null,Od=!1;function zp(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Od||Bi==null||Bi!==wl(n)||(n=Bi,"selectionStart"in n&&$h(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),xa&&Za(xa,n)||(xa=n,n=Pl(Ed,"onSelect"),0<n.length&&(e=new Rh("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Bi)))}function Mo(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Vi={animationend:Mo("Animation","AnimationEnd"),animationiteration:Mo("Animation","AnimationIteration"),animationstart:Mo("Animation","AnimationStart"),transitionend:Mo("Transition","TransitionEnd")},Oc={},Fy={};Gr&&(Fy=document.createElement("div").style,"AnimationEvent"in window||(delete Vi.animationend.animation,delete Vi.animationiteration.animation,delete Vi.animationstart.animation),"TransitionEvent"in window||delete Vi.transitionend.transition);function ku(t){if(Oc[t])return Oc[t];if(!Vi[t])return t;var e=Vi[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Fy)return Oc[t]=e[r];return t}var By=ku("animationend"),Vy=ku("animationiteration"),Hy=ku("animationstart"),Zy=ku("transitionend"),Ky=new Map,Fp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bn(t,e){Ky.set(t,e),ki(e,[t])}for(var Pc=0;Pc<Fp.length;Pc++){var Tc=Fp[Pc],k1=Tc.toLowerCase(),S1=Tc[0].toUpperCase()+Tc.slice(1);Bn(k1,"on"+S1)}Bn(By,"onAnimationEnd");Bn(Vy,"onAnimationIteration");Bn(Hy,"onAnimationStart");Bn("dblclick","onDoubleClick");Bn("focusin","onFocus");Bn("focusout","onBlur");Bn(Zy,"onTransitionEnd");os("onMouseEnter",["mouseout","mouseover"]);os("onMouseLeave",["mouseout","mouseover"]);os("onPointerEnter",["pointerout","pointerover"]);os("onPointerLeave",["pointerout","pointerover"]);ki("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ki("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ki("onBeforeInput",["compositionend","keypress","textInput","paste"]);ki("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ki("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ki("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),E1=new Set("cancel close invalid load scroll toggle".split(" ").concat(fa));function Bp(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,kb(n,e,void 0,t),t.currentTarget=null}function qy(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Bp(i,o,u),s=l}else for(a=0;a<n.length;a++){if(o=n[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Bp(i,o,u),s=l}}}if(xl)throw t=bd,xl=!1,bd=null,t}function Pe(t,e){var r=e[Ad];r===void 0&&(r=e[Ad]=new Set);var n=t+"__bubble";r.has(n)||(Wy(e,t,2,!1),r.add(n))}function jc(t,e,r){var n=0;e&&(n|=4),Wy(r,t,n,e)}var Uo="_reactListening"+Math.random().toString(36).slice(2);function Ka(t){if(!t[Uo]){t[Uo]=!0,ty.forEach(function(r){r!=="selectionchange"&&(E1.has(r)||jc(r,!1,t),jc(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Uo]||(e[Uo]=!0,jc("selectionchange",!1,e))}}function Wy(t,e,r,n){switch(Ay(e)){case 1:var i=Ub;break;case 4:i=zb;break;default:i=Ah}r=i.bind(null,e,r,t),i=void 0,!wd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Cc(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=ai(o),a===null)return;if(l=a.tag,l===5||l===6){n=s=a;continue e}o=o.parentNode}}n=n.return}yy(function(){var u=s,c=Ph(r),d=[];e:{var h=Ky.get(t);if(h!==void 0){var b=Rh,v=t;switch(t){case"keypress":if(ol(r)===0)break e;case"keydown":case"keyup":b=t1;break;case"focusin":v="focus",b=kc;break;case"focusout":v="blur",b=kc;break;case"beforeblur":case"afterblur":b=kc;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=Cp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=Vb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=i1;break;case By:case Vy:case Hy:b=Kb;break;case Zy:b=a1;break;case"scroll":b=Fb;break;case"wheel":b=l1;break;case"copy":case"cut":case"paste":b=Wb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=Ip}var O=(e&4)!==0,k=!O&&t==="scroll",p=O?h!==null?h+"Capture":null:h;O=[];for(var m=u,f;m!==null;){f=m;var S=f.stateNode;if(f.tag===5&&S!==null&&(f=S,p!==null&&(S=za(m,p),S!=null&&O.push(qa(m,S,f)))),k)break;m=m.return}0<O.length&&(h=new b(h,v,null,r,c),d.push({event:h,listeners:O}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",b=t==="mouseout"||t==="pointerout",h&&r!==vd&&(v=r.relatedTarget||r.fromElement)&&(ai(v)||v[Yr]))break e;if((b||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,b?(v=r.relatedTarget||r.toElement,b=u,v=v?ai(v):null,v!==null&&(k=Si(v),v!==k||v.tag!==5&&v.tag!==6)&&(v=null)):(b=null,v=u),b!==v)){if(O=Cp,S="onMouseLeave",p="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(O=Ip,S="onPointerLeave",p="onPointerEnter",m="pointer"),k=b==null?h:Hi(b),f=v==null?h:Hi(v),h=new O(S,m+"leave",b,r,c),h.target=k,h.relatedTarget=f,S=null,ai(c)===u&&(O=new O(p,m+"enter",v,r,c),O.target=f,O.relatedTarget=k,S=O),k=S,b&&v)t:{for(O=b,p=v,m=0,f=O;f;f=Ti(f))m++;for(f=0,S=p;S;S=Ti(S))f++;for(;0<m-f;)O=Ti(O),m--;for(;0<f-m;)p=Ti(p),f--;for(;m--;){if(O===p||p!==null&&O===p.alternate)break t;O=Ti(O),p=Ti(p)}O=null}else O=null;b!==null&&Vp(d,h,b,O,!1),v!==null&&k!==null&&Vp(d,k,v,O,!0)}}e:{if(h=u?Hi(u):window,b=h.nodeName&&h.nodeName.toLowerCase(),b==="select"||b==="input"&&h.type==="file")var A=m1;else if(Lp(h))if(Dy)A=_1;else{A=y1;var x=g1}else(b=h.nodeName)&&b.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(A=v1);if(A&&(A=A(t,u))){$y(d,A,r,c);break e}x&&x(t,h,u),t==="focusout"&&(x=h._wrapperState)&&x.controlled&&h.type==="number"&&fd(h,"number",h.value)}switch(x=u?Hi(u):window,t){case"focusin":(Lp(x)||x.contentEditable==="true")&&(Bi=x,Ed=u,xa=null);break;case"focusout":xa=Ed=Bi=null;break;case"mousedown":Od=!0;break;case"contextmenu":case"mouseup":case"dragend":Od=!1,zp(d,r,c);break;case"selectionchange":if(x1)break;case"keydown":case"keyup":zp(d,r,c)}var j;if(Lh)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Fi?Ny(t,r)&&(_="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(_="onCompositionStart");_&&(Ry&&r.locale!=="ko"&&(Fi||_!=="onCompositionStart"?_==="onCompositionEnd"&&Fi&&(j=Iy()):(kn=c,Ih="value"in kn?kn.value:kn.textContent,Fi=!0)),x=Pl(u,_),0<x.length&&(_=new Ap(_,t,null,r,c),d.push({event:_,listeners:x}),j?_.data=j:(j=Ly(r),j!==null&&(_.data=j)))),(j=c1?d1(t,r):h1(t,r))&&(u=Pl(u,"onBeforeInput"),0<u.length&&(c=new Ap("onBeforeInput","beforeinput",null,r,c),d.push({event:c,listeners:u}),c.data=j))}qy(d,e)})}function qa(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Pl(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=za(t,r),s!=null&&n.unshift(qa(t,s,i)),s=za(t,e),s!=null&&n.push(qa(t,s,i))),t=t.return}return n}function Ti(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Vp(t,e,r,n,i){for(var s=e._reactName,a=[];r!==null&&r!==n;){var o=r,l=o.alternate,u=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&u!==null&&(o=u,i?(l=za(r,s),l!=null&&a.unshift(qa(r,l,o))):i||(l=za(r,s),l!=null&&a.push(qa(r,l,o)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var O1=/\r\n?/g,P1=/\u0000|\uFFFD/g;function Hp(t){return(typeof t=="string"?t:""+t).replace(O1,`
`).replace(P1,"")}function zo(t,e,r){if(e=Hp(e),Hp(t)!==e&&r)throw Error(z(425))}function Tl(){}var Pd=null,Td=null;function jd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Cd=typeof setTimeout=="function"?setTimeout:void 0,T1=typeof clearTimeout=="function"?clearTimeout:void 0,Zp=typeof Promise=="function"?Promise:void 0,j1=typeof queueMicrotask=="function"?queueMicrotask:typeof Zp<"u"?function(t){return Zp.resolve(null).then(t).catch(C1)}:Cd;function C1(t){setTimeout(function(){throw t})}function Ac(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Va(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Va(e)}function Tn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Kp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var As=Math.random().toString(36).slice(2),Tr="__reactFiber$"+As,Wa="__reactProps$"+As,Yr="__reactContainer$"+As,Ad="__reactEvents$"+As,A1="__reactListeners$"+As,I1="__reactHandles$"+As;function ai(t){var e=t[Tr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Yr]||r[Tr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Kp(t);t!==null;){if(r=t[Tr])return r;t=Kp(t)}return e}t=r,r=t.parentNode}return null}function _o(t){return t=t[Tr]||t[Yr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Hi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function Su(t){return t[Wa]||null}var Id=[],Zi=-1;function Vn(t){return{current:t}}function Te(t){0>Zi||(t.current=Id[Zi],Id[Zi]=null,Zi--)}function Ee(t,e){Zi++,Id[Zi]=t.current,t.current=e}var Dn={},_t=Vn(Dn),It=Vn(!1),mi=Dn;function ls(t,e){var r=t.type.contextTypes;if(!r)return Dn;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Rt(t){return t=t.childContextTypes,t!=null}function jl(){Te(It),Te(_t)}function qp(t,e,r){if(_t.current!==Dn)throw Error(z(168));Ee(_t,e),Ee(It,r)}function Jy(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(z(108,gb(t)||"Unknown",i));return Le({},r,n)}function Cl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Dn,mi=_t.current,Ee(_t,t),Ee(It,It.current),!0}function Wp(t,e,r){var n=t.stateNode;if(!n)throw Error(z(169));r?(t=Jy(t,e,mi),n.__reactInternalMemoizedMergedChildContext=t,Te(It),Te(_t),Ee(_t,t)):Te(It),Ee(It,r)}var Vr=null,Eu=!1,Ic=!1;function Gy(t){Vr===null?Vr=[t]:Vr.push(t)}function R1(t){Eu=!0,Gy(t)}function Hn(){if(!Ic&&Vr!==null){Ic=!0;var t=0,e=_e;try{var r=Vr;for(_e=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Vr=null,Eu=!1}catch(i){throw Vr!==null&&(Vr=Vr.slice(t+1)),by(Th,Hn),i}finally{_e=e,Ic=!1}}return null}var Ki=[],qi=0,Al=null,Il=0,Qt=[],Xt=0,gi=null,Kr=1,qr="";function Yn(t,e){Ki[qi++]=Il,Ki[qi++]=Al,Al=t,Il=e}function Yy(t,e,r){Qt[Xt++]=Kr,Qt[Xt++]=qr,Qt[Xt++]=gi,gi=t;var n=Kr;t=qr;var i=32-yr(n)-1;n&=~(1<<i),r+=1;var s=32-yr(e)+i;if(30<s){var a=i-i%5;s=(n&(1<<a)-1).toString(32),n>>=a,i-=a,Kr=1<<32-yr(e)+i|r<<i|n,qr=s+t}else Kr=1<<s|r<<i|n,qr=t}function Dh(t){t.return!==null&&(Yn(t,1),Yy(t,1,0))}function Mh(t){for(;t===Al;)Al=Ki[--qi],Ki[qi]=null,Il=Ki[--qi],Ki[qi]=null;for(;t===gi;)gi=Qt[--Xt],Qt[Xt]=null,qr=Qt[--Xt],Qt[Xt]=null,Kr=Qt[--Xt],Qt[Xt]=null}var zt=null,Ut=null,Ae=!1,gr=null;function Qy(t,e){var r=er(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Jp(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,zt=t,Ut=Tn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,zt=t,Ut=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=gi!==null?{id:Kr,overflow:qr}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=er(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,zt=t,Ut=null,!0):!1;default:return!1}}function Rd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Nd(t){if(Ae){var e=Ut;if(e){var r=e;if(!Jp(t,e)){if(Rd(t))throw Error(z(418));e=Tn(r.nextSibling);var n=zt;e&&Jp(t,e)?Qy(n,r):(t.flags=t.flags&-4097|2,Ae=!1,zt=t)}}else{if(Rd(t))throw Error(z(418));t.flags=t.flags&-4097|2,Ae=!1,zt=t}}}function Gp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;zt=t}function Fo(t){if(t!==zt)return!1;if(!Ae)return Gp(t),Ae=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!jd(t.type,t.memoizedProps)),e&&(e=Ut)){if(Rd(t))throw Xy(),Error(z(418));for(;e;)Qy(t,e),e=Tn(e.nextSibling)}if(Gp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Ut=Tn(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Ut=null}}else Ut=zt?Tn(t.stateNode.nextSibling):null;return!0}function Xy(){for(var t=Ut;t;)t=Tn(t.nextSibling)}function us(){Ut=zt=null,Ae=!1}function Uh(t){gr===null?gr=[t]:gr.push(t)}var N1=nn.ReactCurrentBatchConfig;function fr(t,e){if(t&&t.defaultProps){e=Le({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}var Rl=Vn(null),Nl=null,Wi=null,zh=null;function Fh(){zh=Wi=Nl=null}function Bh(t){var e=Rl.current;Te(Rl),t._currentValue=e}function Ld(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function is(t,e){Nl=t,zh=Wi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(At=!0),t.firstContext=null)}function sr(t){var e=t._currentValue;if(zh!==t)if(t={context:t,memoizedValue:e,next:null},Wi===null){if(Nl===null)throw Error(z(308));Wi=t,Nl.dependencies={lanes:0,firstContext:t}}else Wi=Wi.next=t;return e}var oi=null;function Vh(t){oi===null?oi=[t]:oi.push(t)}function ev(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,Vh(e)):(r.next=i.next,i.next=r),e.interleaved=r,Qr(t,n)}function Qr(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var yn=!1;function Hh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Wr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function jn(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,pe&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Qr(t,r)}return i=n.interleaved,i===null?(e.next=e,Vh(n)):(e.next=i.next,i.next=e),n.interleaved=e,Qr(t,r)}function ll(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,jh(t,r)}}function Yp(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=a:s=s.next=a,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Ll(t,e,r,n){var i=t.updateQueue;yn=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?s=u:a.next=u,a=l;var c=t.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==a&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;a=0,c=u=l=null,o=s;do{var h=o.lane,b=o.eventTime;if((n&h)===h){c!==null&&(c=c.next={eventTime:b,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=t,O=o;switch(h=e,b=r,O.tag){case 1:if(v=O.payload,typeof v=="function"){d=v.call(b,d,h);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=O.payload,h=typeof v=="function"?v.call(b,d,h):v,h==null)break e;d=Le({},d,h);break e;case 2:yn=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[o]:h.push(o))}else b={eventTime:b,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=b,l=d):c=c.next=b,a|=h;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;h=o,o=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);vi|=a,t.lanes=a,t.memoizedState=d}}function Qp(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(z(191,i));i.call(n)}}}var rv=new ey.Component().refs;function $d(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Le({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Ou={isMounted:function(t){return(t=t._reactInternals)?Si(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=kt(),i=An(t),s=Wr(n,i);s.payload=e,r!=null&&(s.callback=r),e=jn(t,s,i),e!==null&&(vr(e,t,i,n),ll(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=kt(),i=An(t),s=Wr(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=jn(t,s,i),e!==null&&(vr(e,t,i,n),ll(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=kt(),n=An(t),i=Wr(r,n);i.tag=2,e!=null&&(i.callback=e),e=jn(t,i,n),e!==null&&(vr(e,t,n,r),ll(e,t,n))}};function Xp(t,e,r,n,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,a):e.prototype&&e.prototype.isPureReactComponent?!Za(r,n)||!Za(i,s):!0}function nv(t,e,r){var n=!1,i=Dn,s=e.contextType;return typeof s=="object"&&s!==null?s=sr(s):(i=Rt(e)?mi:_t.current,n=e.contextTypes,s=(n=n!=null)?ls(t,i):Dn),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ou,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function em(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Ou.enqueueReplaceState(e,e.state,null)}function Dd(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs=rv,Hh(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=sr(s):(s=Rt(e)?mi:_t.current,i.context=ls(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&($d(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ou.enqueueReplaceState(i,i.state,null),Ll(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Vs(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(z(309));var n=r.stateNode}if(!n)throw Error(z(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;o===rv&&(o=i.refs={}),a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(z(284));if(!r._owner)throw Error(z(290,t))}return t}function Bo(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function tm(t){var e=t._init;return e(t._payload)}function iv(t){function e(p,m){if(t){var f=p.deletions;f===null?(p.deletions=[m],p.flags|=16):f.push(m)}}function r(p,m){if(!t)return null;for(;m!==null;)e(p,m),m=m.sibling;return null}function n(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function i(p,m){return p=In(p,m),p.index=0,p.sibling=null,p}function s(p,m,f){return p.index=f,t?(f=p.alternate,f!==null?(f=f.index,f<m?(p.flags|=2,m):f):(p.flags|=2,m)):(p.flags|=1048576,m)}function a(p){return t&&p.alternate===null&&(p.flags|=2),p}function o(p,m,f,S){return m===null||m.tag!==6?(m=Uc(f,p.mode,S),m.return=p,m):(m=i(m,f),m.return=p,m)}function l(p,m,f,S){var A=f.type;return A===zi?c(p,m,f.props.children,S,f.key):m!==null&&(m.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===gn&&tm(A)===m.type)?(S=i(m,f.props),S.ref=Vs(p,m,f),S.return=p,S):(S=pl(f.type,f.key,f.props,null,p.mode,S),S.ref=Vs(p,m,f),S.return=p,S)}function u(p,m,f,S){return m===null||m.tag!==4||m.stateNode.containerInfo!==f.containerInfo||m.stateNode.implementation!==f.implementation?(m=zc(f,p.mode,S),m.return=p,m):(m=i(m,f.children||[]),m.return=p,m)}function c(p,m,f,S,A){return m===null||m.tag!==7?(m=hi(f,p.mode,S,A),m.return=p,m):(m=i(m,f),m.return=p,m)}function d(p,m,f){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Uc(""+m,p.mode,f),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ao:return f=pl(m.type,m.key,m.props,null,p.mode,f),f.ref=Vs(p,null,m),f.return=p,f;case Ui:return m=zc(m,p.mode,f),m.return=p,m;case gn:var S=m._init;return d(p,S(m._payload),f)}if(da(m)||Ms(m))return m=hi(m,p.mode,f,null),m.return=p,m;Bo(p,m)}return null}function h(p,m,f,S){var A=m!==null?m.key:null;if(typeof f=="string"&&f!==""||typeof f=="number")return A!==null?null:o(p,m,""+f,S);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Ao:return f.key===A?l(p,m,f,S):null;case Ui:return f.key===A?u(p,m,f,S):null;case gn:return A=f._init,h(p,m,A(f._payload),S)}if(da(f)||Ms(f))return A!==null?null:c(p,m,f,S,null);Bo(p,f)}return null}function b(p,m,f,S,A){if(typeof S=="string"&&S!==""||typeof S=="number")return p=p.get(f)||null,o(m,p,""+S,A);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ao:return p=p.get(S.key===null?f:S.key)||null,l(m,p,S,A);case Ui:return p=p.get(S.key===null?f:S.key)||null,u(m,p,S,A);case gn:var x=S._init;return b(p,m,f,x(S._payload),A)}if(da(S)||Ms(S))return p=p.get(f)||null,c(m,p,S,A,null);Bo(m,S)}return null}function v(p,m,f,S){for(var A=null,x=null,j=m,_=m=0,P=null;j!==null&&_<f.length;_++){j.index>_?(P=j,j=null):P=j.sibling;var w=h(p,j,f[_],S);if(w===null){j===null&&(j=P);break}t&&j&&w.alternate===null&&e(p,j),m=s(w,m,_),x===null?A=w:x.sibling=w,x=w,j=P}if(_===f.length)return r(p,j),Ae&&Yn(p,_),A;if(j===null){for(;_<f.length;_++)j=d(p,f[_],S),j!==null&&(m=s(j,m,_),x===null?A=j:x.sibling=j,x=j);return Ae&&Yn(p,_),A}for(j=n(p,j);_<f.length;_++)P=b(j,p,_,f[_],S),P!==null&&(t&&P.alternate!==null&&j.delete(P.key===null?_:P.key),m=s(P,m,_),x===null?A=P:x.sibling=P,x=P);return t&&j.forEach(function(R){return e(p,R)}),Ae&&Yn(p,_),A}function O(p,m,f,S){var A=Ms(f);if(typeof A!="function")throw Error(z(150));if(f=A.call(f),f==null)throw Error(z(151));for(var x=A=null,j=m,_=m=0,P=null,w=f.next();j!==null&&!w.done;_++,w=f.next()){j.index>_?(P=j,j=null):P=j.sibling;var R=h(p,j,w.value,S);if(R===null){j===null&&(j=P);break}t&&j&&R.alternate===null&&e(p,j),m=s(R,m,_),x===null?A=R:x.sibling=R,x=R,j=P}if(w.done)return r(p,j),Ae&&Yn(p,_),A;if(j===null){for(;!w.done;_++,w=f.next())w=d(p,w.value,S),w!==null&&(m=s(w,m,_),x===null?A=w:x.sibling=w,x=w);return Ae&&Yn(p,_),A}for(j=n(p,j);!w.done;_++,w=f.next())w=b(j,p,_,w.value,S),w!==null&&(t&&w.alternate!==null&&j.delete(w.key===null?_:w.key),m=s(w,m,_),x===null?A=w:x.sibling=w,x=w);return t&&j.forEach(function(L){return e(p,L)}),Ae&&Yn(p,_),A}function k(p,m,f,S){if(typeof f=="object"&&f!==null&&f.type===zi&&f.key===null&&(f=f.props.children),typeof f=="object"&&f!==null){switch(f.$$typeof){case Ao:e:{for(var A=f.key,x=m;x!==null;){if(x.key===A){if(A=f.type,A===zi){if(x.tag===7){r(p,x.sibling),m=i(x,f.props.children),m.return=p,p=m;break e}}else if(x.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===gn&&tm(A)===x.type){r(p,x.sibling),m=i(x,f.props),m.ref=Vs(p,x,f),m.return=p,p=m;break e}r(p,x);break}else e(p,x);x=x.sibling}f.type===zi?(m=hi(f.props.children,p.mode,S,f.key),m.return=p,p=m):(S=pl(f.type,f.key,f.props,null,p.mode,S),S.ref=Vs(p,m,f),S.return=p,p=S)}return a(p);case Ui:e:{for(x=f.key;m!==null;){if(m.key===x)if(m.tag===4&&m.stateNode.containerInfo===f.containerInfo&&m.stateNode.implementation===f.implementation){r(p,m.sibling),m=i(m,f.children||[]),m.return=p,p=m;break e}else{r(p,m);break}else e(p,m);m=m.sibling}m=zc(f,p.mode,S),m.return=p,p=m}return a(p);case gn:return x=f._init,k(p,m,x(f._payload),S)}if(da(f))return v(p,m,f,S);if(Ms(f))return O(p,m,f,S);Bo(p,f)}return typeof f=="string"&&f!==""||typeof f=="number"?(f=""+f,m!==null&&m.tag===6?(r(p,m.sibling),m=i(m,f),m.return=p,p=m):(r(p,m),m=Uc(f,p.mode,S),m.return=p,p=m),a(p)):r(p,m)}return k}var cs=iv(!0),sv=iv(!1),wo={},Ir=Vn(wo),Ja=Vn(wo),Ga=Vn(wo);function li(t){if(t===wo)throw Error(z(174));return t}function Zh(t,e){switch(Ee(Ga,e),Ee(Ja,t),Ee(Ir,wo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:md(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=md(e,t)}Te(Ir),Ee(Ir,e)}function ds(){Te(Ir),Te(Ja),Te(Ga)}function av(t){li(Ga.current);var e=li(Ir.current),r=md(e,t.type);e!==r&&(Ee(Ja,t),Ee(Ir,r))}function Kh(t){Ja.current===t&&(Te(Ir),Te(Ja))}var Re=Vn(0);function $l(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Rc=[];function qh(){for(var t=0;t<Rc.length;t++)Rc[t]._workInProgressVersionPrimary=null;Rc.length=0}var ul=nn.ReactCurrentDispatcher,Nc=nn.ReactCurrentBatchConfig,yi=0,Ne=null,qe=null,Je=null,Dl=!1,ka=!1,Ya=0,L1=0;function dt(){throw Error(z(321))}function Wh(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!_r(t[r],e[r]))return!1;return!0}function Jh(t,e,r,n,i,s){if(yi=s,Ne=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ul.current=t===null||t.memoizedState===null?U1:z1,t=r(n,i),ka){s=0;do{if(ka=!1,Ya=0,25<=s)throw Error(z(301));s+=1,Je=qe=null,e.updateQueue=null,ul.current=F1,t=r(n,i)}while(ka)}if(ul.current=Ml,e=qe!==null&&qe.next!==null,yi=0,Je=qe=Ne=null,Dl=!1,e)throw Error(z(300));return t}function Gh(){var t=Ya!==0;return Ya=0,t}function Er(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?Ne.memoizedState=Je=t:Je=Je.next=t,Je}function ar(){if(qe===null){var t=Ne.alternate;t=t!==null?t.memoizedState:null}else t=qe.next;var e=Je===null?Ne.memoizedState:Je.next;if(e!==null)Je=e,qe=t;else{if(t===null)throw Error(z(310));qe=t,t={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},Je===null?Ne.memoizedState=Je=t:Je=Je.next=t}return Je}function Qa(t,e){return typeof e=="function"?e(t):e}function Lc(t){var e=ar(),r=e.queue;if(r===null)throw Error(z(311));r.lastRenderedReducer=t;var n=qe,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var o=a=null,l=null,u=s;do{var c=u.lane;if((yi&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=d,a=n):l=l.next=d,Ne.lanes|=c,vi|=c}u=u.next}while(u!==null&&u!==s);l===null?a=n:l.next=o,_r(n,e.memoizedState)||(At=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,Ne.lanes|=s,vi|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function $c(t){var e=ar(),r=e.queue;if(r===null)throw Error(z(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);_r(s,e.memoizedState)||(At=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function ov(){}function lv(t,e){var r=Ne,n=ar(),i=e(),s=!_r(n.memoizedState,i);if(s&&(n.memoizedState=i,At=!0),n=n.queue,Yh(dv.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||Je!==null&&Je.memoizedState.tag&1){if(r.flags|=2048,Xa(9,cv.bind(null,r,n,i,e),void 0,null),Ge===null)throw Error(z(349));yi&30||uv(r,e,i)}return i}function uv(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function cv(t,e,r,n){e.value=r,e.getSnapshot=n,hv(e)&&fv(t)}function dv(t,e,r){return r(function(){hv(e)&&fv(t)})}function hv(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!_r(t,r)}catch{return!0}}function fv(t){var e=Qr(t,1);e!==null&&vr(e,t,1,-1)}function rm(t){var e=Er();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qa,lastRenderedState:t},e.queue=t,t=t.dispatch=M1.bind(null,Ne,t),[e.memoizedState,t]}function Xa(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function pv(){return ar().memoizedState}function cl(t,e,r,n){var i=Er();Ne.flags|=t,i.memoizedState=Xa(1|e,r,void 0,n===void 0?null:n)}function Pu(t,e,r,n){var i=ar();n=n===void 0?null:n;var s=void 0;if(qe!==null){var a=qe.memoizedState;if(s=a.destroy,n!==null&&Wh(n,a.deps)){i.memoizedState=Xa(e,r,s,n);return}}Ne.flags|=t,i.memoizedState=Xa(1|e,r,s,n)}function nm(t,e){return cl(8390656,8,t,e)}function Yh(t,e){return Pu(2048,8,t,e)}function mv(t,e){return Pu(4,2,t,e)}function gv(t,e){return Pu(4,4,t,e)}function yv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function vv(t,e,r){return r=r!=null?r.concat([t]):null,Pu(4,4,yv.bind(null,e,t),r)}function Qh(){}function _v(t,e){var r=ar();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Wh(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function wv(t,e){var r=ar();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Wh(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function bv(t,e,r){return yi&21?(_r(r,e)||(r=Sy(),Ne.lanes|=r,vi|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,At=!0),t.memoizedState=r)}function $1(t,e){var r=_e;_e=r!==0&&4>r?r:4,t(!0);var n=Nc.transition;Nc.transition={};try{t(!1),e()}finally{_e=r,Nc.transition=n}}function xv(){return ar().memoizedState}function D1(t,e,r){var n=An(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},kv(t))Sv(e,r);else if(r=ev(t,e,r,n),r!==null){var i=kt();vr(r,t,n,i),Ev(r,e,n)}}function M1(t,e,r){var n=An(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(kv(t))Sv(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,r);if(i.hasEagerState=!0,i.eagerState=o,_r(o,a)){var l=e.interleaved;l===null?(i.next=i,Vh(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=ev(t,e,i,n),r!==null&&(i=kt(),vr(r,t,n,i),Ev(r,e,n))}}function kv(t){var e=t.alternate;return t===Ne||e!==null&&e===Ne}function Sv(t,e){ka=Dl=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Ev(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,jh(t,r)}}var Ml={readContext:sr,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useInsertionEffect:dt,useLayoutEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useMutableSource:dt,useSyncExternalStore:dt,useId:dt,unstable_isNewReconciler:!1},U1={readContext:sr,useCallback:function(t,e){return Er().memoizedState=[t,e===void 0?null:e],t},useContext:sr,useEffect:nm,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,cl(4194308,4,yv.bind(null,e,t),r)},useLayoutEffect:function(t,e){return cl(4194308,4,t,e)},useInsertionEffect:function(t,e){return cl(4,2,t,e)},useMemo:function(t,e){var r=Er();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Er();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=D1.bind(null,Ne,t),[n.memoizedState,t]},useRef:function(t){var e=Er();return t={current:t},e.memoizedState=t},useState:rm,useDebugValue:Qh,useDeferredValue:function(t){return Er().memoizedState=t},useTransition:function(){var t=rm(!1),e=t[0];return t=$1.bind(null,t[1]),Er().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Ne,i=Er();if(Ae){if(r===void 0)throw Error(z(407));r=r()}else{if(r=e(),Ge===null)throw Error(z(349));yi&30||uv(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,nm(dv.bind(null,n,s,t),[t]),n.flags|=2048,Xa(9,cv.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=Er(),e=Ge.identifierPrefix;if(Ae){var r=qr,n=Kr;r=(n&~(1<<32-yr(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Ya++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=L1++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},z1={readContext:sr,useCallback:_v,useContext:sr,useEffect:Yh,useImperativeHandle:vv,useInsertionEffect:mv,useLayoutEffect:gv,useMemo:wv,useReducer:Lc,useRef:pv,useState:function(){return Lc(Qa)},useDebugValue:Qh,useDeferredValue:function(t){var e=ar();return bv(e,qe.memoizedState,t)},useTransition:function(){var t=Lc(Qa)[0],e=ar().memoizedState;return[t,e]},useMutableSource:ov,useSyncExternalStore:lv,useId:xv,unstable_isNewReconciler:!1},F1={readContext:sr,useCallback:_v,useContext:sr,useEffect:Yh,useImperativeHandle:vv,useInsertionEffect:mv,useLayoutEffect:gv,useMemo:wv,useReducer:$c,useRef:pv,useState:function(){return $c(Qa)},useDebugValue:Qh,useDeferredValue:function(t){var e=ar();return qe===null?e.memoizedState=t:bv(e,qe.memoizedState,t)},useTransition:function(){var t=$c(Qa)[0],e=ar().memoizedState;return[t,e]},useMutableSource:ov,useSyncExternalStore:lv,useId:xv,unstable_isNewReconciler:!1};function hs(t,e){try{var r="",n=e;do r+=mb(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Dc(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Md(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var B1=typeof WeakMap=="function"?WeakMap:Map;function Ov(t,e,r){r=Wr(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){zl||(zl=!0,Wd=n),Md(t,e)},r}function Pv(t,e,r){r=Wr(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){Md(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){Md(t,e),typeof n!="function"&&(Cn===null?Cn=new Set([this]):Cn.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function im(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new B1;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=rx.bind(null,t,e,r),e.then(t,t))}function sm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function am(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Wr(-1,1),e.tag=2,jn(r,e,1))),r.lanes|=1),t)}var V1=nn.ReactCurrentOwner,At=!1;function xt(t,e,r,n){e.child=t===null?sv(e,null,r,n):cs(e,t.child,r,n)}function om(t,e,r,n,i){r=r.render;var s=e.ref;return is(e,i),n=Jh(t,e,r,n,s,i),r=Gh(),t!==null&&!At?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Xr(t,e,i)):(Ae&&r&&Dh(e),e.flags|=1,xt(t,e,n,i),e.child)}function lm(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!of(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,Tv(t,e,s,n,i)):(t=pl(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(r=r.compare,r=r!==null?r:Za,r(a,n)&&t.ref===e.ref)return Xr(t,e,i)}return e.flags|=1,t=In(s,n),t.ref=e.ref,t.return=e,e.child=t}function Tv(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(Za(s,n)&&t.ref===e.ref)if(At=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(At=!0);else return e.lanes=t.lanes,Xr(t,e,i)}return Ud(t,e,r,n,i)}function jv(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(Gi,Dt),Dt|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ee(Gi,Dt),Dt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Ee(Gi,Dt),Dt|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,Ee(Gi,Dt),Dt|=n;return xt(t,e,i,r),e.child}function Cv(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Ud(t,e,r,n,i){var s=Rt(r)?mi:_t.current;return s=ls(e,s),is(e,i),r=Jh(t,e,r,n,s,i),n=Gh(),t!==null&&!At?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Xr(t,e,i)):(Ae&&n&&Dh(e),e.flags|=1,xt(t,e,r,i),e.child)}function um(t,e,r,n,i){if(Rt(r)){var s=!0;Cl(e)}else s=!1;if(is(e,i),e.stateNode===null)dl(t,e),nv(e,r,n),Dd(e,r,n,i),n=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=sr(u):(u=Rt(r)?mi:_t.current,u=ls(e,u));var c=r.getDerivedStateFromProps,d=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||l!==u)&&em(e,a,n,u),yn=!1;var h=e.memoizedState;a.state=h,Ll(e,n,a,i),l=e.memoizedState,o!==n||h!==l||It.current||yn?(typeof c=="function"&&($d(e,r,c,n),l=e.memoizedState),(o=yn||Xp(e,r,o,n,h,l,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),a.props=n,a.state=l,a.context=u,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,tv(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:fr(e.type,o),a.props=u,d=e.pendingProps,h=a.context,l=r.contextType,typeof l=="object"&&l!==null?l=sr(l):(l=Rt(r)?mi:_t.current,l=ls(e,l));var b=r.getDerivedStateFromProps;(c=typeof b=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||h!==l)&&em(e,a,n,l),yn=!1,h=e.memoizedState,a.state=h,Ll(e,n,a,i);var v=e.memoizedState;o!==d||h!==v||It.current||yn?(typeof b=="function"&&($d(e,r,b,n),v=e.memoizedState),(u=yn||Xp(e,r,u,n,h,v,l)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,v,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,v,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),a.props=n,a.state=v,a.context=l,n=u):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return zd(t,e,r,n,s,i)}function zd(t,e,r,n,i,s){Cv(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return i&&Wp(e,r,!1),Xr(t,e,s);n=e.stateNode,V1.current=e;var o=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=cs(e,t.child,null,s),e.child=cs(e,null,o,s)):xt(t,e,o,s),e.memoizedState=n.state,i&&Wp(e,r,!0),e.child}function Av(t){var e=t.stateNode;e.pendingContext?qp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&qp(t,e.context,!1),Zh(t,e.containerInfo)}function cm(t,e,r,n,i){return us(),Uh(i),e.flags|=256,xt(t,e,r,n),e.child}var Fd={dehydrated:null,treeContext:null,retryLane:0};function Bd(t){return{baseLanes:t,cachePool:null,transitions:null}}function Iv(t,e,r){var n=e.pendingProps,i=Re.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ee(Re,i&1),t===null)return Nd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,s?(n=e.mode,s=e.child,a={mode:"hidden",children:a},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Cu(a,n,0,null),t=hi(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Bd(r),e.memoizedState=Fd,t):Xh(e,a));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return H1(t,e,a,n,o,i,r);if(s){s=n.fallback,a=e.mode,i=t.child,o=i.sibling;var l={mode:"hidden",children:n.children};return!(a&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=In(i,l),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=In(o,s):(s=hi(s,a,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,a=t.child.memoizedState,a=a===null?Bd(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~r,e.memoizedState=Fd,n}return s=t.child,t=s.sibling,n=In(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Xh(t,e){return e=Cu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Vo(t,e,r,n){return n!==null&&Uh(n),cs(e,t.child,null,r),t=Xh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function H1(t,e,r,n,i,s,a){if(r)return e.flags&256?(e.flags&=-257,n=Dc(Error(z(422))),Vo(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=Cu({mode:"visible",children:n.children},i,0,null),s=hi(s,i,a,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&cs(e,t.child,null,a),e.child.memoizedState=Bd(a),e.memoizedState=Fd,s);if(!(e.mode&1))return Vo(t,e,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,s=Error(z(419)),n=Dc(s,n,void 0),Vo(t,e,a,n)}if(o=(a&t.childLanes)!==0,At||o){if(n=Ge,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Qr(t,i),vr(n,t,i,-1))}return af(),n=Dc(Error(z(421))),Vo(t,e,a,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=nx.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ut=Tn(i.nextSibling),zt=e,Ae=!0,gr=null,t!==null&&(Qt[Xt++]=Kr,Qt[Xt++]=qr,Qt[Xt++]=gi,Kr=t.id,qr=t.overflow,gi=e),e=Xh(e,n.children),e.flags|=4096,e)}function dm(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Ld(t.return,e,r)}function Mc(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function Rv(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(xt(t,e,n.children,r),n=Re.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&dm(t,r,e);else if(t.tag===19)dm(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ee(Re,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&$l(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),Mc(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&$l(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}Mc(e,!0,r,null,s);break;case"together":Mc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function dl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xr(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),vi|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,r=In(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=In(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Z1(t,e,r){switch(e.tag){case 3:Av(e),us();break;case 5:av(e);break;case 1:Rt(e.type)&&Cl(e);break;case 4:Zh(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Ee(Rl,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Ee(Re,Re.current&1),e.flags|=128,null):r&e.child.childLanes?Iv(t,e,r):(Ee(Re,Re.current&1),t=Xr(t,e,r),t!==null?t.sibling:null);Ee(Re,Re.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return Rv(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ee(Re,Re.current),n)break;return null;case 22:case 23:return e.lanes=0,jv(t,e,r)}return Xr(t,e,r)}var Nv,Vd,Lv,$v;Nv=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Vd=function(){};Lv=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,li(Ir.current);var s=null;switch(r){case"input":i=dd(t,i),n=dd(t,n),s=[];break;case"select":i=Le({},i,{value:void 0}),n=Le({},n,{value:void 0}),s=[];break;case"textarea":i=pd(t,i),n=pd(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Tl)}gd(r,n);var a;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ma.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var l=n[u];if(o=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(r||(r={}),r[a]=l[a])}else r||(s||(s=[]),s.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ma.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Pe("scroll",t),s||o===l||(s=[])):(s=s||[]).push(u,l))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};$v=function(t,e,r,n){r!==n&&(e.flags|=4)};function Hs(t,e){if(!Ae)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function ht(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function K1(t,e,r){var n=e.pendingProps;switch(Mh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(e),null;case 1:return Rt(e.type)&&jl(),ht(e),null;case 3:return n=e.stateNode,ds(),Te(It),Te(_t),qh(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Fo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gr!==null&&(Yd(gr),gr=null))),Vd(t,e),ht(e),null;case 5:Kh(e);var i=li(Ga.current);if(r=e.type,t!==null&&e.stateNode!=null)Lv(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(z(166));return ht(e),null}if(t=li(Ir.current),Fo(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[Tr]=e,n[Wa]=s,t=(e.mode&1)!==0,r){case"dialog":Pe("cancel",n),Pe("close",n);break;case"iframe":case"object":case"embed":Pe("load",n);break;case"video":case"audio":for(i=0;i<fa.length;i++)Pe(fa[i],n);break;case"source":Pe("error",n);break;case"img":case"image":case"link":Pe("error",n),Pe("load",n);break;case"details":Pe("toggle",n);break;case"input":wp(n,s),Pe("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Pe("invalid",n);break;case"textarea":xp(n,s),Pe("invalid",n)}gd(r,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?n.textContent!==o&&(s.suppressHydrationWarning!==!0&&zo(n.textContent,o,t),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&zo(n.textContent,o,t),i=["children",""+o]):Ma.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Pe("scroll",n)}switch(r){case"input":Io(n),bp(n,s,!0);break;case"textarea":Io(n),kp(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Tl)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=uy(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[Tr]=e,t[Wa]=n,Nv(t,e,!1,!1),e.stateNode=t;e:{switch(a=yd(r,n),r){case"dialog":Pe("cancel",t),Pe("close",t),i=n;break;case"iframe":case"object":case"embed":Pe("load",t),i=n;break;case"video":case"audio":for(i=0;i<fa.length;i++)Pe(fa[i],t);i=n;break;case"source":Pe("error",t),i=n;break;case"img":case"image":case"link":Pe("error",t),Pe("load",t),i=n;break;case"details":Pe("toggle",t),i=n;break;case"input":wp(t,n),i=dd(t,n),Pe("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Le({},n,{value:void 0}),Pe("invalid",t);break;case"textarea":xp(t,n),i=pd(t,n),Pe("invalid",t);break;default:i=n}gd(r,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?hy(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&cy(t,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Ua(t,l):typeof l=="number"&&Ua(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ma.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Pe("scroll",t):l!=null&&kh(t,s,l,a))}switch(r){case"input":Io(t),bp(t,n,!1);break;case"textarea":Io(t),kp(t);break;case"option":n.value!=null&&t.setAttribute("value",""+$n(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?es(t,!!n.multiple,s,!1):n.defaultValue!=null&&es(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Tl)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ht(e),null;case 6:if(t&&e.stateNode!=null)$v(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(z(166));if(r=li(Ga.current),li(Ir.current),Fo(e)){if(n=e.stateNode,r=e.memoizedProps,n[Tr]=e,(s=n.nodeValue!==r)&&(t=zt,t!==null))switch(t.tag){case 3:zo(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&zo(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Tr]=e,e.stateNode=n}return ht(e),null;case 13:if(Te(Re),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ae&&Ut!==null&&e.mode&1&&!(e.flags&128))Xy(),us(),e.flags|=98560,s=!1;else if(s=Fo(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(z(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(z(317));s[Tr]=e}else us(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ht(e),s=!1}else gr!==null&&(Yd(gr),gr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Re.current&1?We===0&&(We=3):af())),e.updateQueue!==null&&(e.flags|=4),ht(e),null);case 4:return ds(),Vd(t,e),t===null&&Ka(e.stateNode.containerInfo),ht(e),null;case 10:return Bh(e.type._context),ht(e),null;case 17:return Rt(e.type)&&jl(),ht(e),null;case 19:if(Te(Re),s=e.memoizedState,s===null)return ht(e),null;if(n=(e.flags&128)!==0,a=s.rendering,a===null)if(n)Hs(s,!1);else{if(We!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=$l(t),a!==null){for(e.flags|=128,Hs(s,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ee(Re,Re.current&1|2),e.child}t=t.sibling}s.tail!==null&&Fe()>fs&&(e.flags|=128,n=!0,Hs(s,!1),e.lanes=4194304)}else{if(!n)if(t=$l(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Hs(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Ae)return ht(e),null}else 2*Fe()-s.renderingStartTime>fs&&r!==1073741824&&(e.flags|=128,n=!0,Hs(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(r=s.last,r!==null?r.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Fe(),e.sibling=null,r=Re.current,Ee(Re,n?r&1|2:r&1),e):(ht(e),null);case 22:case 23:return sf(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Dt&1073741824&&(ht(e),e.subtreeFlags&6&&(e.flags|=8192)):ht(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function q1(t,e){switch(Mh(e),e.tag){case 1:return Rt(e.type)&&jl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ds(),Te(It),Te(_t),qh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Kh(e),null;case 13:if(Te(Re),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));us()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Te(Re),null;case 4:return ds(),null;case 10:return Bh(e.type._context),null;case 22:case 23:return sf(),null;case 24:return null;default:return null}}var Ho=!1,mt=!1,W1=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Ji(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){De(t,e,n)}else r.current=null}function Hd(t,e,r){try{r()}catch(n){De(t,e,n)}}var hm=!1;function J1(t,e){if(Pd=El,t=zy(),$h(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var a=0,o=-1,l=-1,u=0,c=0,d=t,h=null;t:for(;;){for(var b;d!==r||i!==0&&d.nodeType!==3||(o=a+i),d!==s||n!==0&&d.nodeType!==3||(l=a+n),d.nodeType===3&&(a+=d.nodeValue.length),(b=d.firstChild)!==null;)h=d,d=b;for(;;){if(d===t)break t;if(h===r&&++u===i&&(o=a),h===s&&++c===n&&(l=a),(b=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=b}r=o===-1||l===-1?null:{start:o,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(Td={focusedElem:t,selectionRange:r},El=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var O=v.memoizedProps,k=v.memoizedState,p=e.stateNode,m=p.getSnapshotBeforeUpdate(e.elementType===e.type?O:fr(e.type,O),k);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var f=e.stateNode.containerInfo;f.nodeType===1?f.textContent="":f.nodeType===9&&f.documentElement&&f.removeChild(f.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(S){De(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return v=hm,hm=!1,v}function Sa(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Hd(e,r,s)}i=i.next}while(i!==n)}}function Tu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Zd(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Dv(t){var e=t.alternate;e!==null&&(t.alternate=null,Dv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Tr],delete e[Wa],delete e[Ad],delete e[A1],delete e[I1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Mv(t){return t.tag===5||t.tag===3||t.tag===4}function fm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Mv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Kd(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Tl));else if(n!==4&&(t=t.child,t!==null))for(Kd(t,e,r),t=t.sibling;t!==null;)Kd(t,e,r),t=t.sibling}function qd(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(qd(t,e,r),t=t.sibling;t!==null;)qd(t,e,r),t=t.sibling}var tt=null,pr=!1;function dn(t,e,r){for(r=r.child;r!==null;)Uv(t,e,r),r=r.sibling}function Uv(t,e,r){if(Ar&&typeof Ar.onCommitFiberUnmount=="function")try{Ar.onCommitFiberUnmount(wu,r)}catch{}switch(r.tag){case 5:mt||Ji(r,e);case 6:var n=tt,i=pr;tt=null,dn(t,e,r),tt=n,pr=i,tt!==null&&(pr?(t=tt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):tt.removeChild(r.stateNode));break;case 18:tt!==null&&(pr?(t=tt,r=r.stateNode,t.nodeType===8?Ac(t.parentNode,r):t.nodeType===1&&Ac(t,r),Va(t)):Ac(tt,r.stateNode));break;case 4:n=tt,i=pr,tt=r.stateNode.containerInfo,pr=!0,dn(t,e,r),tt=n,pr=i;break;case 0:case 11:case 14:case 15:if(!mt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&Hd(r,e,a),i=i.next}while(i!==n)}dn(t,e,r);break;case 1:if(!mt&&(Ji(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){De(r,e,o)}dn(t,e,r);break;case 21:dn(t,e,r);break;case 22:r.mode&1?(mt=(n=mt)||r.memoizedState!==null,dn(t,e,r),mt=n):dn(t,e,r);break;default:dn(t,e,r)}}function pm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new W1),e.forEach(function(n){var i=ix.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function cr(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:tt=o.stateNode,pr=!1;break e;case 3:tt=o.stateNode.containerInfo,pr=!0;break e;case 4:tt=o.stateNode.containerInfo,pr=!0;break e}o=o.return}if(tt===null)throw Error(z(160));Uv(s,a,i),tt=null,pr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){De(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)zv(e,t),e=e.sibling}function zv(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(cr(e,t),Sr(t),n&4){try{Sa(3,t,t.return),Tu(3,t)}catch(O){De(t,t.return,O)}try{Sa(5,t,t.return)}catch(O){De(t,t.return,O)}}break;case 1:cr(e,t),Sr(t),n&512&&r!==null&&Ji(r,r.return);break;case 5:if(cr(e,t),Sr(t),n&512&&r!==null&&Ji(r,r.return),t.flags&32){var i=t.stateNode;try{Ua(i,"")}catch(O){De(t,t.return,O)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=r!==null?r.memoizedProps:s,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&oy(i,s),yd(o,a);var u=yd(o,s);for(a=0;a<l.length;a+=2){var c=l[a],d=l[a+1];c==="style"?hy(i,d):c==="dangerouslySetInnerHTML"?cy(i,d):c==="children"?Ua(i,d):kh(i,c,d,u)}switch(o){case"input":hd(i,s);break;case"textarea":ly(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var b=s.value;b!=null?es(i,!!s.multiple,b,!1):h!==!!s.multiple&&(s.defaultValue!=null?es(i,!!s.multiple,s.defaultValue,!0):es(i,!!s.multiple,s.multiple?[]:"",!1))}i[Wa]=s}catch(O){De(t,t.return,O)}}break;case 6:if(cr(e,t),Sr(t),n&4){if(t.stateNode===null)throw Error(z(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(O){De(t,t.return,O)}}break;case 3:if(cr(e,t),Sr(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Va(e.containerInfo)}catch(O){De(t,t.return,O)}break;case 4:cr(e,t),Sr(t);break;case 13:cr(e,t),Sr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(rf=Fe())),n&4&&pm(t);break;case 22:if(c=r!==null&&r.memoizedState!==null,t.mode&1?(mt=(u=mt)||c,cr(e,t),mt=u):cr(e,t),Sr(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(Y=t,c=t.child;c!==null;){for(d=Y=c;Y!==null;){switch(h=Y,b=h.child,h.tag){case 0:case 11:case 14:case 15:Sa(4,h,h.return);break;case 1:Ji(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){n=h,r=h.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(O){De(n,r,O)}}break;case 5:Ji(h,h.return);break;case 22:if(h.memoizedState!==null){gm(d);continue}}b!==null?(b.return=h,Y=b):gm(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=dy("display",a))}catch(O){De(t,t.return,O)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(O){De(t,t.return,O)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:cr(e,t),Sr(t),n&4&&pm(t);break;case 21:break;default:cr(e,t),Sr(t)}}function Sr(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Mv(r)){var n=r;break e}r=r.return}throw Error(z(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Ua(i,""),n.flags&=-33);var s=fm(t);qd(t,s,i);break;case 3:case 4:var a=n.stateNode.containerInfo,o=fm(t);Kd(t,o,a);break;default:throw Error(z(161))}}catch(l){De(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function G1(t,e,r){Y=t,Fv(t)}function Fv(t,e,r){for(var n=(t.mode&1)!==0;Y!==null;){var i=Y,s=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||Ho;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||mt;o=Ho;var u=mt;if(Ho=a,(mt=l)&&!u)for(Y=i;Y!==null;)a=Y,l=a.child,a.tag===22&&a.memoizedState!==null?ym(i):l!==null?(l.return=a,Y=l):ym(i);for(;s!==null;)Y=s,Fv(s),s=s.sibling;Y=i,Ho=o,mt=u}mm(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Y=s):mm(t)}}function mm(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:mt||Tu(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!mt)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:fr(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Qp(e,s,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Qp(e,a,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Va(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}mt||e.flags&512&&Zd(e)}catch(h){De(e,e.return,h)}}if(e===t){Y=null;break}if(r=e.sibling,r!==null){r.return=e.return,Y=r;break}Y=e.return}}function gm(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Y=r;break}Y=e.return}}function ym(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Tu(4,e)}catch(l){De(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){De(e,i,l)}}var s=e.return;try{Zd(e)}catch(l){De(e,s,l)}break;case 5:var a=e.return;try{Zd(e)}catch(l){De(e,a,l)}}}catch(l){De(e,e.return,l)}if(e===t){Y=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Y=o;break}Y=e.return}}var Y1=Math.ceil,Ul=nn.ReactCurrentDispatcher,ef=nn.ReactCurrentOwner,rr=nn.ReactCurrentBatchConfig,pe=0,Ge=null,Ve=null,it=0,Dt=0,Gi=Vn(0),We=0,eo=null,vi=0,ju=0,tf=0,Ea=null,Ct=null,rf=0,fs=1/0,Ur=null,zl=!1,Wd=null,Cn=null,Zo=!1,Sn=null,Fl=0,Oa=0,Jd=null,hl=-1,fl=0;function kt(){return pe&6?Fe():hl!==-1?hl:hl=Fe()}function An(t){return t.mode&1?pe&2&&it!==0?it&-it:N1.transition!==null?(fl===0&&(fl=Sy()),fl):(t=_e,t!==0||(t=window.event,t=t===void 0?16:Ay(t.type)),t):1}function vr(t,e,r,n){if(50<Oa)throw Oa=0,Jd=null,Error(z(185));yo(t,r,n),(!(pe&2)||t!==Ge)&&(t===Ge&&(!(pe&2)&&(ju|=r),We===4&&bn(t,it)),Nt(t,n),r===1&&pe===0&&!(e.mode&1)&&(fs=Fe()+500,Eu&&Hn()))}function Nt(t,e){var r=t.callbackNode;Nb(t,e);var n=Sl(t,t===Ge?it:0);if(n===0)r!==null&&Op(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Op(r),e===1)t.tag===0?R1(vm.bind(null,t)):Gy(vm.bind(null,t)),j1(function(){!(pe&6)&&Hn()}),r=null;else{switch(Ey(n)){case 1:r=Th;break;case 4:r=xy;break;case 16:r=kl;break;case 536870912:r=ky;break;default:r=kl}r=Jv(r,Bv.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Bv(t,e){if(hl=-1,fl=0,pe&6)throw Error(z(327));var r=t.callbackNode;if(ss()&&t.callbackNode!==r)return null;var n=Sl(t,t===Ge?it:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Bl(t,n);else{e=n;var i=pe;pe|=2;var s=Hv();(Ge!==t||it!==e)&&(Ur=null,fs=Fe()+500,di(t,e));do try{ex();break}catch(o){Vv(t,o)}while(1);Fh(),Ul.current=s,pe=i,Ve!==null?e=0:(Ge=null,it=0,e=We)}if(e!==0){if(e===2&&(i=xd(t),i!==0&&(n=i,e=Gd(t,i))),e===1)throw r=eo,di(t,0),bn(t,n),Nt(t,Fe()),r;if(e===6)bn(t,n);else{if(i=t.current.alternate,!(n&30)&&!Q1(i)&&(e=Bl(t,n),e===2&&(s=xd(t),s!==0&&(n=s,e=Gd(t,s))),e===1))throw r=eo,di(t,0),bn(t,n),Nt(t,Fe()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(z(345));case 2:Qn(t,Ct,Ur);break;case 3:if(bn(t,n),(n&130023424)===n&&(e=rf+500-Fe(),10<e)){if(Sl(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){kt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Cd(Qn.bind(null,t,Ct,Ur),e);break}Qn(t,Ct,Ur);break;case 4:if(bn(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var a=31-yr(n);s=1<<a,a=e[a],a>i&&(i=a),n&=~s}if(n=i,n=Fe()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Y1(n/1960))-n,10<n){t.timeoutHandle=Cd(Qn.bind(null,t,Ct,Ur),n);break}Qn(t,Ct,Ur);break;case 5:Qn(t,Ct,Ur);break;default:throw Error(z(329))}}}return Nt(t,Fe()),t.callbackNode===r?Bv.bind(null,t):null}function Gd(t,e){var r=Ea;return t.current.memoizedState.isDehydrated&&(di(t,e).flags|=256),t=Bl(t,e),t!==2&&(e=Ct,Ct=r,e!==null&&Yd(e)),t}function Yd(t){Ct===null?Ct=t:Ct.push.apply(Ct,t)}function Q1(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!_r(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function bn(t,e){for(e&=~tf,e&=~ju,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-yr(e),n=1<<r;t[r]=-1,e&=~n}}function vm(t){if(pe&6)throw Error(z(327));ss();var e=Sl(t,0);if(!(e&1))return Nt(t,Fe()),null;var r=Bl(t,e);if(t.tag!==0&&r===2){var n=xd(t);n!==0&&(e=n,r=Gd(t,n))}if(r===1)throw r=eo,di(t,0),bn(t,e),Nt(t,Fe()),r;if(r===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Qn(t,Ct,Ur),Nt(t,Fe()),null}function nf(t,e){var r=pe;pe|=1;try{return t(e)}finally{pe=r,pe===0&&(fs=Fe()+500,Eu&&Hn())}}function _i(t){Sn!==null&&Sn.tag===0&&!(pe&6)&&ss();var e=pe;pe|=1;var r=rr.transition,n=_e;try{if(rr.transition=null,_e=1,t)return t()}finally{_e=n,rr.transition=r,pe=e,!(pe&6)&&Hn()}}function sf(){Dt=Gi.current,Te(Gi)}function di(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,T1(r)),Ve!==null)for(r=Ve.return;r!==null;){var n=r;switch(Mh(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&jl();break;case 3:ds(),Te(It),Te(_t),qh();break;case 5:Kh(n);break;case 4:ds();break;case 13:Te(Re);break;case 19:Te(Re);break;case 10:Bh(n.type._context);break;case 22:case 23:sf()}r=r.return}if(Ge=t,Ve=t=In(t.current,null),it=Dt=e,We=0,eo=null,tf=ju=vi=0,Ct=Ea=null,oi!==null){for(e=0;e<oi.length;e++)if(r=oi[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var a=s.next;s.next=i,n.next=a}r.pending=n}oi=null}return t}function Vv(t,e){do{var r=Ve;try{if(Fh(),ul.current=Ml,Dl){for(var n=Ne.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Dl=!1}if(yi=0,Je=qe=Ne=null,ka=!1,Ya=0,ef.current=null,r===null||r.return===null){We=1,eo=e,Ve=null;break}e:{var s=t,a=r.return,o=r,l=e;if(e=it,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=o,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var b=sm(a);if(b!==null){b.flags&=-257,am(b,a,o,s,e),b.mode&1&&im(s,u,e),e=b,l=u;var v=e.updateQueue;if(v===null){var O=new Set;O.add(l),e.updateQueue=O}else v.add(l);break e}else{if(!(e&1)){im(s,u,e),af();break e}l=Error(z(426))}}else if(Ae&&o.mode&1){var k=sm(a);if(k!==null){!(k.flags&65536)&&(k.flags|=256),am(k,a,o,s,e),Uh(hs(l,o));break e}}s=l=hs(l,o),We!==4&&(We=2),Ea===null?Ea=[s]:Ea.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=Ov(s,l,e);Yp(s,p);break e;case 1:o=l;var m=s.type,f=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Cn===null||!Cn.has(f)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=Pv(s,o,e);Yp(s,S);break e}}s=s.return}while(s!==null)}Kv(r)}catch(A){e=A,Ve===r&&r!==null&&(Ve=r=r.return);continue}break}while(1)}function Hv(){var t=Ul.current;return Ul.current=Ml,t===null?Ml:t}function af(){(We===0||We===3||We===2)&&(We=4),Ge===null||!(vi&268435455)&&!(ju&268435455)||bn(Ge,it)}function Bl(t,e){var r=pe;pe|=2;var n=Hv();(Ge!==t||it!==e)&&(Ur=null,di(t,e));do try{X1();break}catch(i){Vv(t,i)}while(1);if(Fh(),pe=r,Ul.current=n,Ve!==null)throw Error(z(261));return Ge=null,it=0,We}function X1(){for(;Ve!==null;)Zv(Ve)}function ex(){for(;Ve!==null&&!Eb();)Zv(Ve)}function Zv(t){var e=Wv(t.alternate,t,Dt);t.memoizedProps=t.pendingProps,e===null?Kv(t):Ve=e,ef.current=null}function Kv(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=q1(r,e),r!==null){r.flags&=32767,Ve=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{We=6,Ve=null;return}}else if(r=K1(r,e,Dt),r!==null){Ve=r;return}if(e=e.sibling,e!==null){Ve=e;return}Ve=e=t}while(e!==null);We===0&&(We=5)}function Qn(t,e,r){var n=_e,i=rr.transition;try{rr.transition=null,_e=1,tx(t,e,r,n)}finally{rr.transition=i,_e=n}return null}function tx(t,e,r,n){do ss();while(Sn!==null);if(pe&6)throw Error(z(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(Lb(t,s),t===Ge&&(Ve=Ge=null,it=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Zo||(Zo=!0,Jv(kl,function(){return ss(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=rr.transition,rr.transition=null;var a=_e;_e=1;var o=pe;pe|=4,ef.current=null,J1(t,r),zv(r,t),b1(Td),El=!!Pd,Td=Pd=null,t.current=r,G1(r),Ob(),pe=o,_e=a,rr.transition=s}else t.current=r;if(Zo&&(Zo=!1,Sn=t,Fl=i),s=t.pendingLanes,s===0&&(Cn=null),jb(r.stateNode),Nt(t,Fe()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(zl)throw zl=!1,t=Wd,Wd=null,t;return Fl&1&&t.tag!==0&&ss(),s=t.pendingLanes,s&1?t===Jd?Oa++:(Oa=0,Jd=t):Oa=0,Hn(),null}function ss(){if(Sn!==null){var t=Ey(Fl),e=rr.transition,r=_e;try{if(rr.transition=null,_e=16>t?16:t,Sn===null)var n=!1;else{if(t=Sn,Sn=null,Fl=0,pe&6)throw Error(z(331));var i=pe;for(pe|=4,Y=t.current;Y!==null;){var s=Y,a=s.child;if(Y.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(Y=u;Y!==null;){var c=Y;switch(c.tag){case 0:case 11:case 15:Sa(8,c,s)}var d=c.child;if(d!==null)d.return=c,Y=d;else for(;Y!==null;){c=Y;var h=c.sibling,b=c.return;if(Dv(c),c===u){Y=null;break}if(h!==null){h.return=b,Y=h;break}Y=b}}}var v=s.alternate;if(v!==null){var O=v.child;if(O!==null){v.child=null;do{var k=O.sibling;O.sibling=null,O=k}while(O!==null)}}Y=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Y=a;else e:for(;Y!==null;){if(s=Y,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Sa(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,Y=p;break e}Y=s.return}}var m=t.current;for(Y=m;Y!==null;){a=Y;var f=a.child;if(a.subtreeFlags&2064&&f!==null)f.return=a,Y=f;else e:for(a=m;Y!==null;){if(o=Y,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Tu(9,o)}}catch(A){De(o,o.return,A)}if(o===a){Y=null;break e}var S=o.sibling;if(S!==null){S.return=o.return,Y=S;break e}Y=o.return}}if(pe=i,Hn(),Ar&&typeof Ar.onPostCommitFiberRoot=="function")try{Ar.onPostCommitFiberRoot(wu,t)}catch{}n=!0}return n}finally{_e=r,rr.transition=e}}return!1}function _m(t,e,r){e=hs(r,e),e=Ov(t,e,1),t=jn(t,e,1),e=kt(),t!==null&&(yo(t,1,e),Nt(t,e))}function De(t,e,r){if(t.tag===3)_m(t,t,r);else for(;e!==null;){if(e.tag===3){_m(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Cn===null||!Cn.has(n))){t=hs(r,t),t=Pv(e,t,1),e=jn(e,t,1),t=kt(),e!==null&&(yo(e,1,t),Nt(e,t));break}}e=e.return}}function rx(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=kt(),t.pingedLanes|=t.suspendedLanes&r,Ge===t&&(it&r)===r&&(We===4||We===3&&(it&130023424)===it&&500>Fe()-rf?di(t,0):tf|=r),Nt(t,e)}function qv(t,e){e===0&&(t.mode&1?(e=Lo,Lo<<=1,!(Lo&130023424)&&(Lo=4194304)):e=1);var r=kt();t=Qr(t,e),t!==null&&(yo(t,e,r),Nt(t,r))}function nx(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),qv(t,r)}function ix(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(z(314))}n!==null&&n.delete(e),qv(t,r)}var Wv;Wv=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||It.current)At=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return At=!1,Z1(t,e,r);At=!!(t.flags&131072)}else At=!1,Ae&&e.flags&1048576&&Yy(e,Il,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;dl(t,e),t=e.pendingProps;var i=ls(e,_t.current);is(e,r),i=Jh(null,e,n,t,i,r);var s=Gh();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Rt(n)?(s=!0,Cl(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Hh(e),i.updater=Ou,e.stateNode=i,i._reactInternals=e,Dd(e,n,t,r),e=zd(null,e,n,!0,s,r)):(e.tag=0,Ae&&s&&Dh(e),xt(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(dl(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=ax(n),t=fr(n,t),i){case 0:e=Ud(null,e,n,t,r);break e;case 1:e=um(null,e,n,t,r);break e;case 11:e=om(null,e,n,t,r);break e;case 14:e=lm(null,e,n,fr(n.type,t),r);break e}throw Error(z(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:fr(n,i),Ud(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:fr(n,i),um(t,e,n,i,r);case 3:e:{if(Av(e),t===null)throw Error(z(387));n=e.pendingProps,s=e.memoizedState,i=s.element,tv(t,e),Ll(e,n,null,r);var a=e.memoizedState;if(n=a.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=hs(Error(z(423)),e),e=cm(t,e,n,r,i);break e}else if(n!==i){i=hs(Error(z(424)),e),e=cm(t,e,n,r,i);break e}else for(Ut=Tn(e.stateNode.containerInfo.firstChild),zt=e,Ae=!0,gr=null,r=sv(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(us(),n===i){e=Xr(t,e,r);break e}xt(t,e,n,r)}e=e.child}return e;case 5:return av(e),t===null&&Nd(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,jd(n,i)?a=null:s!==null&&jd(n,s)&&(e.flags|=32),Cv(t,e),xt(t,e,a,r),e.child;case 6:return t===null&&Nd(e),null;case 13:return Iv(t,e,r);case 4:return Zh(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=cs(e,null,n,r):xt(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:fr(n,i),om(t,e,n,i,r);case 7:return xt(t,e,e.pendingProps,r),e.child;case 8:return xt(t,e,e.pendingProps.children,r),e.child;case 12:return xt(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Ee(Rl,n._currentValue),n._currentValue=a,s!==null)if(_r(s.value,a)){if(s.children===i.children&&!It.current){e=Xr(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=Wr(-1,r&-r),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),Ld(s.return,r,e),o.lanes|=r;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(z(341));a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),Ld(a,r,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}xt(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,is(e,r),i=sr(i),n=n(i),e.flags|=1,xt(t,e,n,r),e.child;case 14:return n=e.type,i=fr(n,e.pendingProps),i=fr(n.type,i),lm(t,e,n,i,r);case 15:return Tv(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:fr(n,i),dl(t,e),e.tag=1,Rt(n)?(t=!0,Cl(e)):t=!1,is(e,r),nv(e,n,i),Dd(e,n,i,r),zd(null,e,n,!0,t,r);case 19:return Rv(t,e,r);case 22:return jv(t,e,r)}throw Error(z(156,e.tag))};function Jv(t,e){return by(t,e)}function sx(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function er(t,e,r,n){return new sx(t,e,r,n)}function of(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ax(t){if(typeof t=="function")return of(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Eh)return 11;if(t===Oh)return 14}return 2}function In(t,e){var r=t.alternate;return r===null?(r=er(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function pl(t,e,r,n,i,s){var a=2;if(n=t,typeof t=="function")of(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case zi:return hi(r.children,i,s,e);case Sh:a=8,i|=8;break;case od:return t=er(12,r,e,i|2),t.elementType=od,t.lanes=s,t;case ld:return t=er(13,r,e,i),t.elementType=ld,t.lanes=s,t;case ud:return t=er(19,r,e,i),t.elementType=ud,t.lanes=s,t;case iy:return Cu(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ry:a=10;break e;case ny:a=9;break e;case Eh:a=11;break e;case Oh:a=14;break e;case gn:a=16,n=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=er(a,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function hi(t,e,r,n){return t=er(7,t,n,e),t.lanes=r,t}function Cu(t,e,r,n){return t=er(22,t,n,e),t.elementType=iy,t.lanes=r,t.stateNode={isHidden:!1},t}function Uc(t,e,r){return t=er(6,t,null,e),t.lanes=r,t}function zc(t,e,r){return e=er(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ox(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wc(0),this.expirationTimes=wc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wc(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function lf(t,e,r,n,i,s,a,o,l){return t=new ox(t,e,r,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=er(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hh(s),t}function lx(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ui,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function Gv(t){if(!t)return Dn;t=t._reactInternals;e:{if(Si(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Rt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var r=t.type;if(Rt(r))return Jy(t,r,e)}return e}function Yv(t,e,r,n,i,s,a,o,l){return t=lf(r,n,!0,t,i,s,a,o,l),t.context=Gv(null),r=t.current,n=kt(),i=An(r),s=Wr(n,i),s.callback=e??null,jn(r,s,i),t.current.lanes=i,yo(t,i,n),Nt(t,n),t}function Au(t,e,r,n){var i=e.current,s=kt(),a=An(i);return r=Gv(r),e.context===null?e.context=r:e.pendingContext=r,e=Wr(s,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=jn(i,e,a),t!==null&&(vr(t,i,a,s),ll(t,i,a)),a}function Vl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function wm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function uf(t,e){wm(t,e),(t=t.alternate)&&wm(t,e)}function ux(){return null}var Qv=typeof reportError=="function"?reportError:function(t){console.error(t)};function cf(t){this._internalRoot=t}Iu.prototype.render=cf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Au(t,e,null,null)};Iu.prototype.unmount=cf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;_i(function(){Au(null,t,null,null)}),e[Yr]=null}};function Iu(t){this._internalRoot=t}Iu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ty();t={blockedOn:null,target:t,priority:e};for(var r=0;r<wn.length&&e!==0&&e<wn[r].priority;r++);wn.splice(r,0,t),r===0&&Cy(t)}};function df(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ru(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function bm(){}function cx(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var u=Vl(a);s.call(u)}}var a=Yv(e,n,t,0,null,!1,!1,"",bm);return t._reactRootContainer=a,t[Yr]=a.current,Ka(t.nodeType===8?t.parentNode:t),_i(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var u=Vl(l);o.call(u)}}var l=lf(t,0,!1,null,null,!1,!1,"",bm);return t._reactRootContainer=l,t[Yr]=l.current,Ka(t.nodeType===8?t.parentNode:t),_i(function(){Au(e,l,r,n)}),l}function Nu(t,e,r,n,i){var s=r._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=Vl(a);o.call(l)}}Au(e,a,t,i)}else a=cx(r,e,t,i,n);return Vl(a)}Oy=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=ha(e.pendingLanes);r!==0&&(jh(e,r|1),Nt(e,Fe()),!(pe&6)&&(fs=Fe()+500,Hn()))}break;case 13:_i(function(){var n=Qr(t,1);if(n!==null){var i=kt();vr(n,t,1,i)}}),uf(t,1)}};Ch=function(t){if(t.tag===13){var e=Qr(t,134217728);if(e!==null){var r=kt();vr(e,t,134217728,r)}uf(t,134217728)}};Py=function(t){if(t.tag===13){var e=An(t),r=Qr(t,e);if(r!==null){var n=kt();vr(r,t,e,n)}uf(t,e)}};Ty=function(){return _e};jy=function(t,e){var r=_e;try{return _e=t,e()}finally{_e=r}};_d=function(t,e,r){switch(e){case"input":if(hd(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=Su(n);if(!i)throw Error(z(90));ay(n),hd(n,i)}}}break;case"textarea":ly(t,r);break;case"select":e=r.value,e!=null&&es(t,!!r.multiple,e,!1)}};my=nf;gy=_i;var dx={usingClientEntryPoint:!1,Events:[_o,Hi,Su,fy,py,nf]},Zs={findFiberByHostInstance:ai,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},hx={bundleType:Zs.bundleType,version:Zs.version,rendererPackageName:Zs.rendererPackageName,rendererConfig:Zs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:nn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=_y(t),t===null?null:t.stateNode},findFiberByHostInstance:Zs.findFiberByHostInstance||ux,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ko=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ko.isDisabled&&Ko.supportsFiber)try{wu=Ko.inject(hx),Ar=Ko}catch{}}Ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dx;Ht.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!df(e))throw Error(z(200));return lx(t,e,null,r)};Ht.createRoot=function(t,e){if(!df(t))throw Error(z(299));var r=!1,n="",i=Qv;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=lf(t,1,!1,null,null,r,!1,n,i),t[Yr]=e.current,Ka(t.nodeType===8?t.parentNode:t),new cf(e)};Ht.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=_y(e),t=t===null?null:t.stateNode,t};Ht.flushSync=function(t){return _i(t)};Ht.hydrate=function(t,e,r){if(!Ru(e))throw Error(z(200));return Nu(null,t,e,!0,r)};Ht.hydrateRoot=function(t,e,r){if(!df(t))throw Error(z(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",a=Qv;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=Yv(e,null,t,1,r??null,i,!1,s,a),t[Yr]=e.current,Ka(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new Iu(e)};Ht.render=function(t,e,r){if(!Ru(e))throw Error(z(200));return Nu(null,t,e,!1,r)};Ht.unmountComponentAtNode=function(t){if(!Ru(t))throw Error(z(40));return t._reactRootContainer?(_i(function(){Nu(null,null,t,!1,function(){t._reactRootContainer=null,t[Yr]=null})}),!0):!1};Ht.unstable_batchedUpdates=nf;Ht.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Ru(r))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Nu(t,e,r,!1,n)};Ht.version="18.2.0-next-9e3b772b8-20220608";function Xv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Xv)}catch(t){console.error(t)}}Xv(),Yg.exports=Ht;var fx=Yg.exports,xm=fx;_l.createRoot=xm.createRoot,_l.hydrateRoot=xm.hydrateRoot;const px="modulepreload",mx=function(t,e){return new URL(t,e).href},km={},rt=function(e,r,n){if(!r||r.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(r.map(s=>{if(s=mx(s,n),s in km)return;km[s]=!0;const a=s.endsWith(".css"),o=a?'[rel="stylesheet"]':"";if(!!n)for(let c=i.length-1;c>=0;c--){const d=i[c];if(d.href===s&&(!a||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${o}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":px,a||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),a)return new Promise((c,d)=>{u.addEventListener("load",c),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s})},gx=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>rt(()=>Promise.resolve().then(()=>bo),void 0,import.meta.url).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class hf extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class yx extends hf{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class vx extends hf{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class _x extends hf{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var wx=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{u(n.next(c))}catch(d){a(d)}}function l(c){try{u(n.throw(c))}catch(d){a(d)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((n=n.apply(t,e||[])).next())})};class bx{constructor(e,{headers:r={},customFetch:n}={}){this.url=e,this.headers=r,this.fetch=gx(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var n;return wx(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:a}=r;let o={},l;a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",l=a):typeof a=="string"?(o["Content-Type"]="text/plain",l=a):typeof FormData<"u"&&a instanceof FormData?l=a:(o["Content-Type"]="application/json",l=JSON.stringify(a)));const u=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),i),body:l}).catch(b=>{throw new yx(b)}),c=u.headers.get("x-relay-error");if(c&&c==="true")throw new vx(u);if(!u.ok)throw new _x(u);let d=((n=u.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),h;return d==="application/json"?h=yield u.json():d==="application/octet-stream"?h=yield u.blob():d==="multipart/form-data"?h=yield u.formData():h=yield u.text(),{data:h,error:null}}catch(i){return{data:null,error:i}}})}}var Qd={exports:{}};(function(t,e){var r=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof vl<"u")return vl;throw new Error("unable to locate global object")},n=r();t.exports=e=n.fetch,n.fetch&&(e.default=n.fetch.bind(n)),e.Headers=n.Headers,e.Request=n.Request,e.Response=n.Response})(Qd,Qd.exports);var ff=Qd.exports;const pf=Ts(ff),bo=Fw({__proto__:null,default:pf},[ff]);class xx{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=pf:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var a,o,l;let u=null,c=null,d=null,h=s.status,b=s.statusText;if(s.ok){if(this.method!=="HEAD"){const p=await s.text();p===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?c=p:c=JSON.parse(p))}const O=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),k=(o=s.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");O&&k&&k.length>1&&(d=parseInt(k[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(c)&&(c.length>1?(u={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,d=null,h=406,b="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{const O=await s.text();try{u=JSON.parse(O),Array.isArray(u)&&s.status===404&&(c=[],u=null,h=200,b="OK")}catch{s.status===404&&O===""?(h=204,b="No Content"):u={message:O}}if(u&&this.isMaybeSingle&&(!((l=u==null?void 0:u.details)===null||l===void 0)&&l.includes("Results contain 0 rows"))&&(u=null,h=200,b="OK"),u&&this.shouldThrowOnError)throw u}return{error:u,data:c,count:d,status:h,statusText:b}});return this.shouldThrowOnError||(i=i.catch(s=>{var a,o,l;return{error:{message:`${(a=s==null?void 0:s.name)!==null&&a!==void 0?a:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(o=s==null?void 0:s.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,r)}}class kx extends xx{select(e){let r=!1;const n=(e??"*").split("").map(i=>/\s/.test(i)&&!r?"":(i==='"'&&(r=!r),i)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:r=!0,nullsFirst:n,foreignTable:i}={}){const s=i?`${i}.order`:"order",a=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${a?`${a},`:""}${e}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,r,{foreignTable:n}={}){const i=typeof n>"u"?"offset":`${n}.offset`,s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(s,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:r=!1,settings:n=!1,buffers:i=!1,wal:s=!1,format:a="text"}={}){const o=[e?"analyze":null,r?"verbose":null,n?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=this.headers.Accept;return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${l}"; options=${o};`,a==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class Li extends kx{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const n=r.map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:n,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${s}fts${a}.${r}`),this}match(e){return Object.entries(e).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(e,r,n){return this.url.searchParams.append(e,`not.${r}.${n}`),this}or(e,{foreignTable:r}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,r,n){return this.url.searchParams.append(e,`${r}.${n}`),this}}class Sx{constructor(e,{headers:r={},schema:n,fetch:i}){this.url=e,this.headers=r,this.schema=n,this.fetch=i}select(e,{head:r=!1,count:n}={}){const i=r?"HEAD":"GET";let s=!1;const a=(e??"*").split("").map(o=>/\s/.test(o)&&!s?"":(o==='"'&&(s=!s),o)).join("");return this.url.searchParams.set("select",a),n&&(this.headers.Prefer=`count=${n}`),new Li({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:r,defaultToNull:n=!0}={}){const i="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),n||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const a=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(a.length>0){const o=[...new Set(a)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new Li({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:r,ignoreDuplicates:n=!1,count:i,defaultToNull:s=!0}={}){const a="POST",o=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&o.push(this.headers.Prefer),i&&o.push(`count=${i}`),s||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const l=e.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){const u=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new Li({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:r}={}){const n="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),this.headers.Prefer=i.join(","),new Li({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const r="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Li({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const Ex="1.8.4",Ox={"X-Client-Info":`postgrest-js/${Ex}`};class mf{constructor(e,{headers:r={},schema:n,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},Ox),r),this.schemaName=n,this.fetch=i}from(e){const r=new URL(`${this.url}/${e}`);return new Sx(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new mf(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,count:i}={}){let s;const a=new URL(`${this.url}/rpc/${e}`);let o;n?(s="HEAD",Object.entries(r).forEach(([u,c])=>{a.searchParams.append(u,`${c}`)})):(s="POST",o=r);const l=Object.assign({},this.headers);return i&&(l.Prefer=`count=${i}`),new Li({method:s,url:a,headers:l,schema:this.schemaName,body:o,fetch:this.fetch,allowEmpty:!1})}}var Fc,Sm;function Px(){if(Sm)return Fc;Sm=1;var t=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return Fc=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return t()}try{return __global__||t()}finally{delete Object.prototype.__global__}}(),Fc}const Tx="websocket",jx="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",Cx=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],Ax="Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",Ix=["Iaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],Rx="1.0.34",Nx={type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},Lx="https://github.com/theturtle32/WebSocket-Node",$x={node:">=4.0.0"},Dx={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},Mx={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},Ux={verbose:!1},zx={test:"tape test/unit/*.js",gulp:"gulp"},Fx="index",Bx={lib:"./lib"},Vx="lib/browser.js",Hx="Apache-2.0",Zx={name:Tx,description:jx,keywords:Cx,author:Ax,contributors:Ix,version:Rx,repository:Nx,homepage:Lx,engines:$x,dependencies:Dx,devDependencies:Mx,config:Ux,scripts:zx,main:Fx,directories:Bx,browser:Vx,license:Hx};var Kx=Zx.version,ei;if(typeof globalThis=="object")ei=globalThis;else try{ei=Px()}catch{}finally{if(!ei&&typeof window<"u"&&(ei=window),!ei)throw new Error("Could not determine global this")}var to=ei.WebSocket||ei.MozWebSocket,qx=Kx;function e0(t,e){var r;return e?r=new to(t,e):r=new to(t),r}to&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(t){Object.defineProperty(e0,t,{get:function(){return to[t]}})});var Wx={w3cwebsocket:to?e0:null,version:qx};const Jx="2.8.0",Gx={"X-Client-Info":`realtime-js/${Jx}`},Yx="1.0.0",t0=1e4,Qx=1e3;var Pa;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Pa||(Pa={}));var $t;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})($t||($t={}));var mr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(mr||(mr={}));var Xd;(function(t){t.websocket="websocket"})(Xd||(Xd={}));var ti;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ti||(ti={}));class r0{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class Xx{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const i=r.getUint8(1),s=r.getUint8(2);let a=this.HEADER_LENGTH+2;const o=n.decode(e.slice(a,a+i));a=a+i;const l=n.decode(e.slice(a,a+s));a=a+s;const u=JSON.parse(n.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:l,payload:u}}}class Bc{constructor(e,r,n={},i=t0){this.channel=e,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null,this.rateLimited=!1}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){if(this._hasReceived("timeout"))return;this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()})==="rate limited"&&(this.rateLimited=!0)}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Em;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Em||(Em={}));class Ta{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ta.syncState(this.state,i,s,a),this.pendingDiffs.forEach(l=>{this.state=Ta.syncDiff(this.state,l,s,a)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Ta.syncDiff(this.state,i,s,a),o())}),this.onJoin((i,s,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:a})}),this.onLeave((i,s,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,i){const s=this.cloneDeep(e),a=this.transformState(r),o={},l={};return this.map(s,(u,c)=>{a[u]||(l[u]=c)}),this.map(a,(u,c)=>{const d=s[u];if(d){const h=c.map(k=>k.presence_ref),b=d.map(k=>k.presence_ref),v=c.filter(k=>b.indexOf(k.presence_ref)<0),O=d.filter(k=>h.indexOf(k.presence_ref)<0);v.length>0&&(o[u]=v),O.length>0&&(l[u]=O)}else o[u]=c}),this.syncDiff(s,{joins:o,leaves:l},n,i)}static syncDiff(e,r,n,i){const{joins:s,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(s,(o,l)=>{var u;const c=(u=e[o])!==null&&u!==void 0?u:[];if(e[o]=this.cloneDeep(l),c.length>0){const d=e[o].map(b=>b.presence_ref),h=c.filter(b=>d.indexOf(b.presence_ref)<0);e[o].unshift(...h)}n(o,c,l)}),this.map(a,(o,l)=>{let u=e[o];if(!u)return;const c=l.map(d=>d.presence_ref);u=u.filter(d=>c.indexOf(d.presence_ref)<0),e[o]=u,i(o,u,l),u.length===0&&delete e[o]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const i=e[n];return"metas"in i?r[n]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):r[n]=i,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ke;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ke||(ke={}));const Om=(t,e,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((s,a)=>(s[a]=ek(a,t,e,i),s),{})},ek=(t,e,r,n)=>{const i=e.find(o=>o.name===t),s=i==null?void 0:i.type,a=r[t];return s&&!n.includes(s)?n0(s,a):eh(a)},n0=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return ik(e,r)}switch(t){case ke.bool:return tk(e);case ke.float4:case ke.float8:case ke.int2:case ke.int4:case ke.int8:case ke.numeric:case ke.oid:return rk(e);case ke.json:case ke.jsonb:return nk(e);case ke.timestamp:return sk(e);case ke.abstime:case ke.date:case ke.daterange:case ke.int4range:case ke.int8range:case ke.money:case ke.reltime:case ke.text:case ke.time:case ke.timestamptz:case ke.timetz:case ke.tsrange:case ke.tstzrange:return eh(e);default:return eh(e)}},eh=t=>t,tk=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},rk=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},nk=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},ik=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let s;const a=t.slice(1,r);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(o=>n0(e,o))}return t},sk=t=>typeof t=="string"?t.replace(" ","T"):t;var Pm;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Pm||(Pm={}));var Tm;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes"})(Tm||(Tm={}));var jm;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(jm||(jm={}));class gf{constructor(e,r={config:{}},n){this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=$t.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},r.config),this.timeout=this.socket.timeout,this.joinPush=new Bc(this,mr.join,this.params,this.timeout),this.rejoinTimer=new r0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=$t.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=$t.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=$t.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=$t.errored,this.rejoinTimer.scheduleTimeout())}),this._on(mr.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new Ta(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,r=this.timeout){var n,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:a}}=this.params;this._onError(u=>e&&e("CHANNEL_ERROR",u)),this._onClose(()=>e&&e("CLOSED"));const o={},l={broadcast:s,presence:a,postgres_changes:(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&i!==void 0?i:[]};this.socket.accessToken&&(o.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:l},o)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",({postgres_changes:u})=>{var c;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),u===void 0){e&&e("SUBSCRIBED");return}else{const d=this.bindings.postgres_changes,h=(c=d==null?void 0:d.length)!==null&&c!==void 0?c:0,b=[];for(let v=0;v<h;v++){const O=d[v],{filter:{event:k,schema:p,table:m,filter:f}}=O,S=u&&u[v];if(S&&S.event===k&&S.schema===p&&S.table===m&&S.filter===f)b.push(Object.assign(Object.assign({},O),{id:S.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,e&&e("SUBSCRIBED");return}}).receive("error",u=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this._on(e,r,n)}async send(e,r={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:a}=e,o={method:"POST",headers:{apikey:(n=this.socket.accessToken)!==null&&n!==void 0?n:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=r.timeout)!==null&&i!==void 0?i:this.timeout)).ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,o,l;const u=this._push(e.type,e,r.timeout||this.timeout);u.rateLimited&&s("rate limited"),e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=$t.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(mr.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const i=new Bc(this,mr.leave,{},e);i.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,r,n){const i=new AbortController,s=setTimeout(()=>i.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(s),a}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Bc(this,e,r,n);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var i,s;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:u,join:c}=mr;if(n&&[o,l,u,c].indexOf(a)>=0&&n!==this._joinRef())return;let h=this._onMessage(a,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(b=>{var v,O,k;return((v=b.filter)===null||v===void 0?void 0:v.event)==="*"||((k=(O=b.filter)===null||O===void 0?void 0:O.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===a}).map(b=>b.callback(h,n)):(s=this.bindings[a])===null||s===void 0||s.filter(b=>{var v,O,k,p,m,f;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in b){const S=b.id,A=(v=b.filter)===null||v===void 0?void 0:v.event;return S&&((O=r.ids)===null||O===void 0?void 0:O.includes(S))&&(A==="*"||(A==null?void 0:A.toLocaleLowerCase())===((k=r.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const S=(m=(p=b==null?void 0:b.filter)===null||p===void 0?void 0:p.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return S==="*"||S===((f=r==null?void 0:r.event)===null||f===void 0?void 0:f.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===a}).map(b=>{if(typeof h=="object"&&"ids"in h){const v=h.data,{schema:O,table:k,commit_timestamp:p,type:m,errors:f}=v;h=Object.assign(Object.assign({},{schema:O,table:k,commit_timestamp:p,eventType:m,new:{},old:{},errors:f}),this._getPayloadRecords(v))}b.callback(h,n)})}_isClosed(){return this.state===$t.closed}_isJoined(){return this.state===$t.joined}_isJoining(){return this.state===$t.joining}_isLeaving(){return this.state===$t.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const i=e.toLocaleLowerCase(),s={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===n&&gf.isEqual(i.filter,r))}),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(mr.close,{},e)}_onError(e){this._on(mr.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=$t.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Om(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Om(e.columns,e.old_record)),r}}const ak=()=>{};class ok{constructor(e,r){var n,i;this.accessToken=null,this.channels=[],this.endPoint="",this.headers=Gx,this.params={},this.timeout=t0,this.transport=Wx.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=ak,this.conn=null,this.sendBuffer=[],this.serializer=new Xx,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.eventsPerSecondLimitMs=100,this.inThrottle=!1,this._resolveFetch=o=>{let l;return o?l=o:typeof fetch>"u"?l=(...u)=>rt(()=>Promise.resolve().then(()=>bo),void 0,import.meta.url).then(({default:c})=>c(...u)):l=fetch,(...u)=>l(...u)},this.endPoint=`${e}/${Xd.websocket}`,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),r!=null&&r.transport&&(this.transport=r.transport),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.eventsPerSecond;s&&(this.eventsPerSecondLimitMs=Math.floor(1e3/s));const a=(i=r==null?void 0:r.params)===null||i===void 0?void 0:i.apikey;a&&(this.accessToken=a),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(o,l)=>l(JSON.stringify(o)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new r0(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){this.conn||(this.conn=new this.transport(this._endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e)))}disconnect(e,r){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Pa.connecting:return ti.Connecting;case Pa.open:return ti.Open;case Pa.closing:return ti.Closing;default:return ti.Closed}}isConnected(){return this.connectionState()===ti.Open}channel(e,r={config:{}}){const n=new gf(`realtime:${e}`,r,this);return this.channels.push(n),n}push(e){const{topic:r,event:n,payload:i,ref:s}=e;let a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};if(this.log("push",`${r} ${n} (${s})`,i),this.isConnected())if(["broadcast","presence","postgres_changes"].includes(n)){if(this._throttle(a)())return"rate limited"}else a();else this.sendBuffer.push(a)}setAuth(e){this.accessToken=e,this.channels.forEach(r=>{e&&r.updateJoinPayload({access_token:e}),r.joinedOnce&&r._isJoined()&&r._push(mr.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r._joinRef()!==e._joinRef())}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Yx}))}_onConnMessage(e){this.decode(e.data,r=>{let{topic:n,event:i,payload:s,ref:a}=r;(a&&a===this.pendingHeartbeatRef||i===(s==null?void 0:s.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${n} ${i} ${a&&"("+a+")"||""}`,s),this.channels.filter(o=>o._isMember(n)).forEach(o=>o._trigger(i,s,a)),this.stateChangeCallbacks.message.forEach(o=>o(r))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(mr.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${e}${n}${i}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Qx,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_throttle(e,r=this.eventsPerSecondLimitMs){return()=>this.inThrottle?!0:(e(),r>0&&(this.inThrottle=!0,setTimeout(()=>{this.inThrottle=!1},r)),!1)}}class yf extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ft(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class lk extends yf{constructor(e,r){super(e),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Cm extends yf{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var uk=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{u(n.next(c))}catch(d){a(d)}}function l(c){try{u(n.throw(c))}catch(d){a(d)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((n=n.apply(t,e||[])).next())})};const i0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>rt(()=>Promise.resolve().then(()=>bo),void 0,import.meta.url).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},ck=()=>uk(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield rt(()=>Promise.resolve().then(()=>bo),void 0,import.meta.url)).Response:Response});var Is=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{u(n.next(c))}catch(d){a(d)}}function l(c){try{u(n.throw(c))}catch(d){a(d)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((n=n.apply(t,e||[])).next())})};const Vc=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),dk=(t,e)=>Is(void 0,void 0,void 0,function*(){const r=yield ck();t instanceof r?t.json().then(n=>{e(new lk(Vc(n),t.status||500))}).catch(n=>{e(new Cm(Vc(n),n))}):e(new Cm(Vc(t),t))}),hk=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};function Lu(t,e,r,n,i,s){return Is(this,void 0,void 0,function*(){return new Promise((a,o)=>{t(r,hk(e,n,i,s)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>dk(l,o))})})}function th(t,e,r,n){return Is(this,void 0,void 0,function*(){return Lu(t,"GET",e,r,n)})}function vn(t,e,r,n,i){return Is(this,void 0,void 0,function*(){return Lu(t,"POST",e,n,i,r)})}function fk(t,e,r,n,i){return Is(this,void 0,void 0,function*(){return Lu(t,"PUT",e,n,i,r)})}function s0(t,e,r,n,i){return Is(this,void 0,void 0,function*(){return Lu(t,"DELETE",e,n,i,r)})}var Jt=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{u(n.next(c))}catch(d){a(d)}}function l(c){try{u(n.throw(c))}catch(d){a(d)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((n=n.apply(t,e||[])).next())})};const pk={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Am={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class mk{constructor(e,r={},n,i){this.url=e,this.headers=r,this.bucketId=n,this.fetch=i0(i)}uploadOrUpdate(e,r,n,i){return Jt(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},Am),i),o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.append("cacheControl",a.cacheControl)):(s=n,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType);const l=this._removeEmptyFolders(r),u=this._getFinalPath(l),c=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:s,headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return c.ok?{data:{path:l},error:null}:{data:null,error:yield c.json()}}catch(s){if(ft(s))return{data:null,error:s};throw s}})}upload(e,r,n){return Jt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,i){return Jt(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),a=this._getFinalPath(s),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",r);try{let l;const u=Object.assign({upsert:Am.upsert},i),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const d=yield this.fetch(o.toString(),{method:"PUT",body:l,headers:c});return d.ok?{data:{path:s},error:null}:{data:null,error:yield d.json()}}catch(l){if(ft(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e){return Jt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const n=yield vn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:this.headers}),i=new URL(this.url+n.url),s=i.searchParams.get("token");if(!s)throw new yf("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:s},error:null}}catch(r){if(ft(r))return{data:null,error:r};throw r}})}update(e,r,n){return Jt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r){return Jt(this,void 0,void 0,function*(){try{return{data:yield vn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r},{headers:this.headers}),error:null}}catch(n){if(ft(n))return{data:null,error:n};throw n}})}copy(e,r){return Jt(this,void 0,void 0,function*(){try{return{data:{path:(yield vn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r},{headers:this.headers})).Key},error:null}}catch(n){if(ft(n))return{data:null,error:n};throw n}})}createSignedUrl(e,r,n){return Jt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield vn(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(i){if(ft(i))return{data:null,error:i};throw i}})}createSignedUrls(e,r,n){return Jt(this,void 0,void 0,function*(){try{const i=yield vn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(i){if(ft(i))return{data:null,error:i};throw i}})}download(e,r){return Jt(this,void 0,void 0,function*(){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),a=s?`?${s}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield th(this.fetch,`${this.url}/${i}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(ft(o))return{data:null,error:o};throw o}})}getPublicUrl(e,r){const n=this._getFinalPath(e),i=[],s=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";s!==""&&i.push(s);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${u}`)}}}remove(e){return Jt(this,void 0,void 0,function*(){try{return{data:yield s0(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(ft(r))return{data:null,error:r};throw r}})}list(e,r,n){return Jt(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},pk),r),{prefix:e||""});return{data:yield vn(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(ft(i))return{data:null,error:i};throw i}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const gk="2.5.4",yk={"X-Client-Info":`storage-js/${gk}`};var ji=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{u(n.next(c))}catch(d){a(d)}}function l(c){try{u(n.throw(c))}catch(d){a(d)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((n=n.apply(t,e||[])).next())})};class vk{constructor(e,r={},n){this.url=e,this.headers=Object.assign(Object.assign({},yk),r),this.fetch=i0(n)}listBuckets(){return ji(this,void 0,void 0,function*(){try{return{data:yield th(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ft(e))return{data:null,error:e};throw e}})}getBucket(e){return ji(this,void 0,void 0,function*(){try{return{data:yield th(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(ft(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return ji(this,void 0,void 0,function*(){try{return{data:yield vn(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ft(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return ji(this,void 0,void 0,function*(){try{return{data:yield fk(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ft(n))return{data:null,error:n};throw n}})}emptyBucket(e){return ji(this,void 0,void 0,function*(){try{return{data:yield vn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(ft(r))return{data:null,error:r};throw r}})}deleteBucket(e){return ji(this,void 0,void 0,function*(){try{return{data:yield s0(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(ft(r))return{data:null,error:r};throw r}})}}class _k extends vk{constructor(e,r={},n){super(e,r,n)}from(e){return new mk(this.url,this.headers,e,this.fetch)}}const wk="2.37.0";let pa="";typeof Deno<"u"?pa="deno":typeof document<"u"?pa="web":typeof navigator<"u"&&navigator.product==="ReactNative"?pa="react-native":pa="node";const bk={"X-Client-Info":`supabase-js-${pa}/${wk}`};var xk=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{u(n.next(c))}catch(d){a(d)}}function l(c){try{u(n.throw(c))}catch(d){a(d)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((n=n.apply(t,e||[])).next())})};const kk=t=>{let e;return t?e=t:typeof fetch>"u"?e=pf:e=fetch,(...r)=>e(...r)},Sk=()=>typeof Headers>"u"?ff.Headers:Headers,Ek=(t,e,r)=>{const n=kk(r),i=Sk();return(s,a)=>xk(void 0,void 0,void 0,function*(){var o;const l=(o=yield e())!==null&&o!==void 0?o:t;let u=new i(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),n(s,Object.assign(Object.assign({},a),{headers:u}))})};function Ok(t){return t.replace(/\/$/,"")}function Pk(t,e){const{db:r,auth:n,realtime:i,global:s}=t,{db:a,auth:o,realtime:l,global:u}=e;return{db:Object.assign(Object.assign({},a),r),auth:Object.assign(Object.assign({},o),n),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},u),s)}}function Tk(t){return Math.round(Date.now()/1e3)+t}function jk(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Mr=()=>typeof document<"u",Wn={tested:!1,writable:!1},ja=()=>{if(!Mr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Wn.tested)return Wn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Wn.tested=!0,Wn.writable=!0}catch{Wn.tested=!0,Wn.writable=!1}return Wn.writable};function Hc(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return r.searchParams.forEach((n,i)=>{e[i]=n}),e}const a0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>rt(()=>Promise.resolve().then(()=>bo),void 0,import.meta.url).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},Ck=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Ci=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},qo=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Zc=async(t,e)=>{await t.removeItem(e)};function Ak(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let r="",n,i,s,a,o,l,u,c=0;for(t=t.replace("-","+").replace("_","/");c<t.length;)a=e.indexOf(t.charAt(c++)),o=e.indexOf(t.charAt(c++)),l=e.indexOf(t.charAt(c++)),u=e.indexOf(t.charAt(c++)),n=a<<2|o>>4,i=(o&15)<<4|l>>2,s=(l&3)<<6|u,r=r+String.fromCharCode(n),l!=64&&i!=0&&(r=r+String.fromCharCode(i)),u!=64&&s!=0&&(r=r+String.fromCharCode(s));return r}class $u{constructor(){this.promise=new $u.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}$u.promiseConstructor=Promise;function Im(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,r=t.split(".");if(r.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(r[1]))throw new Error("JWT is not valid: payload is not in base64url format");const n=r[1];return JSON.parse(Ak(n))}async function Ik(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Rk(t,e){return new Promise((n,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await t(s);if(!e(s,null,a)){n(a);return}}catch(a){if(!e(s,a)){i(a);return}}})()})}function Nk(t){return("0"+t.toString(16)).substr(-2)}function Ks(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let s=0;s<56;s++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,Nk).join("")}async function Lk(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}function $k(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function qs(t){if(typeof crypto>"u")return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const e=await Lk(t);return $k(e)}class vf extends Error{constructor(e,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r}}function he(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Dk extends vf{constructor(e,r){super(e,r),this.name="AuthApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function Mk(t){return he(t)&&t.name==="AuthApiError"}class o0 extends vf{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Rs extends vf{constructor(e,r,n){super(e),this.name=r,this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ai extends Rs{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class Kc extends Rs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class Wo extends Rs{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class Jo extends Rs{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Rm extends Rs{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class rh extends Rs{constructor(e,r){super(e,"AuthRetryableFetchError",r)}}function Nm(t){return he(t)&&t.name==="AuthRetryableFetchError"}var Uk=globalThis&&globalThis.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};const ma=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),zk=[502,503,504];async function Lm(t){if(!Ck(t))throw new rh(ma(t),0);if(zk.includes(t.status))throw new rh(ma(t),t.status);let e;try{e=await t.json()}catch(r){throw new o0(ma(r),r)}throw new Dk(ma(e),t.status||500)}const Fk=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function ge(t,e,r,n){var i;const s=Object.assign({},n==null?void 0:n.headers);n!=null&&n.jwt&&(s.Authorization=`Bearer ${n.jwt}`);const a=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await Bk(t,e,r+o,{headers:s,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function Bk(t,e,r,n,i,s){const a=Fk(e,n,i,s);let o;try{o=await t(r,a)}catch(l){throw console.error(l),new rh(ma(l),0)}if(o.ok||await Lm(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(l){await Lm(l)}}function hn(t){var e;let r=null;Kk(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=Tk(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function xn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Vk(t){return{data:t,error:null}}function Hk(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s}=t,a=Uk(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function Zk(t){return t}function Kk(t){return t.access_token&&t.refresh_token&&t.expires_in}var qk=globalThis&&globalThis.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};class Wk{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=a0(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r="global"){try{return await ge(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(he(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:xn})}catch(n){if(he(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=qk(e,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Hk,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(he(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await ge(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:xn})}catch(r){if(he(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,i,s,a,o,l;try{const u={nextPage:null,lastPage:0,total:0},c=await ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Zk});if(c.error)throw c.error;const d=await c.json(),h=(a=c.headers.get("x-total-count"))!==null&&a!==void 0?a:0,b=(l=(o=c.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return b.length>0&&(b.forEach(v=>{const O=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(v.split(";")[1].split("=")[1]);u[`${k}Page`]=O}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(he(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await ge(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:xn})}catch(r){if(he(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){try{return await ge(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:xn})}catch(n){if(he(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){try{return await ge(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:xn})}catch(n){if(he(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:r,error:n}=await ge(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(he(r))return{data:null,error:r};throw r}}async _deleteFactor(e){try{return{data:await ge(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}}}const l0="2.54.0",Jk="http://localhost:9999",Gk="supabase.auth.token",Yk={"X-Client-Info":`gotrue-js/${l0}`},$m=10,Qk={getItem:t=>ja()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{ja()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{ja()&&globalThis.localStorage.removeItem(t)}};function Dm(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function Xk(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}globalThis&&ja()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug");class eS extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}Xk();const tS={url:Jk,storageKey:Gk,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Yk,flowType:"implicit",debug:!1},Ws=30*1e3,Mm=3;async function rS(t,e,r){return await r()}class ro{constructor(e){var r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ro.nextInstanceID,ro.nextInstanceID+=1,this.instanceID>0&&Mr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},tS),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new Wk({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=a0(n.fetch),this.lock=n.lock||rS,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:ja()?this.storage=Qk:(this.memoryStorage={},this.storage=Dm(this.memoryStorage)):(this.memoryStorage={},this.storage=Dm(this.memoryStorage)),Mr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${l0}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=Mr()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:r,error:n}=await this._getSessionFromURL(e);if(n)return this._debug("#_initialize()","error detecting session from URL",n),await this._removeSession(),{error:n};const{session:i,redirectType:s}=r;return this._debug("#_initialize()","detected session in URL",i,"redirect type",s),await this._saveSession(i),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return he(e)?{error:e}:{error:new o0("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signUp(e){var r,n,i;try{await this._removeSession();let s;if("email"in e){const{email:c,password:d,options:h}=e;let b=null,v=null;if(this.flowType==="pkce"){const O=Ks();await Ci(this.storage,`${this.storageKey}-code-verifier`,O),b=await qs(O),v=O===b?"plain":"s256"}s=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:c,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:b,code_challenge_method:v},xform:hn})}else if("phone"in e){const{phone:c,password:d,options:h}=e;s=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(i=h==null?void 0:h.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:hn})}else throw new Wo("You must provide either an email or phone number and a password");const{data:a,error:o}=s;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(he(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{await this._removeSession();let r;if("email"in e){const{email:s,password:a,options:o}=e;r=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:hn})}else if("phone"in e){const{phone:s,password:a,options:o}=e;r=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:hn})}else throw new Wo("You must provide either an email or phone number and a password");const{data:n,error:i}=r;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Kc}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:{user:n.user,session:n.session},error:i})}catch(r){if(he(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,i,s;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const r=await qo(this.storage,`${this.storageKey}-code-verifier`),{data:n,error:i}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:hn});return await Zc(this.storage,`${this.storageKey}-code-verifier`),i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Kc}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:n,error:i})}async signInWithIdToken(e){await this._removeSession();try{const{options:r,provider:n,token:i,access_token:s,nonce:a}=e,o=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:hn}),{data:l,error:u}=o;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Kc}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(r){if(he(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,i,s,a;try{if(await this._removeSession(),"email"in e){const{email:o,options:l}=e;let u=null,c=null;if(this.flowType==="pkce"){const h=Ks();await Ci(this.storage,`${this.storageKey}-code-verifier`,h),u=await qs(h),c=h===u?"plain":"s256"}const{error:d}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:o,options:l}=e,{data:u,error:c}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new Wo("You must provide either an email or phone number.")}catch(o){if(he(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var r,n;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();let i,s;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,s=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:o}=await ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:hn});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,u=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(he(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var r,n,i;try{return await this._removeSession(),await ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:Vk})}catch(s){if(he(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Ai;const{error:i}=await ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(he(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const r=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:s}=e,{error:a}=await ge(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:n,type:i,options:s}=e,{data:a,error:o}=await ge(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new Wo("You must provide either an email or phone number and a type")}catch(r){if(he(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await qo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n)return{data:{session:e},error:null};const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:xn}):await this._useSession(async r=>{var n,i;const{data:s,error:a}=r;if(a)throw a;return await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:xn})})}catch(r){if(he(r))return{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:i,error:s}=n;if(s)throw s;if(!i.session)throw new Ai;const a=i.session;let o=null,l=null;if(this.flowType==="pkce"&&e.email!=null){const d=Ks();await Ci(this.storage,`${this.storageKey}-code-verifier`,d),o=await qs(d),l=d===o?"plain":"s256"}const{data:u,error:c}=await ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:xn});if(c)throw c;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(n){if(he(n))return{data:{user:null},error:n};throw n}}_decodeJWT(e){return Im(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ai;const r=Date.now()/1e3;let n=r,i=!0,s=null;const a=Im(e.access_token);if(a.exp&&(n=a.exp,i=n<=r),i){const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};s=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(r){if(he(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:a,error:o}=r;if(o)throw o;e=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Ai;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(he(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e){try{if(!Mr())throw new Jo("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Jo("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new Rm("Not a valid PKCE flow url.");const r=Hc(window.location.href);if(e){if(!r.code)throw new Rm("No code detected.");const{data:m,error:f}=await this._exchangeCodeForSession(r.code);if(f)throw f;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:m.session,redirectType:null},error:null}}if(r.error||r.error_description||r.error_code)throw new Jo(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});const{provider_token:n,provider_refresh_token:i,access_token:s,refresh_token:a,expires_in:o,expires_at:l,token_type:u}=r;if(!s||!o||!a||!u)throw new Jo("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(o);let h=c+d;l&&(h=parseInt(l));const b=h-c;b*1e3<=Ws&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${d}s`);const v=h-d;c-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,h,c):c-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",v,h,c);const{data:O,error:k}=await this._getUser(s);if(k)throw k;const p={provider_token:n,provider_refresh_token:i,access_token:s,expires_in:d,expires_at:h,refresh_token:a,token_type:u,user:O.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:r.type},error:null}}catch(r){if(he(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantFlow(){const e=Hc(window.location.href);return!!(Mr()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=Hc(window.location.href),r=await qo(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return{error:s};const a=(n=i.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(Mk(o)&&(o.status===404||o.status===401)))return{error:o}}return e!=="others"&&(await this._removeSession(),await Zc(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const r=jk(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,i;try{const{data:{session:s},error:a}=r;if(a)throw a;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,r={}){let n=null,i=null;if(this.flowType==="pkce"){const s=Ks();await Ci(this.storage,`${this.storageKey}-code-verifier`,s),n=await qs(s),i=s===n?"plain":"s256"}try{return await ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(he(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Rk(async i=>(await Ik(i*200),this._debug(r,"refreshing attempt",i),await ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:hn})),(i,s,a)=>a&&a.error&&Nm(a.error)&&Date.now()+(i+1)*200-n<Ws)}catch(n){if(this._debug(r,"error",n),he(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),Mr()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await qo(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const i=Math.round(Date.now()/1e3),s=((e=n.expires_at)!==null&&e!==void 0?e:1/0)<i+$m;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${$m}s`),s){if(this.autoRefreshToken&&n.refresh_token){const{error:a}=await this._callRefreshToken(n.refresh_token);a&&(console.error(a),Nm(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Ai;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new $u;const{data:s,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new Ai;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const o={session:s.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(s){if(this._debug(i,"error",s),he(s)){const a={session:null,error:s};return(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,r,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,r)}catch(l){s.push(l)}});if(await Promise.all(a),s.length>0){for(let o=0;o<s.length;o+=1)console.error(s[o]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),await this._persistSession(e)}_persistSession(e){return this._debug("#_persistSession()",e),Ci(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Zc(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Mr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ws);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/Ws);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Ws}ms, refresh threshold is ${Mm} ticks`),i<=Mm&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof eS)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Mr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r){const n=[`provider=${encodeURIComponent(e)}`];if(r!=null&&r.redirectTo&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const i=Ks();await Ci(this.storage,`${this.storageKey}-code-verifier`,i);const s=await qs(i),a=i===s?"plain":"s256";this._debug("PKCE","code verifier",`${i.substring(0,5)}...`,"code challenge",s,"method",a);const o=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});n.push(o.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);n.push(i.toString())}return`${this.url}/authorize?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;return s?{data:null,error:s}:await ge(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(he(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,i;const{data:s,error:a}=r;if(a)return{data:null,error:a};const{data:o,error:l}=await ge(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(!((i=o==null?void 0:o.totp)===null||i===void 0)&&i.qr_code&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(r){if(he(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return{data:null,error:s};const{data:a,error:o}=await ge(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(r){if(he(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;return s?{data:null,error:s}:await ge(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(he(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(e==null?void 0:e.factors)||[],i=n.filter(s=>s.factor_type==="totp"&&s.status==="verified");return{data:{all:n,totp:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const a=this._decodeJWT(i.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((n=(r=i.user.factors)===null||r===void 0?void 0:r.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const c=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}}ro.nextInstanceID=0;class nS extends ro{constructor(e){super(e)}}var iS=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{u(n.next(c))}catch(d){a(d)}}function l(c){try{u(n.throw(c))}catch(d){a(d)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((n=n.apply(t,e||[])).next())})};const sS={headers:bk},aS={schema:"public"},oS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},lS={};class uS{constructor(e,r,n){var i,s,a,o,l,u,c,d;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const h=Ok(e);this.realtimeUrl=`${h}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${h}/auth/v1`,this.storageUrl=`${h}/storage/v1`,this.functionsUrl=`${h}/functions/v1`;const b=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,v={db:aS,realtime:lS,auth:Object.assign(Object.assign({},oS),{storageKey:b}),global:sS},O=Pk(n??{},v);this.storageKey=(s=(i=O.auth)===null||i===void 0?void 0:i.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=(a=O.global)===null||a===void 0?void 0:a.headers)!==null&&o!==void 0?o:{},this.auth=this._initSupabaseAuthClient((l=O.auth)!==null&&l!==void 0?l:{},this.headers,(u=O.global)===null||u===void 0?void 0:u.fetch),this.fetch=Ek(r,this._getAccessToken.bind(this),(c=O.global)===null||c===void 0?void 0:c.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},O.realtime)),this.rest=new mf(`${h}/rest/v1`,{headers:this.headers,schema:(d=O.db)===null||d===void 0?void 0:d.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new bx(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new _k(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return iS(this,void 0,void 0,function*(){const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,storageKey:s,flowType:a,debug:o},l,u){const c={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new nS({url:this.authUrl,headers:Object.assign(Object.assign({},c),l),storageKey:s,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,flowType:a,debug:o,fetch:u})}_initRealtimeClient(e){return new ok(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.realtime.setAuth(n??null),this.changedAccessToken=n):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const cS=(t,e,r)=>new uS(t,e,r),dS="https://xrxqgzrdxkvoszkhvnzg.supabase.co",hS="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhyeHFnenJkeGt2b3N6a2h2bnpnIiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTYxMDY2NDgsImV4cCI6MjAxMTY4MjY0OH0.7wQAVyg2lK41GxRae6B-lmEYR1ahWCHBDWoS09aiOnw",Du=cS(dS,hS),u0=async t=>{try{const{data:e,error:r}=await Du.from("events").select("*").order("timestamp",{ascending:!1}).eq("clientId",t).limit(1);return r?(console.error("Error",r),{success:!1,message:"Error subscribing to events."}):(console.log("Data",e),{success:!0,data:e})}catch(e){return console.error("Error",e),{success:!1,message:"An unexpected error occurred."}}},c0=async t=>{try{const e=new Date;e.setDate(e.getDate()-7);const{data:r,error:n}=await Du.from("events").select("*").eq("clientId",t).gte("timestamp",e.toISOString());return n?(console.error("Error",n),{isNew:!1,message:"Error checking if customer is new."}):{isNew:r.length<=1,message:r.length<=1?"This is the first time the customer has visited the store.":"This customer has visited the store before."}}catch(e){return console.error("Error",e),{isNew:!1,message:"An unexpected error occurred."}}},fS=async t=>{var e,r;try{const{data:n,error:i}=await Du.from("events").select("*").eq("clientId",t).eq("name","cart_viewed").order("timestamp",{ascending:!1}).limit(1);if(i)return console.error("Error",i),{hasItems:!1,message:"Error checking cart items."};if(n.length>0&&((r=(e=n[0])==null?void 0:e.detail)!=null&&r.cart)){const s=n[0].detail.cart.lines.map(o=>o.merchandise.product.title),a=n[0].context.document.location.href;return{hasItems:!0,message:`This customer has the following items in their cart: ${s.join(", ")}`,cartURL:`The customer can go to their cart by clicking this link: ${a}`}}else return{hasItems:!1,message:"This customer does not have items in their cart."}}catch(n){return console.error("Error",n),{hasItems:!1,message:"An unexpected error occurred."}}},pS=async t=>{try{const e=new Date;e.setDate(e.getDate()-7);const{data:r,error:n}=await Du.from("events").select("*").eq("clientId",t).eq("name","product_viewed").gte("timestamp",e.toISOString());if(n)return console.error("Error",n),{hasViewed:!1,message:"Error checking if customer has viewed products."};if(r.length>0){const i=r.map(a=>a.detail.productVariant.product.title),s=r.map(a=>a.context.document.location.href);return{hasViewed:!0,message:`This customer has viewed the following products: ${i.join(", ")}`,productURLs:`The customer can revisit these products by clicking these links: ${s.join(", ")}`}}else return{hasViewed:!1,message:"This customer has not viewed any products."}}catch(e){return console.error("Error",e),{hasViewed:!1,message:"An unexpected error occurred."}}},$i="4.4.0";class mS{constructor(e,r){this.response=e,this.controller=r,this.decoder=new gS}async*iterMessages(){if(!this.response.body)throw this.controller.abort(),new Error("Attempted to iterate over a response with no body");const e=new ps,r=vS(this.response.body);for await(const n of r)for(const i of e.decode(n)){const s=this.decoder.decode(i);s&&(yield s)}for(const n of e.flush()){const i=this.decoder.decode(n);i&&(yield i)}}async*[Symbol.asyncIterator](){let e=!1;try{for await(const r of this.iterMessages())if(!e){if(r.data.startsWith("[DONE]")){e=!0;continue}if(r.event===null)try{yield JSON.parse(r.data)}catch(n){throw console.error("Could not parse message into JSON:",r.data),console.error("From chunk:",r.raw),n}}e=!0}catch(r){if(r instanceof Error&&r.name==="AbortError")return;throw r}finally{e||this.controller.abort()}}}class gS{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[r,n,i]=yS(e,":");return i.startsWith(" ")&&(i=i.substring(1)),r==="event"?this.event=i:r==="data"&&this.data.push(i),null}}class ps{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let r=this.decodeText(e);if(this.trailingCR&&(r="\r"+r,this.trailingCR=!1),r.endsWith("\r")&&(this.trailingCR=!0,r=r.slice(0,-1)),!r)return[];const n=ps.NEWLINE_CHARS.has(r[r.length-1]||"");let i=r.split(ps.NEWLINE_REGEXP);return i.length===1&&!n?(this.buffer.push(i[0]),[]):(this.buffer.length>0&&(i=[this.buffer.join("")+i[0],...i.slice(1)],this.buffer=[]),n||(this.buffer=[i.pop()||""]),i)}decodeText(e){var r;if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new Error(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return(r=this.textDecoder)!==null&&r!==void 0||(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new Error(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new Error("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}ps.NEWLINE_CHARS=new Set([`
`,"\r","\v","\f","","","","","\u2028","\u2029"]);ps.NEWLINE_REGEXP=/\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;function yS(t,e){const r=t.indexOf(e);return r!==-1?[t.substring(0,r),e,t.substring(r+e.length)]:[t,"",""]}function vS(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const r=await e.read();return r!=null&&r.done&&e.releaseLock(),r}catch(r){throw e.releaseLock(),r}},async return(){const r=e.cancel();return e.releaseLock(),await r,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}let Kt=class nh extends Error{constructor(e,r,n,i){super(nh.makeMessage(r,n)),this.status=e,this.headers=i;const s=r;this.error=s,this.code=s==null?void 0:s.code,this.param=s==null?void 0:s.param,this.type=s==null?void 0:s.type}static makeMessage(e,r){return e!=null&&e.message?typeof e.message=="string"?e.message:JSON.stringify(e.message):e?JSON.stringify(e):r||"Unknown error occurred"}static generate(e,r,n,i){if(!e)return new xo({cause:g0(r)});const s=r==null?void 0:r.error;return e===400?new wf(e,s,n,i):e===401?new bf(e,s,n,i):e===403?new xf(e,s,n,i):e===404?new kf(e,s,n,i):e===409?new Sf(e,s,n,i):e===422?new Ef(e,s,n,i):e===429?new Of(e,s,n,i):e>=500?new Pf(e,s,n,i):new nh(e,s,n,i)}},Hl=class extends Kt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0),this.status=void 0}},xo=class extends Kt{constructor({message:e,cause:r}){super(void 0,void 0,e||"Connection error.",void 0),this.status=void 0,r&&(this.cause=r)}},_f=class extends xo{constructor(){super({message:"Request timed out."})}},wf=class extends Kt{constructor(){super(...arguments),this.status=400}},bf=class extends Kt{constructor(){super(...arguments),this.status=401}},xf=class extends Kt{constructor(){super(...arguments),this.status=403}},kf=class extends Kt{constructor(){super(...arguments),this.status=404}},Sf=class extends Kt{constructor(){super(...arguments),this.status=409}},Ef=class extends Kt{constructor(){super(...arguments),this.status=422}},Of=class extends Kt{constructor(){super(...arguments),this.status=429}},Pf=class extends Kt{};const _S=Object.freeze(Object.defineProperty({__proto__:null,APIConnectionError:xo,APIConnectionTimeoutError:_f,APIError:Kt,APIUserAbortError:Hl,AuthenticationError:bf,BadRequestError:wf,ConflictError:Sf,InternalServerError:Pf,NotFoundError:kf,PermissionDeniedError:xf,RateLimitError:Of,UnprocessableEntityError:Ef},Symbol.toStringTag,{value:"Module"})),wS=t=>{},bS=fetch.bind(void 0),xS=!1,kS=FormData,Um=typeof File<"u"?File:class extends Blob{constructor(){throw new Error("file uploads aren't supported in this environment yet as 'File' is not defined")}};async function SS(t,e){return{...e,body:new RS(t)}}async function ES(){throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")}function OS(t){return!1}const d0=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function",PS=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&h0(t),h0=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",TS=t=>PS(t)||d0(t)||OS();async function f0(t,e,r={}){var n,i,s;if(t=await t,d0(t)){const o=await t.blob();return e||(e=(n=new URL(t.url).pathname.split(/[\\/]/).pop())!==null&&n!==void 0?n:"unknown_file"),new Um([o],e,r)}const a=await jS(t);if(e||(e=(i=AS(t))!==null&&i!==void 0?i:"unknown_file"),!r.type){const o=(s=a[0])===null||s===void 0?void 0:s.type;typeof o=="string"&&(r={...r,type:o})}return new Um(a,e,r)}async function jS(t){var e;let r=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)r.push(t);else if(h0(t))r.push(await t.arrayBuffer());else if(IS(t))for await(const n of t)r.push(n);else throw new Error(`Unexpected data type: ${typeof t}; constructor: ${(e=t==null?void 0:t.constructor)===null||e===void 0?void 0:e.name}; props: ${CS(t)}`);return r}function CS(t){return`[${Object.getOwnPropertyNames(t).map(r=>`"${r}"`).join(", ")}]`}function AS(t){var e;return qc(t.name)||qc(t.filename)||((e=qc(t.path))===null||e===void 0?void 0:e.split(/[\\/]/).pop())}const qc=t=>{if(typeof t=="string")return t;if(typeof Buffer<"u"&&t instanceof Buffer)return String(t)},IS=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";class RS{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}const zm=t=>t&&typeof t=="object"&&t.body&&t[Symbol.toStringTag]==="MultipartBody",no=async t=>{const e=await NS(t.body);return SS(e,t)},NS=async t=>{const e=new kS;return await Promise.all(Object.entries(t||{}).map(([r,n])=>ih(e,r,n))),e},ih=async(t,e,r)=>{if(r!==void 0){if(r==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")t.append(e,String(r));else if(TS(r)){const n=await f0(r);t.append(e,n)}else if(Array.isArray(r))await Promise.all(r.map(n=>ih(t,e+"[]",n)));else if(typeof r=="object")await Promise.all(Object.entries(r).map(([n,i])=>ih(t,`${e}[${n}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`)}};var LS=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},$S=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Go;const DS=2;async function p0(t){const{response:e}=t;if(t.options.stream)return new mS(e,t.controller);const r=e.headers.get("content-type");if(r!=null&&r.includes("application/json")){const i=await e.json();return Zl("response",e.status,e.url,e.headers,i),i}const n=await e.text();return Zl("response",e.status,e.url,e.headers,n),n}class Mu extends Promise{constructor(e,r=p0){super(n=>{n(null)}),this.responsePromise=e,this.parseResponse=r}_thenUnwrap(e){return new Mu(this.responsePromise,async r=>e(await this.parseResponse(r)))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,r]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:r}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,r){return this.parse().then(e,r)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class MS{constructor({baseURL:e,maxRetries:r,timeout:n=6e5,httpAgent:i,fetch:s}){this.baseURL=e,this.maxRetries=Wc("maxRetries",r??DS),this.timeout=Wc("timeout",n),this.httpAgent=i,this.fetch=s??bS}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...HS(),...this.authHeaders(e)}}validateHeaders(e,r){}defaultIdempotencyKey(){return`stainless-node-retry-${GS()}`}get(e,r){return this.methodRequest("get",e,r)}post(e,r){return this.methodRequest("post",e,r)}patch(e,r){return this.methodRequest("patch",e,r)}put(e,r){return this.methodRequest("put",e,r)}delete(e,r){return this.methodRequest("delete",e,r)}methodRequest(e,r,n){return this.request(Promise.resolve(n).then(i=>({method:e,path:r,...i})))}getAPIList(e,r,n){return this.requestAPIList(r,{method:"get",path:e,...n})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}return null}buildRequest(e){var r,n,i,s,a,o;const{method:l,path:u,query:c,headers:d={}}=e,h=zm(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,b=this.calculateContentLength(h),v=this.buildURL(u,c);"timeout"in e&&Wc("timeout",e.timeout);const O=(r=e.timeout)!==null&&r!==void 0?r:this.timeout,k=(i=(n=e.httpAgent)!==null&&n!==void 0?n:this.httpAgent)!==null&&i!==void 0?i:wS(),p=O+1e3;typeof((s=k==null?void 0:k.options)===null||s===void 0?void 0:s.timeout)=="number"&&p>((a=k.options.timeout)!==null&&a!==void 0?a:0)&&(k.options.timeout=p),this.idempotencyHeader&&l!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),d[this.idempotencyHeader]=e.idempotencyKey);const m={...b&&{"Content-Length":b},...this.defaultHeaders(e),...d};zm(e.body)&&!xS&&delete m["Content-Type"],Object.keys(m).forEach(S=>m[S]===null&&delete m[S]);const f={method:l,...h&&{body:h},headers:m,...k&&{agent:k},signal:(o=e.signal)!==null&&o!==void 0?o:null};return this.validateHeaders(m,d),{req:f,url:v,timeout:O}}async prepareRequest(e,{url:r,options:n}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(r=>[...r])):{...e}:{}}makeStatusError(e,r,n,i){return Kt.generate(e,r,n,i)}request(e,r=null){return new Mu(this.makeRequest(e,r))}async makeRequest(e,r){var n,i,s;const a=await e;r==null&&(r=(n=a.maxRetries)!==null&&n!==void 0?n:this.maxRetries);const{req:o,url:l,timeout:u}=this.buildRequest(a);if(await this.prepareRequest(o,{url:l,options:a}),Zl("request",l,a,o.headers),!((i=a.signal)===null||i===void 0)&&i.aborted)throw new Hl;const c=new AbortController,d=await this.fetchWithTimeout(l,o,u,c).catch(g0);if(d instanceof Error){if(!((s=a.signal)===null||s===void 0)&&s.aborted)throw new Hl;if(r)return this.retryRequest(a,r);throw d.name==="AbortError"?new _f:new xo({cause:d})}const h=zS(d.headers);if(!d.ok){if(r&&this.shouldRetry(d))return this.retryRequest(a,r,h);const b=await d.text().catch(()=>"Unknown"),v=ZS(b),O=v?void 0:b;throw Zl("response",d.status,l,h,O),this.makeStatusError(d.status,v,O,h)}return{response:d,options:a,controller:c}}requestAPIList(e,r){const n=this.makeRequest(r,null);return new US(this,n,e)}buildURL(e,r){const n=qS(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),i=this.defaultQuery();return y0(i)||(r={...i,...r}),r&&(n.search=this.stringifyQuery(r)),n.toString()}stringifyQuery(e){return Object.entries(e).filter(([r,n])=>typeof n<"u").map(([r,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(r)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(r)}=`;throw new Error(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,r,n,i){const{signal:s,...a}=r||{};s&&s.addEventListener("abort",()=>i.abort());const o=setTimeout(()=>i.abort(),n);return this.getRequestClient().fetch(e,{signal:i.signal,...a}).finally(()=>{clearTimeout(o)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(e){const r=e.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:e.status===409||e.status===429||e.status>=500}async retryRequest(e,r,n){var i;r-=1;const s=parseInt((n==null?void 0:n["retry-after"])||""),a=(i=e.maxRetries)!==null&&i!==void 0?i:this.maxRetries,o=this.calculateRetryTimeoutSeconds(r,s,a)*1e3;return await WS(o),this.makeRequest(e,r)}calculateRetryTimeoutSeconds(e,r,n){if(Number.isInteger(r)&&r<=60)return r;const a=n-e,o=Math.min(.5*Math.pow(a-1,2),2),l=Math.random()-.5;return o+l}getUserAgent(){return`${this.constructor.name}/JS ${$i}`}}class m0{constructor(e,r,n,i){Go.set(this,void 0),LS(this,Go,e,"f"),this.options=i,this.response=r,this.body=n}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new Error("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const r={...this.options};if("params"in e)r.query={...r.query,...e.params};else if("url"in e){const n=[...Object.entries(r.query||{}),...e.url.searchParams.entries()];for(const[i,s]of n)e.url.searchParams.set(i,s);r.query=void 0,r.path=e.url.toString()}return await $S(this,Go,"f").requestAPIList(this.constructor,r)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Go=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const r of e.getPaginatedItems())yield r}}class US extends Mu{constructor(e,r,n){super(r,async i=>new n(e,i.response,await p0(i),i.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const r of e)yield r}}const zS=t=>new Proxy(Object.fromEntries(t.entries()),{get(e,r){const n=r.toString();return e[n.toLowerCase()]||e[n]}}),FS={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0},Fm=t=>typeof t=="object"&&t!==null&&!y0(t)&&Object.keys(t).every(e=>JS(FS,e)),BS=()=>{if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$i,"X-Stainless-OS":Vm(Deno.build.os),"X-Stainless-Arch":Bm(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":Deno.version};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$i,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$i,"X-Stainless-OS":Vm(process.platform),"X-Stainless-Arch":Bm(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const t=VS();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$i,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$i,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function VS(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:r}of t){const n=r.exec(navigator.userAgent);if(n){const i=n[1]||0,s=n[2]||0,a=n[3]||0;return{browser:e,version:`${i}.${s}.${a}`}}}return null}const Bm=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Vm=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Yo;const HS=()=>Yo??(Yo=BS()),ZS=t=>{try{return JSON.parse(t)}catch{return}},KS=new RegExp("^(?:[a-z]+:)?//","i"),qS=t=>KS.test(t),WS=t=>new Promise(e=>setTimeout(e,t)),Wc=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Error(`${t} must be an integer`);if(e<0)throw new Error(`${t} must be a positive integer`);return e},g0=t=>t instanceof Error?t:new Error(t),Hm=t=>{var e,r,n,i;if(typeof process<"u")return(r=(e=process.env)===null||e===void 0?void 0:e[t])!==null&&r!==void 0?r:void 0;if(typeof Deno<"u")return(i=(n=Deno.env)===null||n===void 0?void 0:n.get)===null||i===void 0?void 0:i.call(n,t)};function y0(t){if(!t)return!0;for(const e in t)return!1;return!0}function JS(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Zl(t,...e){typeof process<"u"&&process.env.DEBUG==="true"&&console.log(`OpenAI:DEBUG:${t}`,...e)}const GS=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)}),YS=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";class Uu extends m0{constructor(e,r,n,i){super(e,r,n,i),this.object=n.object,this.data=n.data}getPaginatedItems(){return this.data}nextPageParams(){return null}nextPageInfo(){return null}}class Tf extends m0{constructor(e,r,n,i){super(e,r,n,i),this.data=n.data}getPaginatedItems(){return this.data}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const r=Object.fromEntries(e.url.searchParams);return Object.keys(r).length?r:null}nextPageInfo(){var e,r;if(!(!((e=this.data)===null||e===void 0)&&e.length))return null;const n=(r=this.data[this.data.length-1])===null||r===void 0?void 0:r.id;return n?{params:{after:n}}:null}}class Ot{constructor(e){this.client=e,this.get=e.get.bind(e),this.post=e.post.bind(e),this.patch=e.patch.bind(e),this.put=e.put.bind(e),this.delete=e.delete.bind(e),this.getAPIList=e.getAPIList.bind(e)}}class Kl extends Ot{create(e,r){return this.post("/audio/transcriptions",no({body:e,...r}))}}Kl||(Kl={});class ql extends Ot{create(e,r){return this.post("/audio/translations",no({body:e,...r}))}}ql||(ql={});class Wl extends Ot{constructor(){super(...arguments),this.transcriptions=new Kl(this.client),this.translations=new ql(this.client)}}(function(t){t.Transcriptions=Kl,t.Translations=ql})(Wl||(Wl={}));let Jl=class extends Ot{create(e,r){var n;return this.post("/chat/completions",{body:e,...r,stream:(n=e.stream)!==null&&n!==void 0?n:!1})}};Jl||(Jl={});class Gl extends Ot{constructor(){super(...arguments),this.completions=new Jl(this.client)}}(function(t){t.Completions=Jl})(Gl||(Gl={}));class Yl extends Ot{create(e,r){var n;return this.post("/completions",{body:e,...r,stream:(n=e.stream)!==null&&n!==void 0?n:!1})}}Yl||(Yl={});class Ql extends Ot{create(e,r){return this.post("/embeddings",{body:e,...r})}}Ql||(Ql={});class Xl extends Ot{create(e,r){return this.post("/edits",{body:e,...r})}}Xl||(Xl={});class eu extends Ot{create(e,r){return this.post("/files",no({body:e,...r}))}retrieve(e,r){return this.get(`/files/${e}`,r)}list(e){return this.getAPIList("/files",v0,e)}del(e,r){return this.delete(`/files/${e}`,r)}retrieveContent(e,r){return this.get(`/files/${e}/content`,{...r,headers:{Accept:"application/json",...r==null?void 0:r.headers}})}}class v0 extends Uu{}eu||(eu={});class tu extends Ot{create(e,r){return this.post("/fine-tunes",{body:e,...r})}retrieve(e,r){return this.get(`/fine-tunes/${e}`,r)}list(e){return this.getAPIList("/fine-tunes",_0,e)}cancel(e,r){return this.post(`/fine-tunes/${e}/cancel`,r)}listEvents(e,r,n){var i;return this.get(`/fine-tunes/${e}/events`,{query:r,timeout:864e5,...n,stream:(i=r==null?void 0:r.stream)!==null&&i!==void 0?i:!1})}}class _0 extends Uu{}tu||(tu={});class ru extends Ot{create(e,r){return this.post("/fine_tuning/jobs",{body:e,...r})}retrieve(e,r){return this.get(`/fine_tuning/jobs/${e}`,r)}list(e={},r){return Fm(e)?this.list({},e):this.getAPIList("/fine_tuning/jobs",w0,{query:e,...r})}cancel(e,r){return this.post(`/fine_tuning/jobs/${e}/cancel`,r)}listEvents(e,r={},n){return Fm(r)?this.listEvents(e,{},r):this.getAPIList(`/fine_tuning/jobs/${e}/events`,b0,{query:r,...n})}}class w0 extends Tf{}class b0 extends Tf{}ru||(ru={});class nu extends Ot{constructor(){super(...arguments),this.jobs=new ru(this.client)}}(function(t){t.Jobs=ru,t.FineTuningJobsPage=w0,t.FineTuningJobEventsPage=b0})(nu||(nu={}));class iu extends Ot{createVariation(e,r){return this.post("/images/variations",no({body:e,...r}))}edit(e,r){return this.post("/images/edits",no({body:e,...r}))}generate(e,r){return this.post("/images/generations",{body:e,...r})}}iu||(iu={});class su extends Ot{retrieve(e,r){return this.get(`/models/${e}`,r)}list(e){return this.getAPIList("/models",x0,e)}del(e,r){return this.delete(`/models/${e}`,r)}}class x0 extends Uu{}su||(su={});class au extends Ot{create(e,r){return this.post("/moderations",{body:e,...r})}}au||(au={});var k0;class at extends MS{constructor(e){var r,n,{apiKey:i=Hm("OPENAI_API_KEY"),organization:s=(r=Hm("OPENAI_ORG_ID"))!==null&&r!==void 0?r:null,...a}=e===void 0?{}:e;if(i===void 0)throw new Error("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'my apiKey' }).");const o={apiKey:i,organization:s,baseURL:"https://api.openai.com/v1",...a};if(!o.dangerouslyAllowBrowser&&YS())throw new Error(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:o.baseURL,timeout:(n=o.timeout)!==null&&n!==void 0?n:6e5,httpAgent:o.httpAgent,maxRetries:o.maxRetries,fetch:o.fetch}),this.completions=new Yl(this),this.chat=new Gl(this),this.edits=new Xl(this),this.embeddings=new Ql(this),this.files=new eu(this),this.images=new iu(this),this.audio=new Wl(this),this.moderations=new au(this),this.models=new su(this),this.fineTuning=new nu(this),this.fineTunes=new tu(this),this._options=o,this.apiKey=i,this.organization=s}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}}k0=at;at.OpenAI=k0;at.APIError=Kt;at.APIConnectionError=xo;at.APIConnectionTimeoutError=_f;at.APIUserAbortError=Hl;at.NotFoundError=kf;at.ConflictError=Sf;at.RateLimitError=Of;at.BadRequestError=wf;at.AuthenticationError=bf;at.InternalServerError=Pf;at.PermissionDeniedError=xf;at.UnprocessableEntityError=Ef;const{APIError:Yj,APIConnectionError:Qj,APIConnectionTimeoutError:QS,APIUserAbortError:XS,NotFoundError:Xj,ConflictError:eC,RateLimitError:tC,BadRequestError:rC,AuthenticationError:nC,InternalServerError:iC,PermissionDeniedError:sC,UnprocessableEntityError:aC}=_S;(function(t){t.toFile=f0,t.fileFromPath=ES,t.Page=Uu,t.CursorPage=Tf,t.Completions=Yl,t.Chat=Gl,t.Edits=Xl,t.Embeddings=Ql,t.Files=eu,t.FileObjectsPage=v0,t.Images=iu,t.Audio=Wl,t.Moderations=au,t.Models=su,t.ModelsPage=x0,t.FineTuning=nu,t.FineTunes=tu,t.FineTunesPage=_0})(at||(at={}));var eE=Object.defineProperty,tE=(t,e,r)=>e in t?eE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,rE=(t,e,r)=>(tE(t,typeof e!="symbol"?e+"":e,r),r),zu={};zu.byteLength=sE;zu.toByteArray=oE;zu.fromByteArray=cE;var jr=[],Yt=[],nE=typeof Uint8Array<"u"?Uint8Array:Array,Jc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Ii=0,iE=Jc.length;Ii<iE;++Ii)jr[Ii]=Jc[Ii],Yt[Jc.charCodeAt(Ii)]=Ii;Yt["-".charCodeAt(0)]=62;Yt["_".charCodeAt(0)]=63;function S0(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function sE(t){var e=S0(t),r=e[0],n=e[1];return(r+n)*3/4-n}function aE(t,e,r){return(e+r)*3/4-r}function oE(t){var e,r=S0(t),n=r[0],i=r[1],s=new nE(aE(t,n,i)),a=0,o=i>0?n-4:n,l;for(l=0;l<o;l+=4)e=Yt[t.charCodeAt(l)]<<18|Yt[t.charCodeAt(l+1)]<<12|Yt[t.charCodeAt(l+2)]<<6|Yt[t.charCodeAt(l+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return i===2&&(e=Yt[t.charCodeAt(l)]<<2|Yt[t.charCodeAt(l+1)]>>4,s[a++]=e&255),i===1&&(e=Yt[t.charCodeAt(l)]<<10|Yt[t.charCodeAt(l+1)]<<4|Yt[t.charCodeAt(l+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function lE(t){return jr[t>>18&63]+jr[t>>12&63]+jr[t>>6&63]+jr[t&63]}function uE(t,e,r){for(var n,i=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(lE(n));return i.join("")}function cE(t){for(var e,r=t.length,n=r%3,i=[],s=16383,a=0,o=r-n;a<o;a+=s)i.push(uE(t,a,a+s>o?o:a+s));return n===1?(e=t[r-1],i.push(jr[e>>2]+jr[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(jr[e>>10]+jr[e>>4&63]+jr[e<<2&63]+"=")),i.join("")}function dE(t,e){let r=Array.from({length:t.length},(n,i)=>({start:i,end:i+1}));for(;r.length>1;){let n=null;for(let i=0;i<r.length-1;i++){const s=t.slice(r[i].start,r[i+1].end),a=e.get(s.join(","));a!=null&&(n==null||a<n[0])&&(n=[a,i])}if(n!=null){const i=n[1];r[i]={start:r[i].start,end:r[i+1].end},r.splice(i+1,1)}else break}return r}function hE(t,e){return t.length===1?[e.get(t.join(","))]:dE(t,e).map(r=>e.get(t.slice(r.start,r.end).join(","))).filter(r=>r!=null)}function fE(t){return t.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var sh=class{constructor(t,e){cn(this,"specialTokens");cn(this,"inverseSpecialTokens");cn(this,"patStr");cn(this,"textEncoder",new TextEncoder);cn(this,"textDecoder",new TextDecoder("utf-8"));cn(this,"rankMap",new Map);cn(this,"textMap",new Map);this.patStr=t.pat_str;const r=t.bpe_ranks.split(`
`).filter(Boolean).reduce((n,i)=>{const[s,a,...o]=i.split(" "),l=Number.parseInt(a,10);return o.forEach((u,c)=>n[u]=l+c),n},{});for(const[n,i]of Object.entries(r)){const s=zu.toByteArray(n);this.rankMap.set(s.join(","),i),this.textMap.set(i,s)}this.specialTokens={...t.special_tokens,...e},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((n,[i,s])=>(n[s]=this.textEncoder.encode(i),n),{})}encode(t,e=[],r="all"){const n=new RegExp(this.patStr,"ug"),i=sh.specialTokenRegex(Object.keys(this.specialTokens)),s=[],a=new Set(e==="all"?Object.keys(this.specialTokens):e),o=new Set(r==="all"?Object.keys(this.specialTokens).filter(u=>!a.has(u)):r);if(o.size>0){const u=sh.specialTokenRegex([...o]),c=t.match(u);if(c!=null)throw new Error(`The text contains a special token that is not allowed: ${c[0]}`)}let l=0;for(;;){let u=null,c=l;for(;i.lastIndex=c,u=i.exec(t),!(u==null||a.has(u[0]));)c=u.index+1;const d=(u==null?void 0:u.index)??t.length;for(const b of t.substring(l,d).matchAll(n)){const v=this.textEncoder.encode(b[0]),O=this.rankMap.get(v.join(","));if(O!=null){s.push(O);continue}s.push(...hE(v,this.rankMap))}if(u==null)break;let h=this.specialTokens[u[0]];s.push(h),l=u.index+u[0].length}return s}decode(t){const e=[];let r=0;for(let s=0;s<t.length;++s){const a=t[s],o=this.textMap.get(a)??this.inverseSpecialTokens[a];o!=null&&(e.push(o),r+=o.length)}const n=new Uint8Array(r);let i=0;for(const s of e)n.set(s,i),i+=s.length;return this.textDecoder.decode(n)}},E0=sh;rE(E0,"specialTokenRegex",t=>new RegExp(t.map(e=>fE(e)).join("|"),"g"));function pE(t){switch(t){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"text-embedding-ada-002":return"cl100k_base";default:throw new Error("Unknown model")}}var Fu={exports:{}},O0={};function or(t,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var mE=or;or.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};or.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};or.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=new Date().getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var r=this._timeouts.shift();if(r===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1);else return!1;var n=this;return this._timer=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},r),this._options.unref&&this._timer.unref(),!0};or.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};or.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)};or.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)};or.prototype.start=or.prototype.try;or.prototype.errors=function(){return this._errors};or.prototype.attempts=function(){return this._attempts};or.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},e=null,r=0,n=0;n<this._errors.length;n++){var i=this._errors[n],s=i.message,a=(t[s]||0)+1;t[s]=a,a>=r&&(e=i,r=a)}return e};(function(t){var e=mE;t.operation=function(r){var n=t.timeouts(r);return new e(n,{forever:r&&(r.forever||r.retries===1/0),unref:r&&r.unref,maxRetryTime:r&&r.maxRetryTime})},t.timeouts=function(r){if(r instanceof Array)return[].concat(r);var n={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var i in r)n[i]=r[i];if(n.minTimeout>n.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var s=[],a=0;a<n.retries;a++)s.push(this.createTimeout(a,n));return r&&r.forever&&!s.length&&s.push(this.createTimeout(a,n)),s.sort(function(o,l){return o-l}),s},t.createTimeout=function(r,n){var i=n.randomize?Math.random()+1:1,s=Math.round(i*Math.max(n.minTimeout,1)*Math.pow(n.factor,r));return s=Math.min(s,n.maxTimeout),s},t.wrap=function(r,n,i){if(n instanceof Array&&(i=n,n=null),!i){i=[];for(var s in r)typeof r[s]=="function"&&i.push(s)}for(var a=0;a<i.length;a++){var o=i[a],l=r[o];r[o]=(function(c){var d=t.operation(n),h=Array.prototype.slice.call(arguments,1),b=h.pop();h.push(function(v){d.retry(v)||(v&&(arguments[0]=d.mainError()),b.apply(this,arguments))}),d.attempt(function(){c.apply(r,h)})}).bind(r,l),r[o].options=n}}})(O0);var gE=O0;const yE=gE,vE=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class P0 extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}const _E=(t,e,r)=>{const n=r.retries-(e-1);return t.attemptNumber=e,t.retriesLeft=n,t},wE=t=>vE.includes(t),T0=(t,e)=>new Promise((r,n)=>{e={onFailedAttempt:()=>{},retries:10,...e};const i=yE.operation(e);i.attempt(async s=>{try{r(await t(s))}catch(a){if(!(a instanceof Error)){n(new TypeError(`Non-error was thrown: "${a}". You should only throw errors.`));return}if(a instanceof P0)i.stop(),n(a.originalError);else if(a instanceof TypeError&&!wE(a.message))i.stop(),n(a);else{_E(a,s,e);try{await e.onFailedAttempt(a)}catch(o){n(o);return}i.retry(a)||n(i.mainError())}}})});Fu.exports=T0;Fu.exports.default=T0;Fu.exports.AbortError=P0;var bE=Fu.exports;const ou=Ts(bE);var j0={},C0={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function s(l,u,c,d,h){if(typeof c!="function")throw new TypeError("The listener must be a function");var b=new i(c,d||l,h),v=r?r+u:u;return l._events[v]?l._events[v].fn?l._events[v]=[l._events[v],b]:l._events[v].push(b):(l._events[v]=b,l._eventsCount++),l}function a(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],c,d;if(this._eventsCount===0)return u;for(d in c=this._events)e.call(c,d)&&u.push(r?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},o.prototype.listeners=function(u){var c=r?r+u:u,d=this._events[c];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,b=d.length,v=new Array(b);h<b;h++)v[h]=d[h].fn;return v},o.prototype.listenerCount=function(u){var c=r?r+u:u,d=this._events[c];return d?d.fn?1:d.length:0},o.prototype.emit=function(u,c,d,h,b,v){var O=r?r+u:u;if(!this._events[O])return!1;var k=this._events[O],p=arguments.length,m,f;if(k.fn){switch(k.once&&this.removeListener(u,k.fn,void 0,!0),p){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,c),!0;case 3:return k.fn.call(k.context,c,d),!0;case 4:return k.fn.call(k.context,c,d,h),!0;case 5:return k.fn.call(k.context,c,d,h,b),!0;case 6:return k.fn.call(k.context,c,d,h,b,v),!0}for(f=1,m=new Array(p-1);f<p;f++)m[f-1]=arguments[f];k.fn.apply(k.context,m)}else{var S=k.length,A;for(f=0;f<S;f++)switch(k[f].once&&this.removeListener(u,k[f].fn,void 0,!0),p){case 1:k[f].fn.call(k[f].context);break;case 2:k[f].fn.call(k[f].context,c);break;case 3:k[f].fn.call(k[f].context,c,d);break;case 4:k[f].fn.call(k[f].context,c,d,h);break;default:if(!m)for(A=1,m=new Array(p-1);A<p;A++)m[A-1]=arguments[A];k[f].fn.apply(k[f].context,m)}}return!0},o.prototype.on=function(u,c,d){return s(this,u,c,d,!1)},o.prototype.once=function(u,c,d){return s(this,u,c,d,!0)},o.prototype.removeListener=function(u,c,d,h){var b=r?r+u:u;if(!this._events[b])return this;if(!c)return a(this,b),this;var v=this._events[b];if(v.fn)v.fn===c&&(!h||v.once)&&(!d||v.context===d)&&a(this,b);else{for(var O=0,k=[],p=v.length;O<p;O++)(v[O].fn!==c||h&&!v[O].once||d&&v[O].context!==d)&&k.push(v[O]);k.length?this._events[b]=k.length===1?k[0]:k:a(this,b)}return this},o.prototype.removeAllListeners=function(u){var c;return u?(c=r?r+u:u,this._events[c]&&a(this,c)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,t.exports=o})(C0);var xE=C0.exports,Bu={exports:{}},kE=(t,e)=>(e=e||(()=>{}),t.then(r=>new Promise(n=>{n(e())}).then(()=>r),r=>new Promise(n=>{n(e())}).then(()=>{throw r})));const SE=kE;class A0 extends Error{constructor(e){super(e),this.name="TimeoutError"}}const I0=(t,e,r)=>new Promise((n,i)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){n(t);return}const s=setTimeout(()=>{if(typeof r=="function"){try{n(r())}catch(l){i(l)}return}const a=typeof r=="string"?r:`Promise timed out after ${e} milliseconds`,o=r instanceof Error?r:new A0(a);typeof t.cancel=="function"&&t.cancel(),i(o)},e);SE(t.then(n,i),()=>{clearTimeout(s)})});Bu.exports=I0;Bu.exports.default=I0;Bu.exports.TimeoutError=A0;var EE=Bu.exports,jf={},Cf={};Object.defineProperty(Cf,"__esModule",{value:!0});function OE(t,e,r){let n=0,i=t.length;for(;i>0;){const s=i/2|0;let a=n+s;r(t[a],e)<=0?(n=++a,i-=s+1):i=s}return n}Cf.default=OE;Object.defineProperty(jf,"__esModule",{value:!0});const PE=Cf;class TE{constructor(){this._queue=[]}enqueue(e,r){r=Object.assign({priority:0},r);const n={priority:r.priority,run:e};if(this.size&&this._queue[this.size-1].priority>=r.priority){this._queue.push(n);return}const i=PE.default(this._queue,n,(s,a)=>a.priority-s.priority);this._queue.splice(i,0,n)}dequeue(){const e=this._queue.shift();return e==null?void 0:e.run}filter(e){return this._queue.filter(r=>r.priority===e.priority).map(r=>r.run)}get size(){return this._queue.length}}jf.default=TE;Object.defineProperty(j0,"__esModule",{value:!0});const jE=xE,R0=EE,CE=jf,Qo=()=>{},AE=new R0.TimeoutError;class IE extends jE{constructor(e){var r,n,i,s;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=Qo,this._resolveIdle=Qo,e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:CE.default},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(r=e.intervalCap)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(s=(i=e.interval)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||e.interval===0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout===!0,this._isPaused=e.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=Qo,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=Qo,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(this._intervalId===void 0){const r=this._intervalEnd-e;if(r<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},r)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const r=this._queue.dequeue();return r?(this.emit("active"),r(),e&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,r={}){return new Promise((n,i)=>{const s=async()=>{this._pendingCount++,this._intervalCount++;try{const a=this._timeout===void 0&&r.timeout===void 0?e():R0.default(Promise.resolve(e()),r.timeout===void 0?this._timeout:r.timeout,()=>{(r.throwOnTimeout===void 0?this._throwOnTimeout:r.throwOnTimeout)&&i(AE)});n(await a)}catch(a){i(a)}this._next()};this._queue.enqueue(s,r),this._tryToStartAnother(),this.emit("add")})}async addAll(e,r){return Promise.all(e.map(async n=>this.add(n,r)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(e=>{const r=this._resolveEmpty;this._resolveEmpty=()=>{r(),e()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(e=>{const r=this._resolveIdle;this._resolveIdle=()=>{r(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}var Jr=j0.default=IE;const RE=[400,401,402,403,404,405,406,407,408,409],NE=t=>{var r,n;if(t.message.startsWith("Cancel")||t.message.startsWith("TimeoutError")||t.name==="TimeoutError"||t.message.startsWith("AbortError")||t.name==="AbortError"||(t==null?void 0:t.code)==="ECONNABORTED")throw t;const e=((r=t==null?void 0:t.response)==null?void 0:r.status)??(t==null?void 0:t.status);if(e&&RE.includes(+e))throw t;if(((n=t==null?void 0:t.error)==null?void 0:n.code)==="insufficient_quota"){const i=new Error(t==null?void 0:t.message);throw i.name="InsufficientQuotaError",i}};let Af=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.onFailedAttempt=e.onFailedAttempt??NE;const r="default"in Jr?Jr.default:Jr;this.queue=new r({concurrency:this.maxConcurrency})}call(e,...r){return this.queue.add(()=>ou(()=>e(...r).catch(n=>{throw n instanceof Error?n:new Error(n)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,r,...n){return e.signal?Promise.race([this.call(r,...n),new Promise((i,s)=>{var a;(a=e.signal)==null||a.addEventListener("abort",()=>{s(new Error("AbortError"))})})]):this.call(r,...n)}fetch(...e){return this.call(()=>fetch(...e).then(r=>r.ok?r:Promise.reject(r)))}};const Xo={},LE=new Af({});async function $E(t,e){return t in Xo||(Xo[t]=LE.fetch(`https://tiktoken.pages.dev/js/${t}.json`,{signal:e==null?void 0:e.signal}).then(r=>r.json()).catch(r=>{throw delete Xo[t],r})),new E0(await Xo[t],e==null?void 0:e.extendedSpecialTokens)}async function DE(t,e){return $E(pE(t),e)}const ah=t=>t.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":t.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":t.startsWith("gpt-4-32k")?"gpt-4-32k":t.startsWith("gpt-4-")?"gpt-4":t;var ME=function(t,e){if(typeof t!="string")throw new TypeError("Expected a string");return e=typeof e>"u"?"_":e,t.replace(/([a-z\d])([A-Z])/g,"$1"+e+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+e+"$2").toLowerCase()};const UE=Ts(ME);var N0={exports:{}};const zE=/[\p{Lu}]/u,FE=/[\p{Ll}]/u,Zm=/^[\p{Lu}](?![\p{Lu}])/gu,L0=/([\p{Alpha}\p{N}_]|$)/u,$0=/[_.\- ]+/,BE=new RegExp("^"+$0.source),Km=new RegExp($0.source+L0.source,"gu"),qm=new RegExp("\\d+"+L0.source,"gu"),VE=(t,e,r)=>{let n=!1,i=!1,s=!1;for(let a=0;a<t.length;a++){const o=t[a];n&&zE.test(o)?(t=t.slice(0,a)+"-"+t.slice(a),n=!1,s=i,i=!0,a++):i&&s&&FE.test(o)?(t=t.slice(0,a-1)+"-"+t.slice(a-1),s=i,i=!1,n=!0):(n=e(o)===o&&r(o)!==o,s=i,i=r(o)===o&&e(o)!==o)}return t},HE=(t,e)=>(Zm.lastIndex=0,t.replace(Zm,r=>e(r))),ZE=(t,e)=>(Km.lastIndex=0,qm.lastIndex=0,t.replace(Km,(r,n)=>e(n)).replace(qm,r=>e(r))),D0=(t,e)=>{if(!(typeof t=="string"||Array.isArray(t)))throw new TypeError("Expected the input to be `string | string[]`");if(e={pascalCase:!1,preserveConsecutiveUppercase:!1,...e},Array.isArray(t)?t=t.map(s=>s.trim()).filter(s=>s.length).join("-"):t=t.trim(),t.length===0)return"";const r=e.locale===!1?s=>s.toLowerCase():s=>s.toLocaleLowerCase(e.locale),n=e.locale===!1?s=>s.toUpperCase():s=>s.toLocaleUpperCase(e.locale);return t.length===1?e.pascalCase?n(t):r(t):(t!==r(t)&&(t=VE(t,r,n)),t=t.replace(BE,""),e.preserveConsecutiveUppercase?t=HE(t,r):t=r(t),e.pascalCase&&(t=n(t.charAt(0))+t.slice(1)),ZE(t,n))};N0.exports=D0;N0.exports.default=D0;function KE(t,e){return(e==null?void 0:e[t])||UE(t)}function qE(t,e,r){const n={};for(const i in t)Object.hasOwn(t,i)&&(n[e(i,r)]=t[i]);return n}function Wm(t){return Array.isArray(t)?[...t]:{...t}}function WE(t,e){const r=Wm(t);for(const[n,i]of Object.entries(e)){const[s,...a]=n.split(".").reverse();let o=r;for(const l of a.reverse()){if(o[l]===void 0)break;o[l]=Wm(o[l]),o=o[l]}o[s]!==void 0&&(o[s]={lc:1,type:"secret",id:[i]})}return r}function M0(t){const e=Object.getPrototypeOf(t);return typeof t.lc_name=="function"&&(typeof e.lc_name!="function"||t.lc_name()!==e.lc_name())?t.lc_name():t.name}class Mn{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,M0(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}constructor(e,...r){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_kwargs=e||{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof Mn||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},r={},n=Object.keys(this.lc_kwargs).reduce((i,s)=>(i[s]=s in this?this[s]:this.lc_kwargs[s],i),{});for(let i=Object.getPrototypeOf(this);i;i=Object.getPrototypeOf(i))Object.assign(e,Reflect.get(i,"lc_aliases",this)),Object.assign(r,Reflect.get(i,"lc_secrets",this)),Object.assign(n,Reflect.get(i,"lc_attributes",this));return Object.keys(r).forEach(i=>{let s=this,a=n;const[o,...l]=i.split(".").reverse();for(const u of l.reverse()){if(!(u in s)||s[u]===void 0)return;(!(u in a)||a[u]===void 0)&&(typeof s[u]=="object"&&s[u]!=null?a[u]={}:Array.isArray(s[u])&&(a[u]=[])),s=s[u],a=a[u]}o in s&&s[o]!==void 0&&(a[o]=a[o]||s[o])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:qE(Object.keys(r).length?WE(n,r):n,KE,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}const U0="__run";class If{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new If({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}}class Rn extends Mn{get text(){return this.content}constructor(e,r){typeof e=="string"&&(e={content:e,additional_kwargs:r}),e.additional_kwargs||(e.additional_kwargs={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","schema"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}}class ko extends Rn{static _mergeAdditionalKwargs(e,r){const n={...e};for(const[i,s]of Object.entries(r))if(n[i]===void 0)n[i]=s;else{if(typeof n[i]!=typeof s)throw new Error(`additional_kwargs[${i}] already exists in the message chunk, but with a different type.`);if(typeof n[i]=="string")n[i]=n[i]+s;else if(!Array.isArray(n[i])&&typeof n[i]=="object")n[i]=this._mergeAdditionalKwargs(n[i],s);else throw new Error(`additional_kwargs[${i}] already exists in this message chunk.`)}return n}}class wi extends Rn{static lc_name(){return"HumanMessage"}_getType(){return"human"}}class lu extends ko{static lc_name(){return"HumanMessageChunk"}_getType(){return"human"}concat(e){return new lu({content:this.content+e.content,additional_kwargs:lu._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs)})}}class Vu extends Rn{static lc_name(){return"AIMessage"}_getType(){return"ai"}}class uu extends ko{static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}concat(e){return new uu({content:this.content+e.content,additional_kwargs:uu._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs)})}}class Rf extends Rn{static lc_name(){return"SystemMessage"}_getType(){return"system"}}class cu extends ko{static lc_name(){return"SystemMessageChunk"}_getType(){return"system"}concat(e){return new cu({content:this.content+e.content,additional_kwargs:cu._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs)})}}class du extends ko{static lc_name(){return"FunctionMessageChunk"}_getType(){return"function"}concat(e){return new du({content:this.content+e.content,additional_kwargs:du._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs),name:this.name??""})}}class Hu extends Rn{static lc_name(){return"ChatMessage"}constructor(e,r){typeof e=="string"&&(e={content:e,role:r}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}static isInstance(e){return e._getType()==="generic"}}function z0(t){return typeof t._getType=="function"}function Ca(t){if(typeof t=="string")return new wi(t);if(z0(t))return t;const[e,r]=t;if(e==="human"||e==="user")return new wi({content:r});if(e==="ai"||e==="assistant")return new Vu({content:r});if(e==="system")return new Rf({content:r});throw new Error("Unable to coerce message from array: only human, AI, or system message coercion is currently supported.")}class hu extends ko{static lc_name(){return"ChatMessageChunk"}constructor(e,r){typeof e=="string"&&(e={content:e,role:r}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}concat(e){return new hu({content:this.content+e.content,additional_kwargs:hu._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs),role:this.role})}}class Nf extends If{constructor(e){super(e),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.message=e.message}concat(e){return new Nf({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo},message:this.message.concat(e.message)})}}class F0 extends Mn{}class JE extends Mn{addUserMessage(e){return this.addMessage(new wi(e))}addAIChatMessage(e){return this.addMessage(new Vu(e))}}class GE{}var B0={},Zu={},Js={},fe;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{const s={};for(const a of i)s[a]=a;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(o=>typeof i[i[o]]!="number"),a={};for(const o of s)a[o]=i[o];return t.objectValues(a)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const a in i)Object.prototype.hasOwnProperty.call(i,a)&&s.push(a);return s},t.find=(i,s)=>{for(const a of i)if(s(a))return a},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,s=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(s)}t.joinValues=n,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(fe||(fe={}));var fu;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(fu||(fu={}));const W=fe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Zr=t=>{switch(typeof t){case"undefined":return W.undefined;case"string":return W.string;case"number":return isNaN(t)?W.nan:W.number;case"boolean":return W.boolean;case"function":return W.function;case"bigint":return W.bigint;case"symbol":return W.symbol;case"object":return Array.isArray(t)?W.array:t===null?W.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?W.promise:typeof Map<"u"&&t instanceof Map?W.map:typeof Set<"u"&&t instanceof Set?W.set:typeof Date<"u"&&t instanceof Date?W.date:W.object;default:return W.unknown}},B=fe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),V0=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class nr extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const r=e||function(s){return s.message},n={_errors:[]},i=s=>{for(const a of s.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let o=n,l=0;for(;l<a.path.length;){const u=a.path[l];l===a.path.length-1?(o[u]=o[u]||{_errors:[]},o[u]._errors.push(r(a))):o[u]=o[u]||{_errors:[]},o=o[u],l++}}};return i(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,fe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}nr.create=t=>new nr(t);const ms=(t,e)=>{let r;switch(t.code){case B.invalid_type:t.received===W.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case B.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,fe.jsonStringifyReplacer)}`;break;case B.unrecognized_keys:r=`Unrecognized key(s) in object: ${fe.joinValues(t.keys,", ")}`;break;case B.invalid_union:r="Invalid input";break;case B.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${fe.joinValues(t.options)}`;break;case B.invalid_enum_value:r=`Invalid enum value. Expected ${fe.joinValues(t.options)}, received '${t.received}'`;break;case B.invalid_arguments:r="Invalid function arguments";break;case B.invalid_return_type:r="Invalid function return type";break;case B.invalid_date:r="Invalid date";break;case B.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:fe.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case B.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case B.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case B.custom:r="Invalid input";break;case B.invalid_intersection_types:r="Intersection results could not be merged";break;case B.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case B.not_finite:r="Number must be finite";break;default:r=e.defaultError,fe.assertNever(t)}return{message:r}};let H0=ms;function Z0(t){H0=t}function io(){return H0}const so=t=>{const{data:e,path:r,errorMaps:n,issueData:i}=t,s=[...r,...i.path||[]],a={...i,path:s};let o="";const l=n.filter(u=>!!u).slice().reverse();for(const u of l)o=u(a,{data:e,defaultError:o}).message;return{...i,path:s,message:i.message||o}},K0=[];function G(t,e){const r=so({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,io(),ms].filter(n=>!!n)});t.common.issues.push(r)}class ot{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const i of r){if(i.status==="aborted")return ie;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const i of r)n.push({key:await i.key,value:await i.value});return ot.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const i of r){const{key:s,value:a}=i;if(s.status==="aborted"||a.status==="aborted")return ie;s.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(n[s.value]=a.value)}return{status:e.value,value:n}}}const ie=Object.freeze({status:"aborted"}),Lf=t=>({status:"dirty",value:t}),wt=t=>({status:"valid",value:t}),pu=t=>t.status==="aborted",mu=t=>t.status==="dirty",gs=t=>t.status==="valid",ao=t=>typeof Promise<"u"&&t instanceof Promise;var X;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(X||(X={}));class Nr{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Jm=(t,e)=>{if(gs(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new nr(t.common.issues);return this._error=r,this._error}}};function ae(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(a,o)=>a.code!=="invalid_type"?{message:o.defaultError}:typeof o.data>"u"?{message:n??o.defaultError}:{message:r??o.defaultError},description:i}}class se{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Zr(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Zr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ot,ctx:{common:e.parent.common,data:e.data,parsedType:Zr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(ao(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;const i={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Zr(e)},s=this._parseSync({data:e,path:i.path,parent:i});return Jm(i,s)}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Zr(e)},i=this._parse({data:e,path:n.path,parent:n}),s=await(ao(i)?i:Promise.resolve(i));return Jm(n,s)}refine(e,r){const n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,s)=>{const a=e(i),o=()=>s.addIssue({code:B.custom,...n(i)});return typeof Promise<"u"&&a instanceof Promise?a.then(l=>l?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new Vt({schema:this,typeName:te.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Rr.create(this,this._def)}nullable(){return Fn.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ir.create(this,this._def)}promise(){return xi.create(this,this._def)}or(e){return ws.create([this,e],this._def)}and(e){return bs.create(this,e,this._def)}transform(e){return new Vt({...ae(this._def),schema:this,typeName:te.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new Os({...ae(this._def),innerType:this,defaultValue:r,typeName:te.ZodDefault})}brand(){return new $f({typeName:te.ZodBranded,type:this,...ae(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new co({...ae(this._def),innerType:this,catchValue:r,typeName:te.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Ns.create(this,e)}readonly(){return fo.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const YE=/^c[^\s-]{8,}$/i,QE=/^[a-z][a-z0-9]*$/,XE=/[0-9A-HJKMNP-TV-Z]{26}/,e2=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,t2=/^([A-Z0-9_+-]+\.?)*[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,r2=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,n2=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,i2=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,s2=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function a2(t,e){return!!((e==="v4"||!e)&&n2.test(t)||(e==="v6"||!e)&&i2.test(t))}class tr extends se{constructor(){super(...arguments),this._regex=(e,r,n)=>this.refinement(i=>e.test(i),{validation:r,code:B.invalid_string,...X.errToObj(n)}),this.nonempty=e=>this.min(1,X.errToObj(e)),this.trim=()=>new tr({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new tr({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new tr({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==W.string){const s=this._getOrReturnCtx(e);return G(s,{code:B.invalid_type,expected:W.string,received:s.parsedType}),ie}const n=new ot;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),G(i,{code:B.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),G(i,{code:B.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="length"){const a=e.data.length>s.value,o=e.data.length<s.value;(a||o)&&(i=this._getOrReturnCtx(e,i),a?G(i,{code:B.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):o&&G(i,{code:B.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if(s.kind==="email")t2.test(e.data)||(i=this._getOrReturnCtx(e,i),G(i,{validation:"email",code:B.invalid_string,message:s.message}),n.dirty());else if(s.kind==="emoji")r2.test(e.data)||(i=this._getOrReturnCtx(e,i),G(i,{validation:"emoji",code:B.invalid_string,message:s.message}),n.dirty());else if(s.kind==="uuid")e2.test(e.data)||(i=this._getOrReturnCtx(e,i),G(i,{validation:"uuid",code:B.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid")YE.test(e.data)||(i=this._getOrReturnCtx(e,i),G(i,{validation:"cuid",code:B.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid2")QE.test(e.data)||(i=this._getOrReturnCtx(e,i),G(i,{validation:"cuid2",code:B.invalid_string,message:s.message}),n.dirty());else if(s.kind==="ulid")XE.test(e.data)||(i=this._getOrReturnCtx(e,i),G(i,{validation:"ulid",code:B.invalid_string,message:s.message}),n.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),G(i,{validation:"url",code:B.invalid_string,message:s.message}),n.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),G(i,{validation:"regex",code:B.invalid_string,message:s.message}),n.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),G(i,{code:B.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),G(i,{code:B.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),G(i,{code:B.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty()):s.kind==="datetime"?s2(s).test(e.data)||(i=this._getOrReturnCtx(e,i),G(i,{code:B.invalid_string,validation:"datetime",message:s.message}),n.dirty()):s.kind==="ip"?a2(e.data,s.version)||(i=this._getOrReturnCtx(e,i),G(i,{validation:"ip",code:B.invalid_string,message:s.message}),n.dirty()):fe.assertNever(s);return{status:n.value,value:e.data}}_addCheck(e){return new tr({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...X.errToObj(e)})}url(e){return this._addCheck({kind:"url",...X.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...X.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...X.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...X.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...X.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...X.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...X.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(r=e==null?void 0:e.offset)!==null&&r!==void 0?r:!1,...X.errToObj(e==null?void 0:e.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...X.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...X.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...X.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...X.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...X.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...X.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...X.errToObj(r)})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}tr.create=t=>{var e;return new tr({checks:[],typeName:te.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...ae(t)})};function o2(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,s=parseInt(t.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return s%a/Math.pow(10,i)}class en extends se{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==W.number){const s=this._getOrReturnCtx(e);return G(s,{code:B.invalid_type,expected:W.number,received:s.parsedType}),ie}let n;const i=new ot;for(const s of this._def.checks)s.kind==="int"?fe.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),G(n,{code:B.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),G(n,{code:B.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),G(n,{code:B.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?o2(e.data,s.value)!==0&&(n=this._getOrReturnCtx(e,n),G(n,{code:B.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),G(n,{code:B.not_finite,message:s.message}),i.dirty()):fe.assertNever(s);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,X.toString(r))}gt(e,r){return this.setLimit("min",e,!1,X.toString(r))}lte(e,r){return this.setLimit("max",e,!0,X.toString(r))}lt(e,r){return this.setLimit("max",e,!1,X.toString(r))}setLimit(e,r,n,i){return new en({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:X.toString(i)}]})}_addCheck(e){return new en({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:X.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:X.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:X.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:X.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:X.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:X.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:X.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:X.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:X.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&fe.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}en.create=t=>new en({checks:[],typeName:te.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...ae(t)});class tn extends se{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==W.bigint){const s=this._getOrReturnCtx(e);return G(s,{code:B.invalid_type,expected:W.bigint,received:s.parsedType}),ie}let n;const i=new ot;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),G(n,{code:B.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),G(n,{code:B.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),G(n,{code:B.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):fe.assertNever(s);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,X.toString(r))}gt(e,r){return this.setLimit("min",e,!1,X.toString(r))}lte(e,r){return this.setLimit("max",e,!0,X.toString(r))}lt(e,r){return this.setLimit("max",e,!1,X.toString(r))}setLimit(e,r,n,i){return new tn({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:X.toString(i)}]})}_addCheck(e){return new tn({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:X.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:X.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:X.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:X.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:X.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}tn.create=t=>{var e;return new tn({checks:[],typeName:te.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...ae(t)})};class ys extends se{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==W.boolean){const n=this._getOrReturnCtx(e);return G(n,{code:B.invalid_type,expected:W.boolean,received:n.parsedType}),ie}return wt(e.data)}}ys.create=t=>new ys({typeName:te.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...ae(t)});class Un extends se{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==W.date){const s=this._getOrReturnCtx(e);return G(s,{code:B.invalid_type,expected:W.date,received:s.parsedType}),ie}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return G(s,{code:B.invalid_date}),ie}const n=new ot;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),G(i,{code:B.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),n.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),G(i,{code:B.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),n.dirty()):fe.assertNever(s);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Un({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:X.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:X.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}Un.create=t=>new Un({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:te.ZodDate,...ae(t)});class oo extends se{_parse(e){if(this._getType(e)!==W.symbol){const n=this._getOrReturnCtx(e);return G(n,{code:B.invalid_type,expected:W.symbol,received:n.parsedType}),ie}return wt(e.data)}}oo.create=t=>new oo({typeName:te.ZodSymbol,...ae(t)});class vs extends se{_parse(e){if(this._getType(e)!==W.undefined){const n=this._getOrReturnCtx(e);return G(n,{code:B.invalid_type,expected:W.undefined,received:n.parsedType}),ie}return wt(e.data)}}vs.create=t=>new vs({typeName:te.ZodUndefined,...ae(t)});class _s extends se{_parse(e){if(this._getType(e)!==W.null){const n=this._getOrReturnCtx(e);return G(n,{code:B.invalid_type,expected:W.null,received:n.parsedType}),ie}return wt(e.data)}}_s.create=t=>new _s({typeName:te.ZodNull,...ae(t)});class bi extends se{constructor(){super(...arguments),this._any=!0}_parse(e){return wt(e.data)}}bi.create=t=>new bi({typeName:te.ZodAny,...ae(t)});class Nn extends se{constructor(){super(...arguments),this._unknown=!0}_parse(e){return wt(e.data)}}Nn.create=t=>new Nn({typeName:te.ZodUnknown,...ae(t)});class Lr extends se{_parse(e){const r=this._getOrReturnCtx(e);return G(r,{code:B.invalid_type,expected:W.never,received:r.parsedType}),ie}}Lr.create=t=>new Lr({typeName:te.ZodNever,...ae(t)});class lo extends se{_parse(e){if(this._getType(e)!==W.undefined){const n=this._getOrReturnCtx(e);return G(n,{code:B.invalid_type,expected:W.void,received:n.parsedType}),ie}return wt(e.data)}}lo.create=t=>new lo({typeName:te.ZodVoid,...ae(t)});class ir extends se{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==W.array)return G(r,{code:B.invalid_type,expected:W.array,received:r.parsedType}),ie;if(i.exactLength!==null){const a=r.data.length>i.exactLength.value,o=r.data.length<i.exactLength.value;(a||o)&&(G(r,{code:a?B.too_big:B.too_small,minimum:o?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(G(r,{code:B.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(G(r,{code:B.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,o)=>i.type._parseAsync(new Nr(r,a,r.path,o)))).then(a=>ot.mergeArray(n,a));const s=[...r.data].map((a,o)=>i.type._parseSync(new Nr(r,a,r.path,o)));return ot.mergeArray(n,s)}get element(){return this._def.type}min(e,r){return new ir({...this._def,minLength:{value:e,message:X.toString(r)}})}max(e,r){return new ir({...this._def,maxLength:{value:e,message:X.toString(r)}})}length(e,r){return new ir({...this._def,exactLength:{value:e,message:X.toString(r)}})}nonempty(e){return this.min(1,e)}}ir.create=(t,e)=>new ir({type:t,minLength:null,maxLength:null,exactLength:null,typeName:te.ZodArray,...ae(e)});function Di(t){if(t instanceof Ce){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=Rr.create(Di(n))}return new Ce({...t._def,shape:()=>e})}else return t instanceof ir?new ir({...t._def,type:Di(t.element)}):t instanceof Rr?Rr.create(Di(t.unwrap())):t instanceof Fn?Fn.create(Di(t.unwrap())):t instanceof wr?wr.create(t.items.map(e=>Di(e))):t}class Ce extends se{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=fe.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==W.object){const u=this._getOrReturnCtx(e);return G(u,{code:B.invalid_type,expected:W.object,received:u.parsedType}),ie}const{status:n,ctx:i}=this._processInputParams(e),{shape:s,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof Lr&&this._def.unknownKeys==="strip"))for(const u in i.data)a.includes(u)||o.push(u);const l=[];for(const u of a){const c=s[u],d=i.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new Nr(i,d,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof Lr){const u=this._def.unknownKeys;if(u==="passthrough")for(const c of o)l.push({key:{status:"valid",value:c},value:{status:"valid",value:i.data[c]}});else if(u==="strict")o.length>0&&(G(i,{code:B.unrecognized_keys,keys:o}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const c of o){const d=i.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new Nr(i,d,i.path,c)),alwaysSet:c in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const c of l){const d=await c.key;u.push({key:d,value:await c.value,alwaysSet:c.alwaysSet})}return u}).then(u=>ot.mergeObjectSync(n,u)):ot.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(e){return X.errToObj,new Ce({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,s,a,o;const l=(a=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,r,n).message)!==null&&a!==void 0?a:n.defaultError;return r.code==="unrecognized_keys"?{message:(o=X.errToObj(e).message)!==null&&o!==void 0?o:l}:{message:l}}}:{}})}strip(){return new Ce({...this._def,unknownKeys:"strip"})}passthrough(){return new Ce({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ce({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ce({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:te.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new Ce({...this._def,catchall:e})}pick(e){const r={};return fe.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new Ce({...this._def,shape:()=>r})}omit(e){const r={};return fe.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new Ce({...this._def,shape:()=>r})}deepPartial(){return Di(this)}partial(e){const r={};return fe.objectKeys(this.shape).forEach(n=>{const i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new Ce({...this._def,shape:()=>r})}required(e){const r={};return fe.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let s=this.shape[n];for(;s instanceof Rr;)s=s._def.innerType;r[n]=s}}),new Ce({...this._def,shape:()=>r})}keyof(){return q0(fe.objectKeys(this.shape))}}Ce.create=(t,e)=>new Ce({shape:()=>t,unknownKeys:"strip",catchall:Lr.create(),typeName:te.ZodObject,...ae(e)});Ce.strictCreate=(t,e)=>new Ce({shape:()=>t,unknownKeys:"strict",catchall:Lr.create(),typeName:te.ZodObject,...ae(e)});Ce.lazycreate=(t,e)=>new Ce({shape:t,unknownKeys:"strip",catchall:Lr.create(),typeName:te.ZodObject,...ae(e)});class ws extends se{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function i(s){for(const o of s)if(o.result.status==="valid")return o.result;for(const o of s)if(o.result.status==="dirty")return r.common.issues.push(...o.ctx.common.issues),o.result;const a=s.map(o=>new nr(o.ctx.common.issues));return G(r,{code:B.invalid_union,unionErrors:a}),ie}if(r.common.async)return Promise.all(n.map(async s=>{const a={...r,common:{...r.common,issues:[]},parent:null};return{result:await s._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(i);{let s;const a=[];for(const l of n){const u={...r,common:{...r.common,issues:[]},parent:null},c=l._parseSync({data:r.data,path:r.path,parent:u});if(c.status==="valid")return c;c.status==="dirty"&&!s&&(s={result:c,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(s)return r.common.issues.push(...s.ctx.common.issues),s.result;const o=a.map(l=>new nr(l));return G(r,{code:B.invalid_union,unionErrors:o}),ie}}get options(){return this._def.options}}ws.create=(t,e)=>new ws({options:t,typeName:te.ZodUnion,...ae(e)});const ml=t=>t instanceof ks?ml(t.schema):t instanceof Vt?ml(t.innerType()):t instanceof Ss?[t.value]:t instanceof rn?t.options:t instanceof Es?Object.keys(t.enum):t instanceof Os?ml(t._def.innerType):t instanceof vs?[void 0]:t instanceof _s?[null]:null;class So extends se{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==W.object)return G(r,{code:B.invalid_type,expected:W.object,received:r.parsedType}),ie;const n=this.discriminator,i=r.data[n],s=this.optionsMap.get(i);return s?r.common.async?s._parseAsync({data:r.data,path:r.path,parent:r}):s._parseSync({data:r.data,path:r.path,parent:r}):(G(r,{code:B.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),ie)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){const i=new Map;for(const s of r){const a=ml(s.shape[e]);if(!a)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of a){if(i.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);i.set(o,s)}}return new So({typeName:te.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...ae(n)})}}function oh(t,e){const r=Zr(t),n=Zr(e);if(t===e)return{valid:!0,data:t};if(r===W.object&&n===W.object){const i=fe.objectKeys(e),s=fe.objectKeys(t).filter(o=>i.indexOf(o)!==-1),a={...t,...e};for(const o of s){const l=oh(t[o],e[o]);if(!l.valid)return{valid:!1};a[o]=l.data}return{valid:!0,data:a}}else if(r===W.array&&n===W.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const a=t[s],o=e[s],l=oh(a,o);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return r===W.date&&n===W.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class bs extends se{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=(s,a)=>{if(pu(s)||pu(a))return ie;const o=oh(s.value,a.value);return o.valid?((mu(s)||mu(a))&&r.dirty(),{status:r.value,value:o.data}):(G(n,{code:B.invalid_intersection_types}),ie)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([s,a])=>i(s,a)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}bs.create=(t,e,r)=>new bs({left:t,right:e,typeName:te.ZodIntersection,...ae(r)});class wr extends se{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==W.array)return G(n,{code:B.invalid_type,expected:W.array,received:n.parsedType}),ie;if(n.data.length<this._def.items.length)return G(n,{code:B.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ie;!this._def.rest&&n.data.length>this._def.items.length&&(G(n,{code:B.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const s=[...n.data].map((a,o)=>{const l=this._def.items[o]||this._def.rest;return l?l._parse(new Nr(n,a,n.path,o)):null}).filter(a=>!!a);return n.common.async?Promise.all(s).then(a=>ot.mergeArray(r,a)):ot.mergeArray(r,s)}get items(){return this._def.items}rest(e){return new wr({...this._def,rest:e})}}wr.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new wr({items:t,typeName:te.ZodTuple,rest:null,...ae(e)})};class xs extends se{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==W.object)return G(n,{code:B.invalid_type,expected:W.object,received:n.parsedType}),ie;const i=[],s=this._def.keyType,a=this._def.valueType;for(const o in n.data)i.push({key:s._parse(new Nr(n,o,n.path,o)),value:a._parse(new Nr(n,n.data[o],n.path,o))});return n.common.async?ot.mergeObjectAsync(r,i):ot.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof se?new xs({keyType:e,valueType:r,typeName:te.ZodRecord,...ae(n)}):new xs({keyType:tr.create(),valueType:e,typeName:te.ZodRecord,...ae(r)})}}class uo extends se{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==W.map)return G(n,{code:B.invalid_type,expected:W.map,received:n.parsedType}),ie;const i=this._def.keyType,s=this._def.valueType,a=[...n.data.entries()].map(([o,l],u)=>({key:i._parse(new Nr(n,o,n.path,[u,"key"])),value:s._parse(new Nr(n,l,n.path,[u,"value"]))}));if(n.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const l of a){const u=await l.key,c=await l.value;if(u.status==="aborted"||c.status==="aborted")return ie;(u.status==="dirty"||c.status==="dirty")&&r.dirty(),o.set(u.value,c.value)}return{status:r.value,value:o}})}else{const o=new Map;for(const l of a){const u=l.key,c=l.value;if(u.status==="aborted"||c.status==="aborted")return ie;(u.status==="dirty"||c.status==="dirty")&&r.dirty(),o.set(u.value,c.value)}return{status:r.value,value:o}}}}uo.create=(t,e,r)=>new uo({valueType:e,keyType:t,typeName:te.ZodMap,...ae(r)});class zn extends se{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==W.set)return G(n,{code:B.invalid_type,expected:W.set,received:n.parsedType}),ie;const i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(G(n,{code:B.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(G(n,{code:B.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());const s=this._def.valueType;function a(l){const u=new Set;for(const c of l){if(c.status==="aborted")return ie;c.status==="dirty"&&r.dirty(),u.add(c.value)}return{status:r.value,value:u}}const o=[...n.data.values()].map((l,u)=>s._parse(new Nr(n,l,n.path,u)));return n.common.async?Promise.all(o).then(l=>a(l)):a(o)}min(e,r){return new zn({...this._def,minSize:{value:e,message:X.toString(r)}})}max(e,r){return new zn({...this._def,maxSize:{value:e,message:X.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}zn.create=(t,e)=>new zn({valueType:t,minSize:null,maxSize:null,typeName:te.ZodSet,...ae(e)});class fi extends se{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==W.function)return G(r,{code:B.invalid_type,expected:W.function,received:r.parsedType}),ie;function n(o,l){return so({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,io(),ms].filter(u=>!!u),issueData:{code:B.invalid_arguments,argumentsError:l}})}function i(o,l){return so({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,io(),ms].filter(u=>!!u),issueData:{code:B.invalid_return_type,returnTypeError:l}})}const s={errorMap:r.common.contextualErrorMap},a=r.data;if(this._def.returns instanceof xi){const o=this;return wt(async function(...l){const u=new nr([]),c=await o._def.args.parseAsync(l,s).catch(b=>{throw u.addIssue(n(l,b)),u}),d=await Reflect.apply(a,this,c);return await o._def.returns._def.type.parseAsync(d,s).catch(b=>{throw u.addIssue(i(d,b)),u})})}else{const o=this;return wt(function(...l){const u=o._def.args.safeParse(l,s);if(!u.success)throw new nr([n(l,u.error)]);const c=Reflect.apply(a,this,u.data),d=o._def.returns.safeParse(c,s);if(!d.success)throw new nr([i(c,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new fi({...this._def,args:wr.create(e).rest(Nn.create())})}returns(e){return new fi({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new fi({args:e||wr.create([]).rest(Nn.create()),returns:r||Nn.create(),typeName:te.ZodFunction,...ae(n)})}}class ks extends se{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}ks.create=(t,e)=>new ks({getter:t,typeName:te.ZodLazy,...ae(e)});class Ss extends se{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return G(r,{received:r.data,code:B.invalid_literal,expected:this._def.value}),ie}return{status:"valid",value:e.data}}get value(){return this._def.value}}Ss.create=(t,e)=>new Ss({value:t,typeName:te.ZodLiteral,...ae(e)});function q0(t,e){return new rn({values:t,typeName:te.ZodEnum,...ae(e)})}class rn extends se{_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return G(r,{expected:fe.joinValues(n),received:r.parsedType,code:B.invalid_type}),ie}if(this._def.values.indexOf(e.data)===-1){const r=this._getOrReturnCtx(e),n=this._def.values;return G(r,{received:r.data,code:B.invalid_enum_value,options:n}),ie}return wt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e){return rn.create(e)}exclude(e){return rn.create(this.options.filter(r=>!e.includes(r)))}}rn.create=q0;class Es extends se{_parse(e){const r=fe.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==W.string&&n.parsedType!==W.number){const i=fe.objectValues(r);return G(n,{expected:fe.joinValues(i),received:n.parsedType,code:B.invalid_type}),ie}if(r.indexOf(e.data)===-1){const i=fe.objectValues(r);return G(n,{received:n.data,code:B.invalid_enum_value,options:i}),ie}return wt(e.data)}get enum(){return this._def.values}}Es.create=(t,e)=>new Es({values:t,typeName:te.ZodNativeEnum,...ae(e)});class xi extends se{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==W.promise&&r.common.async===!1)return G(r,{code:B.invalid_type,expected:W.promise,received:r.parsedType}),ie;const n=r.parsedType===W.promise?r.data:Promise.resolve(r.data);return wt(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}}xi.create=(t,e)=>new xi({type:t,typeName:te.ZodPromise,...ae(e)});class Vt extends se{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===te.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:a=>{G(n,a),a.fatal?r.abort():r.dirty()},get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const a=i.transform(n.data,s);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(a).then(o=>this._def.schema._parseAsync({data:o,path:n.path,parent:n})):this._def.schema._parseSync({data:a,path:n.path,parent:n})}if(i.type==="refinement"){const a=o=>{const l=i.refinement(o,s);if(n.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?ie:(o.status==="dirty"&&r.dirty(),a(o.value),{status:r.value,value:o.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>o.status==="aborted"?ie:(o.status==="dirty"&&r.dirty(),a(o.value).then(()=>({status:r.value,value:o.value}))))}if(i.type==="transform")if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!gs(a))return a;const o=i.transform(a.value,s);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:o}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>gs(a)?Promise.resolve(i.transform(a.value,s)).then(o=>({status:r.value,value:o})):a);fe.assertNever(i)}}Vt.create=(t,e,r)=>new Vt({schema:t,typeName:te.ZodEffects,effect:e,...ae(r)});Vt.createWithPreprocess=(t,e,r)=>new Vt({schema:e,effect:{type:"preprocess",transform:t},typeName:te.ZodEffects,...ae(r)});class Rr extends se{_parse(e){return this._getType(e)===W.undefined?wt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Rr.create=(t,e)=>new Rr({innerType:t,typeName:te.ZodOptional,...ae(e)});class Fn extends se{_parse(e){return this._getType(e)===W.null?wt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Fn.create=(t,e)=>new Fn({innerType:t,typeName:te.ZodNullable,...ae(e)});class Os extends se{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===W.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}Os.create=(t,e)=>new Os({innerType:t,typeName:te.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ae(e)});class co extends se{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return ao(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new nr(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new nr(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}co.create=(t,e)=>new co({innerType:t,typeName:te.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ae(e)});class ho extends se{_parse(e){if(this._getType(e)!==W.nan){const n=this._getOrReturnCtx(e);return G(n,{code:B.invalid_type,expected:W.nan,received:n.parsedType}),ie}return{status:"valid",value:e.data}}}ho.create=t=>new ho({typeName:te.ZodNaN,...ae(t)});const W0=Symbol("zod_brand");class $f extends se{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class Ns extends se{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?ie:s.status==="dirty"?(r.dirty(),Lf(s.value)):this._def.out._parseAsync({data:s.value,path:n.path,parent:n})})();{const i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?ie:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new Ns({in:e,out:r,typeName:te.ZodPipeline})}}class fo extends se{_parse(e){const r=this._def.innerType._parse(e);return gs(r)&&(r.value=Object.freeze(r.value)),r}}fo.create=(t,e)=>new fo({innerType:t,typeName:te.ZodReadonly,...ae(e)});const Df=(t,e={},r)=>t?bi.create().superRefine((n,i)=>{var s,a;if(!t(n)){const o=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,l=(a=(s=o.fatal)!==null&&s!==void 0?s:r)!==null&&a!==void 0?a:!0,u=typeof o=="string"?{message:o}:o;i.addIssue({code:"custom",...u,fatal:l})}}):bi.create(),J0={object:Ce.lazycreate};var te;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(te||(te={}));const G0=(t,e={message:`Input not instance of ${t.name}`})=>Df(r=>r instanceof t,e),Mf=tr.create,Uf=en.create,Y0=ho.create,Q0=tn.create,zf=ys.create,X0=Un.create,e_=oo.create,t_=vs.create,r_=_s.create,n_=bi.create,i_=Nn.create,s_=Lr.create,a_=lo.create,o_=ir.create,l_=Ce.create,u_=Ce.strictCreate,c_=ws.create,d_=So.create,h_=bs.create,f_=wr.create,p_=xs.create,m_=uo.create,g_=zn.create,y_=fi.create,v_=ks.create,__=Ss.create,w_=rn.create,b_=Es.create,x_=xi.create,gu=Vt.create,k_=Rr.create,S_=Fn.create,E_=Vt.createWithPreprocess,O_=Ns.create,P_=()=>Mf().optional(),T_=()=>Uf().optional(),j_=()=>zf().optional(),C_={string:t=>tr.create({...t,coerce:!0}),number:t=>en.create({...t,coerce:!0}),boolean:t=>ys.create({...t,coerce:!0}),bigint:t=>tn.create({...t,coerce:!0}),date:t=>Un.create({...t,coerce:!0})},A_=ie;var Gm=Object.freeze({__proto__:null,defaultErrorMap:ms,setErrorMap:Z0,getErrorMap:io,makeIssue:so,EMPTY_PATH:K0,addIssueToContext:G,ParseStatus:ot,INVALID:ie,DIRTY:Lf,OK:wt,isAborted:pu,isDirty:mu,isValid:gs,isAsync:ao,get util(){return fe},get objectUtil(){return fu},ZodParsedType:W,getParsedType:Zr,ZodType:se,ZodString:tr,ZodNumber:en,ZodBigInt:tn,ZodBoolean:ys,ZodDate:Un,ZodSymbol:oo,ZodUndefined:vs,ZodNull:_s,ZodAny:bi,ZodUnknown:Nn,ZodNever:Lr,ZodVoid:lo,ZodArray:ir,ZodObject:Ce,ZodUnion:ws,ZodDiscriminatedUnion:So,ZodIntersection:bs,ZodTuple:wr,ZodRecord:xs,ZodMap:uo,ZodSet:zn,ZodFunction:fi,ZodLazy:ks,ZodLiteral:Ss,ZodEnum:rn,ZodNativeEnum:Es,ZodPromise:xi,ZodEffects:Vt,ZodTransformer:Vt,ZodOptional:Rr,ZodNullable:Fn,ZodDefault:Os,ZodCatch:co,ZodNaN:ho,BRAND:W0,ZodBranded:$f,ZodPipeline:Ns,ZodReadonly:fo,custom:Df,Schema:se,ZodSchema:se,late:J0,get ZodFirstPartyTypeKind(){return te},coerce:C_,any:n_,array:o_,bigint:Q0,boolean:zf,date:X0,discriminatedUnion:d_,effect:gu,enum:w_,function:y_,instanceof:G0,intersection:h_,lazy:v_,literal:__,map:m_,nan:Y0,nativeEnum:b_,never:s_,null:r_,nullable:S_,number:Uf,object:l_,oboolean:j_,onumber:T_,optional:k_,ostring:P_,pipeline:O_,preprocess:E_,promise:x_,record:p_,set:g_,strictObject:u_,string:Mf,symbol:e_,transformer:gu,tuple:f_,undefined:t_,union:c_,unknown:i_,void:a_,NEVER:A_,ZodIssueCode:B,quotelessJson:V0,ZodError:nr});const l2=Object.freeze(Object.defineProperty({__proto__:null,BRAND:W0,DIRTY:Lf,EMPTY_PATH:K0,INVALID:ie,NEVER:A_,OK:wt,ParseStatus:ot,Schema:se,ZodAny:bi,ZodArray:ir,ZodBigInt:tn,ZodBoolean:ys,ZodBranded:$f,ZodCatch:co,ZodDate:Un,ZodDefault:Os,ZodDiscriminatedUnion:So,ZodEffects:Vt,ZodEnum:rn,ZodError:nr,get ZodFirstPartyTypeKind(){return te},ZodFunction:fi,ZodIntersection:bs,ZodIssueCode:B,ZodLazy:ks,ZodLiteral:Ss,ZodMap:uo,ZodNaN:ho,ZodNativeEnum:Es,ZodNever:Lr,ZodNull:_s,ZodNullable:Fn,ZodNumber:en,ZodObject:Ce,ZodOptional:Rr,ZodParsedType:W,ZodPipeline:Ns,ZodPromise:xi,ZodReadonly:fo,ZodRecord:xs,ZodSchema:se,ZodSet:zn,ZodString:tr,ZodSymbol:oo,ZodTransformer:Vt,ZodTuple:wr,ZodType:se,ZodUndefined:vs,ZodUnion:ws,ZodUnknown:Nn,ZodVoid:lo,addIssueToContext:G,any:n_,array:o_,bigint:Q0,boolean:zf,coerce:C_,custom:Df,date:X0,default:Gm,defaultErrorMap:ms,discriminatedUnion:d_,effect:gu,enum:w_,function:y_,getErrorMap:io,getParsedType:Zr,instanceof:G0,intersection:h_,isAborted:pu,isAsync:ao,isDirty:mu,isValid:gs,late:J0,lazy:v_,literal:__,makeIssue:so,map:m_,nan:Y0,nativeEnum:b_,never:s_,null:r_,nullable:S_,number:Uf,object:l_,get objectUtil(){return fu},oboolean:j_,onumber:T_,optional:k_,ostring:P_,pipeline:O_,preprocess:E_,promise:x_,quotelessJson:V0,record:p_,set:g_,setErrorMap:Z0,strictObject:u_,string:Mf,symbol:e_,transformer:gu,tuple:f_,undefined:t_,union:c_,unknown:i_,get util(){return fe},void:a_,z:Gm},Symbol.toStringTag,{value:"Module"})),Ff=Bw(l2);var Ku={};Object.defineProperty(Ku,"__esModule",{value:!0});Ku.parseAnyDef=void 0;function u2(){return{}}Ku.parseAnyDef=u2;var Gs={},br={};Object.defineProperty(br,"__esModule",{value:!0});br.setResponseValueAndErrors=br.addErrorMessage=void 0;function I_(t,e,r,n){n!=null&&n.errorMessages&&r&&(t.errorMessage=Object.assign(Object.assign({},t.errorMessage),{[e]:r}))}br.addErrorMessage=I_;function c2(t,e,r,n,i){t[e]=r,I_(t,e,n,i)}br.setResponseValueAndErrors=c2;var Ym;function d2(){if(Ym)return Gs;Ym=1,Object.defineProperty(Gs,"__esModule",{value:!0}),Gs.parseArrayDef=void 0;const t=Ff,e=br,r=lt();function n(i,s){var a,o;const l={type:"array"};return((o=(a=i.type)===null||a===void 0?void 0:a._def)===null||o===void 0?void 0:o.typeName)!==t.ZodFirstPartyTypeKind.ZodAny&&(l.items=(0,r.parseDef)(i.type._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"items"]}))),i.minLength&&(0,e.setResponseValueAndErrors)(l,"minItems",i.minLength.value,i.minLength.message,s),i.maxLength&&(0,e.setResponseValueAndErrors)(l,"maxItems",i.maxLength.value,i.maxLength.message,s),i.exactLength&&((0,e.setResponseValueAndErrors)(l,"minItems",i.exactLength.value,i.exactLength.message,s),(0,e.setResponseValueAndErrors)(l,"maxItems",i.exactLength.value,i.exactLength.message,s)),l}return Gs.parseArrayDef=n,Gs}var qu={};Object.defineProperty(qu,"__esModule",{value:!0});qu.parseBigintDef=void 0;const Jn=br;function h2(t,e){const r={type:"integer",format:"int64"};if(!t.checks)return r;for(const n of t.checks)switch(n.kind){case"min":e.target==="jsonSchema7"?n.inclusive?(0,Jn.setResponseValueAndErrors)(r,"minimum",n.value,n.message,e):(0,Jn.setResponseValueAndErrors)(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),(0,Jn.setResponseValueAndErrors)(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?(0,Jn.setResponseValueAndErrors)(r,"maximum",n.value,n.message,e):(0,Jn.setResponseValueAndErrors)(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),(0,Jn.setResponseValueAndErrors)(r,"maximum",n.value,n.message,e));break;case"multipleOf":(0,Jn.setResponseValueAndErrors)(r,"multipleOf",n.value,n.message,e);break}return r}qu.parseBigintDef=h2;var Wu={};Object.defineProperty(Wu,"__esModule",{value:!0});Wu.parseBooleanDef=void 0;function f2(){return{type:"boolean"}}Wu.parseBooleanDef=f2;var Ys={},Qm;function p2(){if(Qm)return Ys;Qm=1,Object.defineProperty(Ys,"__esModule",{value:!0}),Ys.parseBrandedDef=void 0;const t=lt();function e(r,n){return(0,t.parseDef)(r.type._def,n)}return Ys.parseBrandedDef=e,Ys}var Qs={},Xm;function m2(){if(Xm)return Qs;Xm=1,Object.defineProperty(Qs,"__esModule",{value:!0}),Qs.parseCatchDef=void 0;const t=lt(),e=(r,n)=>(0,t.parseDef)(r.innerType._def,n);return Qs.parseCatchDef=e,Qs}var Ju={};Object.defineProperty(Ju,"__esModule",{value:!0});Ju.parseDateDef=void 0;const eg=br;function g2(t,e){return e.dateStrategy=="integer"?y2(t,e):{type:"string",format:"date-time"}}Ju.parseDateDef=g2;const y2=(t,e)=>{const r={type:"integer",format:"unix-time"};for(const n of t.checks)switch(n.kind){case"min":e.target==="jsonSchema7"&&(0,eg.setResponseValueAndErrors)(r,"minimum",n.value,n.message,e);break;case"max":e.target==="jsonSchema7"&&(0,eg.setResponseValueAndErrors)(r,"maximum",n.value,n.message,e);break}return r};var Xs={},tg;function v2(){if(tg)return Xs;tg=1,Object.defineProperty(Xs,"__esModule",{value:!0}),Xs.parseDefaultDef=void 0;const t=lt();function e(r,n){return Object.assign(Object.assign({},(0,t.parseDef)(r.innerType._def,n)),{default:r.defaultValue()})}return Xs.parseDefaultDef=e,Xs}var ea={},rg;function _2(){if(rg)return ea;rg=1,Object.defineProperty(ea,"__esModule",{value:!0}),ea.parseEffectsDef=void 0;const t=lt();function e(r,n){return n.effectStrategy==="input"?(0,t.parseDef)(r.schema._def,n):{}}return ea.parseEffectsDef=e,ea}var Gu={};Object.defineProperty(Gu,"__esModule",{value:!0});Gu.parseEnumDef=void 0;function w2(t){return{type:"string",enum:t.values}}Gu.parseEnumDef=w2;var ta={},ng;function b2(){if(ng)return ta;ng=1;var t=vl&&vl.__rest||function(i,s){var a={};for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.indexOf(o)<0&&(a[o]=i[o]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(i);l<o.length;l++)s.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(i,o[l])&&(a[o[l]]=i[o[l]]);return a};Object.defineProperty(ta,"__esModule",{value:!0}),ta.parseIntersectionDef=void 0;const e=lt(),r=i=>"type"in i&&i.type==="string"?!1:"allOf"in i;function n(i,s){const a=[(0,e.parseDef)(i.left._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"allOf","0"]})),(0,e.parseDef)(i.right._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"allOf","1"]}))].filter(u=>!!u);let o=s.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const l=[];return a.forEach(u=>{if(r(u))l.push(...u.allOf),u.unevaluatedProperties===void 0&&(o=void 0);else{let c=u;"additionalProperties"in u&&u.additionalProperties===!1?c=t(u,["additionalProperties"]):o=void 0,l.push(c)}}),l.length?Object.assign({allOf:l},o):void 0}return ta.parseIntersectionDef=n,ta}var Yu={};Object.defineProperty(Yu,"__esModule",{value:!0});Yu.parseLiteralDef=void 0;function x2(t,e){const r=typeof t.value;return r!=="bigint"&&r!=="number"&&r!=="boolean"&&r!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:r==="bigint"?"integer":r,enum:[t.value]}:{type:r==="bigint"?"integer":r,const:t.value}}Yu.parseLiteralDef=x2;var ra={},ig;function k2(){if(ig)return ra;ig=1,Object.defineProperty(ra,"__esModule",{value:!0}),ra.parseMapDef=void 0;const t=lt();function e(r,n){const i=(0,t.parseDef)(r.keyType._def,Object.assign(Object.assign({},n),{currentPath:[...n.currentPath,"items","items","0"]}))||{},s=(0,t.parseDef)(r.valueType._def,Object.assign(Object.assign({},n),{currentPath:[...n.currentPath,"items","items","1"]}))||{};return{type:"array",maxItems:125,items:{type:"array",items:[i,s],minItems:2,maxItems:2}}}return ra.parseMapDef=e,ra}var Qu={};Object.defineProperty(Qu,"__esModule",{value:!0});Qu.parseNativeEnumDef=void 0;function S2(t){const e=t.values,n=Object.keys(t.values).filter(s=>typeof e[e[s]]!="number").map(s=>e[s]),i=Array.from(new Set(n.map(s=>typeof s)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:n}}Qu.parseNativeEnumDef=S2;var Xu={};Object.defineProperty(Xu,"__esModule",{value:!0});Xu.parseNeverDef=void 0;function E2(){return{not:{}}}Xu.parseNeverDef=E2;var ec={};Object.defineProperty(ec,"__esModule",{value:!0});ec.parseNullDef=void 0;function O2(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}ec.parseNullDef=O2;var na={},Gc={},sg;function R_(){return sg||(sg=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.parseUnionDef=t.primitiveMappings=void 0;const e=lt();t.primitiveMappings={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function r(i,s){if(s.target==="openApi3")return n(i,s);const a=i.options instanceof Map?Array.from(i.options.values()):i.options;if(a.every(o=>o._def.typeName in t.primitiveMappings&&(!o._def.checks||!o._def.checks.length))){const o=a.reduce((l,u)=>{const c=t.primitiveMappings[u._def.typeName];return c&&!l.includes(c)?[...l,c]:l},[]);return{type:o.length>1?o:o[0]}}else if(a.every(o=>o._def.typeName==="ZodLiteral"&&!o.description)){const o=a.reduce((l,u)=>{const c=typeof u._def.value;switch(c){case"string":case"number":case"boolean":return[...l,c];case"bigint":return[...l,"integer"];case"object":if(u._def.value===null)return[...l,"null"];case"symbol":case"undefined":case"function":default:return l}},[]);if(o.length===a.length){const l=o.filter((u,c,d)=>d.indexOf(u)===c);return{type:l.length>1?l:l[0],enum:a.reduce((u,c)=>u.includes(c._def.value)?u:[...u,c._def.value],[])}}}else if(a.every(o=>o._def.typeName==="ZodEnum"))return{type:"string",enum:a.reduce((o,l)=>[...o,...l._def.values.filter(u=>!o.includes(u))],[])};return n(i,s)}t.parseUnionDef=r;const n=(i,s)=>{const a=(i.options instanceof Map?Array.from(i.options.values()):i.options).map((o,l)=>(0,e.parseDef)(o._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"anyOf",`${l}`]}))).filter(o=>!!o&&(!s.strictUnions||typeof o=="object"&&Object.keys(o).length>0));return a.length?{anyOf:a}:void 0}}(Gc)),Gc}var ag;function P2(){if(ag)return na;ag=1,Object.defineProperty(na,"__esModule",{value:!0}),na.parseNullableDef=void 0;const t=lt(),e=R_();function r(n,i){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(n.innerType._def.typeName)&&(!n.innerType._def.checks||!n.innerType._def.checks.length))return i.target==="openApi3"?{type:e.primitiveMappings[n.innerType._def.typeName],nullable:!0}:{type:[e.primitiveMappings[n.innerType._def.typeName],"null"]};if(i.target==="openApi3"){const a=(0,t.parseDef)(n.innerType._def,Object.assign(Object.assign({},i),{currentPath:[...i.currentPath]}));return a&&Object.assign(Object.assign({},a),{nullable:!0})}const s=(0,t.parseDef)(n.innerType._def,Object.assign(Object.assign({},i),{currentPath:[...i.currentPath,"anyOf","0"]}));return s&&{anyOf:[s,{type:"null"}]}}return na.parseNullableDef=r,na}var tc={};Object.defineProperty(tc,"__esModule",{value:!0});tc.parseNumberDef=void 0;const fn=br;function T2(t,e){const r={type:"number"};if(!t.checks)return r;for(const n of t.checks)switch(n.kind){case"int":r.type="integer",(0,fn.addErrorMessage)(r,"type",n.message,e);break;case"min":e.target==="jsonSchema7"?n.inclusive?(0,fn.setResponseValueAndErrors)(r,"minimum",n.value,n.message,e):(0,fn.setResponseValueAndErrors)(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),(0,fn.setResponseValueAndErrors)(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?(0,fn.setResponseValueAndErrors)(r,"maximum",n.value,n.message,e):(0,fn.setResponseValueAndErrors)(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),(0,fn.setResponseValueAndErrors)(r,"maximum",n.value,n.message,e));break;case"multipleOf":(0,fn.setResponseValueAndErrors)(r,"multipleOf",n.value,n.message,e);break}return r}tc.parseNumberDef=T2;var Gn={},og;function j2(){if(og)return Gn;og=1,Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.parseObjectDef=Gn.parseObjectDefX=void 0;const t=lt();function e(n,i){var s,a;Object.keys(n.shape()).reduce((l,u)=>{let c=n.shape()[u];const d=c.isOptional();d||(c=Object.assign({},c._def.innerSchema));const h=(0,t.parseDef)(c._def,Object.assign(Object.assign({},i),{currentPath:[...i.currentPath,"properties",u],propertyPath:[...i.currentPath,"properties",u]}));return h!==void 0&&(l.properties[u]=h,d||(l.required||(l.required=[]),l.required.push(u))),l},{type:"object",properties:{},additionalProperties:n.catchall._def.typeName==="ZodNever"?n.unknownKeys==="passthrough":(s=(0,t.parseDef)(n.catchall._def,Object.assign(Object.assign({},i),{currentPath:[...i.currentPath,"additionalProperties"]})))!==null&&s!==void 0?s:!0});const o=Object.assign(Object.assign({type:"object"},Object.entries(n.shape()).reduce((l,[u,c])=>{if(c===void 0||c._def===void 0)return l;const d=(0,t.parseDef)(c._def,Object.assign(Object.assign({},i),{currentPath:[...i.currentPath,"properties",u],propertyPath:[...i.currentPath,"properties",u]}));return d===void 0?l:{properties:Object.assign(Object.assign({},l.properties),{[u]:d}),required:c.isOptional()?l.required:[...l.required,u]}},{properties:{},required:[]})),{additionalProperties:n.catchall._def.typeName==="ZodNever"?n.unknownKeys==="passthrough":(a=(0,t.parseDef)(n.catchall._def,Object.assign(Object.assign({},i),{currentPath:[...i.currentPath,"additionalProperties"]})))!==null&&a!==void 0?a:!0});return o.required.length||delete o.required,o}Gn.parseObjectDefX=e;function r(n,i){var s;const a=Object.assign(Object.assign({type:"object"},Object.entries(n.shape()).reduce((o,[l,u])=>{if(u===void 0||u._def===void 0)return o;const c=(0,t.parseDef)(u._def,Object.assign(Object.assign({},i),{currentPath:[...i.currentPath,"properties",l],propertyPath:[...i.currentPath,"properties",l]}));return c===void 0?o:{properties:Object.assign(Object.assign({},o.properties),{[l]:c}),required:u.isOptional()?o.required:[...o.required,l]}},{properties:{},required:[]})),{additionalProperties:n.catchall._def.typeName==="ZodNever"?n.unknownKeys==="passthrough":(s=(0,t.parseDef)(n.catchall._def,Object.assign(Object.assign({},i),{currentPath:[...i.currentPath,"additionalProperties"]})))!==null&&s!==void 0?s:!0});return a.required.length||delete a.required,a}return Gn.parseObjectDef=r,Gn}var ia={},lg;function C2(){if(lg)return ia;lg=1,Object.defineProperty(ia,"__esModule",{value:!0}),ia.parseOptionalDef=void 0;const t=lt(),e=(r,n)=>{var i;if(n.currentPath.toString()===((i=n.propertyPath)===null||i===void 0?void 0:i.toString()))return(0,t.parseDef)(r.innerType._def,n);const s=(0,t.parseDef)(r.innerType._def,Object.assign(Object.assign({},n),{currentPath:[...n.currentPath,"anyOf","1"]}));return s?{anyOf:[{not:{}},s]}:{}};return ia.parseOptionalDef=e,ia}var sa={},ug;function A2(){if(ug)return sa;ug=1,Object.defineProperty(sa,"__esModule",{value:!0}),sa.parsePipelineDef=void 0;const t=lt(),e=(r,n)=>{if(n.pipeStrategy==="input")return(0,t.parseDef)(r.in._def,n);const i=(0,t.parseDef)(r.in._def,Object.assign(Object.assign({},n),{currentPath:[...n.currentPath,"allOf","0"]})),s=(0,t.parseDef)(r.out._def,Object.assign(Object.assign({},n),{currentPath:[...n.currentPath,"allOf",i?"1":"0"]}));return{allOf:[i,s].filter(a=>a!==void 0)}};return sa.parsePipelineDef=e,sa}var aa={},cg;function I2(){if(cg)return aa;cg=1,Object.defineProperty(aa,"__esModule",{value:!0}),aa.parsePromiseDef=void 0;const t=lt();function e(r,n){return(0,t.parseDef)(r.type._def,n)}return aa.parsePromiseDef=e,aa}var oa={},Bf={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.parseStringDef=t.emojiPattern=t.ulidPattern=t.cuid2Pattern=t.cuidPattern=t.emailPattern=void 0;const e=br;t.emailPattern='^(([^<>()[\\]\\\\.,;:\\s@\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\"]+)*)|(\\".+\\"))@((\\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\])|(\\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\\.[A-Za-z]{2,})+))$',t.cuidPattern="^c[^\\s-]{8,}$",t.cuid2Pattern="^[a-z][a-z0-9]*$",t.ulidPattern="/[0-9A-HJKMNP-TV-Z]{26}/",t.emojiPattern="/^(p{Extended_Pictographic}|p{Emoji_Component})+$/u";function r(a,o){const l={type:"string"};if(a.checks)for(const u of a.checks)switch(u.kind){case"min":(0,e.setResponseValueAndErrors)(l,"minLength",typeof l.minLength=="number"?Math.max(l.minLength,u.value):u.value,u.message,o);break;case"max":(0,e.setResponseValueAndErrors)(l,"maxLength",typeof l.maxLength=="number"?Math.min(l.maxLength,u.value):u.value,u.message,o);break;case"email":switch(o.emailStrategy){case"format:email":i(l,"email",u.message,o);break;case"format:idn-email":i(l,"idn-email",u.message,o);break;case"pattern:zod":s(l,t.emailPattern,u.message,o);break}break;case"url":i(l,"uri",u.message,o);break;case"uuid":i(l,"uuid",u.message,o);break;case"regex":s(l,u.regex.source,u.message,o);break;case"cuid":s(l,t.cuidPattern,u.message,o);break;case"cuid2":s(l,t.cuid2Pattern,u.message,o);break;case"startsWith":s(l,"^"+n(u.value),u.message,o);break;case"endsWith":s(l,n(u.value)+"$",u.message,o);break;case"datetime":i(l,"date-time",u.message,o);break;case"length":(0,e.setResponseValueAndErrors)(l,"minLength",typeof l.minLength=="number"?Math.max(l.minLength,u.value):u.value,u.message,o),(0,e.setResponseValueAndErrors)(l,"maxLength",typeof l.maxLength=="number"?Math.min(l.maxLength,u.value):u.value,u.message,o);break;case"includes":{s(l,n(u.value),u.message,o);break}case"ip":{u.version!=="v6"&&i(l,"ipv4",u.message,o),u.version!=="v4"&&i(l,"ipv6",u.message,o);break}case"emoji":s(l,t.emojiPattern,u.message,o);break;case"ulid":{s(l,t.ulidPattern,u.message,o);break}}return l}t.parseStringDef=r;const n=a=>Array.from(a).map(o=>/[a-zA-Z0-9]/.test(o)?o:`\\${o}`).join(""),i=(a,o,l,u)=>{var c;a.format||!((c=a.anyOf)===null||c===void 0)&&c.some(d=>d.format)?(a.anyOf||(a.anyOf=[]),a.format&&(a.anyOf.push(Object.assign({format:a.format},a.errorMessage&&u.errorMessages&&{errorMessage:{format:a.errorMessage.format}})),delete a.format,a.errorMessage&&(delete a.errorMessage.format,Object.keys(a.errorMessage).length===0&&delete a.errorMessage)),a.anyOf.push(Object.assign({format:o},l&&u.errorMessages&&{errorMessage:{format:l}}))):(0,e.setResponseValueAndErrors)(a,"format",o,l,u)},s=(a,o,l,u)=>{var c;a.pattern||!((c=a.allOf)===null||c===void 0)&&c.some(d=>d.pattern)?(a.allOf||(a.allOf=[]),a.pattern&&(a.allOf.push(Object.assign({pattern:a.pattern},a.errorMessage&&u.errorMessages&&{errorMessage:{pattern:a.errorMessage.pattern}})),delete a.pattern,a.errorMessage&&(delete a.errorMessage.pattern,Object.keys(a.errorMessage).length===0&&delete a.errorMessage)),a.allOf.push(Object.assign({pattern:o},l&&u.errorMessages&&{errorMessage:{pattern:l}}))):(0,e.setResponseValueAndErrors)(a,"pattern",o,l,u)}})(Bf);var dg;function R2(){if(dg)return oa;dg=1,Object.defineProperty(oa,"__esModule",{value:!0}),oa.parseRecordDef=void 0;const t=Ff,e=lt(),r=Bf;function n(i,s){var a,o,l,u,c;if(s.target==="openApi3"&&((a=i.keyType)===null||a===void 0?void 0:a._def.typeName)===t.ZodFirstPartyTypeKind.ZodEnum)return{type:"object",required:i.keyType._def.values,properties:i.keyType._def.values.reduce((h,b)=>{var v;return Object.assign(Object.assign({},h),{[b]:(v=(0,e.parseDef)(i.valueType._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"properties",b]})))!==null&&v!==void 0?v:{}})},{}),additionalProperties:!1};const d={type:"object",additionalProperties:(o=(0,e.parseDef)(i.valueType._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"additionalProperties"]})))!==null&&o!==void 0?o:{}};if(s.target==="openApi3")return d;if(((l=i.keyType)===null||l===void 0?void 0:l._def.typeName)===t.ZodFirstPartyTypeKind.ZodString&&(!((u=i.keyType._def.checks)===null||u===void 0)&&u.length)){const h=Object.entries((0,r.parseStringDef)(i.keyType._def,s)).reduce((b,[v,O])=>v==="type"?b:Object.assign(Object.assign({},b),{[v]:O}),{});return Object.assign(Object.assign({},d),{propertyNames:h})}else if(((c=i.keyType)===null||c===void 0?void 0:c._def.typeName)===t.ZodFirstPartyTypeKind.ZodEnum)return Object.assign(Object.assign({},d),{propertyNames:{enum:i.keyType._def.values}});return d}return oa.parseRecordDef=n,oa}var la={},hg;function N2(){if(hg)return la;hg=1,Object.defineProperty(la,"__esModule",{value:!0}),la.parseSetDef=void 0;const t=br,e=lt();function r(n,i){const a={type:"array",uniqueItems:!0,items:(0,e.parseDef)(n.valueType._def,Object.assign(Object.assign({},i),{currentPath:[...i.currentPath,"items"]}))};return n.minSize&&(0,t.setResponseValueAndErrors)(a,"minItems",n.minSize.value,n.minSize.message,i),n.maxSize&&(0,t.setResponseValueAndErrors)(a,"maxItems",n.maxSize.value,n.maxSize.message,i),a}return la.parseSetDef=r,la}var ua={},fg;function L2(){if(fg)return ua;fg=1,Object.defineProperty(ua,"__esModule",{value:!0}),ua.parseTupleDef=void 0;const t=lt();function e(r,n){return r.rest?{type:"array",minItems:r.items.length,items:r.items.map((i,s)=>(0,t.parseDef)(i._def,Object.assign(Object.assign({},n),{currentPath:[...n.currentPath,"items",`${s}`]}))).reduce((i,s)=>s===void 0?i:[...i,s],[]),additionalItems:(0,t.parseDef)(r.rest._def,Object.assign(Object.assign({},n),{currentPath:[...n.currentPath,"additionalItems"]}))}:{type:"array",minItems:r.items.length,maxItems:r.items.length,items:r.items.map((i,s)=>(0,t.parseDef)(i._def,Object.assign(Object.assign({},n),{currentPath:[...n.currentPath,"items",`${s}`]}))).reduce((i,s)=>s===void 0?i:[...i,s],[])}}return ua.parseTupleDef=e,ua}var rc={};Object.defineProperty(rc,"__esModule",{value:!0});rc.parseUndefinedDef=void 0;function $2(){return{not:{}}}rc.parseUndefinedDef=$2;var nc={};Object.defineProperty(nc,"__esModule",{value:!0});nc.parseUnknownDef=void 0;function D2(){return{}}nc.parseUnknownDef=D2;var pg;function lt(){if(pg)return Js;pg=1,Object.defineProperty(Js,"__esModule",{value:!0}),Js.parseDef=void 0;const t=Ff,e=Ku,r=d2(),n=qu,i=Wu,s=p2(),a=m2(),o=Ju,l=v2(),u=_2(),c=Gu,d=b2(),h=Yu,b=k2(),v=Qu,O=Xu,k=ec,p=P2(),m=tc,f=j2(),S=C2(),A=A2(),x=I2(),j=R2(),_=N2(),P=Bf,w=L2(),R=rc,L=R_(),ee=nc;function Q($,F,H=!1){const ye=F.seen.get($);if(ye&&!H){const qt=ne(ye,F);if(qt!==void 0)return qt}const Pt={def:$,path:F.currentPath,jsonSchema:void 0};F.seen.set($,Pt);const Qe=me($,$.typeName,F);return Qe&&V($,F,Qe),Pt.jsonSchema=Qe,Qe}Js.parseDef=Q;const ne=($,F)=>{switch(F.$refStrategy){case"root":return{$ref:$.path.length===0?"":$.path.length===1?`${$.path[0]}/`:$.path.join("/")};case"relative":return{$ref:J(F.currentPath,$.path)};case"none":return $.path.length<F.currentPath.length&&$.path.every((H,ye)=>F.currentPath[ye]===H)?(console.warn(`Recursive reference detected at ${F.currentPath.join("/")}! Defaulting to any`),{}):void 0;case"seen":return $.path.length<F.currentPath.length&&$.path.every((H,ye)=>F.currentPath[ye]===H)?(console.warn(`Recursive reference detected at ${F.currentPath.join("/")}! Defaulting to any`),{}):$.jsonSchema}},J=($,F)=>{let H=0;for(;H<$.length&&H<F.length&&$[H]===F[H];H++);return[($.length-H).toString(),...F.slice(H)].join("/")},me=($,F,H)=>{switch(F){case t.ZodFirstPartyTypeKind.ZodString:return(0,P.parseStringDef)($,H);case t.ZodFirstPartyTypeKind.ZodNumber:return(0,m.parseNumberDef)($,H);case t.ZodFirstPartyTypeKind.ZodObject:return(0,f.parseObjectDef)($,H);case t.ZodFirstPartyTypeKind.ZodBigInt:return(0,n.parseBigintDef)($,H);case t.ZodFirstPartyTypeKind.ZodBoolean:return(0,i.parseBooleanDef)();case t.ZodFirstPartyTypeKind.ZodDate:return(0,o.parseDateDef)($,H);case t.ZodFirstPartyTypeKind.ZodUndefined:return(0,R.parseUndefinedDef)();case t.ZodFirstPartyTypeKind.ZodNull:return(0,k.parseNullDef)(H);case t.ZodFirstPartyTypeKind.ZodArray:return(0,r.parseArrayDef)($,H);case t.ZodFirstPartyTypeKind.ZodUnion:case t.ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return(0,L.parseUnionDef)($,H);case t.ZodFirstPartyTypeKind.ZodIntersection:return(0,d.parseIntersectionDef)($,H);case t.ZodFirstPartyTypeKind.ZodTuple:return(0,w.parseTupleDef)($,H);case t.ZodFirstPartyTypeKind.ZodRecord:return(0,j.parseRecordDef)($,H);case t.ZodFirstPartyTypeKind.ZodLiteral:return(0,h.parseLiteralDef)($,H);case t.ZodFirstPartyTypeKind.ZodEnum:return(0,c.parseEnumDef)($);case t.ZodFirstPartyTypeKind.ZodNativeEnum:return(0,v.parseNativeEnumDef)($);case t.ZodFirstPartyTypeKind.ZodNullable:return(0,p.parseNullableDef)($,H);case t.ZodFirstPartyTypeKind.ZodOptional:return(0,S.parseOptionalDef)($,H);case t.ZodFirstPartyTypeKind.ZodMap:return(0,b.parseMapDef)($,H);case t.ZodFirstPartyTypeKind.ZodSet:return(0,_.parseSetDef)($,H);case t.ZodFirstPartyTypeKind.ZodLazy:return Q($.getter()._def,H);case t.ZodFirstPartyTypeKind.ZodPromise:return(0,x.parsePromiseDef)($,H);case t.ZodFirstPartyTypeKind.ZodNaN:case t.ZodFirstPartyTypeKind.ZodNever:return(0,O.parseNeverDef)();case t.ZodFirstPartyTypeKind.ZodEffects:return(0,u.parseEffectsDef)($,H);case t.ZodFirstPartyTypeKind.ZodAny:return(0,e.parseAnyDef)();case t.ZodFirstPartyTypeKind.ZodUnknown:return(0,ee.parseUnknownDef)();case t.ZodFirstPartyTypeKind.ZodDefault:return(0,l.parseDefaultDef)($,H);case t.ZodFirstPartyTypeKind.ZodBranded:return(0,s.parseBrandedDef)($,H);case t.ZodFirstPartyTypeKind.ZodCatch:return(0,a.parseCatchDef)($,H);case t.ZodFirstPartyTypeKind.ZodPipeline:return(0,A.parsePipelineDef)($,H);case t.ZodFirstPartyTypeKind.ZodFunction:case t.ZodFirstPartyTypeKind.ZodVoid:case t.ZodFirstPartyTypeKind.ZodSymbol:return;default:return(ye=>{})()}},V=($,F,H)=>($.description&&(H.description=$.description,F.markdownDescription&&(H.markdownDescription=$.description)),H);return Js}var ic={},N_={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultOptions=t.defaultOptions=void 0,t.defaultOptions={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"string",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,emailStrategy:"format:email"};const e=r=>typeof r=="string"?Object.assign(Object.assign({},t.defaultOptions),{name:r}):Object.assign(Object.assign({},t.defaultOptions),r);t.getDefaultOptions=e})(N_);Object.defineProperty(ic,"__esModule",{value:!0});ic.getRefs=void 0;const M2=N_,U2=t=>{const e=(0,M2.getDefaultOptions)(t),r=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return Object.assign(Object.assign({},e),{currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([n,i])=>[i._def,{def:i._def,path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))})};ic.getRefs=U2;Object.defineProperty(Zu,"__esModule",{value:!0});Zu.zodToJsonSchema=void 0;const mg=lt(),z2=ic,F2=(t,e)=>{var r;const n=(0,z2.getRefs)(e),i=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((l,[u,c])=>{var d;return Object.assign(Object.assign({},l),{[u]:(d=(0,mg.parseDef)(c._def,Object.assign(Object.assign({},n),{currentPath:[...n.basePath,n.definitionPath,u]}),!0))!==null&&d!==void 0?d:{}})},{}):void 0,s=typeof e=="string"?e:e==null?void 0:e.name,a=(r=(0,mg.parseDef)(t._def,s===void 0?n:Object.assign(Object.assign({},n),{currentPath:[...n.basePath,n.definitionPath,s]}),!1))!==null&&r!==void 0?r:{},o=s===void 0?i?Object.assign(Object.assign({},a),{[n.definitionPath]:i}):a:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,s].join("/"),[n.definitionPath]:Object.assign(Object.assign({},i),{[s]:a})};return n.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":n.target==="jsonSchema2019-09"&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),o};Zu.zodToJsonSchema=F2;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.zodToJsonSchema=void 0;const e=Zu;Object.defineProperty(t,"zodToJsonSchema",{enumerable:!0,get:function(){return e.zodToJsonSchema}}),t.default=e.zodToJsonSchema})(B0);function B2(t){return{name:t.name,description:t.description,parameters:B0.zodToJsonSchema(t.schema)}}function V2(t){const{azureOpenAIApiDeploymentName:e,azureOpenAIApiInstanceName:r,azureOpenAIApiKey:n,azureOpenAIBasePath:i,baseURL:s}=t;if(n&&i&&e)return`${i}/${e}`;if(n){if(!r)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!e)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${r}.openai.azure.com/openai/deployments/${e}`}return s}const H2=()=>typeof window<"u"&&typeof window.document<"u",Z2=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",K2=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),L_=()=>typeof Deno<"u",q2=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!L_(),W2=()=>{let t;return H2()?t="browser":q2()?t="node":Z2()?t="webworker":K2()?t="jsdom":L_()?t="deno":t="other",t};let Yc;async function J2(){return Yc===void 0&&(Yc={library:"langchain-js",runtime:W2()}),Yc}function pt(t){var e;try{return typeof process<"u"?(e=process.env)==null?void 0:e[t]:void 0}catch{return}}const G2=async(t,e,r,n,i,s,a,o)=>(await t.call(fetch,"https://api.promptlayer.com/track-request",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({function_name:e,provider:"langchain",kwargs:r,tags:n,request_response:i,request_start_time:Math.floor(s/1e3),request_end_time:Math.floor(a/1e3),api_key:o})})).json();let el;const Y2=new Uint8Array(16);function Q2(){if(!el&&(el=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!el))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return el(Y2)}const et=[];for(let t=0;t<256;++t)et.push((t+256).toString(16).slice(1));function X2(t,e=0){return et[t[e+0]]+et[t[e+1]]+et[t[e+2]]+et[t[e+3]]+"-"+et[t[e+4]]+et[t[e+5]]+"-"+et[t[e+6]]+et[t[e+7]]+"-"+et[t[e+8]]+et[t[e+9]]+"-"+et[t[e+10]]+et[t[e+11]]+et[t[e+12]]+et[t[e+13]]+et[t[e+14]]+et[t[e+15]]}const eO=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),gg={randomUUID:eO};function Hr(t,e,r){if(gg.randomUUID&&!e&&!t)return gg.randomUUID();t=t||{};const n=t.random||(t.rng||Q2)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return X2(n)}class tO{}class Eo extends tO{get lc_namespace(){return["langchain","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,M0(this.constructor)]}constructor(e){var r;super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:typeof process<"u"?((r=process.env)==null?void 0:r.LANGCHAIN_CALLBACKS_BACKGROUND)!=="true":!0}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever)}copy(){return new this.constructor(this)}toJSON(){return Mn.prototype.toJSON.call(this)}toJSONNotImplemented(){return Mn.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class r extends Eo{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Hr()}),Object.assign(this,e)}}return new r}}var Vf={exports:{}};Vf.exports;(function(t){const r=(s=0)=>a=>`\x1B[${38+s};5;${a}m`,n=(s=0)=>(a,o,l)=>`\x1B[${38+s};2;${a};${o};${l}m`;function i(){const s=new Map,a={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};a.color.gray=a.color.blackBright,a.bgColor.bgGray=a.bgColor.bgBlackBright,a.color.grey=a.color.blackBright,a.bgColor.bgGrey=a.bgColor.bgBlackBright;for(const[o,l]of Object.entries(a)){for(const[u,c]of Object.entries(l))a[u]={open:`\x1B[${c[0]}m`,close:`\x1B[${c[1]}m`},l[u]=a[u],s.set(c[0],c[1]);Object.defineProperty(a,o,{value:l,enumerable:!1})}return Object.defineProperty(a,"codes",{value:s,enumerable:!1}),a.color.close="\x1B[39m",a.bgColor.close="\x1B[49m",a.color.ansi256=r(),a.color.ansi16m=n(),a.bgColor.ansi256=r(10),a.bgColor.ansi16m=n(10),Object.defineProperties(a,{rgbToAnsi256:{value:(o,l,u)=>o===l&&l===u?o<8?16:o>248?231:Math.round((o-8)/247*24)+232:16+36*Math.round(o/255*5)+6*Math.round(l/255*5)+Math.round(u/255*5),enumerable:!1},hexToRgb:{value:o=>{const l=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(o.toString(16));if(!l)return[0,0,0];let{colorString:u}=l.groups;u.length===3&&(u=u.split("").map(d=>d+d).join(""));const c=Number.parseInt(u,16);return[c>>16&255,c>>8&255,c&255]},enumerable:!1},hexToAnsi256:{value:o=>a.rgbToAnsi256(...a.hexToRgb(o)),enumerable:!1}}),a}Object.defineProperty(t,"exports",{enumerable:!0,get:i})})(Vf);var rO=Vf.exports;const $_=Ts(rO);function Qc(t,e){return t&&!Array.isArray(t)&&typeof t=="object"?t:{[e]:t}}class sc extends Eo{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}_addChildRun(e,r){e.child_runs.push(r)}async _startTrace(e){var r;if(e.parent_run_id!==void 0){const n=this.runMap.get(e.parent_run_id);n&&(this._addChildRun(n,e),n.child_execution_order=Math.max(n.child_execution_order,e.child_execution_order))}this.runMap.set(e.id,e),await((r=this.onRunCreate)==null?void 0:r.call(this,e))}async _endTrace(e){var n;const r=e.parent_run_id!==void 0&&this.runMap.get(e.parent_run_id);r?r.child_execution_order=Math.max(r.child_execution_order,e.child_execution_order):await this.persistRun(e),this.runMap.delete(e.id),await((n=this.onRunUpdate)==null?void 0:n.call(this,e))}_getExecutionOrder(e){const r=e!==void 0&&this.runMap.get(e);return r?r.child_execution_order+1:1}async handleLLMStart(e,r,n,i,s,a,o,l){var b;const u=this._getExecutionOrder(i),c=Date.now(),d=o?{...s,metadata:o}:s,h={id:n,name:l??e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{prompts:r},execution_order:u,child_runs:[],child_execution_order:u,run_type:"llm",extra:d??{},tags:a||[]};return await this._startTrace(h),await((b=this.onLLMStart)==null?void 0:b.call(this,h)),h}async handleChatModelStart(e,r,n,i,s,a,o,l){var b;const u=this._getExecutionOrder(i),c=Date.now(),d=o?{...s,metadata:o}:s,h={id:n,name:l??e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{messages:r},execution_order:u,child_runs:[],child_execution_order:u,run_type:"llm",extra:d??{},tags:a||[]};return await this._startTrace(h),await((b=this.onLLMStart)==null?void 0:b.call(this,h)),h}async handleLLMEnd(e,r){var i;const n=this.runMap.get(r);if(!n||(n==null?void 0:n.run_type)!=="llm")throw new Error("No LLM run to end.");return n.end_time=Date.now(),n.outputs=e,n.events.push({name:"end",time:new Date(n.end_time).toISOString()}),await((i=this.onLLMEnd)==null?void 0:i.call(this,n)),await this._endTrace(n),n}async handleLLMError(e,r){var i;const n=this.runMap.get(r);if(!n||(n==null?void 0:n.run_type)!=="llm")throw new Error("No LLM run to end.");return n.end_time=Date.now(),n.error=e.message,n.events.push({name:"error",time:new Date(n.end_time).toISOString()}),await((i=this.onLLMError)==null?void 0:i.call(this,n)),await this._endTrace(n),n}async handleChainStart(e,r,n,i,s,a,o,l){var h;const u=this._getExecutionOrder(i),c=Date.now(),d={id:n,name:l??e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:r,execution_order:u,child_execution_order:u,run_type:o??"chain",child_runs:[],extra:a?{metadata:a}:{},tags:s||[]};return await this._startTrace(d),await((h=this.onChainStart)==null?void 0:h.call(this,d)),d}async handleChainEnd(e,r,n,i,s){var o;const a=this.runMap.get(r);if(!a)throw new Error("No chain run to end.");return a.end_time=Date.now(),a.outputs=Qc(e,"output"),a.events.push({name:"end",time:new Date(a.end_time).toISOString()}),(s==null?void 0:s.inputs)!==void 0&&(a.inputs=Qc(s.inputs,"input")),await((o=this.onChainEnd)==null?void 0:o.call(this,a)),await this._endTrace(a),a}async handleChainError(e,r,n,i,s){var o;const a=this.runMap.get(r);if(!a)throw new Error("No chain run to end.");return a.end_time=Date.now(),a.error=e.message,a.events.push({name:"error",time:new Date(a.end_time).toISOString()}),(s==null?void 0:s.inputs)!==void 0&&(a.inputs=Qc(s.inputs,"input")),await((o=this.onChainError)==null?void 0:o.call(this,a)),await this._endTrace(a),a}async handleToolStart(e,r,n,i,s,a,o){var d;const l=this._getExecutionOrder(i),u=Date.now(),c={id:n,name:o??e.id[e.id.length-1],parent_run_id:i,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{input:r},execution_order:l,child_execution_order:l,run_type:"tool",child_runs:[],extra:a?{metadata:a}:{},tags:s||[]};return await this._startTrace(c),await((d=this.onToolStart)==null?void 0:d.call(this,c)),c}async handleToolEnd(e,r){var i;const n=this.runMap.get(r);if(!n||(n==null?void 0:n.run_type)!=="tool")throw new Error("No tool run to end");return n.end_time=Date.now(),n.outputs={output:e},n.events.push({name:"end",time:new Date(n.end_time).toISOString()}),await((i=this.onToolEnd)==null?void 0:i.call(this,n)),await this._endTrace(n),n}async handleToolError(e,r){var i;const n=this.runMap.get(r);if(!n||(n==null?void 0:n.run_type)!=="tool")throw new Error("No tool run to end");return n.end_time=Date.now(),n.error=e.message,n.events.push({name:"error",time:new Date(n.end_time).toISOString()}),await((i=this.onToolError)==null?void 0:i.call(this,n)),await this._endTrace(n),n}async handleAgentAction(e,r){var s;const n=this.runMap.get(r);if(!n||(n==null?void 0:n.run_type)!=="chain")return;const i=n;i.actions=i.actions||[],i.actions.push(e),i.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:e}}),await((s=this.onAgentAction)==null?void 0:s.call(this,n))}async handleAgentEnd(e,r){var i;const n=this.runMap.get(r);!n||(n==null?void 0:n.run_type)!=="chain"||(n.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:e}}),await((i=this.onAgentEnd)==null?void 0:i.call(this,n)))}async handleRetrieverStart(e,r,n,i,s,a,o){var d;const l=this._getExecutionOrder(i),u=Date.now(),c={id:n,name:o??e.id[e.id.length-1],parent_run_id:i,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{query:r},execution_order:l,child_execution_order:l,run_type:"retriever",child_runs:[],extra:a?{metadata:a}:{},tags:s||[]};return await this._startTrace(c),await((d=this.onRetrieverStart)==null?void 0:d.call(this,c)),c}async handleRetrieverEnd(e,r){var i;const n=this.runMap.get(r);if(!n||(n==null?void 0:n.run_type)!=="retriever")throw new Error("No retriever run to end");return n.end_time=Date.now(),n.outputs={documents:e},n.events.push({name:"end",time:new Date(n.end_time).toISOString()}),await((i=this.onRetrieverEnd)==null?void 0:i.call(this,n)),await this._endTrace(n),n}async handleRetrieverError(e,r){var i;const n=this.runMap.get(r);if(!n||(n==null?void 0:n.run_type)!=="retriever")throw new Error("No retriever run to end");return n.end_time=Date.now(),n.error=e.message,n.events.push({name:"error",time:new Date(n.end_time).toISOString()}),await((i=this.onRetrieverError)==null?void 0:i.call(this,n)),await this._endTrace(n),n}async handleText(e,r){var i;const n=this.runMap.get(r);!n||(n==null?void 0:n.run_type)!=="chain"||(n.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:e}}),await((i=this.onText)==null?void 0:i.call(this,n)))}async handleLLMNewToken(e,r,n,i,s,a){var l;const o=this.runMap.get(n);if(!o||(o==null?void 0:o.run_type)!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return o.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:e,idx:r,chunk:a==null?void 0:a.chunk}}),await((l=this.onLLMNewToken)==null?void 0:l.call(this,o,e)),o}}function bt(t,e){return`${t.open}${e}${t.close}`}function dr(t,e){try{return JSON.stringify(t,null,2)}catch{return e}}function pn(t){if(!t.end_time)return"";const e=t.end_time-t.start_time;return e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`}const{color:jt}=$_;class yg extends sc{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){const r=[];let n=e;for(;n.parent_run_id;){const i=this.runMap.get(n.parent_run_id);if(i)r.push(i),n=i;else break}return r}getBreadcrumbs(e){const n=[...this.getParents(e).reverse(),e].map((i,s,a)=>{const o=`${i.execution_order}:${i.run_type}:${i.name}`;return s===a.length-1?bt($_.bold,o):o}).join(" > ");return bt(jt.grey,n)}onChainStart(e){const r=this.getBreadcrumbs(e);console.log(`${bt(jt.green,"[chain/start]")} [${r}] Entering Chain run with input: ${dr(e.inputs,"[inputs]")}`)}onChainEnd(e){const r=this.getBreadcrumbs(e);console.log(`${bt(jt.cyan,"[chain/end]")} [${r}] [${pn(e)}] Exiting Chain run with output: ${dr(e.outputs,"[outputs]")}`)}onChainError(e){const r=this.getBreadcrumbs(e);console.log(`${bt(jt.red,"[chain/error]")} [${r}] [${pn(e)}] Chain run errored with error: ${dr(e.error,"[error]")}`)}onLLMStart(e){const r=this.getBreadcrumbs(e),n="prompts"in e.inputs?{prompts:e.inputs.prompts.map(i=>i.trim())}:e.inputs;console.log(`${bt(jt.green,"[llm/start]")} [${r}] Entering LLM run with input: ${dr(n,"[inputs]")}`)}onLLMEnd(e){const r=this.getBreadcrumbs(e);console.log(`${bt(jt.cyan,"[llm/end]")} [${r}] [${pn(e)}] Exiting LLM run with output: ${dr(e.outputs,"[response]")}`)}onLLMError(e){const r=this.getBreadcrumbs(e);console.log(`${bt(jt.red,"[llm/error]")} [${r}] [${pn(e)}] LLM run errored with error: ${dr(e.error,"[error]")}`)}onToolStart(e){var n;const r=this.getBreadcrumbs(e);console.log(`${bt(jt.green,"[tool/start]")} [${r}] Entering Tool run with input: "${(n=e.inputs.input)==null?void 0:n.trim()}"`)}onToolEnd(e){var n,i;const r=this.getBreadcrumbs(e);console.log(`${bt(jt.cyan,"[tool/end]")} [${r}] [${pn(e)}] Exiting Tool run with output: "${(i=(n=e.outputs)==null?void 0:n.output)==null?void 0:i.trim()}"`)}onToolError(e){const r=this.getBreadcrumbs(e);console.log(`${bt(jt.red,"[tool/error]")} [${r}] [${pn(e)}] Tool run errored with error: ${dr(e.error,"[error]")}`)}onRetrieverStart(e){const r=this.getBreadcrumbs(e);console.log(`${bt(jt.green,"[retriever/start]")} [${r}] Entering Retriever run with input: ${dr(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){const r=this.getBreadcrumbs(e);console.log(`${bt(jt.cyan,"[retriever/end]")} [${r}] [${pn(e)}] Exiting Retriever run with output: ${dr(e.outputs,"[outputs]")}`)}onRetrieverError(e){const r=this.getBreadcrumbs(e);console.log(`${bt(jt.red,"[retriever/error]")} [${r}] [${pn(e)}] Retriever run errored with error: ${dr(e.error,"[error]")}`)}onAgentAction(e){const r=e,n=this.getBreadcrumbs(e);console.log(`${bt(jt.blue,"[agent/action]")} [${n}] Agent selected action: ${dr(r.actions[r.actions.length-1],"[action]")}`)}}const nO=[400,401,403,404,405,406,407,408,409];class iO{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6;const r="default"in Jr?Jr.default:Jr;this.queue=new r({concurrency:this.maxConcurrency})}call(e,...r){return this.queue.add(()=>ou(()=>e(...r).catch(n=>{throw n instanceof Error?n:new Error(n)}),{onFailedAttempt(n){var s;if(n.message.startsWith("Cancel")||n.message.startsWith("TimeoutError")||n.message.startsWith("AbortError")||(n==null?void 0:n.code)==="ECONNABORTED")throw n;const i=(s=n==null?void 0:n.response)==null?void 0:s.status;if(i&&nO.includes(+i))throw n},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,r,...n){return e.signal?Promise.race([this.call(r,...n),new Promise((i,s)=>{var a;(a=e.signal)==null||a.addEventListener("abort",()=>{s(new Error("AbortError"))})})]):this.call(r,...n)}fetch(...e){return this.call(()=>fetch(...e).then(r=>r.ok?r:Promise.reject(r)))}}function vg(t){return typeof(t==null?void 0:t._getType)=="function"}function _g(t){const e={type:t._getType(),data:{content:t.content}};return t!=null&&t.additional_kwargs&&Object.keys(t.additional_kwargs).length>0&&(e.data.additional_kwargs={...t.additional_kwargs}),e}const sO=()=>typeof window<"u"&&typeof window.document<"u",aO=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",oO=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),D_=()=>typeof Deno<"u",lO=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!D_(),uO=()=>{let t;return sO()?t="browser":lO()?t="node":aO()?t="webworker":oO()?t="jsdom":D_()?t="deno":t="other",t};let Xc;async function cO(){if(Xc===void 0){const t=uO(),e=dO();Xc={library:"langsmith",runtime:t,...e}}return Xc}function as(t){var e;try{return typeof process<"u"?(e=process.env)==null?void 0:e[t]:void 0}catch{return}}let ed;function dO(){if(ed!==void 0)return ed;const t=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],e={};for(const r of t){const n=as(r);n!==void 0&&(e[r]=n)}return ed=e,e}const wg=t=>{const r=t.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return r==="localhost"||r==="127.0.0.1"||r==="::1"},Ri=async(t,e)=>{const r=await t.text();if(!t.ok)throw new Error(`Failed to ${e}: ${t.status} ${t.statusText} ${r}`)};async function hO(t){const e=[];for await(const r of t)e.push(r);return e}function td(t){if(t!==void 0)return t.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}function bg(t){return as("LANGCHAIN_HIDE_INPUTS")==="true"?{}:t}function xg(t){return as("LANGCHAIN_HIDE_OUTPUTS")==="true"?{}:t}class Hf{constructor(e={}){Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null});const r=Hf.getDefaultClientConfig();this.apiUrl=td(e.apiUrl??r.apiUrl)??"",this.apiKey=td(e.apiKey??r.apiKey),this.webUrl=td(e.webUrl??r.webUrl),this.validateApiKeyIfHosted(),this.timeout_ms=e.timeout_ms??4e3,this.caller=new iO(e.callerOptions??{})}static getDefaultClientConfig(){const e=as("LANGCHAIN_API_KEY");return{apiUrl:as("LANGCHAIN_ENDPOINT")??(e?"https://api.smith.langchain.com":"http://localhost:1984"),apiKey:e,webUrl:void 0}}validateApiKeyIfHosted(){if(!wg(this.apiUrl)&&!this.apiKey)throw new Error("API key must be provided when using hosted LangSmith API")}getHostUrl(){return this.webUrl?this.webUrl:wg(this.apiUrl)?(this.webUrl="http://localhost","http://localhost"):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com","https://dev.smith.langchain.com"):(this.webUrl="https://smith.langchain.com","https://smith.langchain.com")}get headers(){const e={};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),e}async _get(e,r){const n=(r==null?void 0:r.toString())??"",i=`${this.apiUrl}${e}?${n}`,s=await this.caller.call(fetch,i,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!s.ok)throw new Error(`Failed to fetch ${e}: ${s.status} ${s.statusText}`);return s.json()}async*_getPaginated(e,r=new URLSearchParams){let n=Number(r.get("offset"))||0;const i=Number(r.get("limit"))||100;for(;;){r.set("offset",String(n)),r.set("limit",String(i));const s=`${this.apiUrl}${e}?${r}`,a=await this.caller.call(fetch,s,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!a.ok)throw new Error(`Failed to fetch ${e}: ${a.status} ${a.statusText}`);const o=await a.json();if(o.length===0||(yield o,o.length<i))break;n+=o.length}}async createRun(e){const r={...this.headers,"Content-Type":"application/json"},n=e.extra??{},i=await cO(),s=e.project_name;delete e.project_name;const a={session_name:s,...e,extra:{...e.extra,runtime:{...i,...n.runtime}}};a.inputs=bg(a.inputs),a.outputs&&(a.outputs=xg(a.outputs));const o=await this.caller.call(fetch,`${this.apiUrl}/runs`,{method:"POST",headers:r,body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms)});await Ri(o,"create run")}async updateRun(e,r){r.inputs&&(r.inputs=bg(r.inputs)),r.outputs&&(r.outputs=xg(r.outputs));const n={...this.headers,"Content-Type":"application/json"},i=await this.caller.call(fetch,`${this.apiUrl}/runs/${e}`,{method:"PATCH",headers:n,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms)});await Ri(i,"update run")}async readRun(e,{loadChildRuns:r}={loadChildRuns:!1}){let n=await this._get(`/runs/${e}`);return r&&n.child_run_ids&&(n=await this._loadChildRuns(n)),n}async getRunUrl({runId:e,run:r,projectOpts:n}){if(r!==void 0){let i;r.session_id?i=r.session_id:n!=null&&n.projectName?i=(await this.readProject({projectName:n==null?void 0:n.projectName})).id:n!=null&&n.projectId?i=n==null?void 0:n.projectId:i=(await this.readProject({projectName:as("LANGCHAIN_PROJECT")||"default"})).id;const s=await this._getTenantId();return`${this.getHostUrl()}/o/${s}/projects/p/${i}/r/${r.id}?poll=true`}else if(e!==void 0){const i=await this.readRun(e);if(!i.app_path)throw new Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${i.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(e){const r=await hO(this.listRuns({id:e.child_run_ids})),n={},i={};r.sort((s,a)=>((s==null?void 0:s.dotted_order)??"").localeCompare((a==null?void 0:a.dotted_order)??""));for(const s of r){if(s.parent_run_id===null||s.parent_run_id===void 0)throw new Error(`Child run ${s.id} has no parent`);s.parent_run_id in n||(n[s.parent_run_id]=[]),n[s.parent_run_id].push(s),i[s.id]=s}e.child_runs=n[e.id]||[];for(const s in n)s!==e.id&&(i[s].child_runs=n[s]);return e}async*listRuns({projectId:e,projectName:r,parentRunId:n,referenceExampleId:i,startTime:s,executionOrder:a,runType:o,error:l,id:u,limit:c,offset:d,query:h,filter:b}){const v=new URLSearchParams;let O=e;if(r){if(e)throw new Error("Only one of projectId or projectName may be given");O=(await this.readProject({projectName:r})).id}if(O&&v.append("session",O),n&&v.append("parent_run",n),i&&v.append("reference_example",i),s&&v.append("start_time",s.toISOString()),a&&v.append("execution_order",a.toString()),o&&v.append("run_type",o),l!==void 0&&v.append("error",l.toString()),u!==void 0)for(const k of u)v.append("id",k);c!==void 0&&v.append("limit",c.toString()),d!==void 0&&v.append("offset",d.toString()),h!==void 0&&v.append("query",h),b!==void 0&&v.append("filter",b);for await(const k of this._getPaginated("/runs",v))yield*k}async shareRun(e,{shareId:r}={}){const n={run_id:e,share_token:r||Hr()},s=await(await this.caller.call(fetch,`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(n),signal:AbortSignal.timeout(this.timeout_ms)})).json();if(s===null||!("share_token"in s))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${s.share_token}/r`}async unshareRun(e){const r=await this.caller.call(fetch,`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});await Ri(r,"unshare run")}async readRunSharedLink(e){const n=await(await this.caller.call(fetch,`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)})).json();if(!(n===null||!("share_token"in n)))return`${this.getHostUrl()}/public/${n.share_token}/r`}async createProject({projectName:e,projectExtra:r,upsert:n,referenceDatasetId:i}){const s=n?"?upsert=true":"",a=`${this.apiUrl}/sessions${s}`,o={name:e};r!==void 0&&(o.extra=r),i!==void 0&&(o.reference_dataset_id=i);const l=await this.caller.call(fetch,a,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms)}),u=await l.json();if(!l.ok)throw new Error(`Failed to create session ${e}: ${l.status} ${l.statusText}`);return u}async readProject({projectId:e,projectName:r}){let n="/sessions";const i=new URLSearchParams;if(e!==void 0&&r!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)n+=`/${e}`;else if(r!==void 0)i.append("name",r);else throw new Error("Must provide projectName or projectId");const s=await this._get(n,i);let a;if(Array.isArray(s)){if(s.length===0)throw new Error(`Project[id=${e}, name=${r}] not found`);a=s[0]}else a=s;return a}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;const e=new URLSearchParams({limit:"1"});for await(const r of this._getPaginated("/sessions",e))return this._tenantId=r[0].tenant_id,r[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:e,name:r,nameContains:n,referenceDatasetId:i,referenceDatasetName:s,referenceFree:a}={}){const o=new URLSearchParams;if(e!==void 0)for(const l of e)o.append("id",l);if(r!==void 0&&o.append("name",r),n!==void 0&&o.append("name_contains",n),i!==void 0)o.append("reference_dataset",i);else if(s!==void 0){const l=await this.readDataset({datasetName:s});o.append("reference_dataset",l.id)}a!==void 0&&o.append("reference_free",a.toString());for await(const l of this._getPaginated("/sessions",o))yield*l}async deleteProject({projectId:e,projectName:r}){let n;if(e===void 0&&r===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&r!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?n=(await this.readProject({projectName:r})).id:n=e;const i=await this.caller.call(fetch,`${this.apiUrl}/sessions/${n}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});await Ri(i,`delete session ${n} (${r})`)}async uploadCsv({csvFile:e,fileName:r,inputKeys:n,outputKeys:i,description:s,dataType:a,name:o}){const l=`${this.apiUrl}/datasets/upload`,u=new FormData;u.append("file",e,r),n.forEach(h=>{u.append("input_keys",h)}),i.forEach(h=>{u.append("output_keys",h)}),s&&u.append("description",s),a&&u.append("data_type",a),o&&u.append("name",o);const c=await this.caller.call(fetch,l,{method:"POST",headers:this.headers,body:u,signal:AbortSignal.timeout(this.timeout_ms)});if(!c.ok){const h=await c.json();throw h.detail&&h.detail.includes("already exists")?new Error(`Dataset ${r} already exists`):new Error(`Failed to upload CSV: ${c.status} ${c.statusText}`)}return await c.json()}async createDataset(e,{description:r,dataType:n}={}){const i={name:e,description:r};n&&(i.data_type=n);const s=await this.caller.call(fetch,`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(i),signal:AbortSignal.timeout(this.timeout_ms)});if(!s.ok){const o=await s.json();throw o.detail&&o.detail.includes("already exists")?new Error(`Dataset ${e} already exists`):new Error(`Failed to create dataset ${s.status} ${s.statusText}`)}return await s.json()}async readDataset({datasetId:e,datasetName:r}){let n="/datasets";const i=new URLSearchParams({limit:"1"});if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)n+=`/${e}`;else if(r!==void 0)i.append("name",r);else throw new Error("Must provide datasetName or datasetId");const s=await this._get(n,i);let a;if(Array.isArray(s)){if(s.length===0)throw new Error(`Dataset[id=${e}, name=${r}] not found`);a=s[0]}else a=s;return a}async*listDatasets({limit:e=100,offset:r=0,datasetIds:n,datasetName:i,datasetNameContains:s}={}){const a="/datasets",o=new URLSearchParams({limit:e.toString(),offset:r.toString()});if(n!==void 0)for(const l of n)o.append("id",l);i!==void 0&&o.append("name",i),s!==void 0&&o.append("name_contains",s);for await(const l of this._getPaginated(a,o))yield*l}async deleteDataset({datasetId:e,datasetName:r}){let n="/datasets",i=e;if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(r!==void 0&&(i=(await this.readDataset({datasetName:r})).id),i!==void 0)n+=`/${i}`;else throw new Error("Must provide datasetName or datasetId");const s=await this.caller.call(fetch,this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!s.ok)throw new Error(`Failed to delete ${n}: ${s.status} ${s.statusText}`);await s.json()}async createExample(e,r,{datasetId:n,datasetName:i,createdAt:s,exampleId:a}){let o=n;if(o===void 0&&i===void 0)throw new Error("Must provide either datasetName or datasetId");if(o!==void 0&&i!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");o===void 0&&(o=(await this.readDataset({datasetName:i})).id);const u={dataset_id:o,inputs:e,outputs:r,created_at:(s||new Date).toISOString(),id:a},c=await this.caller.call(fetch,`${this.apiUrl}/examples`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms)});if(!c.ok)throw new Error(`Failed to create example: ${c.status} ${c.statusText}`);return await c.json()}async createLLMExample(e,r,n){return this.createExample({input:e},{output:r},n)}async createChatExample(e,r,n){const i=e.map(a=>vg(a)?_g(a):a),s=vg(r)?_g(r):r;return this.createExample({input:i},{output:s},n)}async readExample(e){const r=`/examples/${e}`;return await this._get(r)}async*listExamples({datasetId:e,datasetName:r,exampleIds:n}={}){let i;if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)i=e;else if(r!==void 0)i=(await this.readDataset({datasetName:r})).id;else throw new Error("Must provide a datasetName or datasetId");const s=new URLSearchParams({dataset:i});if(n!==void 0)for(const a of n)s.append("id",a);for await(const a of this._getPaginated("/examples",s))yield*a}async deleteExample(e){const r=`/examples/${e}`,n=await this.caller.call(fetch,this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!n.ok)throw new Error(`Failed to delete ${r}: ${n.status} ${n.statusText}`);await n.json()}async updateExample(e,r){const n=await this.caller.call(fetch,`${this.apiUrl}/examples/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms)});if(!n.ok)throw new Error(`Failed to update example ${e}: ${n.status} ${n.statusText}`);return await n.json()}async evaluateRun(e,r,{sourceInfo:n,loadChildRuns:i}={loadChildRuns:!1}){let s;if(typeof e=="string")s=await this.readRun(e,{loadChildRuns:i});else if(typeof e=="object"&&"id"in e)s=e;else throw new Error(`Invalid run type: ${typeof e}`);let a;s.reference_example_id!==null&&s.reference_example_id!==void 0&&(a=await this.readExample(s.reference_example_id));const o=await r.evaluateRun(s,a);let l=n??{};return o.evaluatorInfo&&(l={...l,...o.evaluatorInfo}),await this.createFeedback(s.id,o.key,{score:o.score,value:o.value,comment:o.comment,correction:o.correction,sourceInfo:l,feedbackSourceType:"model"})}async createFeedback(e,r,{score:n,value:i,correction:s,comment:a,sourceInfo:o,feedbackSourceType:l="api",sourceRunId:u,feedbackId:c}){const d={type:l??"api",metadata:o??{}};u!==void 0&&(d==null?void 0:d.metadata)!==void 0&&!d.metadata.__run&&(d.metadata.__run={run_id:u});const h={id:c??Hr(),run_id:e,key:r,score:n,value:i,correction:s,comment:a,feedback_source:d},b=await this.caller.call(fetch,`${this.apiUrl}/feedback`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(h),signal:AbortSignal.timeout(this.timeout_ms)});return await Ri(b,"create feedback"),h}async updateFeedback(e,{score:r,value:n,correction:i,comment:s}){const a={};r!=null&&(a.score=r),n!=null&&(a.value=n),i!=null&&(a.correction=i),s!=null&&(a.comment=s);const o=await this.caller.call(fetch,`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms)});await Ri(o,"update feedback")}async readFeedback(e){const r=`/feedback/${e}`;return await this._get(r)}async deleteFeedback(e){const r=`/feedback/${e}`,n=await this.caller.call(fetch,this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!n.ok)throw new Error(`Failed to delete ${r}: ${n.status} ${n.statusText}`);await n.json()}async*listFeedback({runIds:e,feedbackKeys:r,feedbackSourceTypes:n}={}){const i=new URLSearchParams;if(e&&i.append("run",e.join(",")),r)for(const s of r)i.append("key",s);if(n)for(const s of n)i.append("source",s);for await(const s of this._getPaginated("/feedback",i))yield*s}}class fO extends sc{constructor(e={}){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{exampleId:r,projectName:n,client:i}=e;this.projectName=n??pt("LANGCHAIN_PROJECT")??pt("LANGCHAIN_SESSION"),this.exampleId=r,this.client=i??new Hf({})}async _convertToCreate(e,r=void 0){return{...e,extra:{...e.extra,runtime:await J2()},child_runs:void 0,session_name:this.projectName,reference_example_id:e.parent_run_id?void 0:r}}async persistRun(e){}async _persistRunSingle(e){const r=await this._convertToCreate(e,this.exampleId);await this.client.createRun(r)}async _updateRunSingle(e){const r={end_time:e.end_time,error:e.error,outputs:e.outputs,events:e.events,inputs:e.inputs};await this.client.updateRun(e.id,r)}async onRetrieverStart(e){await this._persistRunSingle(e)}async onRetrieverEnd(e){await this._updateRunSingle(e)}async onRetrieverError(e){await this._updateRunSingle(e)}async onLLMStart(e){await this._persistRunSingle(e)}async onLLMEnd(e){await this._updateRunSingle(e)}async onLLMError(e){await this._updateRunSingle(e)}async onChainStart(e){await this._persistRunSingle(e)}async onChainEnd(e){await this._updateRunSingle(e)}async onChainError(e){await this._updateRunSingle(e)}async onToolStart(e){await this._persistRunSingle(e)}async onToolEnd(e){await this._updateRunSingle(e)}async onToolError(e){await this._updateRunSingle(e)}}class pO{}const M_=(t,e)=>{if(e!==void 0)return t[e];const r=Object.keys(t);if(r.length===1)return t[r[0]]},mO=(t,e)=>{const r=M_(t,e);if(!r){const n=Object.keys(t);throw new Error(`input values have ${n.length} keys, you must specify an input key or pass only 1 key as input`)}return r},gO=(t,e)=>{const r=M_(t,e);if(!r){const n=Object.keys(t);throw new Error(`output values have ${n.length} keys, you must specify an output key or pass only 1 key as output`)}return r};function Zf(t,e="Human",r="AI"){const n=[];for(const i of t){let s;if(i._getType()==="human")s=e;else if(i._getType()==="ai")s=r;else if(i._getType()==="system")s="System";else if(i._getType()==="function")s="Function";else if(i._getType()==="generic")s=i.role;else throw new Error(`Got unsupported message type: ${i}`);const a=i.name?`${i.name}, `:"";n.push(`${s}: ${a}${i.content}`)}return n.join(`
`)}class yO extends sc{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"endpoint",{enumerable:!0,configurable:!0,writable:!0,value:pt("LANGCHAIN_ENDPOINT")||"http://localhost:1984"}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:{"Content-Type":"application/json"}}),Object.defineProperty(this,"session",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const e=pt("LANGCHAIN_API_KEY");e&&(this.headers["x-api-key"]=e)}async newSession(e){const r={start_time:Date.now(),name:e},n=await this.persistSession(r);return this.session=n,n}async loadSession(e){const r=`${this.endpoint}/sessions?name=${e}`;return this._handleSessionResponse(r)}async loadDefaultSession(){const e=`${this.endpoint}/sessions?name=default`;return this._handleSessionResponse(e)}async convertV2RunToRun(e){var s;const r=this.session??await this.loadDefaultSession(),n=e.serialized;let i;if(e.run_type==="llm"){const a=e.inputs.prompts?e.inputs.prompts:e.inputs.messages.map(l=>Zf(l));i={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:n,type:e.run_type,session_id:r.id,prompts:a,response:e.outputs}}else if(e.run_type==="chain"){const a=await Promise.all(e.child_runs.map(l=>this.convertV2RunToRun(l)));i={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:n,type:e.run_type,session_id:r.id,inputs:e.inputs,outputs:e.outputs,child_llm_runs:a.filter(l=>l.type==="llm"),child_chain_runs:a.filter(l=>l.type==="chain"),child_tool_runs:a.filter(l=>l.type==="tool")}}else if(e.run_type==="tool"){const a=await Promise.all(e.child_runs.map(l=>this.convertV2RunToRun(l)));i={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:n,type:e.run_type,session_id:r.id,tool_input:e.inputs.input,output:(s=e.outputs)==null?void 0:s.output,action:JSON.stringify(n),child_llm_runs:a.filter(l=>l.type==="llm"),child_chain_runs:a.filter(l=>l.type==="chain"),child_tool_runs:a.filter(l=>l.type==="tool")}}else throw new Error(`Unknown run type: ${e.run_type}`);return i}async persistRun(e){let r,n;e.run_type!==void 0?n=await this.convertV2RunToRun(e):n=e,n.type==="llm"?r=`${this.endpoint}/llm-runs`:n.type==="chain"?r=`${this.endpoint}/chain-runs`:r=`${this.endpoint}/tool-runs`;const i=await fetch(r,{method:"POST",headers:this.headers,body:JSON.stringify(n)});i.ok||console.error(`Failed to persist run: ${i.status} ${i.statusText}`)}async persistSession(e){const r=`${this.endpoint}/sessions`,n=await fetch(r,{method:"POST",headers:this.headers,body:JSON.stringify(e)});return n.ok?{id:(await n.json()).id,...e}:(console.error(`Failed to persist session: ${n.status} ${n.statusText}, using default session.`),{id:1,...e})}async _handleSessionResponse(e){const r=await fetch(e,{method:"GET",headers:this.headers});let n;if(!r.ok)return console.error(`Failed to load session: ${r.status} ${r.statusText}`),n={id:1,start_time:Date.now()},this.session=n,n;const i=await r.json();return i.length===0?(n={id:1,start_time:Date.now()},this.session=n,n):([n]=i,this.session=n,n)}}async function vO(t){const e=new yO;return t?await e.loadSession(t):await e.loadDefaultSession(),e}async function _O(){return new fO}let rd;function wO(){const t="default"in Jr?Jr.default:Jr;return new t({autoStart:!0,concurrency:1})}async function nt(t,e){e===!0?await t():(typeof rd>"u"&&(rd=wO()),rd.add(t))}function bO(t){return t?Array.isArray(t)||"name"in t?{callbacks:t}:t:{}}class xO{setHandler(e){return this.setHandlers([e])}}class ac{constructor(e,r,n,i,s,a,o,l){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:l})}async handleText(e){await Promise.all(this.handlers.map(r=>nt(async()=>{var n;try{await((n=r.handleText)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch(i){console.error(`Error in handler ${r.constructor.name}, handleText: ${i}`)}},r.awaitHandlers)))}}class kO extends ac{getChild(e){const r=new Ft(this.runId);return r.setHandlers(this.inheritableHandlers),r.addTags(this.inheritableTags),r.addMetadata(this.inheritableMetadata),e&&r.addTags([e],!1),r}async handleRetrieverEnd(e){await Promise.all(this.handlers.map(r=>nt(async()=>{var n;if(!r.ignoreRetriever)try{await((n=r.handleRetrieverEnd)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch{console.error(`Error in handler ${r.constructor.name}, handleRetriever`)}},r.awaitHandlers)))}async handleRetrieverError(e){await Promise.all(this.handlers.map(r=>nt(async()=>{var n;if(!r.ignoreRetriever)try{await((n=r.handleRetrieverError)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch(i){console.error(`Error in handler ${r.constructor.name}, handleRetrieverError: ${i}`)}},r.awaitHandlers)))}}class kg extends ac{async handleLLMNewToken(e,r,n,i,s,a){await Promise.all(this.handlers.map(o=>nt(async()=>{var l;if(!o.ignoreLLM)try{await((l=o.handleLLMNewToken)==null?void 0:l.call(o,e,r??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,a))}catch(u){console.error(`Error in handler ${o.constructor.name}, handleLLMNewToken: ${u}`)}},o.awaitHandlers)))}async handleLLMError(e){await Promise.all(this.handlers.map(r=>nt(async()=>{var n;if(!r.ignoreLLM)try{await((n=r.handleLLMError)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch(i){console.error(`Error in handler ${r.constructor.name}, handleLLMError: ${i}`)}},r.awaitHandlers)))}async handleLLMEnd(e){await Promise.all(this.handlers.map(r=>nt(async()=>{var n;if(!r.ignoreLLM)try{await((n=r.handleLLMEnd)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch(i){console.error(`Error in handler ${r.constructor.name}, handleLLMEnd: ${i}`)}},r.awaitHandlers)))}}class SO extends ac{getChild(e){const r=new Ft(this.runId);return r.setHandlers(this.inheritableHandlers),r.addTags(this.inheritableTags),r.addMetadata(this.inheritableMetadata),e&&r.addTags([e],!1),r}async handleChainError(e,r,n,i,s){await Promise.all(this.handlers.map(a=>nt(async()=>{var o;if(!a.ignoreChain)try{await((o=a.handleChainError)==null?void 0:o.call(a,e,this.runId,this._parentRunId,this.tags,s))}catch(l){console.error(`Error in handler ${a.constructor.name}, handleChainError: ${l}`)}},a.awaitHandlers)))}async handleChainEnd(e,r,n,i,s){await Promise.all(this.handlers.map(a=>nt(async()=>{var o;if(!a.ignoreChain)try{await((o=a.handleChainEnd)==null?void 0:o.call(a,e,this.runId,this._parentRunId,this.tags,s))}catch(l){console.error(`Error in handler ${a.constructor.name}, handleChainEnd: ${l}`)}},a.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(r=>nt(async()=>{var n;if(!r.ignoreAgent)try{await((n=r.handleAgentAction)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch(i){console.error(`Error in handler ${r.constructor.name}, handleAgentAction: ${i}`)}},r.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(r=>nt(async()=>{var n;if(!r.ignoreAgent)try{await((n=r.handleAgentEnd)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch(i){console.error(`Error in handler ${r.constructor.name}, handleAgentEnd: ${i}`)}},r.awaitHandlers)))}}class EO extends ac{getChild(e){const r=new Ft(this.runId);return r.setHandlers(this.inheritableHandlers),r.addTags(this.inheritableTags),r.addMetadata(this.inheritableMetadata),e&&r.addTags([e],!1),r}async handleToolError(e){await Promise.all(this.handlers.map(r=>nt(async()=>{var n;if(!r.ignoreAgent)try{await((n=r.handleToolError)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch(i){console.error(`Error in handler ${r.constructor.name}, handleToolError: ${i}`)}},r.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(r=>nt(async()=>{var n;if(!r.ignoreAgent)try{await((n=r.handleToolEnd)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch(i){console.error(`Error in handler ${r.constructor.name}, handleToolEnd: ${i}`)}},r.awaitHandlers)))}}class Ft extends xO{constructor(e){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=[],this.inheritableHandlers=[],this._parentRunId=e}async handleLLMStart(e,r,n=void 0,i=void 0,s=void 0){return Promise.all(r.map(async a=>{const o=Hr();return await Promise.all(this.handlers.map(l=>nt(async()=>{var u;if(!l.ignoreLLM)try{await((u=l.handleLLMStart)==null?void 0:u.call(l,e,[a],o,this._parentRunId,s,this.tags,this.metadata))}catch(c){console.error(`Error in handler ${l.constructor.name}, handleLLMStart: ${c}`)}},l.awaitHandlers))),new kg(o,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(e,r,n=void 0,i=void 0,s=void 0){return Promise.all(r.map(async a=>{const o=Hr();return await Promise.all(this.handlers.map(l=>nt(async()=>{var u,c;if(!l.ignoreLLM)try{if(l.handleChatModelStart)await((u=l.handleChatModelStart)==null?void 0:u.call(l,e,[a],o,this._parentRunId,s,this.tags,this.metadata));else if(l.handleLLMStart){const d=Zf(a);await((c=l.handleLLMStart)==null?void 0:c.call(l,e,[d],o,this._parentRunId,s,this.tags,this.metadata))}}catch(d){console.error(`Error in handler ${l.constructor.name}, handleLLMStart: ${d}`)}},l.awaitHandlers))),new kg(o,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(e,r,n=Hr(),i=void 0){return await Promise.all(this.handlers.map(s=>nt(async()=>{var a;if(!s.ignoreChain)try{await((a=s.handleChainStart)==null?void 0:a.call(s,e,r,n,this._parentRunId,this.tags,this.metadata,i))}catch(o){console.error(`Error in handler ${s.constructor.name}, handleChainStart: ${o}`)}},s.awaitHandlers))),new SO(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,r,n=Hr()){return await Promise.all(this.handlers.map(i=>nt(async()=>{var s;if(!i.ignoreAgent)try{await((s=i.handleToolStart)==null?void 0:s.call(i,e,r,n,this._parentRunId,this.tags,this.metadata))}catch(a){console.error(`Error in handler ${i.constructor.name}, handleToolStart: ${a}`)}},i.awaitHandlers))),new EO(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,r,n=Hr(),i=void 0){return await Promise.all(this.handlers.map(s=>nt(async()=>{var a;if(!s.ignoreRetriever)try{await((a=s.handleRetrieverStart)==null?void 0:a.call(s,e,r,n,this._parentRunId,this.tags,this.metadata))}catch(o){console.error(`Error in handler ${s.constructor.name}, handleRetrieverStart: ${o}`)}},s.awaitHandlers))),new kO(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}addHandler(e,r=!0){this.handlers.push(e),r&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(r=>r!==e),this.inheritableHandlers=this.inheritableHandlers.filter(r=>r!==e)}setHandlers(e,r=!0){this.handlers=[],this.inheritableHandlers=[];for(const n of e)this.addHandler(n,r)}addTags(e,r=!0){this.removeTags(e),this.tags.push(...e),r&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(r=>!e.includes(r)),this.inheritableTags=this.inheritableTags.filter(r=>!e.includes(r))}addMetadata(e,r=!0){this.metadata={...this.metadata,...e},r&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(const r of Object.keys(e))delete this.metadata[r],delete this.inheritableMetadata[r]}copy(e=[],r=!0){const n=new Ft(this._parentRunId);for(const i of this.handlers){const s=this.inheritableHandlers.includes(i);n.addHandler(i,s)}for(const i of this.tags){const s=this.inheritableTags.includes(i);n.addTags([i],s)}for(const i of Object.keys(this.metadata)){const s=Object.keys(this.inheritableMetadata).includes(i);n.addMetadata({[i]:this.metadata[i]},s)}for(const i of e)n.handlers.filter(s=>s.name==="console_callback_handler").some(s=>s.name===i.name)||n.addHandler(i,r);return n}static fromHandlers(e){class r extends Eo{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Hr()}),Object.assign(this,e)}}const n=new this;return n.addHandler(new r),n}static async configure(e,r,n,i,s,a,o){let l;(e||r)&&(Array.isArray(e)||!e?(l=new Ft,l.setHandlers((e==null?void 0:e.map(Sg))??[],!0)):l=e,l=l.copy(Array.isArray(r)?r.map(Sg):r==null?void 0:r.handlers,!1));const u=pt("LANGCHAIN_VERBOSE")||(o==null?void 0:o.verbose),c=pt("LANGCHAIN_TRACING_V2")==="true",d=c||(pt("LANGCHAIN_TRACING")??!1);if(u||d){if(l||(l=new Ft),u&&!l.handlers.some(h=>h.name===yg.prototype.name)){const h=new yg;l.addHandler(h,!0)}if(d&&!l.handlers.some(h=>h.name==="langchain_tracer"))if(c)l.addHandler(await _O(),!0);else{const h=pt("LANGCHAIN_PROJECT")&&pt("LANGCHAIN_SESSION");l.addHandler(await vO(h),!0)}}return(n||i)&&l&&(l.addTags(n??[]),l.addTags(i??[],!1)),(s||a)&&l&&(l.addMetadata(s??{}),l.addMetadata(a??{},!1)),l}}function Sg(t){return"name"in t?t:Eo.fromMethods(t)}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */const OO=Object.prototype.hasOwnProperty;function PO(t,e){return OO.call(t,e)}function TO(t){if(Array.isArray(t)){const r=new Array(t.length);for(let n=0;n<r.length;n++)r[n]=""+n;return r}if(Object.keys)return Object.keys(t);let e=[];for(let r in t)PO(t,r)&&e.push(r);return e}function Ps(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function lh(t){let e=0;const r=t.length;let n;for(;e<r;){if(n=t.charCodeAt(e),n>=48&&n<=57){e++;continue}return!1}return!0}function jO(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function uh(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(let r=0,n=t.length;r<n;r++)if(uh(t[r]))return!0}else if(typeof t=="object"){const r=TO(t),n=r.length;for(var e=0;e<n;e++)if(uh(t[r[e]]))return!0}}return!1}function Eg(t,e){const r=[t];for(const n in e){const i=typeof e[n]=="object"?JSON.stringify(e[n],null,2):e[n];typeof i<"u"&&r.push(`${n}: ${i}`)}return r.join(`
`)}class CO extends Error{constructor(e,r,n,i,s){super(Eg(e,{name:r,index:n,operation:i,tree:s})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.setPrototypeOf(this,new.target.prototype),this.message=Eg(e,{name:r,index:n,operation:i,tree:s})}}const Be=CO,Yi={add:function(t,e,r){return t[e]=this.value,{newDocument:r}},remove:function(t,e,r){var n=t[e];return delete t[e],{newDocument:r,removed:n}},replace:function(t,e,r){var n=t[e];return t[e]=this.value,{newDocument:r,removed:n}},move:function(t,e,r){let n=ch(r,this.path);n&&(n=Ps(n));const i=Aa(r,{op:"remove",path:this.from}).removed;return Aa(r,{op:"add",path:this.path,value:i}),{newDocument:r,removed:n}},copy:function(t,e,r){const n=ch(r,this.from);return Aa(r,{op:"add",path:this.path,value:Ps(n)}),{newDocument:r}},test:function(t,e,r){return{newDocument:r,test:yu(t[e],this.value)}},_get:function(t,e,r){return this.value=t[e],{newDocument:r}}};var AO={add:function(t,e,r){return lh(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:r,index:e}},remove:function(t,e,r){var n=t.splice(e,1);return{newDocument:r,removed:n[0]}},replace:function(t,e,r){var n=t[e];return t[e]=this.value,{newDocument:r,removed:n}},move:Yi.move,copy:Yi.copy,test:Yi.test,_get:Yi._get};function ch(t,e){if(e=="")return t;var r={op:"_get",path:e};return Aa(t,r),r.value}function Aa(t,e,r=!1,n=!0,i=!0,s=0){if(r&&(typeof r=="function"?r(e,0,t,e.path):dh(e,0)),e.path===""){let a={newDocument:t};if(e.op==="add")return a.newDocument=e.value,a;if(e.op==="replace")return a.newDocument=e.value,a.removed=t,a;if(e.op==="move"||e.op==="copy")return a.newDocument=ch(t,e.from),e.op==="move"&&(a.removed=t),a;if(e.op==="test"){if(a.test=yu(t,e.value),a.test===!1)throw new Be("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return a.newDocument=t,a}else{if(e.op==="remove")return a.removed=t,a.newDocument=null,a;if(e.op==="_get")return e.value=t,a;if(r)throw new Be("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,e,t);return a}}else{n||(t=Ps(t));const o=(e.path||"").split("/");let l=t,u=1,c=o.length,d,h,b;for(typeof r=="function"?b=r:b=dh;;){if(h=o[u],h&&h.indexOf("~")!=-1&&(h=jO(h)),i&&(h=="__proto__"||h=="prototype"&&u>0&&o[u-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(r&&d===void 0&&(l[h]===void 0?d=o.slice(0,u).join("/"):u==c-1&&(d=e.path),d!==void 0&&b(e,0,t,d)),u++,Array.isArray(l)){if(h==="-")h=l.length;else{if(r&&!lh(h))throw new Be("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,e,t);lh(h)&&(h=~~h)}if(u>=c){if(r&&e.op==="add"&&h>l.length)throw new Be("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,e,t);const v=AO[e.op].call(e,l,h,t);if(v.test===!1)throw new Be("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return v}}else if(u>=c){const v=Yi[e.op].call(e,l,h,t);if(v.test===!1)throw new Be("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return v}if(l=l[h],r&&u<c&&(!l||typeof l!="object"))throw new Be("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,e,t)}}}function Kf(t,e,r,n=!0,i=!0){if(r&&!Array.isArray(e))throw new Be("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");n||(t=Ps(t));const s=new Array(e.length);for(let a=0,o=e.length;a<o;a++)s[a]=Aa(t,e[a],r,!0,i,a),t=s[a].newDocument;return s.newDocument=t,s}function dh(t,e,r,n){if(typeof t!="object"||t===null||Array.isArray(t))throw new Be("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,r);if(Yi[t.op]){if(typeof t.path!="string")throw new Be("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,r);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new Be('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,r);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new Be("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,r);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new Be("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,r);if((t.op==="add"||t.op==="replace"||t.op==="test")&&uh(t.value))throw new Be("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,r);if(r){if(t.op=="add"){var i=t.path.split("/").length,s=n.split("/").length;if(i!==s+1&&i!==s)throw new Be("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,r)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==n)throw new Be("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,r)}else if(t.op==="move"||t.op==="copy"){var a={op:"_get",path:t.from,value:void 0},o=IO([a],r);if(o&&o.name==="OPERATION_PATH_UNRESOLVABLE")throw new Be("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,r)}}}else throw new Be("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,r)}function IO(t,e,r){try{if(!Array.isArray(t))throw new Be("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)Kf(Ps(e),Ps(t),r||!0);else{r=r||dh;for(var n=0;n<t.length;n++)r(t[n],n,e,void 0)}}catch(i){if(i instanceof Be)return i;throw i}}function yu(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var r=Array.isArray(t),n=Array.isArray(e),i,s,a;if(r&&n){if(s=t.length,s!=e.length)return!1;for(i=s;i--!==0;)if(!yu(t[i],e[i]))return!1;return!0}if(r!=n)return!1;var o=Object.keys(t);if(s=o.length,s!==Object.keys(e).length)return!1;for(i=s;i--!==0;)if(!e.hasOwnProperty(o[i]))return!1;for(i=s;i--!==0;)if(a=o[i],!yu(t[a],e[a]))return!1;return!0}return t!==t&&e!==e}class po extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const e=await this.reader.read();return e.done&&this.reader.releaseLock(),e}catch(e){throw this.reader.releaseLock(),e}}async return(){this.ensureReader();const e=this.reader.cancel();return this.reader.releaseLock(),await e,{done:!0,value:void 0}}[Symbol.asyncIterator](){return this}static fromReadableStream(e){const r=e.getReader();return new po({start(n){return i();function i(){return r.read().then(({done:s,value:a})=>{if(s){n.close();return}return n.enqueue(a),i()})}}})}static fromAsyncGenerator(e){return new po({async pull(r){const{value:n,done:i}=await e.next();i?r.close():n&&r.enqueue(n)}})}}class ri{constructor(e){Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=e.ops}concat(e){const r=this.ops.concat(e.ops),n=Kf({},r);return new qf({ops:r,state:n[n.length-1].newDocument})}}class qf extends ri{constructor(e){super(e),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=e.state}concat(e){const r=this.ops.concat(e.ops),n=Kf(this.state,e.ops);return new qf({ops:r,state:n[n.length-1].newDocument})}}class RO extends sc{constructor(e){super(e),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"indexMap",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=po.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.parent_run_id===void 0)return!1;const r=e.tags??[];let n=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(n=n||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(n=n||this.includeTypes.includes(e.run_type)),this.includeTags!==void 0&&(n=n||r.find(i=>{var s;return(s=this.includeTags)==null?void 0:s.includes(i)})!==void 0),this.excludeNames!==void 0&&(n=n&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(n=n&&!this.excludeTypes.includes(e.run_type)),this.excludeTags!==void 0&&(n=n&&r.every(i=>{var s;return!((s=this.excludeTags)!=null&&s.includes(i))})),n}async onRunCreate(e){var n;if(e.parent_run_id===void 0&&await this.writer.write(new ri({ops:[{op:"replace",path:"",value:{id:e.id,streamed_output:[],final_output:void 0,logs:[]}}]})),!this._includeRun(e))return;this.indexMap[e.id]=Math.max(...Object.values(this.indexMap),-1)+1;const r={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:((n=e.extra)==null?void 0:n.metadata)??{},start_time:new Date(e.start_time).toISOString(),streamed_output_str:[],final_output:void 0,end_time:void 0};await this.writer.write(new ri({ops:[{op:"add",path:`/logs/${this.indexMap[e.id]}`,value:r}]}))}async onRunUpdate(e){try{const r=this.indexMap[e.id];if(r===void 0)return;const n=[{op:"add",path:`/logs/${r}/final_output`,value:e.outputs}];e.end_time!==void 0&&n.push({op:"add",path:`/logs/${r}/end_time`,value:new Date(e.end_time).toISOString()});const i=new ri({ops:n});await this.writer.write(i)}finally{if(e.parent_run_id===void 0){const r=new ri({ops:[{op:"replace",path:"/final_output",value:e.outputs}]});await this.writer.write(r),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,r){const n=this.indexMap[e.id];if(n===void 0)return;const i=new ri({ops:[{op:"add",path:`/logs/${n}/streamed_output_str/-`,value:r}]});await this.writer.write(i)}}async function pi(t){return Ft.configure(t==null?void 0:t.callbacks,void 0,t==null?void 0:t.tags,void 0,t==null?void 0:t.metadata)}function gt(t,e){return t&&!Array.isArray(t)&&typeof t=="object"?t:{[e]:t}}class yt extends Mn{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}bind(e){return new vu({bound:this,kwargs:e,config:{}})}map(){return new Wf({bound:this})}withRetry(e){return new NO({bound:this,kwargs:{},config:{},maxAttemptNumber:e==null?void 0:e.stopAfterAttempt,...e})}withConfig(e){return new vu({bound:this,config:e,kwargs:{}})}withFallbacks(e){return new DO({runnable:this,fallbacks:e.fallbacks})}_getOptionsList(e,r=0){if(Array.isArray(e)){if(e.length!==r)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${r} inputs`);return e}return Array.from({length:r},()=>e)}async batch(e,r,n){const i=this._getOptionsList(r??{},e.length),s=new Af({maxConcurrency:n==null?void 0:n.maxConcurrency,onFailedAttempt:o=>{throw o}}),a=e.map((o,l)=>s.call(async()=>{try{return await this.invoke(o,i[l])}catch(u){if(n!=null&&n.returnExceptions)return u;throw u}}));return Promise.all(a)}async*_streamIterator(e,r){yield this.invoke(e,r)}async stream(e,r){return po.fromAsyncGenerator(this._streamIterator(e,r))}_separateRunnableConfigFromCallOptions(e={}){const r={callbacks:e.callbacks,tags:e.tags,metadata:e.metadata},n={...e};return delete n.callbacks,delete n.tags,delete n.metadata,[r,n]}async _callWithConfig(e,r,n){const i=await pi(n),s=await(i==null?void 0:i.handleChainStart(this.toJSON(),gt(r,"input"),void 0,n==null?void 0:n.runType));let a;try{a=await e.bind(this)(r,n,s)}catch(o){throw await(s==null?void 0:s.handleChainError(o)),o}return await(s==null?void 0:s.handleChainEnd(gt(a,"output"))),a}async _batchWithConfig(e,r,n,i){const s=this._getOptionsList(n??{},r.length),a=await Promise.all(s.map(pi)),o=await Promise.all(a.map((u,c)=>u==null?void 0:u.handleChainStart(this.toJSON(),gt(r[c],"input"))));let l;try{l=await e(r,s,o,i)}catch(u){throw await Promise.all(o.map(c=>c==null?void 0:c.handleChainError(u))),u}return await Promise.all(o.map(u=>u==null?void 0:u.handleChainEnd(gt(l,"output")))),l}async*_transformStreamWithConfig(e,r,n){let i,s=!0,a,o=!0;const l=await pi(n);let u;const c=this.toJSON();async function*d(){for await(const b of e){if(u||(u=await(l==null?void 0:l.handleChainStart(c,{input:""},void 0,n==null?void 0:n.runType))),s)if(i===void 0)i=b;else try{i=i.concat(b)}catch{i=void 0,s=!1}yield b}}const h=d();try{const b=r(h,u,n);for await(const v of b)if(yield v,o)if(a===void 0)a=v;else try{a=a.concat(v)}catch{a=void 0,o=!1}}catch(b){throw await(u==null?void 0:u.handleChainError(b,void 0,void 0,void 0,{inputs:gt(i,"input")})),b}await(u==null?void 0:u.handleChainEnd(a??{},void 0,void 0,void 0,{inputs:gt(i,"input")}))}_patchConfig(e={},r=void 0){return{...e,callbacks:r}}pipe(e){return new Qi({first:this,last:ui(e)})}async*transform(e,r){let n;for await(const i of e)n===void 0?n=i:n=n.concat(i);yield*this._streamIterator(n,r)}async*streamLog(e,r,n){const i=new RO({...n,autoClose:!1}),s=r??{},{callbacks:a}=s;if(a===void 0)s.callbacks=[i];else if(Array.isArray(a))s.callbacks=a.concat([i]);else{const c=a.copy();c.inheritableHandlers.push(i),s.callbacks=c}const o=await this.stream(e,s);async function l(){try{for await(const c of o){const d=new ri({ops:[{op:"add",path:"/streamed_output/-",value:c}]});await i.writer.write(d)}}finally{await i.writer.close()}}const u=l();try{for await(const c of i)yield c}finally{await u}}static isRunnable(e){return e.lc_runnable}}class vu extends yt{static lc_name(){return"RunnableBinding"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","schema","runnable"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound,this.kwargs=e.kwargs,this.config=e.config}_mergeConfig(e){const r={...this.config};if(e)for(const n of Object.keys(e))n==="metadata"?r[n]={...r[n],...e[n]}:n==="tags"?r[n]=(r[n]??[]).concat(e[n]??[]):r[n]=e[n]??r[n];return r}bind(e){return this.constructor({bound:this.bound,kwargs:{...this.kwargs,...e},config:this.config})}withConfig(e){return this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...e}})}withRetry(e){return this.constructor({bound:this.bound.withRetry(e),kwargs:this.kwargs,config:this.config})}async invoke(e,r){return this.bound.invoke(e,this._mergeConfig({...r,...this.kwargs}))}async batch(e,r,n){const i=Array.isArray(r)?r.map(s=>this._mergeConfig({...s,...this.kwargs})):this._mergeConfig({...r,...this.kwargs});return this.bound.batch(e,i,n)}async*_streamIterator(e,r){yield*this.bound._streamIterator(e,this._mergeConfig({...r,...this.kwargs}))}async stream(e,r){return this.bound.stream(e,this._mergeConfig({...r,...this.kwargs}))}async*transform(e,r){yield*this.bound.transform(e,this._mergeConfig({...r,...this.kwargs}))}static isRunnableBinding(e){return e.bound&&yt.isRunnable(e.bound)}}class Wf extends yt{static lc_name(){return"RunnableEach"}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","schema","runnable"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound}bind(e){return new Wf({bound:this.bound.bind(e)})}async invoke(e,r){return this._callWithConfig(this._invoke,e,r)}async _invoke(e,r,n){return this.bound.batch(e,this._patchConfig(r,n==null?void 0:n.getChild()))}}class NO extends vu{static lc_name(){return"RunnableRetry"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","schema","runnable"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(e,r,n){const i=e>1?`retry:attempt:${e}`:void 0;return this._patchConfig(r,n==null?void 0:n.getChild(i))}async _invoke(e,r,n){return ou(i=>super.invoke(e,this._patchConfigForRetry(i,r,n)),{onFailedAttempt:this.onFailedAttempt,retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,r){return this._callWithConfig(this._invoke,e,r)}async _batch(e,r,n,i){const s={};try{await ou(async a=>{const o=e.map((h,b)=>b).filter(h=>s[h.toString()]===void 0||s[h.toString()]instanceof Error),l=o.map(h=>e[h]),u=o.map(h=>this._patchConfigForRetry(a,r==null?void 0:r[h],n==null?void 0:n[h])),c=await super.batch(l,u,{...i,returnExceptions:!0});let d;for(let h=0;h<c.length;h+=1){const b=c[h],v=o[h];b instanceof Error&&d===void 0&&(d=b),s[v.toString()]=b}if(d)throw d;return c},{onFailedAttempt:this.onFailedAttempt,retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(a){if((i==null?void 0:i.returnExceptions)!==!0)throw a}return Object.keys(s).sort((a,o)=>parseInt(a,10)-parseInt(o,10)).map(a=>s[parseInt(a,10)])}async batch(e,r,n){return this._batchWithConfig(this._batch.bind(this),e,r,n)}}class Qi extends yt{static lc_name(){return"RunnableSequence"}constructor(e){super(e),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","schema","runnable"]}),this.first=e.first,this.middle=e.middle??this.middle,this.last=e.last}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,r){const n=await pi(r),i=await(n==null?void 0:n.handleChainStart(this.toJSON(),gt(e,"input")));let s=e,a;try{const o=[this.first,...this.middle];for(let l=0;l<o.length;l+=1)s=await o[l].invoke(s,this._patchConfig(r,i==null?void 0:i.getChild(`seq:step:${l+1}`)));a=await this.last.invoke(s,this._patchConfig(r,i==null?void 0:i.getChild(`seq:step:${this.steps.length}`)))}catch(o){throw await(i==null?void 0:i.handleChainError(o)),o}return await(i==null?void 0:i.handleChainEnd(gt(a,"output"))),a}async batch(e,r,n){const i=this._getOptionsList(r??{},e.length),s=await Promise.all(i.map(pi)),a=await Promise.all(s.map((u,c)=>u==null?void 0:u.handleChainStart(this.toJSON(),gt(e[c],"input"))));let o=e,l;try{const u=[this.first,...this.middle];for(let c=0;c<u.length;c+=1)o=await u[c].batch(o,a.map((h,b)=>this._patchConfig(i[b],h==null?void 0:h.getChild(`seq:step:${c+1}`))),n);l=await this.last.batch(o,a.map(c=>this._patchConfig(i[this.steps.length-1],c==null?void 0:c.getChild(`seq:step:${this.steps.length}`))),n)}catch(u){throw await Promise.all(a.map(c=>c==null?void 0:c.handleChainError(u))),u}return await Promise.all(a.map((u,c)=>u==null?void 0:u.handleChainEnd(gt(l[c],"output")))),l}async*_streamIterator(e,r){const n=await pi(r),i=await(n==null?void 0:n.handleChainStart(this.toJSON(),gt(e,"input")));let s=e;const a=[this.first,...this.middle,this.last],o=Math.min(a.length-1,a.length-[...a].reverse().findIndex(c=>{var b;const d=c.transform===yt.prototype.transform,h=vu.isRunnableBinding(c)&&((b=c.bound)==null?void 0:b.transform)===yt.prototype.transform;return d||h})-1);try{const c=a.slice(0,o);for(let d=0;d<c.length;d+=1)s=await c[d].invoke(s,this._patchConfig(r,i==null?void 0:i.getChild(`seq:step:${d+1}`)))}catch(c){throw await(i==null?void 0:i.handleChainError(c)),c}let l=!0,u;try{let c=await a[o]._streamIterator(s,this._patchConfig(r,i==null?void 0:i.getChild(`seq:step:${o+1}`)));const d=a.slice(o+1);for(let h=0;h<d.length;h+=1)c=await d[h].transform(c,this._patchConfig(r,i==null?void 0:i.getChild(`seq:step:${o+h+2}`)));for await(const h of c)if(yield h,l)if(u===void 0)u=h;else try{u=u.concat(h)}catch{u=void 0,l=!1}}catch(c){throw await(i==null?void 0:i.handleChainError(c)),c}await(i==null?void 0:i.handleChainEnd(gt(u,"output")))}pipe(e){return Qi.isRunnableSequence(e)?new Qi({first:this.first,middle:this.middle.concat([this.last,e.first,...e.middle]),last:e.last}):new Qi({first:this.first,middle:[...this.middle,this.last],last:ui(e)})}static isRunnableSequence(e){return Array.isArray(e.middle)&&yt.isRunnable(e)}static from([e,...r]){return new Qi({first:ui(e),middle:r.slice(0,-1).map(ui),last:ui(r[r.length-1])})}}class LO extends yt{static lc_name(){return"RunnableMap"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","schema","runnable"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(const[r,n]of Object.entries(e.steps))this.steps[r]=ui(n)}async invoke(e,r){const n=await pi(r),i=await(n==null?void 0:n.handleChainStart(this.toJSON(),{input:e})),s={};try{await Promise.all(Object.entries(this.steps).map(async([a,o])=>{s[a]=await o.invoke(e,this._patchConfig(r,i==null?void 0:i.getChild(a)))}))}catch(a){throw await(i==null?void 0:i.handleChainError(a)),a}return await(i==null?void 0:i.handleChainEnd(s)),s}}class $O extends yt{static lc_name(){return"RunnableLambda"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","schema","runnable"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.func=e.func}async _invoke(e,r,n){let i=await this.func(e);return i&&yt.isRunnable(i)&&(i=await i.invoke(e,this._patchConfig(r,n==null?void 0:n.getChild()))),i}async invoke(e,r){return this._callWithConfig(this._invoke,e,r)}}class DO extends yt{static lc_name(){return"RunnableWithFallbacks"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","schema","runnable"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){yield this.runnable;for(const e of this.fallbacks)yield e}async invoke(e,r){const n=await Ft.configure(r==null?void 0:r.callbacks,void 0,r==null?void 0:r.tags,void 0,r==null?void 0:r.metadata),i=await(n==null?void 0:n.handleChainStart(this.toJSON(),gt(e,"input")));let s;for(const a of this.runnables())try{const o=await a.invoke(e,this._patchConfig(r,i==null?void 0:i.getChild()));return await(i==null?void 0:i.handleChainEnd(gt(o,"output"))),o}catch(o){s===void 0&&(s=o)}throw s===void 0?new Error("No error stored at end of fallback."):(await(i==null?void 0:i.handleChainError(s)),s)}async batch(e,r,n){if(n!=null&&n.returnExceptions)throw new Error("Not implemented.");const i=this._getOptionsList(r??{},e.length),s=await Promise.all(i.map(l=>Ft.configure(l==null?void 0:l.callbacks,void 0,l==null?void 0:l.tags,void 0,l==null?void 0:l.metadata))),a=await Promise.all(s.map((l,u)=>l==null?void 0:l.handleChainStart(this.toJSON(),gt(e[u],"input"))));let o;for(const l of this.runnables())try{const u=await l.batch(e,a.map((c,d)=>this._patchConfig(i[d],c==null?void 0:c.getChild())),n);return await Promise.all(a.map((c,d)=>c==null?void 0:c.handleChainEnd(gt(u[d],"output")))),u}catch(u){o===void 0&&(o=u)}throw o?(await Promise.all(a.map(l=>l==null?void 0:l.handleChainError(o))),o):new Error("No error stored at end of fallbacks.")}}function ui(t){if(typeof t=="function")return new $O({func:t});if(yt.isRunnable(t))return t;if(!Array.isArray(t)&&typeof t=="object"){const e={};for(const[r,n]of Object.entries(t))e[r]=ui(n);return new LO({steps:e})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}class U_ extends F0{constructor(e){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts","base"]}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new wi(this.value)]}}class Jf extends yt{get lc_attributes(){return{partialVariables:void 0}}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts",this._getPromptType()]}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"partialVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{inputVariables:r}=e;if(r.includes("stop"))throw new Error("Cannot have an input variable named 'stop', as it is used internally, please rename.");Object.assign(this,e)}async mergePartialAndUserVariables(e){const r=this.partialVariables??{},n={};for(const[s,a]of Object.entries(r))typeof a=="string"?n[s]=a:n[s]=await a();return{...n,...e}}async invoke(e,r){return this._callWithConfig(n=>this.formatPromptValue(n),e,{...r,runType:"prompt"})}serialize(){throw new Error("Use .toJSON() instead")}static async deserialize(e){switch(e._type){case"prompt":{const{PromptTemplate:r}=await rt(()=>Promise.resolve().then(()=>Og),void 0,import.meta.url);return r.deserialize(e)}case void 0:{const{PromptTemplate:r}=await rt(()=>Promise.resolve().then(()=>Og),void 0,import.meta.url);return r.deserialize({...e,_type:"prompt"})}case"few_shot":{const{FewShotPromptTemplate:r}=await rt(()=>import("./few_shot-02426ab4.js"),["./few_shot-02426ab4.js","./embed-e406f2b7.css"],import.meta.url);return r.deserialize(e)}default:throw new Error(`Invalid prompt type in config: ${e._type}`)}}}class MO extends Jf{async formatPromptValue(e){const r=await this.format(e);return new U_(r)}}const z_=t=>{const e=t.split(""),r=[],n=(s,a)=>{for(let o=a;o<e.length;o+=1)if(s.includes(e[o]))return o;return-1};let i=0;for(;i<e.length;)if(e[i]==="{"&&i+1<e.length&&e[i+1]==="{")r.push({type:"literal",text:"{"}),i+=2;else if(e[i]==="}"&&i+1<e.length&&e[i+1]==="}")r.push({type:"literal",text:"}"}),i+=2;else if(e[i]==="{"){const s=n("}",i);if(s<0)throw new Error("Unclosed '{' in template.");r.push({type:"variable",name:e.slice(i+1,s).join("")}),i=s+1}else{if(e[i]==="}")throw new Error("Single '}' in template.");{const s=n("{}",i),a=(s<0?e.slice(i):e.slice(i,s)).join("");r.push({type:"literal",text:a}),i=s<0?e.length:s}}return r},UO=(t,e)=>z_(t).reduce((r,n)=>{if(n.type==="variable"){if(n.name in e)return r+e[n.name];throw new Error(`Missing value for input ${n.name}`)}return r+n.text},""),hh={"f-string":UO,jinja2:(t,e)=>""},zO={"f-string":z_,jinja2:t=>[]},F_=(t,e,r)=>hh[e](t,r),FO=(t,e)=>zO[e](t),BO=(t,e,r)=>{if(!(e in hh)){const n=Object.keys(hh);throw new Error(`Invalid template format. Got \`${e}\`;
                         should be one of ${n}`)}try{const n=r.reduce((i,s)=>(i[s]="foo",i),{});F_(t,e,n)}catch(n){throw new Error(`Invalid prompt schema: ${n.message}`)}};class Cr extends MO{static lc_name(){return"PromptTemplate"}constructor(e){if(super(e),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign(this,e),this.validateTemplate){let r=this.inputVariables;this.partialVariables&&(r=r.concat(Object.keys(this.partialVariables))),BO(this.template,this.templateFormat,r)}}_getPromptType(){return"prompt"}async format(e){const r=await this.mergePartialAndUserVariables(e);return F_(this.template,this.templateFormat,r)}static fromExamples(e,r,n,i=`

`,s=""){const a=[s,...e,r].join(i);return new Cr({inputVariables:n,template:a})}static fromTemplate(e,{templateFormat:r="f-string",...n}={}){if(r==="jinja2")throw new Error("jinja2 templates are not currently supported.");const i=new Set;return FO(e,r).forEach(s=>{s.type==="variable"&&i.add(s.name)}),new Cr({inputVariables:[...i],templateFormat:r,template:e,...n})}async partial(e){const r=this.inputVariables.filter(s=>!(s in e)),n={...this.partialVariables??{},...e},i={...this,inputVariables:r,partialVariables:n};return new Cr(i)}serialize(){if(this.outputParser!==void 0)throw new Error("Cannot serialize a prompt template with an output parser");return{_type:this._getPromptType(),input_variables:this.inputVariables,template:this.template,template_format:this.templateFormat}}static async deserialize(e){if(!e.template)throw new Error("Prompt template must have a template");return new Cr({inputVariables:e.input_variables,template:e.template,templateFormat:e.template_format})}}const Og=Object.freeze(Object.defineProperty({__proto__:null,PromptTemplate:Cr},Symbol.toStringTag,{value:"Module"}));class VO extends yt{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts","chat"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}async invoke(e,r){return this._callWithConfig(n=>this.formatMessages(n),e,{...r,runType:"prompt"})}}class B_ extends F0{static lc_name(){return"ChatPromptValue"}constructor(e){Array.isArray(e)&&(e={messages:e}),super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts","chat"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return JSON.stringify(this.messages)}toChatMessages(){return this.messages}}class oc extends VO{constructor(e){"prompt"in e||(e={prompt:e}),super(e),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt}get inputVariables(){return this.prompt.inputVariables}async formatMessages(e){return[await this.format(e)]}}class HO extends Jf{constructor(e){super(e)}async format(e){return(await this.formatPromptValue(e)).toString()}async formatPromptValue(e){const r=await this.formatMessages(e);return new B_(r)}}class ZO extends oc{static lc_name(){return"ChatMessagePromptTemplate"}constructor(e,r){"prompt"in e||(e={prompt:e,role:r}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}async format(e){return new Hu(await this.prompt.format(e),this.role)}static fromTemplate(e,r){return new this(Cr.fromTemplate(e),r)}}class KO extends oc{static lc_name(){return"HumanMessagePromptTemplate"}async format(e){return new wi(await this.prompt.format(e))}static fromTemplate(e){return new this(Cr.fromTemplate(e))}}class qO extends oc{static lc_name(){return"AIMessagePromptTemplate"}async format(e){return new Vu(await this.prompt.format(e))}static fromTemplate(e){return new this(Cr.fromTemplate(e))}}class V_ extends oc{static lc_name(){return"SystemMessagePromptTemplate"}async format(e){return new Rf(await this.prompt.format(e))}static fromTemplate(e){return new this(Cr.fromTemplate(e))}}function WO(t){return typeof t.formatMessages=="function"}function JO(t){if(WO(t)||z0(t))return t;const e=Ca(t);if(e._getType()==="human")return KO.fromTemplate(e.content);if(e._getType()==="ai")return qO.fromTemplate(e.content);if(e._getType()==="system")return V_.fromTemplate(e.content);if(Hu.isInstance(e))return ZO.fromTemplate(e.content,e.role);throw new Error(`Could not coerce message prompt template from input. Received message type: "${e._getType()}".`)}class Xi extends HO{static lc_name(){return"ChatPromptTemplate"}get lc_aliases(){return{promptMessages:"messages"}}constructor(e){if(super(e),Object.defineProperty(this,"promptMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign(this,e),this.validateTemplate){const r=new Set;for(const o of this.promptMessages)if(!(o instanceof Rn))for(const l of o.inputVariables)r.add(l);const n=this.inputVariables,i=new Set(this.partialVariables?n.concat(Object.keys(this.partialVariables)):n),s=new Set([...i].filter(o=>!r.has(o)));if(s.size>0)throw new Error(`Input variables \`${[...s]}\` are not used in any of the prompt messages.`);const a=new Set([...r].filter(o=>!i.has(o)));if(a.size>0)throw new Error(`Input variables \`${[...a]}\` are used in prompt messages but not in the prompt template.`)}}_getPromptType(){return"chat"}async formatMessages(e){const r=await this.mergePartialAndUserVariables(e);let n=[];for(const i of this.promptMessages)if(i instanceof Rn)n.push(i);else{const s=i.inputVariables.reduce((o,l)=>{if(!(l in r))throw new Error(`Missing value for input variable \`${l.toString()}\``);return o[l]=r[l],o},{}),a=await i.formatMessages(s);n=n.concat(a)}return n}async partial(e){const r=this.inputVariables.filter(s=>!(s in e)),n={...this.partialVariables??{},...e},i={...this,inputVariables:r,partialVariables:n};return new Xi(i)}static fromMessages(e){const r=e.reduce((s,a)=>s.concat(a instanceof Xi?a.promptMessages:[JO(a)]),[]),n=e.reduce((s,a)=>a instanceof Xi?Object.assign(s,a.partialVariables):s,Object.create(null)),i=new Set;for(const s of r)if(!(s instanceof Rn))for(const a of s.inputVariables)a in n||i.add(a);return new Xi({inputVariables:[...i],promptMessages:r,partialVariables:n})}static fromPromptMessages(e){return this.fromMessages(e)}}function tl(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var H_={exports:{}};(function(t,e){(function(r){t.exports=r()})(function(){return function r(n,i,s){function a(u,c){if(!i[u]){if(!n[u]){var d=typeof tl=="function"&&tl;if(!c&&d)return d(u,!0);if(o)return o(u,!0);throw new Error("Cannot find module '"+u+"'")}c=i[u]={exports:{}},n[u][0].call(c.exports,function(h){var b=n[u][1][h];return a(b||h)},c,c.exports,r,n,i,s)}return i[u].exports}for(var o=typeof tl=="function"&&tl,l=0;l<s.length;l++)a(s[l]);return a}({1:[function(r,n,i){(function(s,a,o,l,u,c,d,h,b){var v=r("crypto");function O(x,j){j=m(x,j);var _;return(_=j.algorithm!=="passthrough"?v.createHash(j.algorithm):new A).write===void 0&&(_.write=_.update,_.end=_.update),S(j,_).dispatch(x),_.update||_.end(""),_.digest?_.digest(j.encoding==="buffer"?void 0:j.encoding):(x=_.read(),j.encoding!=="buffer"?x.toString(j.encoding):x)}(i=n.exports=O).sha1=function(x){return O(x)},i.keys=function(x){return O(x,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},i.MD5=function(x){return O(x,{algorithm:"md5",encoding:"hex"})},i.keysMD5=function(x){return O(x,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var k=v.getHashes?v.getHashes().slice():["sha1","md5"],p=(k.push("passthrough"),["buffer","hex","binary","base64"]);function m(x,j){var _={};if(_.algorithm=(j=j||{}).algorithm||"sha1",_.encoding=j.encoding||"hex",_.excludeValues=!!j.excludeValues,_.algorithm=_.algorithm.toLowerCase(),_.encoding=_.encoding.toLowerCase(),_.ignoreUnknown=j.ignoreUnknown===!0,_.respectType=j.respectType!==!1,_.respectFunctionNames=j.respectFunctionNames!==!1,_.respectFunctionProperties=j.respectFunctionProperties!==!1,_.unorderedArrays=j.unorderedArrays===!0,_.unorderedSets=j.unorderedSets!==!1,_.unorderedObjects=j.unorderedObjects!==!1,_.replacer=j.replacer||void 0,_.excludeKeys=j.excludeKeys||void 0,x===void 0)throw new Error("Object argument required.");for(var P=0;P<k.length;++P)k[P].toLowerCase()===_.algorithm.toLowerCase()&&(_.algorithm=k[P]);if(k.indexOf(_.algorithm)===-1)throw new Error('Algorithm "'+_.algorithm+'"  not supported. supported values: '+k.join(", "));if(p.indexOf(_.encoding)===-1&&_.algorithm!=="passthrough")throw new Error('Encoding "'+_.encoding+'"  not supported. supported values: '+p.join(", "));return _}function f(x){if(typeof x=="function")return/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(x))!=null}function S(x,j,_){_=_||[];function P(w){return j.update?j.update(w,"utf8"):j.write(w,"utf8")}return{dispatch:function(w){return this["_"+((w=x.replacer?x.replacer(w):w)===null?"null":typeof w)](w)},_object:function(w){var R,L=Object.prototype.toString.call(w),ee=/\[object (.*)\]/i.exec(L);if(ee=(ee=ee?ee[1]:"unknown:["+L+"]").toLowerCase(),0<=(L=_.indexOf(w)))return this.dispatch("[CIRCULAR:"+L+"]");if(_.push(w),o!==void 0&&o.isBuffer&&o.isBuffer(w))return P("buffer:"),P(w);if(ee==="object"||ee==="function"||ee==="asyncfunction")return L=Object.keys(w),x.unorderedObjects&&(L=L.sort()),x.respectType===!1||f(w)||L.splice(0,0,"prototype","__proto__","constructor"),x.excludeKeys&&(L=L.filter(function(Q){return!x.excludeKeys(Q)})),P("object:"+L.length+":"),R=this,L.forEach(function(Q){R.dispatch(Q),P(":"),x.excludeValues||R.dispatch(w[Q]),P(",")});if(!this["_"+ee]){if(x.ignoreUnknown)return P("["+ee+"]");throw new Error('Unknown object type "'+ee+'"')}this["_"+ee](w)},_array:function(w,Q){Q=Q!==void 0?Q:x.unorderedArrays!==!1;var L=this;if(P("array:"+w.length+":"),!Q||w.length<=1)return w.forEach(function(ne){return L.dispatch(ne)});var ee=[],Q=w.map(function(ne){var J=new A,me=_.slice();return S(x,J,me).dispatch(ne),ee=ee.concat(me.slice(_.length)),J.read().toString()});return _=_.concat(ee),Q.sort(),this._array(Q,!1)},_date:function(w){return P("date:"+w.toJSON())},_symbol:function(w){return P("symbol:"+w.toString())},_error:function(w){return P("error:"+w.toString())},_boolean:function(w){return P("bool:"+w.toString())},_string:function(w){P("string:"+w.length+":"),P(w.toString())},_function:function(w){P("fn:"),f(w)?this.dispatch("[native]"):this.dispatch(w.toString()),x.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(w.name)),x.respectFunctionProperties&&this._object(w)},_number:function(w){return P("number:"+w.toString())},_xml:function(w){return P("xml:"+w.toString())},_null:function(){return P("Null")},_undefined:function(){return P("Undefined")},_regexp:function(w){return P("regex:"+w.toString())},_uint8array:function(w){return P("uint8array:"),this.dispatch(Array.prototype.slice.call(w))},_uint8clampedarray:function(w){return P("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(w))},_int8array:function(w){return P("int8array:"),this.dispatch(Array.prototype.slice.call(w))},_uint16array:function(w){return P("uint16array:"),this.dispatch(Array.prototype.slice.call(w))},_int16array:function(w){return P("int16array:"),this.dispatch(Array.prototype.slice.call(w))},_uint32array:function(w){return P("uint32array:"),this.dispatch(Array.prototype.slice.call(w))},_int32array:function(w){return P("int32array:"),this.dispatch(Array.prototype.slice.call(w))},_float32array:function(w){return P("float32array:"),this.dispatch(Array.prototype.slice.call(w))},_float64array:function(w){return P("float64array:"),this.dispatch(Array.prototype.slice.call(w))},_arraybuffer:function(w){return P("arraybuffer:"),this.dispatch(new Uint8Array(w))},_url:function(w){return P("url:"+w.toString())},_map:function(w){return P("map:"),w=Array.from(w),this._array(w,x.unorderedSets!==!1)},_set:function(w){return P("set:"),w=Array.from(w),this._array(w,x.unorderedSets!==!1)},_file:function(w){return P("file:"),this.dispatch([w.name,w.size,w.type,w.lastModfied])},_blob:function(){if(x.ignoreUnknown)return P("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return P("domwindow")},_bigint:function(w){return P("bigint:"+w.toString())},_process:function(){return P("process")},_timer:function(){return P("timer")},_pipe:function(){return P("pipe")},_tcp:function(){return P("tcp")},_udp:function(){return P("udp")},_tty:function(){return P("tty")},_statwatcher:function(){return P("statwatcher")},_securecontext:function(){return P("securecontext")},_connection:function(){return P("connection")},_zlib:function(){return P("zlib")},_context:function(){return P("context")},_nodescript:function(){return P("nodescript")},_httpparser:function(){return P("httpparser")},_dataview:function(){return P("dataview")},_signal:function(){return P("signal")},_fsevent:function(){return P("fsevent")},_tlswrap:function(){return P("tlswrap")}}}function A(){return{buf:"",write:function(x){this.buf+=x},end:function(x){this.buf+=x},read:function(){return this.buf}}}i.writeToStream=function(x,j,_){return _===void 0&&(_=j,j={}),S(j=m(x,j),_).dispatch(x)}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(r,n,i){(function(s,a,o,l,u,c,d,h,b){(function(v){var O=typeof Uint8Array<"u"?Uint8Array:Array,k="+".charCodeAt(0),p="/".charCodeAt(0),m="0".charCodeAt(0),f="a".charCodeAt(0),S="A".charCodeAt(0),A="-".charCodeAt(0),x="_".charCodeAt(0);function j(_){return _=_.charCodeAt(0),_===k||_===A?62:_===p||_===x?63:_<m?-1:_<m+10?_-m+26+26:_<S+26?_-S:_<f+26?_-f+26:void 0}v.toByteArray=function(_){var P,w;if(0<_.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var R=_.length,R=_.charAt(R-2)==="="?2:_.charAt(R-1)==="="?1:0,L=new O(3*_.length/4-R),ee=0<R?_.length-4:_.length,Q=0;function ne(J){L[Q++]=J}for(P=0;P<ee;P+=4,0)ne((16711680&(w=j(_.charAt(P))<<18|j(_.charAt(P+1))<<12|j(_.charAt(P+2))<<6|j(_.charAt(P+3))))>>16),ne((65280&w)>>8),ne(255&w);return R==2?ne(255&(w=j(_.charAt(P))<<2|j(_.charAt(P+1))>>4)):R==1&&(ne((w=j(_.charAt(P))<<10|j(_.charAt(P+1))<<4|j(_.charAt(P+2))>>2)>>8&255),ne(255&w)),L},v.fromByteArray=function(_){var P,w,R,L,ee=_.length%3,Q="";function ne(J){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(J)}for(P=0,R=_.length-ee;P<R;P+=3)w=(_[P]<<16)+(_[P+1]<<8)+_[P+2],Q+=ne((L=w)>>18&63)+ne(L>>12&63)+ne(L>>6&63)+ne(63&L);switch(ee){case 1:Q=(Q+=ne((w=_[_.length-1])>>2))+ne(w<<4&63)+"==";break;case 2:Q=(Q=(Q+=ne((w=(_[_.length-2]<<8)+_[_.length-1])>>10))+ne(w>>4&63))+ne(w<<2&63)+"="}return Q}})(i===void 0?this.base64js={}:i)}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(r,n,i){(function(s,a,k,l,u,c,d,h,b){var v=r("base64-js"),O=r("ieee754");function k(y,E,C){if(!(this instanceof k))return new k(y,E,C);var U,M,K,le,xe=typeof y;if(E==="base64"&&xe=="string")for(y=(le=y).trim?le.trim():le.replace(/^\s+|\s+$/g,"");y.length%4!=0;)y+="=";if(xe=="number")U=V(y);else if(xe=="string")U=k.byteLength(y,E);else{if(xe!="object")throw new Error("First argument needs to be a number, array or string.");U=V(y.length)}if(k._useTypedArrays?M=k._augment(new Uint8Array(U)):((M=this).length=U,M._isBuffer=!0),k._useTypedArrays&&typeof y.byteLength=="number")M._set(y);else if($(le=y)||k.isBuffer(le)||le&&typeof le=="object"&&typeof le.length=="number")for(K=0;K<U;K++)k.isBuffer(y)?M[K]=y.readUInt8(K):M[K]=y[K];else if(xe=="string")M.write(y,0,E);else if(xe=="number"&&!k._useTypedArrays&&!C)for(K=0;K<U;K++)M[K]=0;return M}function p(y,E,C,U){return k._charsWritten=Pt(function(M){for(var K=[],le=0;le<M.length;le++)K.push(255&M.charCodeAt(le));return K}(E),y,C,U)}function m(y,E,C,U){return k._charsWritten=Pt(function(M){for(var K,le,xe=[],Me=0;Me<M.length;Me++)le=M.charCodeAt(Me),K=le>>8,le=le%256,xe.push(le),xe.push(K);return xe}(E),y,C,U)}function f(y,E,C){var U="";C=Math.min(y.length,C);for(var M=E;M<C;M++)U+=String.fromCharCode(y[M]);return U}function S(y,E,C,K){K||(Z(typeof C=="boolean","missing or invalid endian"),Z(E!=null,"missing offset"),Z(E+1<y.length,"Trying to read beyond buffer length"));var M,K=y.length;if(!(K<=E))return C?(M=y[E],E+1<K&&(M|=y[E+1]<<8)):(M=y[E]<<8,E+1<K&&(M|=y[E+1])),M}function A(y,E,C,K){K||(Z(typeof C=="boolean","missing or invalid endian"),Z(E!=null,"missing offset"),Z(E+3<y.length,"Trying to read beyond buffer length"));var M,K=y.length;if(!(K<=E))return C?(E+2<K&&(M=y[E+2]<<16),E+1<K&&(M|=y[E+1]<<8),M|=y[E],E+3<K&&(M+=y[E+3]<<24>>>0)):(E+1<K&&(M=y[E+1]<<16),E+2<K&&(M|=y[E+2]<<8),E+3<K&&(M|=y[E+3]),M+=y[E]<<24>>>0),M}function x(y,E,C,U){if(U||(Z(typeof C=="boolean","missing or invalid endian"),Z(E!=null,"missing offset"),Z(E+1<y.length,"Trying to read beyond buffer length")),!(y.length<=E))return U=S(y,E,C,!0),32768&U?-1*(65535-U+1):U}function j(y,E,C,U){if(U||(Z(typeof C=="boolean","missing or invalid endian"),Z(E!=null,"missing offset"),Z(E+3<y.length,"Trying to read beyond buffer length")),!(y.length<=E))return U=A(y,E,C,!0),2147483648&U?-1*(4294967295-U+1):U}function _(y,E,C,U){return U||(Z(typeof C=="boolean","missing or invalid endian"),Z(E+3<y.length,"Trying to read beyond buffer length")),O.read(y,E,C,23,4)}function P(y,E,C,U){return U||(Z(typeof C=="boolean","missing or invalid endian"),Z(E+7<y.length,"Trying to read beyond buffer length")),O.read(y,E,C,52,8)}function w(y,E,C,U,M){if(M||(Z(E!=null,"missing value"),Z(typeof U=="boolean","missing or invalid endian"),Z(C!=null,"missing offset"),Z(C+1<y.length,"trying to write beyond buffer length"),qt(E,65535)),M=y.length,!(M<=C))for(var K=0,le=Math.min(M-C,2);K<le;K++)y[C+K]=(E&255<<8*(U?K:1-K))>>>8*(U?K:1-K)}function R(y,E,C,U,M){if(M||(Z(E!=null,"missing value"),Z(typeof U=="boolean","missing or invalid endian"),Z(C!=null,"missing offset"),Z(C+3<y.length,"trying to write beyond buffer length"),qt(E,4294967295)),M=y.length,!(M<=C))for(var K=0,le=Math.min(M-C,4);K<le;K++)y[C+K]=E>>>8*(U?K:3-K)&255}function L(y,E,C,U,M){M||(Z(E!=null,"missing value"),Z(typeof U=="boolean","missing or invalid endian"),Z(C!=null,"missing offset"),Z(C+1<y.length,"Trying to write beyond buffer length"),Lt(E,32767,-32768)),y.length<=C||w(y,0<=E?E:65535+E+1,C,U,M)}function ee(y,E,C,U,M){M||(Z(E!=null,"missing value"),Z(typeof U=="boolean","missing or invalid endian"),Z(C!=null,"missing offset"),Z(C+3<y.length,"Trying to write beyond buffer length"),Lt(E,2147483647,-2147483648)),y.length<=C||R(y,0<=E?E:4294967295+E+1,C,U,M)}function Q(y,E,C,U,M){M||(Z(E!=null,"missing value"),Z(typeof U=="boolean","missing or invalid endian"),Z(C!=null,"missing offset"),Z(C+3<y.length,"Trying to write beyond buffer length"),$r(E,34028234663852886e22,-34028234663852886e22)),y.length<=C||O.write(y,E,C,U,23,4)}function ne(y,E,C,U,M){M||(Z(E!=null,"missing value"),Z(typeof U=="boolean","missing or invalid endian"),Z(C!=null,"missing offset"),Z(C+7<y.length,"Trying to write beyond buffer length"),$r(E,17976931348623157e292,-17976931348623157e292)),y.length<=C||O.write(y,E,C,U,52,8)}i.Buffer=k,i.SlowBuffer=k,i.INSPECT_MAX_BYTES=50,k.poolSize=8192,k._useTypedArrays=function(){try{var y=new ArrayBuffer(0),E=new Uint8Array(y);return E.foo=function(){return 42},E.foo()===42&&typeof E.subarray=="function"}catch{return!1}}(),k.isEncoding=function(y){switch(String(y).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},k.isBuffer=function(y){return!(y==null||!y._isBuffer)},k.byteLength=function(y,E){var C;switch(y+="",E||"utf8"){case"hex":C=y.length/2;break;case"utf8":case"utf-8":C=H(y).length;break;case"ascii":case"binary":case"raw":C=y.length;break;case"base64":C=ye(y).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":C=2*y.length;break;default:throw new Error("Unknown encoding")}return C},k.concat=function(y,E){if(Z($(y),`Usage: Buffer.concat(list, [totalLength])
list should be an Array.`),y.length===0)return new k(0);if(y.length===1)return y[0];if(typeof E!="number")for(M=E=0;M<y.length;M++)E+=y[M].length;for(var C=new k(E),U=0,M=0;M<y.length;M++){var K=y[M];K.copy(C,U),U+=K.length}return C},k.prototype.write=function(y,E,C,U){isFinite(E)?isFinite(C)||(U=C,C=void 0):(Me=U,U=E,E=C,C=Me),E=Number(E)||0;var M,K,le,xe,Me=this.length-E;switch((!C||Me<(C=Number(C)))&&(C=Me),U=String(U||"utf8").toLowerCase()){case"hex":M=function(He,Xe,ut,Ue){ut=Number(ut)||0;var $e=He.length-ut;(!Ue||$e<(Ue=Number(Ue)))&&(Ue=$e),Z(($e=Xe.length)%2==0,"Invalid hex string"),$e/2<Ue&&(Ue=$e/2);for(var sn=0;sn<Ue;sn++){var Ls=parseInt(Xe.substr(2*sn,2),16);Z(!isNaN(Ls),"Invalid hex string"),He[ut+sn]=Ls}return k._charsWritten=2*sn,sn}(this,y,E,C);break;case"utf8":case"utf-8":K=this,le=E,xe=C,M=k._charsWritten=Pt(H(y),K,le,xe);break;case"ascii":case"binary":M=p(this,y,E,C);break;case"base64":K=this,le=E,xe=C,M=k._charsWritten=Pt(ye(y),K,le,xe);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":M=m(this,y,E,C);break;default:throw new Error("Unknown encoding")}return M},k.prototype.toString=function(y,E,C){var U,M,K,le,xe=this;if(y=String(y||"utf8").toLowerCase(),E=Number(E)||0,(C=C!==void 0?Number(C):xe.length)===E)return"";switch(y){case"hex":U=function(Me,He,Xe){var ut=Me.length;(!He||He<0)&&(He=0),(!Xe||Xe<0||ut<Xe)&&(Xe=ut);for(var Ue="",$e=He;$e<Xe;$e++)Ue+=F(Me[$e]);return Ue}(xe,E,C);break;case"utf8":case"utf-8":U=function(Me,He,Xe){var ut="",Ue="";Xe=Math.min(Me.length,Xe);for(var $e=He;$e<Xe;$e++)Me[$e]<=127?(ut+=Qe(Ue)+String.fromCharCode(Me[$e]),Ue=""):Ue+="%"+Me[$e].toString(16);return ut+Qe(Ue)}(xe,E,C);break;case"ascii":case"binary":U=f(xe,E,C);break;case"base64":M=xe,le=C,U=(K=E)===0&&le===M.length?v.fromByteArray(M):v.fromByteArray(M.slice(K,le));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":U=function(Me,He,Xe){for(var ut=Me.slice(He,Xe),Ue="",$e=0;$e<ut.length;$e+=2)Ue+=String.fromCharCode(ut[$e]+256*ut[$e+1]);return Ue}(xe,E,C);break;default:throw new Error("Unknown encoding")}return U},k.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},k.prototype.copy=function(y,E,C,U){if(E=E||0,(U=U||U===0?U:this.length)!==(C=C||0)&&y.length!==0&&this.length!==0){Z(C<=U,"sourceEnd < sourceStart"),Z(0<=E&&E<y.length,"targetStart out of bounds"),Z(0<=C&&C<this.length,"sourceStart out of bounds"),Z(0<=U&&U<=this.length,"sourceEnd out of bounds"),U>this.length&&(U=this.length);var M=(U=y.length-E<U-C?y.length-E+C:U)-C;if(M<100||!k._useTypedArrays)for(var K=0;K<M;K++)y[K+E]=this[K+C];else y._set(this.subarray(C,C+M),E)}},k.prototype.slice=function(y,E){var C=this.length;if(y=me(y,C,0),E=me(E,C,C),k._useTypedArrays)return k._augment(this.subarray(y,E));for(var U=E-y,M=new k(U,void 0,!0),K=0;K<U;K++)M[K]=this[K+y];return M},k.prototype.get=function(y){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(y)},k.prototype.set=function(y,E){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(y,E)},k.prototype.readUInt8=function(y,E){if(E||(Z(y!=null,"missing offset"),Z(y<this.length,"Trying to read beyond buffer length")),!(y>=this.length))return this[y]},k.prototype.readUInt16LE=function(y,E){return S(this,y,!0,E)},k.prototype.readUInt16BE=function(y,E){return S(this,y,!1,E)},k.prototype.readUInt32LE=function(y,E){return A(this,y,!0,E)},k.prototype.readUInt32BE=function(y,E){return A(this,y,!1,E)},k.prototype.readInt8=function(y,E){if(E||(Z(y!=null,"missing offset"),Z(y<this.length,"Trying to read beyond buffer length")),!(y>=this.length))return 128&this[y]?-1*(255-this[y]+1):this[y]},k.prototype.readInt16LE=function(y,E){return x(this,y,!0,E)},k.prototype.readInt16BE=function(y,E){return x(this,y,!1,E)},k.prototype.readInt32LE=function(y,E){return j(this,y,!0,E)},k.prototype.readInt32BE=function(y,E){return j(this,y,!1,E)},k.prototype.readFloatLE=function(y,E){return _(this,y,!0,E)},k.prototype.readFloatBE=function(y,E){return _(this,y,!1,E)},k.prototype.readDoubleLE=function(y,E){return P(this,y,!0,E)},k.prototype.readDoubleBE=function(y,E){return P(this,y,!1,E)},k.prototype.writeUInt8=function(y,E,C){C||(Z(y!=null,"missing value"),Z(E!=null,"missing offset"),Z(E<this.length,"trying to write beyond buffer length"),qt(y,255)),E>=this.length||(this[E]=y)},k.prototype.writeUInt16LE=function(y,E,C){w(this,y,E,!0,C)},k.prototype.writeUInt16BE=function(y,E,C){w(this,y,E,!1,C)},k.prototype.writeUInt32LE=function(y,E,C){R(this,y,E,!0,C)},k.prototype.writeUInt32BE=function(y,E,C){R(this,y,E,!1,C)},k.prototype.writeInt8=function(y,E,C){C||(Z(y!=null,"missing value"),Z(E!=null,"missing offset"),Z(E<this.length,"Trying to write beyond buffer length"),Lt(y,127,-128)),E>=this.length||(0<=y?this.writeUInt8(y,E,C):this.writeUInt8(255+y+1,E,C))},k.prototype.writeInt16LE=function(y,E,C){L(this,y,E,!0,C)},k.prototype.writeInt16BE=function(y,E,C){L(this,y,E,!1,C)},k.prototype.writeInt32LE=function(y,E,C){ee(this,y,E,!0,C)},k.prototype.writeInt32BE=function(y,E,C){ee(this,y,E,!1,C)},k.prototype.writeFloatLE=function(y,E,C){Q(this,y,E,!0,C)},k.prototype.writeFloatBE=function(y,E,C){Q(this,y,E,!1,C)},k.prototype.writeDoubleLE=function(y,E,C){ne(this,y,E,!0,C)},k.prototype.writeDoubleBE=function(y,E,C){ne(this,y,E,!1,C)},k.prototype.fill=function(y,E,C){if(E=E||0,C=C||this.length,Z(typeof(y=typeof(y=y||0)=="string"?y.charCodeAt(0):y)=="number"&&!isNaN(y),"value is not a number"),Z(E<=C,"end < start"),C!==E&&this.length!==0){Z(0<=E&&E<this.length,"start out of bounds"),Z(0<=C&&C<=this.length,"end out of bounds");for(var U=E;U<C;U++)this[U]=y}},k.prototype.inspect=function(){for(var y=[],E=this.length,C=0;C<E;C++)if(y[C]=F(this[C]),C===i.INSPECT_MAX_BYTES){y[C+1]="...";break}return"<Buffer "+y.join(" ")+">"},k.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(k._useTypedArrays)return new k(this).buffer;for(var y=new Uint8Array(this.length),E=0,C=y.length;E<C;E+=1)y[E]=this[E];return y.buffer};var J=k.prototype;function me(y,E,C){return typeof y!="number"?C:E<=(y=~~y)?E:0<=y||0<=(y+=E)?y:0}function V(y){return(y=~~Math.ceil(+y))<0?0:y}function $(y){return(Array.isArray||function(E){return Object.prototype.toString.call(E)==="[object Array]"})(y)}function F(y){return y<16?"0"+y.toString(16):y.toString(16)}function H(y){for(var E=[],C=0;C<y.length;C++){var U=y.charCodeAt(C);if(U<=127)E.push(y.charCodeAt(C));else for(var M=C,K=(55296<=U&&U<=57343&&C++,encodeURIComponent(y.slice(M,C+1)).substr(1).split("%")),le=0;le<K.length;le++)E.push(parseInt(K[le],16))}return E}function ye(y){return v.toByteArray(y)}function Pt(y,E,C,U){for(var M=0;M<U&&!(M+C>=E.length||M>=y.length);M++)E[M+C]=y[M];return M}function Qe(y){try{return decodeURIComponent(y)}catch{return String.fromCharCode(65533)}}function qt(y,E){Z(typeof y=="number","cannot write a non-number as a number"),Z(0<=y,"specified a negative value for writing an unsigned value"),Z(y<=E,"value is larger than maximum value for type"),Z(Math.floor(y)===y,"value has a fractional component")}function Lt(y,E,C){Z(typeof y=="number","cannot write a non-number as a number"),Z(y<=E,"value larger than maximum allowed value"),Z(C<=y,"value smaller than minimum allowed value"),Z(Math.floor(y)===y,"value has a fractional component")}function $r(y,E,C){Z(typeof y=="number","cannot write a non-number as a number"),Z(y<=E,"value larger than maximum allowed value"),Z(C<=y,"value smaller than minimum allowed value")}function Z(y,E){if(!y)throw new Error(E||"Failed assertion")}k._augment=function(y){return y._isBuffer=!0,y._get=y.get,y._set=y.set,y.get=J.get,y.set=J.set,y.write=J.write,y.toString=J.toString,y.toLocaleString=J.toString,y.toJSON=J.toJSON,y.copy=J.copy,y.slice=J.slice,y.readUInt8=J.readUInt8,y.readUInt16LE=J.readUInt16LE,y.readUInt16BE=J.readUInt16BE,y.readUInt32LE=J.readUInt32LE,y.readUInt32BE=J.readUInt32BE,y.readInt8=J.readInt8,y.readInt16LE=J.readInt16LE,y.readInt16BE=J.readInt16BE,y.readInt32LE=J.readInt32LE,y.readInt32BE=J.readInt32BE,y.readFloatLE=J.readFloatLE,y.readFloatBE=J.readFloatBE,y.readDoubleLE=J.readDoubleLE,y.readDoubleBE=J.readDoubleBE,y.writeUInt8=J.writeUInt8,y.writeUInt16LE=J.writeUInt16LE,y.writeUInt16BE=J.writeUInt16BE,y.writeUInt32LE=J.writeUInt32LE,y.writeUInt32BE=J.writeUInt32BE,y.writeInt8=J.writeInt8,y.writeInt16LE=J.writeInt16LE,y.writeInt16BE=J.writeInt16BE,y.writeInt32LE=J.writeInt32LE,y.writeInt32BE=J.writeInt32BE,y.writeFloatLE=J.writeFloatLE,y.writeFloatBE=J.writeFloatBE,y.writeDoubleLE=J.writeDoubleLE,y.writeDoubleBE=J.writeDoubleBE,y.fill=J.fill,y.inspect=J.inspect,y.toArrayBuffer=J.toArrayBuffer,y}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(r,n,i){(function(s,a,v,l,u,c,d,h,b){var v=r("buffer").Buffer,O=4,k=new v(O);k.fill(0),n.exports={hash:function(p,m,f,S){for(var A=m(function(w,R){w.length%O!=0&&(L=w.length+(O-w.length%O),w=v.concat([w,k],L));for(var L,ee=[],Q=R?w.readInt32BE:w.readInt32LE,ne=0;ne<w.length;ne+=O)ee.push(Q.call(w,ne));return ee}(p=v.isBuffer(p)?p:new v(p),S),8*p.length),m=S,x=new v(f),j=m?x.writeInt32BE:x.writeInt32LE,_=0;_<A.length;_++)j.call(x,A[_],4*_,!0);return x}}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(r,n,i){(function(s,a,v,l,u,c,d,h,b){var v=r("buffer").Buffer,O=r("./sha"),k=r("./sha256"),p=r("./rng"),m={sha1:O,sha256:k,md5:r("./md5")},f=64,S=new v(f);function A(w,R){var L=m[w=w||"sha1"],ee=[];return L||x("algorithm:",w,"is not yet supported"),{update:function(Q){return v.isBuffer(Q)||(Q=new v(Q)),ee.push(Q),Q.length,this},digest:function(Q){var ne=v.concat(ee),ne=R?function(J,me,V){v.isBuffer(me)||(me=new v(me)),v.isBuffer(V)||(V=new v(V)),me.length>f?me=J(me):me.length<f&&(me=v.concat([me,S],f));for(var $=new v(f),F=new v(f),H=0;H<f;H++)$[H]=54^me[H],F[H]=92^me[H];return V=J(v.concat([$,V])),J(v.concat([F,V]))}(L,R,ne):L(ne);return ee=null,Q?ne.toString(Q):ne}}}function x(){var w=[].slice.call(arguments).join(" ");throw new Error([w,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join(`
`))}S.fill(0),i.createHash=function(w){return A(w)},i.createHmac=A,i.randomBytes=function(w,R){if(!R||!R.call)return new v(p(w));try{R.call(this,void 0,new v(p(w)))}catch(L){R(L)}};var j,_=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],P=function(w){i[w]=function(){x("sorry,",w,"is not implemented yet")}};for(j in _)P(_[j])}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(r,n,i){(function(s,a,o,l,u,c,d,h,b){var v=r("./helpers");function O(x,j){x[j>>5]|=128<<j%32,x[14+(j+64>>>9<<4)]=j;for(var _=1732584193,P=-271733879,w=-1732584194,R=271733878,L=0;L<x.length;L+=16){var ee=_,Q=P,ne=w,J=R,_=p(_,P,w,R,x[L+0],7,-680876936),R=p(R,_,P,w,x[L+1],12,-389564586),w=p(w,R,_,P,x[L+2],17,606105819),P=p(P,w,R,_,x[L+3],22,-1044525330);_=p(_,P,w,R,x[L+4],7,-176418897),R=p(R,_,P,w,x[L+5],12,1200080426),w=p(w,R,_,P,x[L+6],17,-1473231341),P=p(P,w,R,_,x[L+7],22,-45705983),_=p(_,P,w,R,x[L+8],7,1770035416),R=p(R,_,P,w,x[L+9],12,-1958414417),w=p(w,R,_,P,x[L+10],17,-42063),P=p(P,w,R,_,x[L+11],22,-1990404162),_=p(_,P,w,R,x[L+12],7,1804603682),R=p(R,_,P,w,x[L+13],12,-40341101),w=p(w,R,_,P,x[L+14],17,-1502002290),_=m(_,P=p(P,w,R,_,x[L+15],22,1236535329),w,R,x[L+1],5,-165796510),R=m(R,_,P,w,x[L+6],9,-1069501632),w=m(w,R,_,P,x[L+11],14,643717713),P=m(P,w,R,_,x[L+0],20,-373897302),_=m(_,P,w,R,x[L+5],5,-701558691),R=m(R,_,P,w,x[L+10],9,38016083),w=m(w,R,_,P,x[L+15],14,-660478335),P=m(P,w,R,_,x[L+4],20,-405537848),_=m(_,P,w,R,x[L+9],5,568446438),R=m(R,_,P,w,x[L+14],9,-1019803690),w=m(w,R,_,P,x[L+3],14,-187363961),P=m(P,w,R,_,x[L+8],20,1163531501),_=m(_,P,w,R,x[L+13],5,-1444681467),R=m(R,_,P,w,x[L+2],9,-51403784),w=m(w,R,_,P,x[L+7],14,1735328473),_=f(_,P=m(P,w,R,_,x[L+12],20,-1926607734),w,R,x[L+5],4,-378558),R=f(R,_,P,w,x[L+8],11,-2022574463),w=f(w,R,_,P,x[L+11],16,1839030562),P=f(P,w,R,_,x[L+14],23,-35309556),_=f(_,P,w,R,x[L+1],4,-1530992060),R=f(R,_,P,w,x[L+4],11,1272893353),w=f(w,R,_,P,x[L+7],16,-155497632),P=f(P,w,R,_,x[L+10],23,-1094730640),_=f(_,P,w,R,x[L+13],4,681279174),R=f(R,_,P,w,x[L+0],11,-358537222),w=f(w,R,_,P,x[L+3],16,-722521979),P=f(P,w,R,_,x[L+6],23,76029189),_=f(_,P,w,R,x[L+9],4,-640364487),R=f(R,_,P,w,x[L+12],11,-421815835),w=f(w,R,_,P,x[L+15],16,530742520),_=S(_,P=f(P,w,R,_,x[L+2],23,-995338651),w,R,x[L+0],6,-198630844),R=S(R,_,P,w,x[L+7],10,1126891415),w=S(w,R,_,P,x[L+14],15,-1416354905),P=S(P,w,R,_,x[L+5],21,-57434055),_=S(_,P,w,R,x[L+12],6,1700485571),R=S(R,_,P,w,x[L+3],10,-1894986606),w=S(w,R,_,P,x[L+10],15,-1051523),P=S(P,w,R,_,x[L+1],21,-2054922799),_=S(_,P,w,R,x[L+8],6,1873313359),R=S(R,_,P,w,x[L+15],10,-30611744),w=S(w,R,_,P,x[L+6],15,-1560198380),P=S(P,w,R,_,x[L+13],21,1309151649),_=S(_,P,w,R,x[L+4],6,-145523070),R=S(R,_,P,w,x[L+11],10,-1120210379),w=S(w,R,_,P,x[L+2],15,718787259),P=S(P,w,R,_,x[L+9],21,-343485551),_=A(_,ee),P=A(P,Q),w=A(w,ne),R=A(R,J)}return Array(_,P,w,R)}function k(x,j,_,P,w,R){return A((j=A(A(j,x),A(P,R)))<<w|j>>>32-w,_)}function p(x,j,_,P,w,R,L){return k(j&_|~j&P,x,j,w,R,L)}function m(x,j,_,P,w,R,L){return k(j&P|_&~P,x,j,w,R,L)}function f(x,j,_,P,w,R,L){return k(j^_^P,x,j,w,R,L)}function S(x,j,_,P,w,R,L){return k(_^(j|~P),x,j,w,R,L)}function A(x,j){var _=(65535&x)+(65535&j);return(x>>16)+(j>>16)+(_>>16)<<16|65535&_}n.exports=function(x){return v.hash(x,O,16)}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(r,n,i){(function(s,a,o,l,u,c,d,h,b){n.exports=function(v){for(var O,k=new Array(v),p=0;p<v;p++)!(3&p)&&(O=4294967296*Math.random()),k[p]=O>>>((3&p)<<3)&255;return k}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(r,n,i){(function(s,a,o,l,u,c,d,h,b){var v=r("./helpers");function O(m,f){m[f>>5]|=128<<24-f%32,m[15+(f+64>>9<<4)]=f;for(var S,A,x,j=Array(80),_=1732584193,P=-271733879,w=-1732584194,R=271733878,L=-1009589776,ee=0;ee<m.length;ee+=16){for(var Q=_,ne=P,J=w,me=R,V=L,$=0;$<80;$++){j[$]=$<16?m[ee+$]:p(j[$-3]^j[$-8]^j[$-14]^j[$-16],1);var F=k(k(p(_,5),(F=P,A=w,x=R,(S=$)<20?F&A|~F&x:!(S<40)&&S<60?F&A|F&x|A&x:F^A^x)),k(k(L,j[$]),(S=$)<20?1518500249:S<40?1859775393:S<60?-1894007588:-899497514)),L=R,R=w,w=p(P,30),P=_,_=F}_=k(_,Q),P=k(P,ne),w=k(w,J),R=k(R,me),L=k(L,V)}return Array(_,P,w,R,L)}function k(m,f){var S=(65535&m)+(65535&f);return(m>>16)+(f>>16)+(S>>16)<<16|65535&S}function p(m,f){return m<<f|m>>>32-f}n.exports=function(m){return v.hash(m,O,20,!0)}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(r,n,i){(function(s,a,o,l,u,c,d,h,b){function v(f,S){var A=(65535&f)+(65535&S);return(f>>16)+(S>>16)+(A>>16)<<16|65535&A}function O(f,S){var A,x=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),j=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),_=new Array(64);f[S>>5]|=128<<24-S%32,f[15+(S+64>>9<<4)]=S;for(var P,w,R=0;R<f.length;R+=16){for(var L=j[0],ee=j[1],Q=j[2],ne=j[3],J=j[4],me=j[5],V=j[6],$=j[7],F=0;F<64;F++)_[F]=F<16?f[F+R]:v(v(v((w=_[F-2],p(w,17)^p(w,19)^m(w,10)),_[F-7]),(w=_[F-15],p(w,7)^p(w,18)^m(w,3))),_[F-16]),A=v(v(v(v($,p(w=J,6)^p(w,11)^p(w,25)),J&me^~J&V),x[F]),_[F]),P=v(p(P=L,2)^p(P,13)^p(P,22),L&ee^L&Q^ee&Q),$=V,V=me,me=J,J=v(ne,A),ne=Q,Q=ee,ee=L,L=v(A,P);j[0]=v(L,j[0]),j[1]=v(ee,j[1]),j[2]=v(Q,j[2]),j[3]=v(ne,j[3]),j[4]=v(J,j[4]),j[5]=v(me,j[5]),j[6]=v(V,j[6]),j[7]=v($,j[7])}return j}var k=r("./helpers"),p=function(f,S){return f>>>S|f<<32-S},m=function(f,S){return f>>>S};n.exports=function(f){return k.hash(f,O,32,!0)}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(r,n,i){(function(s,a,o,l,u,c,d,h,b){i.read=function(v,O,k,p,R){var f,S,A=8*R-p-1,x=(1<<A)-1,j=x>>1,_=-7,P=k?R-1:0,w=k?-1:1,R=v[O+P];for(P+=w,f=R&(1<<-_)-1,R>>=-_,_+=A;0<_;f=256*f+v[O+P],P+=w,_-=8);for(S=f&(1<<-_)-1,f>>=-_,_+=p;0<_;S=256*S+v[O+P],P+=w,_-=8);if(f===0)f=1-j;else{if(f===x)return S?NaN:1/0*(R?-1:1);S+=Math.pow(2,p),f-=j}return(R?-1:1)*S*Math.pow(2,f-p)},i.write=function(v,O,k,p,m,L){var S,A,x=8*L-m-1,j=(1<<x)-1,_=j>>1,P=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=p?0:L-1,R=p?1:-1,L=O<0||O===0&&1/O<0?1:0;for(O=Math.abs(O),isNaN(O)||O===1/0?(A=isNaN(O)?1:0,S=j):(S=Math.floor(Math.log(O)/Math.LN2),O*(p=Math.pow(2,-S))<1&&(S--,p*=2),2<=(O+=1<=S+_?P/p:P*Math.pow(2,1-_))*p&&(S++,p/=2),j<=S+_?(A=0,S=j):1<=S+_?(A=(O*p-1)*Math.pow(2,m),S+=_):(A=O*Math.pow(2,_-1)*Math.pow(2,m),S=0));8<=m;v[k+w]=255&A,w+=R,A/=256,m-=8);for(S=S<<m|A,x+=m;0<x;v[k+w]=255&S,w+=R,S/=256,x-=8);v[k+w-R]|=128*L}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(r,n,i){(function(s,a,o,l,u,c,d,h,b){var v,O,k;function p(){}(s=n.exports={}).nextTick=(O=typeof window<"u"&&window.setImmediate,k=typeof window<"u"&&window.postMessage&&window.addEventListener,O?function(m){return window.setImmediate(m)}:k?(v=[],window.addEventListener("message",function(m){var f=m.source;f!==window&&f!==null||m.data!=="process-tick"||(m.stopPropagation(),0<v.length&&v.shift()())},!0),function(m){v.push(m),window.postMessage("process-tick","*")}):function(m){setTimeout(m,0)}),s.title="browser",s.browser=!0,s.env={},s.argv=[],s.on=p,s.addListener=p,s.once=p,s.off=p,s.removeListener=p,s.removeAllListeners=p,s.emit=p,s.binding=function(m){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(m){throw new Error("process.chdir is not supported")}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)})})(H_);var GO=H_.exports;const YO=Ts(GO),Pg=(...t)=>YO(t.join("_")),QO=new Map;class Gf extends GE{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,r){return Promise.resolve(this.cache.get(Pg(e,r))??null)}async update(e,r,n){this.cache.set(Pg(e,r),n)}static global(){return new Gf(QO)}}const XO=()=>!1;class Z_ extends yt{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??XO(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}}class K_ extends Z_{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor({callbacks:e,callbackManager:r,...n}){super({callbacks:e??r,...n}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof n.cache=="object"?this.cache=n.cache:n.cache?this.cache=Gf.global():this.cache=void 0,this.caller=new Af(n??{})}async getNumTokens(e){let r=Math.ceil(e.length/4);if(!this._encoding)try{this._encoding=await DE("modelName"in this?ah(this.modelName):"gpt2")}catch(n){console.warn("Failed to calculate number of tokens, falling back to approximate count",n)}return this._encoding&&(r=this._encoding.encode(e).length),r}static _convertInputToPromptValue(e){return typeof e=="string"?new U_(e):Array.isArray(e)?new B_(e.map(Ca)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall(e){const r={...this._identifyingParams(),...e,_type:this._llmType(),_model:this._modelType()};return Object.entries(r).filter(([s,a])=>a!==void 0).map(([s,a])=>`${s}:${JSON.stringify(a)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){const{_type:r,_model:n,...i}=e;if(n&&n!=="base_chat_model")throw new Error(`Cannot load LLM with model ${n}`);const s={openai:(await rt(()=>Promise.resolve().then(()=>sP),void 0,import.meta.url)).ChatOpenAI}[r];if(s===void 0)throw new Error(`Cannot load LLM with type ${r}`);return new s(i)}}class ni extends K_{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models",this._llmType()]})}_separateRunnableConfigFromCallOptions(e){const[r,n]=super._separateRunnableConfigFromCallOptions(e);return n!=null&&n.timeout&&!n.signal&&(n.signal=AbortSignal.timeout(n.timeout)),[r,n]}async invoke(e,r){const n=ni._convertInputToPromptValue(e);return(await this.generatePrompt([n],r,r==null?void 0:r.callbacks)).generations[0][0].message}async*_streamResponseChunks(e,r,n){throw new Error("Not implemented.")}async*_streamIterator(e,r){if(this._streamResponseChunks===ni.prototype._streamResponseChunks)yield this.invoke(e,r);else{const i=ni._convertInputToPromptValue(e).toChatMessages(),[s,a]=this._separateRunnableConfigFromCallOptions(r),o=await Ft.configure(s.callbacks,this.callbacks,s.tags,this.tags,s.metadata,this.metadata,{verbose:this.verbose}),l={options:a,invocation_params:this==null?void 0:this.invocationParams(a)},u=await(o==null?void 0:o.handleChatModelStart(this.toJSON(),[i],void 0,void 0,l));let c;try{for await(const d of this._streamResponseChunks(i,a,u==null?void 0:u[0]))yield d.message,c?c=c.concat(d):c=d}catch(d){throw await Promise.all((u??[]).map(h=>h==null?void 0:h.handleLLMError(d))),d}await Promise.all((u??[]).map(d=>d==null?void 0:d.handleLLMEnd({generations:[[c]]})))}}async _generateUncached(e,r,n){var h;const i=e.map(b=>b.map(Ca)),s=await Ft.configure(n.callbacks,this.callbacks,n.tags,this.tags,n.metadata,this.metadata,{verbose:this.verbose}),a={options:r,invocation_params:this==null?void 0:this.invocationParams(r)},o=await(s==null?void 0:s.handleChatModelStart(this.toJSON(),i,void 0,void 0,a)),l=await Promise.allSettled(i.map((b,v)=>this._generate(b,{...r,promptIndex:v},o==null?void 0:o[v]))),u=[],c=[];await Promise.all(l.map(async(b,v)=>{var O,k;if(b.status==="fulfilled"){const p=b.value;return u[v]=p.generations,c[v]=p.llmOutput,(O=o==null?void 0:o[v])==null?void 0:O.handleLLMEnd({generations:[p.generations],llmOutput:p.llmOutput})}else return await((k=o==null?void 0:o[v])==null?void 0:k.handleLLMError(b.reason)),Promise.reject(b.reason)}));const d={generations:u,llmOutput:c.length?(h=this._combineLLMOutput)==null?void 0:h.call(this,...c):void 0};return Object.defineProperty(d,U0,{value:o?{runIds:o==null?void 0:o.map(b=>b.runId)}:void 0,configurable:!0}),d}async generate(e,r,n){let i;Array.isArray(r)?i={stop:r}:i=r;const s=e.map(b=>b.map(Ca)),[a,o]=this._separateRunnableConfigFromCallOptions(i);if(a.callbacks=a.callbacks??n,!this.cache)return this._generateUncached(s,o,a);const{cache:l}=this,u=this._getSerializedCacheKeyParametersForCall(o),c=[],d=await Promise.all(s.map(async(b,v)=>{const O=ni._convertInputToPromptValue(b).toString(),k=await l.lookup(O,u);return k||c.push(v),k}));let h={};if(c.length>0){const b=await this._generateUncached(c.map(v=>s[v]),o,a);await Promise.all(b.generations.map(async(v,O)=>{const k=c[O];d[k]=v;const p=ni._convertInputToPromptValue(s[k]).toString();return l.update(p,u,v)})),h=b.llmOutput??{}}return{generations:d,llmOutput:h}}invocationParams(e){return{}}_modelType(){return"base_chat_model"}serialize(){return{...this.invocationParams(),_type:this._llmType(),_model:this._modelType()}}async generatePrompt(e,r,n){const i=e.map(s=>s.toChatMessages());return this.generate(i,r,n)}async call(e,r,n){return(await this.generate([e.map(Ca)],r,n)).generations[0][0].message}async callPrompt(e,r,n){const i=e.toChatMessages();return this.call(i,r,n)}async predictMessages(e,r,n){return this.call(e,r,n)}async predict(e,r,n){const i=new wi(e);return(await this.call([i],r,n)).content}}function eP(t){let e;return t.constructor.name===QS.name?(e=new Error(t.message),e.name="TimeoutError"):t.constructor.name===XS.name?(e=new Error(t.message),e.name="AbortError"):e=t,e}function tP(t){return t.role!=="system"&&t.role!=="assistant"&&t.role!=="user"&&t.role!=="function"&&console.warn(`Unknown message role: ${t.role}`),t.role}function gl(t){const e=t._getType();switch(e){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"generic":{if(!Hu.isInstance(t))throw new Error("Invalid generic chat message");return tP(t)}default:throw new Error(`Unknown message type: ${e}`)}}function rP(t){switch(t.role){case"user":return new wi(t.content||"");case"assistant":return new Vu(t.content||"",{function_call:t.function_call});case"system":return new Rf(t.content||"");default:return new Hu(t.content||"",t.role??"unknown")}}function nP(t,e){const r=t.role??e,n=t.content??"";let i;return t.function_call?i={function_call:t.function_call}:i={},r==="user"?new lu({content:n}):r==="assistant"?new uu({content:n,additional_kwargs:i}):r==="system"?new cu({content:n}):r==="function"?new du({content:n,additional_kwargs:i,name:t.name}):new hu({content:n,role:r})}class Yf extends ni{static lc_name(){return"ChatOpenAI"}get callKeys(){return[...super.callKeys,"options","function_call","functions","tools","promptIndex"]}get lc_secrets(){return{openAIApiKey:"OPENAI_API_KEY",azureOpenAIApiKey:"AZURE_OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{modelName:"model",openAIApiKey:"openai_api_key",azureOpenAIApiVersion:"azure_openai_api_version",azureOpenAIApiKey:"azure_openai_api_key",azureOpenAIApiInstanceName:"azure_openai_api_instance_name",azureOpenAIApiDeploymentName:"azure_openai_api_deployment_name"}}constructor(e,r){var n,i,s,a,o,l,u,c;if(super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"openAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.openAIApiKey=(e==null?void 0:e.openAIApiKey)??pt("OPENAI_API_KEY"),this.azureOpenAIApiKey=(e==null?void 0:e.azureOpenAIApiKey)??pt("AZURE_OPENAI_API_KEY"),!this.azureOpenAIApiKey&&!this.openAIApiKey)throw new Error("OpenAI or Azure OpenAI API key not found");if(this.azureOpenAIApiInstanceName=(e==null?void 0:e.azureOpenAIApiInstanceName)??pt("AZURE_OPENAI_API_INSTANCE_NAME"),this.azureOpenAIApiDeploymentName=(e==null?void 0:e.azureOpenAIApiDeploymentName)??pt("AZURE_OPENAI_API_DEPLOYMENT_NAME"),this.azureOpenAIApiVersion=(e==null?void 0:e.azureOpenAIApiVersion)??pt("AZURE_OPENAI_API_VERSION"),this.azureOpenAIBasePath=(e==null?void 0:e.azureOpenAIBasePath)??pt("AZURE_OPENAI_BASE_PATH"),this.organization=((n=e==null?void 0:e.configuration)==null?void 0:n.organization)??pt("OPENAI_ORGANIZATION"),this.modelName=(e==null?void 0:e.modelName)??this.modelName,this.modelKwargs=(e==null?void 0:e.modelKwargs)??{},this.timeout=e==null?void 0:e.timeout,this.temperature=(e==null?void 0:e.temperature)??this.temperature,this.topP=(e==null?void 0:e.topP)??this.topP,this.frequencyPenalty=(e==null?void 0:e.frequencyPenalty)??this.frequencyPenalty,this.presencePenalty=(e==null?void 0:e.presencePenalty)??this.presencePenalty,this.maxTokens=e==null?void 0:e.maxTokens,this.n=(e==null?void 0:e.n)??this.n,this.logitBias=e==null?void 0:e.logitBias,this.stop=e==null?void 0:e.stop,this.user=e==null?void 0:e.user,this.streaming=(e==null?void 0:e.streaming)??!1,this.azureOpenAIApiKey){if(!this.azureOpenAIApiInstanceName&&!this.azureOpenAIBasePath)throw new Error("Azure OpenAI API instance name not found");if(!this.azureOpenAIApiDeploymentName)throw new Error("Azure OpenAI API deployment name not found");if(!this.azureOpenAIApiVersion)throw new Error("Azure OpenAI API version not found");this.openAIApiKey=this.openAIApiKey??""}this.clientConfig={apiKey:this.openAIApiKey,organization:this.organization,baseURL:(r==null?void 0:r.basePath)??((i=e==null?void 0:e.configuration)==null?void 0:i.basePath),dangerouslyAllowBrowser:!0,defaultHeaders:((s=r==null?void 0:r.baseOptions)==null?void 0:s.headers)??((o=(a=e==null?void 0:e.configuration)==null?void 0:a.baseOptions)==null?void 0:o.headers),defaultQuery:((l=r==null?void 0:r.baseOptions)==null?void 0:l.params)??((c=(u=e==null?void 0:e.configuration)==null?void 0:u.baseOptions)==null?void 0:c.params),...r,...e==null?void 0:e.configuration}}invocationParams(e){return{model:this.modelName,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,max_tokens:this.maxTokens===-1?void 0:this.maxTokens,n:this.n,logit_bias:this.logitBias,stop:(e==null?void 0:e.stop)??this.stop,user:this.user,stream:this.streaming,functions:(e==null?void 0:e.functions)??(e!=null&&e.tools?e==null?void 0:e.tools.map(B2):void 0),function_call:e==null?void 0:e.function_call,...this.modelKwargs}}_identifyingParams(){return{model_name:this.modelName,...this.invocationParams(),...this.clientConfig}}async*_streamResponseChunks(e,r,n){var l;const i=e.map(u=>({role:gl(u),content:u.content,name:u.name,function_call:u.additional_kwargs.function_call})),s={...this.invocationParams(r),messages:i,stream:!0};let a;const o=await this.completionWithRetry(s,r);for await(const u of o){const c=u==null?void 0:u.choices[0];if(!c)continue;const{delta:d}=c,h=nP(d,a);a=d.role??a;const b={prompt:r.promptIndex??0,completion:c.index??0},v=new Nf({message:h,text:h.content,generationInfo:b});yield v,n==null||n.handleLLMNewToken(v.text??"",b,void 0,void 0,void 0,{chunk:v})}if((l=r.signal)!=null&&l.aborted)throw new Error("AbortError")}identifyingParams(){return this._identifyingParams()}async _generate(e,r,n){var o,l;const i={},s=this.invocationParams(r),a=e.map(u=>({role:gl(u),content:u.content,name:u.name,function_call:u.additional_kwargs.function_call}));if(s.stream){const u=await this._streamResponseChunks(e,r,n),c={};for await(const h of u){const b=((o=h.generationInfo)==null?void 0:o.completion)??0;c[b]===void 0?c[b]=h:c[b]=c[b].concat(h)}return{generations:Object.entries(c).sort(([h],[b])=>parseInt(h,10)-parseInt(b,10)).map(([h,b])=>b)}}else{const u=await this.completionWithRetry({...s,stream:!1,messages:a},{signal:r==null?void 0:r.signal,...r==null?void 0:r.options}),{completion_tokens:c,prompt_tokens:d,total_tokens:h}=(u==null?void 0:u.usage)??{};c&&(i.completionTokens=(i.completionTokens??0)+c),d&&(i.promptTokens=(i.promptTokens??0)+d),h&&(i.totalTokens=(i.totalTokens??0)+h);const b=[];for(const v of(u==null?void 0:u.choices)??[]){const k={text:((l=v.message)==null?void 0:l.content)??"",message:rP(v.message??{role:"assistant"})};v.finish_reason&&(k.generationInfo={finish_reason:v.finish_reason}),b.push(k)}return{generations:b,llmOutput:{tokenUsage:i}}}}async getNumTokensFromMessages(e){let r=0,n=0,i=0;ah(this.modelName)==="gpt-3.5-turbo"?(n=4,i=-1):ah(this.modelName).startsWith("gpt-4")&&(n=3,i=1);const s=await Promise.all(e.map(async a=>{const o=await this.getNumTokens(a.content),l=await this.getNumTokens(gl(a)),u=a.name!==void 0?i+await this.getNumTokens(a.name):0,c=o+n+l+u;return r+=c,c}));return r+=3,{totalCount:r,countPerMessage:s}}async completionWithRetry(e,r){const n=this._getClientOptions(r);return this.caller.call(async()=>{try{return await this.client.chat.completions.create(e,n)}catch(i){throw eP(i)}})}_getClientOptions(e){if(!this.client){const n={azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,baseURL:this.clientConfig.baseURL},i=V2(n),s={...this.clientConfig,baseURL:i,timeout:this.timeout,maxRetries:0};s.baseURL||delete s.baseURL,this.client=new at(s)}const r={...this.clientConfig,...e};return this.azureOpenAIApiKey&&(r.headers={"api-key":this.azureOpenAIApiKey,...r.headers},r.query={"api-version":this.azureOpenAIApiVersion,...r.query}),r}_llmType(){return"openai"}_combineLLMOutput(...e){return e.reduce((r,n)=>(n&&n.tokenUsage&&(r.tokenUsage.completionTokens+=n.tokenUsage.completionTokens??0,r.tokenUsage.promptTokens+=n.tokenUsage.promptTokens??0,r.tokenUsage.totalTokens+=n.tokenUsage.totalTokens??0),r),{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}}class iP extends Yf{constructor(e){var r;super(e),Object.defineProperty(this,"promptLayerApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"plTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnPromptLayerId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.promptLayerApiKey=(e==null?void 0:e.promptLayerApiKey)??(typeof process<"u"?(r=process.env)==null?void 0:r.PROMPTLAYER_API_KEY:void 0),this.plTags=(e==null?void 0:e.plTags)??[],this.returnPromptLayerId=(e==null?void 0:e.returnPromptLayerId)??!1}async _generate(e,r,n){const i=Date.now();let s;Array.isArray(r)?s={stop:r}:r!=null&&r.timeout&&!r.signal?s={...r,signal:AbortSignal.timeout(r.timeout)}:s=r??{};const a=await super._generate(e,s,n),o=Date.now(),l=c=>{let d;if(c._getType()==="human")d={role:"user",content:c.content};else if(c._getType()==="ai")d={role:"assistant",content:c.content};else if(c._getType()==="function")d={role:"assistant",content:c.content};else if(c._getType()==="system")d={role:"system",content:c.content};else if(c._getType()==="generic")d={role:c.role,content:c.content};else throw new Error(`Got unknown type ${c}`);return d},u=(c,d)=>{const h={...this.invocationParams(),model:this.modelName};if(d!=null&&d.stop&&Object.keys(h).includes("stop"))throw new Error("`stop` found in both the input and default params.");return c.map(v=>l(v))};for(let c=0;c<a.generations.length;c+=1){const d=a.generations[c],h=u(e,s);let b;const v=[{content:d.text,role:gl(d.message)}],O=await G2(this.caller,"langchain.PromptLayerChatOpenAI",{...this._identifyingParams(),messages:h,stream:!1},this.plTags,v,i,o,this.promptLayerApiKey);this.returnPromptLayerId===!0&&(O.success===!0&&(b=O.request_id),(!d.generationInfo||typeof d.generationInfo!="object")&&(d.generationInfo={}),d.generationInfo.promptLayerRequestId=b)}return a}}const sP=Object.freeze(Object.defineProperty({__proto__:null,ChatOpenAI:Yf,PromptLayerChatOpenAI:iP},Symbol.toStringTag,{value:"Module"}));class aP extends JE{constructor(e){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","stores","message","in_memory"]}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.messages=e??[]}async getMessages(){return this.messages}async addMessage(e){this.messages.push(e)}async clear(){this.messages=[]}}class oP extends pO{constructor(e){super(),Object.defineProperty(this,"chatHistory",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnMessages",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.chatHistory=(e==null?void 0:e.chatHistory)??new aP,this.returnMessages=(e==null?void 0:e.returnMessages)??this.returnMessages,this.inputKey=(e==null?void 0:e.inputKey)??this.inputKey,this.outputKey=(e==null?void 0:e.outputKey)??this.outputKey}async saveContext(e,r){await this.chatHistory.addUserMessage(mO(e,this.inputKey)),await this.chatHistory.addAIChatMessage(gO(r,this.outputKey))}async clear(){await this.chatHistory.clear()}}class lP extends Z_{get lc_namespace(){return["langchain","chains",this._chainType()]}constructor(e,r,n){if(arguments.length===1&&typeof e=="object"&&!("saveContext"in e)){const{memory:i,callbackManager:s,...a}=e;super({...a,callbacks:s??a.callbacks}),this.memory=i}else super({verbose:r,callbacks:n}),this.memory=e}_selectMemoryInputs(e){const r={...e};return"signal"in r&&delete r.signal,"timeout"in r&&delete r.timeout,r}async invoke(e,r){return this.call(e,r)}serialize(){throw new Error("Method not implemented.")}async run(e,r){const n=this.inputKeys.filter(l=>{var u;return!((u=this.memory)!=null&&u.memoryKeys.includes(l))});if(!(n.length<=1))throw new Error(`Chain ${this._chainType()} expects multiple inputs, cannot use 'run' `);const s=n.length?{[n[0]]:e}:{},a=await this.call(s,r),o=Object.keys(a);if(o.length===1)return a[o[0]];throw new Error("return values have multiple keys, `run` only supported when one key currently")}async _formatValues(e){const r={...e};if(r.timeout&&!r.signal&&(r.signal=AbortSignal.timeout(r.timeout),delete r.timeout),this.memory!=null){const n=await this.memory.loadMemoryVariables(this._selectMemoryInputs(e));for(const[i,s]of Object.entries(n))r[i]=s}return r}async call(e,r,n){const i=await this._formatValues(e),s=bO(r),a=await Ft.configure(s.callbacks,this.callbacks,s.tags||n,this.tags,s.metadata,this.metadata,{verbose:this.verbose}),o=await(a==null?void 0:a.handleChainStart(this.toJSON(),i));let l;try{l=await(e.signal?Promise.race([this._call(i,o),new Promise((u,c)=>{var d;(d=e.signal)==null||d.addEventListener("abort",()=>{c(new Error("AbortError"))})})]):this._call(i,o))}catch(u){throw await(o==null?void 0:o.handleChainError(u)),u}return this.memory!=null&&await this.memory.saveContext(this._selectMemoryInputs(e),l),await(o==null?void 0:o.handleChainEnd(l)),Object.defineProperty(l,U0,{value:o?{runId:o==null?void 0:o.runId}:void 0,configurable:!0}),l}async apply(e,r){return Promise.all(e.map(async(n,i)=>this.call(n,r==null?void 0:r[i])))}static async deserialize(e,r={}){switch(e._type){case"llm_chain":{const{LLMChain:n}=await rt(()=>Promise.resolve().then(()=>hP),void 0,import.meta.url);return n.deserialize(e)}case"sequential_chain":{const{SequentialChain:n}=await rt(()=>import("./sequential_chain-574b749f.js"),["./sequential_chain-574b749f.js","./embed-e406f2b7.css"],import.meta.url);return n.deserialize(e)}case"simple_sequential_chain":{const{SimpleSequentialChain:n}=await rt(()=>import("./sequential_chain-574b749f.js"),["./sequential_chain-574b749f.js","./embed-e406f2b7.css"],import.meta.url);return n.deserialize(e)}case"stuff_documents_chain":{const{StuffDocumentsChain:n}=await rt(()=>import("./combine_docs_chain-e60f8786.js"),["./combine_docs_chain-e60f8786.js","./embed-e406f2b7.css"],import.meta.url);return n.deserialize(e)}case"map_reduce_documents_chain":{const{MapReduceDocumentsChain:n}=await rt(()=>import("./combine_docs_chain-e60f8786.js"),["./combine_docs_chain-e60f8786.js","./embed-e406f2b7.css"],import.meta.url);return n.deserialize(e)}case"refine_documents_chain":{const{RefineDocumentsChain:n}=await rt(()=>import("./combine_docs_chain-e60f8786.js"),["./combine_docs_chain-e60f8786.js","./embed-e406f2b7.css"],import.meta.url);return n.deserialize(e)}case"vector_db_qa":{const{VectorDBQAChain:n}=await rt(()=>import("./vector_db_qa-e2ce9426.js"),["./vector_db_qa-e2ce9426.js","./combine_docs_chain-e60f8786.js","./embed-e406f2b7.css"],import.meta.url);return n.deserialize(e,r)}case"api_chain":{const{APIChain:n}=await rt(()=>import("./api_chain-319ee231.js"),["./api_chain-319ee231.js","./embed-e406f2b7.css"],import.meta.url);return n.deserialize(e)}default:throw new Error(`Invalid prompt type in config: ${e._type}`)}}}class uP extends yt{parseResultWithPrompt(e,r,n){return this.parseResult(e,n)}async invoke(e,r){return typeof e=="string"?this._callWithConfig(async n=>this.parseResult([{text:n}]),e,{...r,runType:"parser"}):this._callWithConfig(async n=>this.parseResult([{message:n,text:n.content}]),e,{...r,runType:"parser"})}}class cP extends uP{parseResult(e,r){return this.parse(e[0].text,r)}async parseWithPrompt(e,r,n){return this.parse(e,n)}_type(){throw new Error("_type not implemented")}}class dP extends cP{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","default"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"NoOpOutputParser"}parse(e){return Promise.resolve(e)}getFormatInstructions(){return""}}class lc extends lP{static lc_name(){return"LLMChain"}get inputKeys(){return this.prompt.inputVariables}get outputKeys(){return[this.outputKey]}constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"llm",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"llmKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputKey",{enumerable:!0,configurable:!0,writable:!0,value:"text"}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt,this.llm=e.llm,this.llmKwargs=e.llmKwargs,this.outputKey=e.outputKey??this.outputKey,this.outputParser=e.outputParser??new dP,this.prompt.outputParser){if(e.outputParser)throw new Error("Cannot set both outputParser and prompt.outputParser");this.outputParser=this.prompt.outputParser}}_selectMemoryInputs(e){const r=super._selectMemoryInputs(e);for(const n of this.llm.callKeys)n in e&&delete r[n];return r}async _getFinalOutput(e,r,n){let i;return this.outputParser?i=await this.outputParser.parseResultWithPrompt(e,r,n==null?void 0:n.getChild()):i=e[0].text,i}call(e,r){return super.call(e,r)}async _call(e,r){const n={...e},i={...this.llmKwargs};for(const o of this.llm.callKeys)o in e&&(i[o]=e[o],delete n[o]);const s=await this.prompt.formatPromptValue(n),{generations:a}=await this.llm.generatePrompt([s],i,r==null?void 0:r.getChild());return{[this.outputKey]:await this._getFinalOutput(a[0],s,r)}}async predict(e,r){return(await this.call(e,r))[this.outputKey]}_chainType(){return"llm"}static async deserialize(e){const{llm:r,prompt:n}=e;if(!r)throw new Error("LLMChain must have llm");if(!n)throw new Error("LLMChain must have prompt");return new lc({llm:await K_.deserialize(r),prompt:await Jf.deserialize(n)})}serialize(){return{_type:`${this._chainType()}_chain`,llm:this.llm.serialize(),prompt:this.prompt.serialize()}}}const hP=Object.freeze(Object.defineProperty({__proto__:null,LLMChain:lc},Symbol.toStringTag,{value:"Module"}));class fP extends oP{constructor(e){super({returnMessages:(e==null?void 0:e.returnMessages)??!1,chatHistory:e==null?void 0:e.chatHistory,inputKey:e==null?void 0:e.inputKey,outputKey:e==null?void 0:e.outputKey}),Object.defineProperty(this,"humanPrefix",{enumerable:!0,configurable:!0,writable:!0,value:"Human"}),Object.defineProperty(this,"aiPrefix",{enumerable:!0,configurable:!0,writable:!0,value:"AI"}),Object.defineProperty(this,"memoryKey",{enumerable:!0,configurable:!0,writable:!0,value:"history"}),Object.defineProperty(this,"k",{enumerable:!0,configurable:!0,writable:!0,value:5}),this.humanPrefix=(e==null?void 0:e.humanPrefix)??this.humanPrefix,this.aiPrefix=(e==null?void 0:e.aiPrefix)??this.aiPrefix,this.memoryKey=(e==null?void 0:e.memoryKey)??this.memoryKey,this.k=(e==null?void 0:e.k)??this.k}get memoryKeys(){return[this.memoryKey]}async loadMemoryVariables(e){const r=await this.chatHistory.getMessages();return this.returnMessages?{[this.memoryKey]:r.slice(-this.k*2)}:{[this.memoryKey]:Zf(r.slice(-this.k*2),this.humanPrefix,this.aiPrefix)}}}/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function q_(t){return typeof t>"u"||t===null}function pP(t){return typeof t=="object"&&t!==null}function mP(t){return Array.isArray(t)?t:q_(t)?[]:[t]}function gP(t,e){var r,n,i,s;if(e)for(s=Object.keys(e),r=0,n=s.length;r<n;r+=1)i=s[r],t[i]=e[i];return t}function yP(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function vP(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var _P=q_,wP=pP,bP=mP,xP=yP,kP=vP,SP=gP,Qf={isNothing:_P,isObject:wP,toArray:bP,repeat:xP,isNegativeZero:kP,extend:SP};function W_(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function mo(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=W_(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}mo.prototype=Object.create(Error.prototype);mo.prototype.constructor=mo;mo.prototype.toString=function(e){return this.name+": "+W_(this,e)};var ii=mo,EP=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],OP=["scalar","sequence","mapping"];function PP(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function TP(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(EP.indexOf(r)===-1)throw new ii('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=PP(e.styleAliases||null),OP.indexOf(this.kind)===-1)throw new ii('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var vt=TP;function Tg(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(s,a){s.tag===n.tag&&s.kind===n.kind&&s.multi===n.multi&&(i=a)}),r[i]=n}),r}function jP(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function fh(t){return this.extend(t)}fh.prototype.extend=function(e){var r=[],n=[];if(e instanceof vt)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new ii("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(s){if(!(s instanceof vt))throw new ii("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new ii("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new ii("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(s){if(!(s instanceof vt))throw new ii("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(fh.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=Tg(i,"implicit"),i.compiledExplicit=Tg(i,"explicit"),i.compiledTypeMap=jP(i.compiledImplicit,i.compiledExplicit),i};var CP=fh,AP=new vt("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),IP=new vt("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),RP=new vt("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),NP=new CP({explicit:[AP,IP,RP]});function LP(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function $P(){return null}function DP(t){return t===null}var MP=new vt("tag:yaml.org,2002:null",{kind:"scalar",resolve:LP,construct:$P,predicate:DP,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function UP(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function zP(t){return t==="true"||t==="True"||t==="TRUE"}function FP(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var BP=new vt("tag:yaml.org,2002:bool",{kind:"scalar",resolve:UP,construct:zP,predicate:FP,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function VP(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function HP(t){return 48<=t&&t<=55}function ZP(t){return 48<=t&&t<=57}function KP(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!VP(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!HP(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!ZP(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function qP(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function WP(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Qf.isNegativeZero(t)}var JP=new vt("tag:yaml.org,2002:int",{kind:"scalar",resolve:KP,construct:qP,predicate:WP,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),GP=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function YP(t){return!(t===null||!GP.test(t)||t[t.length-1]==="_")}function QP(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var XP=/^[-+]?[0-9]+e/;function eT(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Qf.isNegativeZero(t))return"-0.0";return r=t.toString(10),XP.test(r)?r.replace("e",".e"):r}function tT(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Qf.isNegativeZero(t))}var rT=new vt("tag:yaml.org,2002:float",{kind:"scalar",resolve:YP,construct:QP,predicate:tT,represent:eT,defaultStyle:"lowercase"}),nT=NP.extend({implicit:[MP,BP,JP,rT]}),iT=nT,J_=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),G_=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function sT(t){return t===null?!1:J_.exec(t)!==null||G_.exec(t)!==null}function aT(t){var e,r,n,i,s,a,o,l=0,u=null,c,d,h;if(e=J_.exec(t),e===null&&(e=G_.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(s=+e[4],a=+e[5],o=+e[6],e[7]){for(l=e[7].slice(0,3);l.length<3;)l+="0";l=+l}return e[9]&&(c=+e[10],d=+(e[11]||0),u=(c*60+d)*6e4,e[9]==="-"&&(u=-u)),h=new Date(Date.UTC(r,n,i,s,a,o,l)),u&&h.setTime(h.getTime()-u),h}function oT(t){return t.toISOString()}var lT=new vt("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:sT,construct:aT,instanceOf:Date,represent:oT});function uT(t){return t==="<<"||t===null}var cT=new vt("tag:yaml.org,2002:merge",{kind:"scalar",resolve:uT}),Xf=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function dT(t){if(t===null)return!1;var e,r,n=0,i=t.length,s=Xf;for(r=0;r<i;r++)if(e=s.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function hT(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,s=Xf,a=0,o=[];for(e=0;e<i;e++)e%4===0&&e&&(o.push(a>>16&255),o.push(a>>8&255),o.push(a&255)),a=a<<6|s.indexOf(n.charAt(e));return r=i%4*6,r===0?(o.push(a>>16&255),o.push(a>>8&255),o.push(a&255)):r===18?(o.push(a>>10&255),o.push(a>>2&255)):r===12&&o.push(a>>4&255),new Uint8Array(o)}function fT(t){var e="",r=0,n,i,s=t.length,a=Xf;for(n=0;n<s;n++)n%3===0&&n&&(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]),r=(r<<8)+t[n];return i=s%3,i===0?(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]):i===2?(e+=a[r>>10&63],e+=a[r>>4&63],e+=a[r<<2&63],e+=a[64]):i===1&&(e+=a[r>>2&63],e+=a[r<<4&63],e+=a[64],e+=a[64]),e}function pT(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var mT=new vt("tag:yaml.org,2002:binary",{kind:"scalar",resolve:dT,construct:hT,predicate:pT,represent:fT}),gT=Object.prototype.hasOwnProperty,yT=Object.prototype.toString;function vT(t){if(t===null)return!0;var e=[],r,n,i,s,a,o=t;for(r=0,n=o.length;r<n;r+=1){if(i=o[r],a=!1,yT.call(i)!=="[object Object]")return!1;for(s in i)if(gT.call(i,s))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}function _T(t){return t!==null?t:[]}var wT=new vt("tag:yaml.org,2002:omap",{kind:"sequence",resolve:vT,construct:_T}),bT=Object.prototype.toString;function xT(t){if(t===null)return!0;var e,r,n,i,s,a=t;for(s=new Array(a.length),e=0,r=a.length;e<r;e+=1){if(n=a[e],bT.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;s[e]=[i[0],n[i[0]]]}return!0}function kT(t){if(t===null)return[];var e,r,n,i,s,a=t;for(s=new Array(a.length),e=0,r=a.length;e<r;e+=1)n=a[e],i=Object.keys(n),s[e]=[i[0],n[i[0]]];return s}var ST=new vt("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:xT,construct:kT}),ET=Object.prototype.hasOwnProperty;function OT(t){if(t===null)return!0;var e,r=t;for(e in r)if(ET.call(r,e)&&r[e]!==null)return!1;return!0}function PT(t){return t!==null?t:{}}var TT=new vt("tag:yaml.org,2002:set",{kind:"mapping",resolve:OT,construct:PT});iT.extend({implicit:[lT,cT],explicit:[mT,wT,ST,TT]});function jg(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"":t===95?"":t===76?"\u2028":t===80?"\u2029":""}var jT=new Array(256),CT=new Array(256);for(var Ni=0;Ni<256;Ni++)jT[Ni]=jg(Ni)?1:0,CT[Ni]=jg(Ni);const Y_=async t=>{try{return fetch(window.Shopify.routes.root+t).then(e=>e.json()).then(e=>e)}catch(e){return console.error(`Error fetching endpoint ${t}: with message %s`,e.message),null}},AT=t=>{const{title:e,body_html:r,id:n}=t;return JSON.stringify({title:e,description:r,id:n})},IT=async t=>{var r,n;const e=await Y_(`search/suggest.json?q=${t}&resources[type]=product&resources[options][unavailable_products]=hide&resources[options][fields]=title,product_type,variants.title`);return(n=(r=e==null?void 0:e.resources)==null?void 0:r.results)==null?void 0:n.products},RT=async()=>{var e;const t=await Y_("products.json?limit=250&status=active");return console.log(t),(e=t==null?void 0:t.products)==null?void 0:e.map(r=>AT(r)).join(`\r
`)},NT=async t=>{const e=await c0(t.clientId);switch(t.name){case"page_viewed":return e.isNew===!0?"Hey there, welcome to the store! Click me to ask any questions.":"Welcome back to the store! Let me know if I can show you around.";case"cart_viewed":return"Let me know if I can answer any more questions about your cart items.";case"product_viewed":return`Have any questions about ${t.detail.productVariant.product.title}? Feel free to ask me anything`;case"search_submitted":return`Let me know if I can help with your search for "${t.detail.query}". Happy to help!`;default:return"Click me for any questions, powered by AI"}},LT=new Yf({openAIApiKey:"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",temperature:.7,streaming:!0}),$T=async t=>{let e=[];const r=await c0(t.clientId);if(e.push(r.message),r.isNew===!1){const n=await fS(t.clientId),i=await pS(t.clientId);n.hasItems===!0&&(e.push(n.message),e.push(n.cartURL)),i.hasViewed===!0&&(e.push(i.message),e.push(i.productURLs))}return await Q_(e)},Q_=async(t=[])=>{const e=await RT(),r=`You are a helpful online sales assistant. Your goal is to help customers in their shopping experience whether it's by answering questions, recommending products, or helping them checkout. Be friendly, helpful, and concise in your responses. The below is relevant context for this customer:
{context}
Given that context, here are some suggestions to give the customer a great experience:
If the customer has items in their cart, encourage them to go to their cart and complete the purchase. You are provided the link for the cart. 
If the customer has viewed a product multiple times, encourage them to revisit the product by giving them the product link.
If the customer asks for a coupon, give them a coupon link at www.claimcoupon.com
If the customer asks you how their search experience was, ask them if they found what they're looking for and offer to help refine the search.
If the customer is viewing a product, recommend a similar product they may also enjoy. Here's the whole product catalog, where each line is a JSON object containing the title, description, and id:
{catalog}`,i=await V_.fromTemplate(r).format({context:t,catalog:e}),s="{message}",a=Xi.fromMessages([i,s]),o=new fP({k:3});return new lc({llm:LT,prompt:a,memory:o})};function DT({props:t}){const[e,r]=Ie.useState("Welcome to the store, click me to start chatting with your AI sales assistant!"),n=Ie.useRef(null),i=t.iconSize;Ie.useEffect(()=>{const o=window.localStorage.getItem("webPixelShopifyClientId");o&&u0(o).then(u=>{var c;(c=u.data)==null||c.forEach(async d=>{r(await NT(d))})});const l=u=>{const c=t.overlayDiv;!c.contains(u.target)&&c.classList.contains("visible")&&s(c)};return document.addEventListener("click",l),()=>{document.removeEventListener("click",l)}},[]);const s=async o=>{o.classList.toggle("visible")},a=o=>{o.stopPropagation();const l=t.overlayDiv;s(l)};return T.jsxs("div",{className:"mt-4",style:{position:"relative"},onClick:a,children:[T.jsx("div",{ref:n,children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:i+"em",viewBox:"0 0 512 512",style:{fill:"black"},children:T.jsx("path",{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"})})}),t.mountDiv==="embed"&&n.current&&T.jsx("div",{className:"talk-bubble tri-right round border btm-right-in",style:{position:"absolute",bottom:n.current.offsetTop+i/4+"em",right:n.current.offsetLeft-i+"em",height:"auto",width:"500px",background:"white",color:"black"},children:T.jsx("div",{className:"talktext",children:T.jsx("p",{style:{overflow:"hidden",margin:0},children:e})})})]})}var X_={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Cg=ci.createContext&&ci.createContext(X_),Ln=function(){return Ln=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ln.apply(this,arguments)},MT=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r};function ew(t){return t&&t.map(function(e,r){return ci.createElement(e.tag,Ln({key:r},e.attr),ew(e.child))})}function Ye(t){return function(e){return ci.createElement(UT,Ln({attr:Ln({},t.attr)},e),ew(t.child))}}function UT(t){var e=function(r){var n,i=t.attr,s=t.size,a=t.title,o=MT(t,["attr","size","title"]),l=s||r.size||"1em";return r.className&&(n=r.className),t.className&&(n=(n?n+" ":"")+t.className),ci.createElement("svg",Ln({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,i,o,{className:n,style:Ln(Ln({color:t.color||r.color},r.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&ci.createElement("title",null,a),t.children)};return Cg!==void 0?ci.createElement(Cg.Consumer,null,function(r){return e(r)}):e(X_)}function zT(t){return Ye({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M12 192h424c6.6 0 12 5.4 12 12v260c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V204c0-6.6 5.4-12 12-12zm436-44v-36c0-26.5-21.5-48-48-48h-48V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H160V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H48C21.5 64 0 85.5 0 112v36c0 6.6 5.4 12 12 12h424c6.6 0 12-5.4 12-12z"}}]})(t)}function FT(t){return Ye({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z"}}]})(t)}function BT(t){return Ye({tag:"svg",attr:{viewBox:"0 0 192 512"},child:[{tag:"path",attr:{d:"M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"}}]})(t)}function VT(t){return Ye({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"}}]})(t)}function ep(t){return Ye({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4zm-132.9 88.7L299.3 420.7c-6.2 6.2-16.4 6.2-22.6 0L171.3 315.3c-10.1-10.1-2.9-27.3 11.3-27.3H248V176c0-8.8 7.2-16 16-16h48c8.8 0 16 7.2 16 16v112h65.4c14.2 0 21.4 17.2 11.3 27.3z"}}]})(t)}function tp(t){return Ye({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"}}]})(t)}function HT(t){return Ye({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm160-14.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"}}]})(t)}var Ag,ZT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},tw={exports:{}};Ag=function(){return(()=>{var t={720:(n,i,s)=>{s.r(i),s.d(i,{Scene:()=>Lw,Tweenable:()=>Wt,interpolate:()=>Aw,processTweens:()=>sp,setBezierFunction:()=>Dw,shouldScheduleUpdate:()=>ap,tween:()=>fw,unsetBezierFunction:()=>Mw});var a={};s.r(a),s.d(a,{bounce:()=>Pt,bouncePast:()=>Qe,easeFrom:()=>Lt,easeFromTo:()=>qt,easeInBack:()=>J,easeInCirc:()=>L,easeInCubic:()=>b,easeInExpo:()=>P,easeInOutBack:()=>V,easeInOutCirc:()=>Q,easeInOutCubic:()=>O,easeInOutExpo:()=>R,easeInOutQuad:()=>h,easeInOutQuart:()=>m,easeInOutQuint:()=>A,easeInOutSine:()=>_,easeInQuad:()=>c,easeInQuart:()=>k,easeInQuint:()=>f,easeInSine:()=>x,easeOutBack:()=>me,easeOutBounce:()=>ne,easeOutCirc:()=>ee,easeOutCubic:()=>v,easeOutExpo:()=>w,easeOutQuad:()=>d,easeOutQuart:()=>p,easeOutQuint:()=>S,easeOutSine:()=>j,easeTo:()=>$r,elastic:()=>$,linear:()=>u,swingFrom:()=>H,swingFromTo:()=>F,swingTo:()=>ye});var o={};s.r(o),s.d(o,{afterTween:()=>Tw,beforeTween:()=>Pw,doesApply:()=>Ew,tweenCreated:()=>Ow});/*!
	 * All equations are adapted from Thomas Fuchs'
	 * [Scripty2](https://github.com/madrobby/scripty2/blob/master/src/effects/transitions/penner.js).
	 *
	 * Based on Easing Equations (c) 2003 [Robert
	 * Penner](http://www.robertpenner.com/), all rights reserved. This work is
	 * [subject to terms](http://www.robertpenner.com/easing_terms_of_use.html).
	 *//*!
	 *  TERMS OF USE - EASING EQUATIONS
	 *  Open source under the BSD License.
	 *  Easing Equations (c) 2003 Robert Penner, all rights reserved.
	 */var l,u=function(g){return g},c=function(g){return Math.pow(g,2)},d=function(g){return-(Math.pow(g-1,2)-1)},h=function(g){return(g/=.5)<1?.5*Math.pow(g,2):-.5*((g-=2)*g-2)},b=function(g){return Math.pow(g,3)},v=function(g){return Math.pow(g-1,3)+1},O=function(g){return(g/=.5)<1?.5*Math.pow(g,3):.5*(Math.pow(g-2,3)+2)},k=function(g){return Math.pow(g,4)},p=function(g){return-(Math.pow(g-1,4)-1)},m=function(g){return(g/=.5)<1?.5*Math.pow(g,4):-.5*((g-=2)*Math.pow(g,3)-2)},f=function(g){return Math.pow(g,5)},S=function(g){return Math.pow(g-1,5)+1},A=function(g){return(g/=.5)<1?.5*Math.pow(g,5):.5*(Math.pow(g-2,5)+2)},x=function(g){return 1-Math.cos(g*(Math.PI/2))},j=function(g){return Math.sin(g*(Math.PI/2))},_=function(g){return-.5*(Math.cos(Math.PI*g)-1)},P=function(g){return g===0?0:Math.pow(2,10*(g-1))},w=function(g){return g===1?1:1-Math.pow(2,-10*g)},R=function(g){return g===0?0:g===1?1:(g/=.5)<1?.5*Math.pow(2,10*(g-1)):.5*(2-Math.pow(2,-10*--g))},L=function(g){return-(Math.sqrt(1-g*g)-1)},ee=function(g){return Math.sqrt(1-Math.pow(g-1,2))},Q=function(g){return(g/=.5)<1?-.5*(Math.sqrt(1-g*g)-1):.5*(Math.sqrt(1-(g-=2)*g)+1)},ne=function(g){return g<1/2.75?7.5625*g*g:g<2/2.75?7.5625*(g-=1.5/2.75)*g+.75:g<2.5/2.75?7.5625*(g-=2.25/2.75)*g+.9375:7.5625*(g-=2.625/2.75)*g+.984375},J=function(g){var I=1.70158;return g*g*((I+1)*g-I)},me=function(g){var I=1.70158;return(g-=1)*g*((I+1)*g+I)+1},V=function(g){var I=1.70158;return(g/=.5)<1?g*g*((1+(I*=1.525))*g-I)*.5:.5*((g-=2)*g*((1+(I*=1.525))*g+I)+2)},$=function(g){return-1*Math.pow(4,-8*g)*Math.sin((6*g-1)*(2*Math.PI)/2)+1},F=function(g){var I=1.70158;return(g/=.5)<1?g*g*((1+(I*=1.525))*g-I)*.5:.5*((g-=2)*g*((1+(I*=1.525))*g+I)+2)},H=function(g){var I=1.70158;return g*g*((I+1)*g-I)},ye=function(g){var I=1.70158;return(g-=1)*g*((I+1)*g+I)+1},Pt=function(g){return g<1/2.75?7.5625*g*g:g<2/2.75?7.5625*(g-=1.5/2.75)*g+.75:g<2.5/2.75?7.5625*(g-=2.25/2.75)*g+.9375:7.5625*(g-=2.625/2.75)*g+.984375},Qe=function(g){return g<1/2.75?7.5625*g*g:g<2/2.75?2-(7.5625*(g-=1.5/2.75)*g+.75):g<2.5/2.75?2-(7.5625*(g-=2.25/2.75)*g+.9375):2-(7.5625*(g-=2.625/2.75)*g+.984375)},qt=function(g){return(g/=.5)<1?.5*Math.pow(g,4):-.5*((g-=2)*Math.pow(g,3)-2)},Lt=function(g){return Math.pow(g,4)},$r=function(g){return Math.pow(g,.25)};function Z(g,I){if(!(g instanceof I))throw new TypeError("Cannot call a class as a function")}function y(g,I){for(var D=0;D<I.length;D++){var N=I[D];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(g,N.key,N)}}function E(g){return E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},E(g)}function C(g,I){var D=Object.keys(g);if(Object.getOwnPropertySymbols){var N=Object.getOwnPropertySymbols(g);I&&(N=N.filter(function(q){return Object.getOwnPropertyDescriptor(g,q).enumerable})),D.push.apply(D,N)}return D}function U(g){for(var I=1;I<arguments.length;I++){var D=arguments[I]!=null?arguments[I]:{};I%2?C(Object(D),!0).forEach(function(N){M(g,N,D[N])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(D)):C(Object(D)).forEach(function(N){Object.defineProperty(g,N,Object.getOwnPropertyDescriptor(D,N))})}return g}function M(g,I,D){return I in g?Object.defineProperty(g,I,{value:D,enumerable:!0,configurable:!0,writable:!0}):g[I]=D,g}var K,le,xe,Me="linear",He=typeof window<"u"?window:ZT,Xe="afterTween",ut="afterTweenEnd",Ue="beforeTween",$e="tweenCreated",sn="function",Ls="string",np=He.requestAnimationFrame||He.webkitRequestAnimationFrame||He.oRequestAnimationFrame||He.msRequestAnimationFrame||He.mozCancelRequestAnimationFrame&&He.mozRequestAnimationFrame||setTimeout,$s=function(){},Zn=null,an=null,Po=U({},a),uc=function(g,I,D,N,q,re,oe){var ue,ve,je,we=g<re?0:(g-re)/q,ze=!1;for(var Ze in oe&&oe.call&&(ze=!0,ue=oe(we)),I)ze||(ue=((ve=oe[Ze]).call?ve:Po[ve])(we)),je=D[Ze],I[Ze]=je+(N[Ze]-je)*ue;return I},ip=function(g,I){var D=g._timestamp,N=g._currentState,q=g._delay;if(!(I<D+q)){var re=g._duration,oe=g._targetState,ue=D+q+re,ve=I>ue?ue:I;g._hasEnded=ve>=ue;var je=re-(ue-ve),we=g._filters.length>0;if(g._hasEnded)return g._render(oe,g._data,je),g.stop(!0);we&&g._applyFilter(Ue),ve<D+q?D=re=ve=1:D+=q,uc(ve,N,g._originalState,oe,re,D,g._easing),we&&g._applyFilter(Xe),g._render(N,g._data,je)}},sp=function(){for(var g,I=Wt.now(),D=Zn;D;)g=D._next,ip(D,I),D=g},cw=Date.now||function(){return+new Date},cc=!1,ap=function(g){g&&cc||(cc=g,g&&dw())},dw=function g(){K=cw(),cc&&np.call(He,g,16.666666666666668),sp()},op=function(g){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Me,D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},N=E(I);if(Po[I])return Po[I];if(N===Ls||N===sn)for(var q in g)D[q]=I;else for(var re in g)D[re]=I[re]||Me;return D},lp=function(g){g===Zn?(Zn=g._next)?Zn._previous=null:an=null:g===an?(an=g._previous)?an._next=null:Zn=null:(le=g._previous,xe=g._next,le._next=xe,xe._previous=le),g._previous=g._next=null},hw=typeof Promise=="function"?Promise:null;l=Symbol.toStringTag;var Wt=function(){function g(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;Z(this,g),M(this,l,"Promise"),this._config={},this._data={},this._delay=0,this._filters=[],this._next=null,this._previous=null,this._timestamp=null,this._hasEnded=!1,this._resolve=null,this._reject=null,this._currentState=N||{},this._originalState={},this._targetState={},this._start=$s,this._render=$s,this._promiseCtor=hw,q&&this.setConfig(q)}var I,D;return I=g,D=[{key:"_applyFilter",value:function(N){for(var q=this._filters.length;q>0;q--){var re=this._filters[q-q][N];re&&re(this)}}},{key:"tween",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;return this._isPlaying&&this.stop(),!N&&this._config||this.setConfig(N),this._pausedAtTime=null,this._timestamp=g.now(),this._start(this.get(),this._data),this._delay&&this._render(this._currentState,this._data,0),this._resume(this._timestamp)}},{key:"setConfig",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},q=this._config;for(var re in N)q[re]=N[re];var oe=q.promise,ue=oe===void 0?this._promiseCtor:oe,ve=q.start,je=ve===void 0?$s:ve,we=q.finish,ze=q.render,Ze=ze===void 0?this._config.step||$s:ze,Tt=q.step,Oi=Tt===void 0?$s:Tt;this._data=q.data||q.attachment||this._data,this._isPlaying=!1,this._pausedAtTime=null,this._scheduleId=null,this._delay=N.delay||0,this._start=je,this._render=Ze||Oi,this._duration=q.duration||500,this._promiseCtor=ue,we&&(this._resolve=we);var on=N.from,ln=N.to,Oe=ln===void 0?{}:ln,Pi=this._currentState,un=this._originalState,Kn=this._targetState;for(var ct in on)Pi[ct]=on[ct];var kr=!1;for(var Dr in Pi){var qn=Pi[Dr];kr||E(qn)!==Ls||(kr=!0),un[Dr]=qn,Kn[Dr]=Oe.hasOwnProperty(Dr)?Oe[Dr]:qn}if(this._easing=op(this._currentState,q.easing,this._easing),this._filters.length=0,kr){for(var fp in g.filters)g.filters[fp].doesApply(this)&&this._filters.push(g.filters[fp]);this._applyFilter($e)}return this}},{key:"then",value:function(N,q){var re=this;return this._promise=new this._promiseCtor(function(oe,ue){re._resolve=oe,re._reject=ue}),this._promise.then(N,q)}},{key:"catch",value:function(N){return this.then().catch(N)}},{key:"finally",value:function(N){return this.then().finally(N)}},{key:"get",value:function(){return U({},this._currentState)}},{key:"set",value:function(N){this._currentState=N}},{key:"pause",value:function(){if(this._isPlaying)return this._pausedAtTime=g.now(),this._isPlaying=!1,lp(this),this}},{key:"resume",value:function(){return this._resume()}},{key:"_resume",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g.now();return this._timestamp===null?this.tween():this._isPlaying?this._promise:(this._pausedAtTime&&(this._timestamp+=N-this._pausedAtTime,this._pausedAtTime=null),this._isPlaying=!0,Zn===null?(Zn=this,an=this):(this._previous=an,an._next=this,an=this),this)}},{key:"seek",value:function(N){N=Math.max(N,0);var q=g.now();return this._timestamp+N===0||(this._timestamp=q-N,ip(this,q)),this}},{key:"stop",value:function(){var N=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!this._isPlaying)return this;this._isPlaying=!1,lp(this);var q=this._filters.length>0;return N&&(q&&this._applyFilter(Ue),uc(1,this._currentState,this._originalState,this._targetState,1,0,this._easing),q&&(this._applyFilter(Xe),this._applyFilter(ut))),this._resolve&&this._resolve({data:this._data,state:this._currentState,tweenable:this}),this._resolve=null,this._reject=null,this}},{key:"cancel",value:function(){var N=arguments.length>0&&arguments[0]!==void 0&&arguments[0],q=this._currentState,re=this._data,oe=this._isPlaying;return oe?(this._reject&&this._reject({data:re,state:q,tweenable:this}),this._resolve=null,this._reject=null,this.stop(N)):this}},{key:"isPlaying",value:function(){return this._isPlaying}},{key:"hasEnded",value:function(){return this._hasEnded}},{key:"setScheduleFunction",value:function(N){g.setScheduleFunction(N)}},{key:"data",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return N&&(this._data=U({},N)),this._data}},{key:"dispose",value:function(){for(var N in this)delete this[N]}}],D&&y(I.prototype,D),g}();function fw(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},I=new Wt;return I.tween(g),I.tweenable=I,I}M(Wt,"now",function(){return K}),M(Wt,"setScheduleFunction",function(g){return np=g}),M(Wt,"filters",{}),M(Wt,"formulas",Po),ap(!0);var Ds,To,pw=/(\d|-|\.)/,mw=/([^\-0-9.]+)/g,dc=/[0-9.-]+/g,gw=(Ds=dc.source,To=/,\s*/.source,new RegExp("rgba?\\(".concat(Ds).concat(To).concat(Ds).concat(To).concat(Ds,"(").concat(To).concat(Ds,")?\\)"),"g")),yw=/^.*\(/,up=/#([0-9]|[a-f]){3,6}/gi,jo="VAL",vw=function(g,I){return g.map(function(D,N){return"_".concat(I,"_").concat(N)})};function hc(g){return parseInt(g,16)}var _w=function(g){return"rgb(".concat((I=g,(I=I.replace(/#/,"")).length===3&&(I=(I=I.split(""))[0]+I[0]+I[1]+I[1]+I[2]+I[2]),[hc(I.substr(0,2)),hc(I.substr(2,2)),hc(I.substr(4,2))]).join(","),")");var I},cp=function(g,I,D){var N=I.match(g),q=I.replace(g,jo);return N&&N.forEach(function(re){return q=q.replace(jo,D(re))}),q},ww=function(g){for(var I in g){var D=g[I];typeof D=="string"&&D.match(up)&&(g[I]=cp(up,D,_w))}},bw=function(g){var I=g.match(dc),D=I.slice(0,3).map(Math.floor),N=g.match(yw)[0];if(I.length===3)return"".concat(N).concat(D.join(","),")");if(I.length===4)return"".concat(N).concat(D.join(","),",").concat(I[3],")");throw new Error("Invalid rgbChunk: ".concat(g))},dp=function(g){return g.match(dc)},xw=function(g,I){var D={};return I.forEach(function(N){D[N]=g[N],delete g[N]}),D},kw=function(g,I){return I.map(function(D){return g[D]})},Sw=function(g,I){return I.forEach(function(D){return g=g.replace(jo,+D.toFixed(4))}),g},Ew=function(g){for(var I in g._currentState)if(typeof g._currentState[I]=="string")return!0;return!1};function Ow(g){var I=g._currentState;[I,g._originalState,g._targetState].forEach(ww),g._tokenData=function(D){var N,q,re={};for(var oe in D){var ue=D[oe];typeof ue=="string"&&(re[oe]={formatString:(N=ue,q=void 0,q=N.match(mw),q?(q.length===1||N.charAt(0).match(pw))&&q.unshift(""):q=["",""],q.join(jo)),chunkNames:vw(dp(ue),oe)})}return re}(I)}function Pw(g){var I=g._currentState,D=g._originalState,N=g._targetState,q=g._easing,re=g._tokenData;(function(oe,ue){var ve=function(we){var ze=ue[we].chunkNames,Ze=oe[we];if(typeof Ze=="string"){var Tt=Ze.split(" "),Oi=Tt[Tt.length-1];ze.forEach(function(on,ln){return oe[on]=Tt[ln]||Oi})}else ze.forEach(function(on){return oe[on]=Ze});delete oe[we]};for(var je in ue)ve(je)})(q,re),[I,D,N].forEach(function(oe){return function(ue,ve){var je=function(ze){dp(ue[ze]).forEach(function(Ze,Tt){return ue[ve[ze].chunkNames[Tt]]=+Ze}),delete ue[ze]};for(var we in ve)je(we)}(oe,re)})}function Tw(g){var I=g._currentState,D=g._originalState,N=g._targetState,q=g._easing,re=g._tokenData;[I,D,N].forEach(function(oe){return function(ue,ve){for(var je in ve){var we=ve[je],ze=we.chunkNames,Ze=we.formatString,Tt=Sw(Ze,kw(xw(ue,ze),ze));ue[je]=cp(gw,Tt,bw)}}(oe,re)}),function(oe,ue){for(var ve in ue){var je=ue[ve].chunkNames,we=oe[je[0]];oe[ve]=typeof we=="string"?je.map(function(ze){var Ze=oe[ze];return delete oe[ze],Ze}).join(" "):we}}(q,re)}function hp(g,I){var D=Object.keys(g);if(Object.getOwnPropertySymbols){var N=Object.getOwnPropertySymbols(g);I&&(N=N.filter(function(q){return Object.getOwnPropertyDescriptor(g,q).enumerable})),D.push.apply(D,N)}return D}function jw(g){for(var I=1;I<arguments.length;I++){var D=arguments[I]!=null?arguments[I]:{};I%2?hp(Object(D),!0).forEach(function(N){Cw(g,N,D[N])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(D)):hp(Object(D)).forEach(function(N){Object.defineProperty(g,N,Object.getOwnPropertyDescriptor(D,N))})}return g}function Cw(g,I,D){return I in g?Object.defineProperty(g,I,{value:D,enumerable:!0,configurable:!0,writable:!0}):g[I]=D,g}var lr=new Wt,fc=Wt.filters,Aw=function(g,I,D,N){var q=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,re=jw({},g),oe=op(g,N);for(var ue in lr._filters.length=0,lr.set({}),lr._currentState=re,lr._originalState=g,lr._targetState=I,lr._easing=oe,fc)fc[ue].doesApply(lr)&&lr._filters.push(fc[ue]);lr._applyFilter("tweenCreated"),lr._applyFilter("beforeTween");var ve=uc(D,re,g,I,1,q,oe);return lr._applyFilter("afterTween"),ve};function Iw(g){return function(I){if(Array.isArray(I))return pc(I)}(g)||function(I){if(typeof Symbol<"u"&&Symbol.iterator in Object(I))return Array.from(I)}(g)||function(I,D){if(I){if(typeof I=="string")return pc(I,D);var N=Object.prototype.toString.call(I).slice(8,-1);return N==="Object"&&I.constructor&&(N=I.constructor.name),N==="Map"||N==="Set"?Array.from(I):N==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N)?pc(I,D):void 0}}(g)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function pc(g,I){(I==null||I>g.length)&&(I=g.length);for(var D=0,N=new Array(I);D<I;D++)N[D]=g[D];return N}function Rw(g,I){if(!(g instanceof I))throw new TypeError("Cannot call a class as a function")}function Nw(g,I){for(var D=0;D<I.length;D++){var N=I[D];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(g,N.key,N)}}function xr(g,I){var D=I.get(g);if(!D)throw new TypeError("attempted to get private field on non-instance");return D.get?D.get.call(g):D.value}var ur=new WeakMap,Lw=function(){function g(){Rw(this,g),ur.set(this,{writable:!0,value:[]});for(var N=arguments.length,q=new Array(N),re=0;re<N;re++)q[re]=arguments[re];q.forEach(this.add.bind(this))}var I,D;return I=g,(D=[{key:"add",value:function(N){return xr(this,ur).push(N),N}},{key:"remove",value:function(N){var q=xr(this,ur).indexOf(N);return~q&&xr(this,ur).splice(q,1),N}},{key:"empty",value:function(){return this.tweenables.map(this.remove.bind(this))}},{key:"isPlaying",value:function(){return xr(this,ur).some(function(N){return N.isPlaying()})}},{key:"play",value:function(){return xr(this,ur).forEach(function(N){return N.tween()}),this}},{key:"pause",value:function(){return xr(this,ur).forEach(function(N){return N.pause()}),this}},{key:"resume",value:function(){return xr(this,ur).forEach(function(N){return N.resume()}),this}},{key:"stop",value:function(N){return xr(this,ur).forEach(function(q){return q.stop(N)}),this}},{key:"tweenables",get:function(){return Iw(xr(this,ur))}},{key:"promises",get:function(){return xr(this,ur).map(function(N){return N.then()})}}])&&Nw(I.prototype,D),g}();function $w(g,I,D,N,q,re){var oe,ue,ve=0,je=0,we=0,ze=0,Ze=0,Tt=0,Oi=function(Oe){return((ve*Oe+je)*Oe+we)*Oe},on=function(Oe){return(3*ve*Oe+2*je)*Oe+we},ln=function(Oe){return Oe>=0?Oe:0-Oe};return ve=1-(we=3*I)-(je=3*(N-I)-we),ze=1-(Tt=3*D)-(Ze=3*(q-D)-Tt),oe=g,ue=function(Oe){return 1/(200*Oe)}(re),function(Oe){return((ze*Oe+Ze)*Oe+Tt)*Oe}(function(Oe,Pi){var un,Kn,ct,kr,Dr,qn;for(ct=Oe,qn=0;qn<8;qn++){if(kr=Oi(ct)-Oe,ln(kr)<Pi)return ct;if(Dr=on(ct),ln(Dr)<1e-6)break;ct-=kr/Dr}if((ct=Oe)<(un=0))return un;if(ct>(Kn=1))return Kn;for(;un<Kn;){if(kr=Oi(ct),ln(kr-Oe)<Pi)return ct;Oe>kr?un=ct:Kn=ct,ct=.5*(Kn-un)+un}return ct}(oe,ue))}var Dw=function(g,I,D,N,q){var re=function(oe,ue,ve,je){return function(we){return $w(we,oe,ue,ve,je,1)}}(I,D,N,q);return re.displayName=g,re.x1=I,re.y1=D,re.x2=N,re.y2=q,Wt.formulas[g]=re},Mw=function(g){return delete Wt.formulas[g]};Wt.filters.token=o}},e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}return r.d=(n,i)=>{for(var s in i)r.o(i,s)&&!r.o(n,s)&&Object.defineProperty(n,s,{enumerable:!0,get:i[s]})},r.o=(n,i)=>Object.prototype.hasOwnProperty.call(n,i),r.r=n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r(720)})()},tw.exports=Ag();var Ig="Webkit Moz O ms".split(" ");function Rg(t,e,r){for(var n=t.style,i=0;i<Ig.length;++i)n[Ig[i]+rw(e)]=r;n[e]=r}function rw(t){return t.charAt(0).toUpperCase()+t.slice(1)}function rl(t){return!function(e){return Object.prototype.toString.call(e)==="[object Array]"}(t)&&typeof t=="object"&&!!t}function Ng(t,e){for(var r in t)t.hasOwnProperty(r)&&e(t[r],r)}var Ei={extend:function t(e,r,n){for(var i in e=e||{},n=n||!1,r=r||{})if(r.hasOwnProperty(i)){var s=e[i],a=r[i];n&&rl(s)&&rl(a)?e[i]=t(s,a,n):e[i]=a}return e},render:function(t,e){var r=t;for(var n in e)if(e.hasOwnProperty(n)){var i=e[n],s=new RegExp("\\{"+n+"\\}","g");r=r.replace(s,i)}return r},setStyle:Rg,setStyles:function(t,e){Ng(e,function(r,n){r!=null&&(rl(r)&&r.prefix===!0?Rg(t,n,r.value):t.style[n]=r)})},capitalize:rw,isString:function(t){return typeof t=="string"||t instanceof String},isFunction:function(t){return typeof t=="function"},isObject:rl,forEachObject:Ng,floatEquals:function(t,e){return Math.abs(t-e)<.001},removeChildren:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)}},ph=tw.exports,Or=Ei,KT=ph.Tweenable,Lg={easeIn:"easeInCubic",easeOut:"easeOutCubic",easeInOut:"easeInOutCubic"},Gt=function t(e,r){if(!(this instanceof t))throw new Error("Constructor was called without new keyword");var n;r=Or.extend({delay:0,duration:800,easing:"linear",from:{},to:{},step:function(){}},r),n=Or.isString(e)?document.querySelector(e):e,this.path=n,this._opts=r,this._tweenable=null;var i=this.path.getTotalLength();this.path.style.strokeDasharray=i+" "+i,this.set(0)};Gt.prototype.value=function(){var t=this._getComputedDashOffset(),e=this.path.getTotalLength();return parseFloat((1-t/e).toFixed(6),10)},Gt.prototype.set=function(t){this.stop(),this.path.style.strokeDashoffset=this._progressToOffset(t);var e=this._opts.step;if(Or.isFunction(e)){var r=this._easing(this._opts.easing);e(this._calculateTo(t,r),this._opts.shape||this,this._opts.attachment)}},Gt.prototype.stop=function(){this._stopTween(),this.path.style.strokeDashoffset=this._getComputedDashOffset()},Gt.prototype.animate=function(t,e,r){e=e||{},Or.isFunction(e)&&(r=e,e={});var n=Or.extend({},e),i=Or.extend({},this._opts);e=Or.extend(i,e);var s=this._easing(e.easing),a=this._resolveFromAndTo(t,s,n);this.stop(),this.path.getBoundingClientRect();var o=this._getComputedDashOffset(),l=this._progressToOffset(t),u=this;this._tweenable=new KT,this._tweenable.tween({from:Or.extend({offset:o},a.from),to:Or.extend({offset:l},a.to),duration:e.duration,delay:e.delay,easing:s,step:function(c){u.path.style.strokeDashoffset=c.offset;var d=e.shape||u;e.step(c,d,e.attachment)}}).then(function(c){Or.isFunction(r)&&r()})},Gt.prototype._getComputedDashOffset=function(){var t=window.getComputedStyle(this.path,null);return parseFloat(t.getPropertyValue("stroke-dashoffset"),10)},Gt.prototype._progressToOffset=function(t){var e=this.path.getTotalLength();return e-t*e},Gt.prototype._resolveFromAndTo=function(t,e,r){return r.from&&r.to?{from:r.from,to:r.to}:{from:this._calculateFrom(e),to:this._calculateTo(t,e)}},Gt.prototype._calculateFrom=function(t){return ph.interpolate(this._opts.from,this._opts.to,this.value(),t)},Gt.prototype._calculateTo=function(t,e){return ph.interpolate(this._opts.from,this._opts.to,t,e)},Gt.prototype._stopTween=function(){this._tweenable!==null&&(this._tweenable.stop(),this._tweenable=null)},Gt.prototype._easing=function(t){return Lg.hasOwnProperty(t)?Lg[t]:t};var nw=Gt,qT=nw,Mt=Ei,mn="Object is destroyed",Ke=function t(e,r){if(!(this instanceof t))throw new Error("Constructor was called without new keyword");if(arguments.length!==0){this._opts=Mt.extend({color:"#555",strokeWidth:1,trailColor:null,trailWidth:null,fill:null,text:{style:{color:null,position:"absolute",left:"50%",top:"50%",padding:0,margin:0,transform:{prefix:!0,value:"translate(-50%, -50%)"}},autoStyleContainer:!0,alignToBottom:!0,value:null,className:"progressbar-text"},svgStyle:{display:"block",width:"100%"},warnings:!1},r,!0),Mt.isObject(r)&&r.svgStyle!==void 0&&(this._opts.svgStyle=r.svgStyle),Mt.isObject(r)&&Mt.isObject(r.text)&&r.text.style!==void 0&&(this._opts.text.style=r.text.style);var n,i=this._createSvgView(this._opts);if(!(n=Mt.isString(e)?document.querySelector(e):e))throw new Error("Container does not exist: "+e);this._container=n,this._container.appendChild(i.svg),this._opts.warnings&&this._warnContainerAspectRatio(this._container),this._opts.svgStyle&&Mt.setStyles(i.svg,this._opts.svgStyle),this.svg=i.svg,this.path=i.path,this.trail=i.trail,this.text=null;var s=Mt.extend({attachment:void 0,shape:this},this._opts);this._progressPath=new qT(i.path,s),Mt.isObject(this._opts.text)&&this._opts.text.value!==null&&this.setText(this._opts.text.value)}};Ke.prototype.animate=function(t,e,r){if(this._progressPath===null)throw new Error(mn);this._progressPath.animate(t,e,r)},Ke.prototype.stop=function(){if(this._progressPath===null)throw new Error(mn);this._progressPath!==void 0&&this._progressPath.stop()},Ke.prototype.pause=function(){if(this._progressPath===null)throw new Error(mn);this._progressPath!==void 0&&this._progressPath._tweenable&&this._progressPath._tweenable.pause()},Ke.prototype.resume=function(){if(this._progressPath===null)throw new Error(mn);this._progressPath!==void 0&&this._progressPath._tweenable&&this._progressPath._tweenable.resume()},Ke.prototype.destroy=function(){if(this._progressPath===null)throw new Error(mn);this.stop(),this.svg.parentNode.removeChild(this.svg),this.svg=null,this.path=null,this.trail=null,this._progressPath=null,this.text!==null&&(this.text.parentNode.removeChild(this.text),this.text=null)},Ke.prototype.set=function(t){if(this._progressPath===null)throw new Error(mn);this._progressPath.set(t)},Ke.prototype.value=function(){if(this._progressPath===null)throw new Error(mn);return this._progressPath===void 0?0:this._progressPath.value()},Ke.prototype.setText=function(t){if(this._progressPath===null)throw new Error(mn);this.text===null&&(this.text=this._createTextContainer(this._opts,this._container),this._container.appendChild(this.text)),Mt.isObject(t)?(Mt.removeChildren(this.text),this.text.appendChild(t)):this.text.innerHTML=t},Ke.prototype._createSvgView=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");this._initializeSvg(e,t);var r=null;(t.trailColor||t.trailWidth)&&(r=this._createTrail(t),e.appendChild(r));var n=this._createPath(t);return e.appendChild(n),{svg:e,path:n,trail:r}},Ke.prototype._initializeSvg=function(t,e){t.setAttribute("viewBox","0 0 100 100")},Ke.prototype._createPath=function(t){var e=this._pathString(t);return this._createPathElement(e,t)},Ke.prototype._createTrail=function(t){var e=this._trailString(t),r=Mt.extend({},t);return r.trailColor||(r.trailColor="#eee"),r.trailWidth||(r.trailWidth=r.strokeWidth),r.color=r.trailColor,r.strokeWidth=r.trailWidth,r.fill=null,this._createPathElement(e,r)},Ke.prototype._createPathElement=function(t,e){var r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("d",t),r.setAttribute("stroke",e.color),r.setAttribute("stroke-width",e.strokeWidth),e.fill?r.setAttribute("fill",e.fill):r.setAttribute("fill-opacity","0"),r},Ke.prototype._createTextContainer=function(t,e){var r=document.createElement("div");r.className=t.text.className;var n=t.text.style;return n&&(t.text.autoStyleContainer&&(e.style.position="relative"),Mt.setStyles(r,n),n.color||(r.style.color=t.color)),this._initializeTextContainer(t,e,r),r},Ke.prototype._initializeTextContainer=function(t,e,r){},Ke.prototype._pathString=function(t){throw new Error("Override this function for each progress bar")},Ke.prototype._trailString=function(t){throw new Error("Override this function for each progress bar")},Ke.prototype._warnContainerAspectRatio=function(t){if(this.containerAspectRatio){var e=window.getComputedStyle(t,null),r=parseFloat(e.getPropertyValue("width"),10),n=parseFloat(e.getPropertyValue("height"),10);Mt.floatEquals(this.containerAspectRatio,r/n)||(console.warn("Incorrect aspect ratio of container","#"+t.id,"detected:",e.getPropertyValue("width")+"(width)","/",e.getPropertyValue("height")+"(height)","=",r/n),console.warn("Aspect ratio of should be",this.containerAspectRatio))}};var Oo=Ke,iw=Oo,WT=Ei,Mi=function(t,e){this._pathTemplate="M 0,{center} L 100,{center}",iw.apply(this,arguments)};(Mi.prototype=new iw).constructor=Mi,Mi.prototype._initializeSvg=function(t,e){t.setAttribute("viewBox","0 0 100 "+e.strokeWidth),t.setAttribute("preserveAspectRatio","none")},Mi.prototype._pathString=function(t){return WT.render(this._pathTemplate,{center:t.strokeWidth/2})},Mi.prototype._trailString=function(t){return this._pathString(t)};var JT=Mi,sw=Oo,GT=Ei,ga=function(t,e){this._pathTemplate="M 50,50 m 0,-{radius} a {radius},{radius} 0 1 1 0,{2radius} a {radius},{radius} 0 1 1 0,-{2radius}",this.containerAspectRatio=1,sw.apply(this,arguments)};(ga.prototype=new sw).constructor=ga,ga.prototype._pathString=function(t){var e=t.strokeWidth;t.trailWidth&&t.trailWidth>t.strokeWidth&&(e=t.trailWidth);var r=50-e/2;return GT.render(this._pathTemplate,{radius:r,"2radius":2*r})},ga.prototype._trailString=function(t){return this._pathString(t)};var aw=ga,ow=Oo,$g=aw,Dg=Ei,Xn=function(t,e){this._pathTemplate="M 50,50 m -{radius},0 a {radius},{radius} 0 1 1 {2radius},0",this.containerAspectRatio=2,ow.apply(this,arguments)};(Xn.prototype=new ow).constructor=Xn,Xn.prototype._initializeSvg=function(t,e){t.setAttribute("viewBox","0 0 100 50")},Xn.prototype._initializeTextContainer=function(t,e,r){t.text.style&&(r.style.top="auto",r.style.bottom="0",t.text.alignToBottom?Dg.setStyle(r,"transform","translate(-50%, 0)"):Dg.setStyle(r,"transform","translate(-50%, 50%)"))},Xn.prototype._pathString=$g.prototype._pathString,Xn.prototype._trailString=$g.prototype._trailString;var YT=Xn,lw=Oo,Mg=Ei,ya=function(t,e){this._pathTemplate="M 0,{halfOfStrokeWidth} L {width},{halfOfStrokeWidth} L {width},{width} L {halfOfStrokeWidth},{width} L {halfOfStrokeWidth},{strokeWidth}",this._trailTemplate="M {startMargin},{halfOfStrokeWidth} L {width},{halfOfStrokeWidth} L {width},{width} L {halfOfStrokeWidth},{width} L {halfOfStrokeWidth},{halfOfStrokeWidth}",lw.apply(this,arguments)};(ya.prototype=new lw).constructor=ya,ya.prototype._pathString=function(t){var e=100-t.strokeWidth/2;return Mg.render(this._pathTemplate,{width:e,strokeWidth:t.strokeWidth,halfOfStrokeWidth:t.strokeWidth/2})},ya.prototype._trailString=function(t){var e=100-t.strokeWidth/2;return Mg.render(this._trailTemplate,{width:e,strokeWidth:t.strokeWidth,halfOfStrokeWidth:t.strokeWidth/2,startMargin:t.strokeWidth/2-t.trailWidth/2})};var nd,id,QT={Line:JT,Circle:aw,SemiCircle:YT,Square:ya,Path:nw,Shape:Oo,utils:Ei},rp=function(t){var e=t.animate,r=t.progressOptions,n=t.className,i=Ie.useMemo(function(){return nd=document.createElement("div"),new QT.Circle(nd,r)},[]),s=Ie.useCallback(function(a){a&&a.appendChild(nd)},[]);return Ie.useEffect(function(){i.animate(e)},[e,i]),T.jsx("div",{className:n,ref:s})},Pr=function(){return Pr=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Pr.apply(this,arguments)},XT=function(t){var e,r,n,i,s,a,o,l,u,c,d,h,b,v={strokeWidth:2.3,color:"#efe",trailColor:"#aaa",trailWidth:1,step:function(k,p){var m,f;p.path.setAttribute("trail",(m=k==null?void 0:k.state)===null||m===void 0?void 0:m.color),p.path.setAttribute("trailwidth-width",(f=k==null?void 0:k.state)===null||f===void 0?void 0:f.width);var S=Math.round(100*p.value());S===0?p.setText(""):p.setText(S)}},O=((e=t==null?void 0:t.data)===null||e===void 0?void 0:e.status)&&((r=t==null?void 0:t.data)===null||r===void 0?void 0:r.status.error)===!0;return T.jsxs("div",Pr({className:"rce-mbox-photo"},{children:[T.jsxs("div",Pr({className:"rce-mbox-photo--img",style:Pr({},((n=t==null?void 0:t.data)===null||n===void 0?void 0:n.width)&&((i=t==null?void 0:t.data)===null||i===void 0?void 0:i.height)&&{width:t.data.width,height:t.data.height})},{children:[T.jsx("img",{src:(s=t==null?void 0:t.data)===null||s===void 0?void 0:s.uri,alt:(a=t==null?void 0:t.data)===null||a===void 0?void 0:a.alt,onClick:t.onOpen,onLoad:t.onLoad,onError:t.onPhotoError}),O&&T.jsx("div",Pr({className:"rce-mbox-photo--img__block"},{children:T.jsx("span",Pr({className:"rce-mbox-photo--img__block-item rce-mbox-photo--error"},{children:T.jsx(tp,{})}))})),!O&&((o=t==null?void 0:t.data)===null||o===void 0?void 0:o.status)&&!(!((u=(l=t==null?void 0:t.data)===null||l===void 0?void 0:l.status)===null||u===void 0)&&u.download)&&T.jsxs("div",Pr({className:"rce-mbox-photo--img__block"},{children:[!(!((c=t==null?void 0:t.data)===null||c===void 0)&&c.status.click)&&T.jsx("button",Pr({onClick:t.onDownload,className:"rce-mbox-photo--img__block-item rce-mbox-photo--download"},{children:T.jsx(ep,{})})),typeof((d=t==null?void 0:t.data)===null||d===void 0?void 0:d.status.loading)=="number"&&((h=t==null?void 0:t.data)===null||h===void 0?void 0:h.status.loading)!==0&&T.jsx(rp,{animate:(b=t==null?void 0:t.data)===null||b===void 0?void 0:b.status.loading,progressOptions:v,className:"rce-mbox-photo--img__block-item"})]}))]})),(t==null?void 0:t.text)&&T.jsx("div",Pr({className:"rce-mbox-text"},{children:t.text}))]}))},zr=function(){return zr=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},zr.apply(this,arguments)},ej=function(t){var e,r,n,i,s,a,o,l,u,c={strokeWidth:5,color:"#333",trailColor:"#aaa",trailWidth:5,step:function(h,b){b.path.setAttribute("trail",h.color),b.path.setAttribute("trailwidth-width",h.width);var v=Math.round(100*b.value());v===0?b.setText(""):b.setText(v)}},d=((e=t==null?void 0:t.data)===null||e===void 0?void 0:e.status)&&((r=t==null?void 0:t.data)===null||r===void 0?void 0:r.status.error)===!0;return T.jsx("div",zr({className:"rce-mbox-file"},{children:T.jsxs("button",zr({onClick:function(h){var b,v,O;!((b=t==null?void 0:t.data)===null||b===void 0)&&b.status&&(!(!((v=t==null?void 0:t.data)===null||v===void 0)&&v.status.download)&&t.onDownload instanceof Function?t.onDownload(h):!((O=t==null?void 0:t.data)===null||O===void 0)&&O.status.download&&t.onOpen instanceof Function&&t.onOpen(h))}},{children:[T.jsxs("div",zr({className:"rce-mbox-file--icon"},{children:[T.jsx(HT,{color:"#aaa"}),T.jsx("div",zr({className:"rce-mbox-file--size"},{children:t==null?void 0:t.data.size}))]})),T.jsx("div",zr({className:"rce-mbox-file--text"},{children:t.text})),T.jsxs("div",zr({className:"rce-mbox-file--buttons"},{children:[d&&T.jsx("span",zr({className:"rce-error-button"},{children:T.jsx(tp,{color:"#ff3d3d"})})),!d&&((n=t==null?void 0:t.data)===null||n===void 0?void 0:n.status)&&!(!((i=t==null?void 0:t.data)===null||i===void 0)&&i.status.download)&&!(!((s=t==null?void 0:t.data)===null||s===void 0)&&s.status.click)&&T.jsx(ep,{color:"#aaa"}),!d&&((a=t==null?void 0:t.data)===null||a===void 0?void 0:a.status)&&typeof((o=t==null?void 0:t.data)===null||o===void 0?void 0:o.status.loading)=="number"&&((l=t==null?void 0:t.data)===null||l===void 0?void 0:l.status.loading)!==0&&T.jsx(rp,{animate:(u=t==null?void 0:t.data)===null||u===void 0?void 0:u.status.loading,className:"rce-mbox-file--loading",progressOptions:c})]}))]}))}))},uw={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/id=uw,function(){var t={}.hasOwnProperty;function e(){for(var r=[],n=0;n<arguments.length;n++){var i=arguments[n];if(i){var s=typeof i;if(s==="string"||s==="number")r.push(i);else if(Array.isArray(i)){if(i.length){var a=e.apply(null,i);a&&r.push(a)}}else if(s==="object"){if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]")){r.push(i.toString());continue}for(var o in i)t.call(i,o)&&i[o]&&r.push(o)}}}return r.join(" ")}id.exports?(e.default=e,id.exports=e):window.classNames=e}();var be=uw.exports,Ia=function(){return Ia=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ia.apply(this,arguments)},tj=function(t){return T.jsx("div",Ia({className:be("rce-container-smsg",t.className)},{children:T.jsx("div",Ia({className:"rce-smsg"},{children:T.jsx("div",Ia({className:"rce-smsg-text"},{children:t.text}))}))}))},Ra=function(){return Ra=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ra.apply(this,arguments)},rj=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r},nj=function(t){var e,r=t.markerColor,n=r===void 0?"red":r,i=t.target,s=i===void 0?"_blank":i,a=t.zoom,o=a===void 0?"14":a,l=rj(t,["markerColor","target","zoom"]),u=function(c){return c.replace(/LATITUDE/g,l==null?void 0:l.data.latitude).replace(/LONGITUDE/g,l==null?void 0:l.data.longitude).replace("MARKER_COLOR",n).replace("ZOOM",o).replace("KEY",l.apiKey)};return T.jsxs("div",Ra({className:"rce-container-lmsg"},{children:[T.jsx("a",Ra({onClick:l.onOpen,target:s,href:l.href||l.src||u(l.data.mapURL||"https://www.google.com/maps/search/?api=1&query=LATITUDE,LONGITUDE&zoom=ZOOM"),className:(e=be("rce-mbox-location",l.className),l.text&&(e=be(e,"rce-mbox-location-has-text")),e)},{children:T.jsx("img",{onError:l.onError,className:"rce-mbox-location-img",src:l.src||u(l.data.staticURL||"https://maps.googleapis.com/maps/api/staticmap?markers=color:MARKER_COLOR|LATITUDE,LONGITUDE&zoom=ZOOM&size=270x200&scale=2&key=KEY")})})),l.text&&T.jsx("div",Ra({className:"rce-mbox-text rce-mbox-location-text"},{children:l.text}))]}))},mh=function(){return mh=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},mh.apply(this,arguments)},ij=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r},sj=function(t){var e=t.width,r=e===void 0?300:e,n=t.height,i=n===void 0?380:n,s=ij(t,["width","height"]);return s.uri?T.jsx("div",mh({className:"rce-mbox-spotify"},{children:T.jsx("iframe",{src:"https://open.spotify.com/embed?"+function(){var a=[];for(var o in s){var l=encodeURIComponent(o),u=encodeURIComponent(s[o]);a.push(l+"="+u)}return a.join("&")}(),width:r,height:i,frameBorder:"0",allowTransparency:!0})})):null},Fr=function(){return Fr=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Fr.apply(this,arguments)},aj=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r},oj=function(t){var e=t.onClick,r=aj(t,["onClick"]);return T.jsxs("div",Fr({className:be("rce-mbox-reply",{"rce-mbox-reply-border":!!r.titleColor}),style:Fr({},r.titleColor&&{borderColor:r.titleColor}),onClick:e},{children:[T.jsxs("div",Fr({className:"rce-mbox-reply-left"},{children:[T.jsx("div",Fr({style:Fr({},r.titleColor&&{color:r.titleColor}),className:"rce-mbox-reply-owner"},{children:r.title||"Unknown"})),T.jsx("div",Fr({className:"rce-mbox-reply-message"},{children:r.message||"..."}))]})),r.photoURL&&T.jsx("div",Fr({className:"rce-mbox-reply-right"},{children:T.jsx("img",{src:r.photoURL,alt:""})}))]}))};function lj(t){return Ye({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"}}]})(t)}function uj(t){return Ye({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M317.5 210.3c1.7-1.8 1.8-4.7 0-6.5l-19.8-21c-.8-.9-2-1.4-3.2-1.4-1.2 0-2.4.5-3.2 1.4l-66.5 69.1 26.4 27.1 66.3-68.7zM123.8 253.1c-.9-.9-2-1.4-3.2-1.4-1.2 0-2.3.5-3.2 1.4l-20.1 20.7c-1.8 1.8-1.8 4.8 0 6.6l63.2 65c4 4.2 9 6.6 13.2 6.6 6 0 11.1-4.5 13.1-6.4l.1-.1 13.4-13.8-76.5-78.6z"}},{tag:"path",attr:{d:"M414.7 182.4l-19.8-21c-.8-.9-2-1.4-3.2-1.4-1.2 0-2.4.5-3.2 1.4L250.7 304.1l-50.1-51.6c-.9-.9-2-1.4-3.2-1.4-1.2 0-2.3.5-3.2 1.4l-20.1 20.7c-1.8 1.8-1.8 4.8 0 6.6l63.2 65c4 4.2 9 6.6 13.2 6.6 6 0 11.1-4.5 13.1-6.4l.1-.1 151-156.1c1.7-1.7 1.7-4.6 0-6.4z"}}]})(t)}function cj(t){return Ye({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M391.553 64H57.607C53.131 64 48 67.745 48 72.159v214.217c0 4.413 5.131 8.624 9.607 8.624H115v88.894L205.128 295h186.425c4.477 0 7.447-4.211 7.447-8.624V72.159c0-4.414-2.971-8.159-7.447-8.159z"}},{tag:"path",attr:{d:"M456.396 127H424v166.57c0 15.987-6.915 26.43-25.152 26.43H218.096l-38.905 39h129.688L399 448v-89h57.396c4.478 0 7.604-4.262 7.604-8.682V136.103c0-4.414-3.126-9.103-7.604-9.103z"}}]})(t)}function dj(t){return Ye({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}}]})(t)}function hj(t){return Ye({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"}}]})(t)}function fj(t){return Ye({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"}}]})(t)}function pj(t){return Ye({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9A7.902 7.902 0 014 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1A7.902 7.902 0 0120 12c0 4.42-3.58 8-8 8z"}}]})(t)}function mj(t){return Ye({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}},{tag:"path",attr:{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"}}]})(t)}function gj(t){return Ye({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}}]})(t)}function yj(t){return Ye({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}}]})(t)}var vj=["second","minute","hour","day","week","month","year"],_j=["","","","","","",""],gh={},Ug=function(t,e){gh[t]=e},sd=[60,60,24,7,365/7/12,12];function zg(t){return t instanceof Date?t:!isNaN(t)||/^\d+$/.test(t)?new Date(parseInt(t)):(t=(t||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(t))}var Na=function(t,e,r){var n=function(i,s){return(+(s?zg(s):new Date)-+zg(i))/1e3}(t,r&&r.relativeDate);return function(i,s){for(var a=i<0?1:0,o=i=Math.abs(i),l=0;i>=sd[l]&&l<sd.length;l++)i/=sd[l];return(i=Math.floor(i))>((l*=2)==0?9:1)&&(l+=1),s(i,l,o)[a].replace("%s",i.toString())}(n,function(i){return gh[i]||gh.en_US}(e))};Ug("en_US",function(t,e){if(e===0)return["just now","right now"];var r=vj[Math.floor(e/2)];return t>1&&(r+="s"),[t+" "+r+" ago","in "+t+" "+r]}),Ug("zh_CN",function(t,e){if(e===0)return["",""];var r=_j[~~(e/2)];return[t+" "+r+"",t+" "+r+""]});var La=function(){return La=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},La.apply(this,arguments)},wj=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r},yl=function(t){var e=t.type,r=e===void 0?"default":e,n=t.size,i=n===void 0?"default":n,s=t.lazyLoadingImage,a=s===void 0?void 0:s,o=wj(t,["type","size","lazyLoadingImage"]),l=[],u=!1,c=o.src,d=!1;Ie.useEffect(function(){a&&(d=!0,h(c)?d=!1:(c=a,u||b(o.src)))},[]);var h=function(v){return l.indexOf(v)!==-1},b=function(v){u=!0;var O=function(){l.push(v),u=!1},k=document.createElement("img");k.src=v,k.onload=O,k.onerror=O};return T.jsxs("div",La({className:be("rce-avatar-container",r,i,o.className)},{children:[o.letterItem?T.jsx("div",La({className:"rce-avatar-letter-background",style:{backgroundColor:function(v){for(var O=0,k=0;k<v.length;k++)O=v.charCodeAt(k)+((O<<5)-O);var p="#";for(k=0;k<3;k++){var m=O>>8*k&255;p+=("00"+(m=m%150+50).toString(16)).substr(-2)}return p}(o.letterItem.id)}},{children:T.jsx("span",La({className:"rce-avatar-letter"},{children:o.letterItem.letter}))})):T.jsx("img",{alt:o.alt,src:c,onError:o.onError,className:be("rce-avatar",{"rce-avatar-lazy":d})}),o.sideElement]}))},$a=function(){return $a=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},$a.apply(this,arguments)},bj=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r},xj=function(t){var e=t.disabled,r=e!==void 0&&e,n=t.backgroundColor,i=n===void 0?"#3979aa":n,s=t.color,a=s===void 0?"white":s,o=bj(t,["disabled","backgroundColor","color"]);return T.jsx("button",$a({ref:o.buttonRef,title:o.title,className:be("rce-button",o.type,o.className),style:{backgroundColor:i,color:a,borderColor:i},disabled:r,onClick:o.onClick},{children:o.icon?T.jsxs("span",$a({className:"rce-button-icon--container"},{children:[(o.icon.float==="right"||!o.icon.float)&&T.jsx("span",{children:o.text}),T.jsx("span",$a({style:{float:o.icon.float,fontSize:o.icon.size||12},className:"rce-button-icon"},{children:o.icon.component})),o.icon.float==="left"&&T.jsx("span",{children:o.text})]})):T.jsx("span",{children:o.text})}))},Br=function(){return Br=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Br.apply(this,arguments)},kj=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r},Sj=function(t){var e,r=t.animationPosition,n=r===void 0?"nortwest":r,i=t.animationType,s=i===void 0?"default":i,a=kj(t,["animationPosition","animationType"]),o=Ie.useState(void 0),l=o[0],u=o[1];return T.jsxs("div",Br({className:be("rce-dropdown-container",a.className),onBlur:function(){l===!0&&u(!1)}},{children:[T.jsx(xj,Br({},a.buttonProps,{onClick:function(){return u(!l)}})),T.jsx("div",Br({className:be("rce-dropdown",s,"rce-dropdown-open__"+n,{"dropdown-hide":l===!1},{"dropdown-show":l===!0})},{children:T.jsxs("ul",{children:[a.title&&T.jsx("span",Br({className:"rce-dropdown-title"},{children:a.title})),(e=a.items)===null||e===void 0?void 0:e.map(function(c,d){return T.jsx("li",Br({onMouseDown:function(h){return a.onSelect(d)}},{children:c instanceof Object?c.icon?T.jsxs("span",Br({className:"rce-button-icon--container"},{children:[(c.icon.float==="right"||!c.icon.float)&&T.jsx("a",{children:c.text}),T.jsx("span",Br({style:{float:c.icon.float,color:c.icon.color,fontSize:c.icon.size||12},className:be("rce-button-icon",c.icon.className)},{children:c.icon.component})),c.icon.float==="left"&&T.jsx("a",{children:c.text})]})):T.jsx("a",{children:c.text}):T.jsx("a",{children:c})}),d)})]})}))]}))},ce=function(){return ce=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ce.apply(this,arguments)},Ej=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r},Oj=function(t){var e=t.date,r=t.dateString,n=t.title,i=t.subject,s=t.collapseTitle,a=t.moreItems,o=t.participants,l=t.dataSource,u=t.onClick,c=t.onMeetingTitleClick,d=t.onMeetingVideoLinkClick,h=t.onMeetingMoreSelect,b=Ej(t,["date","dateString","title","subject","collapseTitle","moreItems","participants","dataSource","onClick","onMeetingTitleClick","onMeetingVideoLinkClick","onMeetingMoreSelect"]),v=Ie.useState(!1),O=v[0],k=v[1],p=b.participantsLimit,m=r||e&&Na(e);return T.jsx("div",ce({className:"rce-mbox-mtmg"},{children:T.jsxs("div",ce({className:"rce-mtmg"},{children:[T.jsx("div",ce({className:"rce-mtmg-subject"},{children:i||"Unknown Meeting"})),T.jsxs("div",ce({className:"rce-mtmg-body",onClick:u},{children:[T.jsxs("div",ce({className:"rce-mtmg-item"},{children:[T.jsx(zT,{}),T.jsxs("div",ce({className:"rce-mtmg-content"},{children:[T.jsx("span",ce({className:"rce-mtmg-title"},{children:n})),T.jsx("span",ce({className:"rce-mtmg-date"},{children:m}))]}))]})),h&&a&&a.length>0&&T.jsx("div",{children:T.jsx(Sj,{animationType:"bottom",animationPosition:"norteast",buttonProps:{className:"rce-mtmg-right-icon",icon:{component:T.jsx(yj,{}),size:24}},items:a,onSelect:h})})]})),T.jsx("div",ce({className:"rce-mtmg-body-bottom",onClick:function(){k(!O)}},{children:T.jsxs("div",O===!0?ce({className:"rce-mtmg-bottom--tptitle"},{children:[T.jsx(FT,{}),T.jsx("span",{children:s})]}):ce({className:"rce-mtmg-body-bottom--bttitle"},{children:[T.jsx(BT,{}),T.jsxs("span",{children:[o==null?void 0:o.slice(0,p).map(function(f){return f.title||"Unknow"}).join(", "),o&&p&&o.length>p&&", +".concat(o.length-p)]})]}))})),T.jsx("div",ce({className:be("rce-mtmg-toogleContent",{"rce-mtmg-toogleContent--click":O===!0})},{children:l&&l.map(function(f,S){return T.jsxs("div",{children:[!f.event&&T.jsxs("div",ce({className:"rce-mitem"},{children:[T.jsx("div",ce({className:be("rce-mitem avatar",{"rce-mitem no-avatar":!f.avatar})},{children:f.avatar?T.jsx(yl,{src:f.avatar}):T.jsx(cj,{})})),T.jsxs("div",ce({className:"rce-mitem-body"},{children:[T.jsxs("div",ce({className:"rce-mitem-body--top"},{children:[T.jsx("div",ce({className:"rce-mitem-body--top-title",onClick:function(A){return x=f,j=S,_=A,void(c instanceof Function&&c(x,j,_));var x,j,_}},{children:f.title})),T.jsx("div",ce({className:"rce-mitem-body--top-time"},{children:f.dateString?f.dateString:f.date&&f.date&&Na(f.date)}))]})),T.jsx("div",ce({className:"rce-mitem-body--bottom"},{children:T.jsx("div",ce({className:"rce-mitem-body--bottom-title"},{children:f.message}))}))]}))]})),f.event&&T.jsx("div",ce({className:"rce-mitem-event"},{children:T.jsxs("div",ce({className:"rce-mitem-bottom-body"},{children:[T.jsx("div",ce({className:"rce-mitem-body avatar"},{children:T.jsx(lj,{})})),T.jsxs("div",ce({className:"rce-mitem-bottom-body-top"},{children:[f.event.title,T.jsx("div",ce({className:"rce-mitem-body--top-time"},{children:f.dateString?f.dateString:f.date&&Na(f.date)})),T.jsx("div",ce({className:"rce-mitem-avatar-content"},{children:T.jsxs("div",ce({className:"rce-mitem-avatar"},{children:[f.event.avatars&&f.event.avatars.slice(0,f.event.avatarsLimit).map(function(A,x){return T.jsx(yl,{src:A.src},x)}),f.event.avatars&&f.event.avatarsLimit&&f.event.avatars.length>f.event.avatarsLimit&&T.jsx("div",ce({className:"rce-mitem-length rce-mitem-tooltip",tooltip:f.event.avatars.slice(f.event.avatarsLimit,f.event.avatars.length).map(function(A){return A.title}).join(",").toString()},{children:T.jsx("span",ce({className:"rce-mitem-tooltip-text"},{children:"+"+(f.event.avatars.length-f.event.avatarsLimit)}))}))]}))})),f.record&&T.jsx("div",ce({className:"rce-mtmg-call-record"},{children:T.jsxs("div",ce({className:"rce-mtmg-call-body"},{children:[T.jsxs("div",ce({onClick:function(A){return x=f,j=S,_=A,void(d instanceof Function&&d(x,j,_));var x,j,_},className:"rce-mtmg-call-avatars"},{children:[T.jsx(yl,{className:"rce-mtmg-call-avatars",src:f.record.avatar}),T.jsx("div",ce({className:"rce-mtmg-record-time"},{children:f.record.time}))]})),T.jsxs("div",ce({className:"rce-mtmg-call-body-title"},{children:[T.jsx("span",{children:f.record.title}),T.jsx("div",ce({className:"rce-mtmg-call-body-bottom"},{children:f.record.savedBy}))]}))]}))}))]}))]}))}))]},S)})}))]}))}))},hr=function(){return hr=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},hr.apply(this,arguments)},Pj=function(t){var e,r,n,i,s,a={strokeWidth:2.3,color:"#efe",trailColor:"#aaa",trailWidth:1,step:function(u,c){var d,h;c.path.setAttribute("trail",u.state!==void 0&&((d=u==null?void 0:u.state)===null||d===void 0?void 0:d.color)||""),c.path.setAttribute("trailwidth-width",u.state!==void 0&&((h=u==null?void 0:u.state)===null||h===void 0?void 0:h.width)||"");var b=Math.round(100*(c==null?void 0:c.value()));b===0?c==null||c.setText(""):c==null||c.setText(b)}},o=((e=t==null?void 0:t.data)===null||e===void 0?void 0:e.status)&&((r=t==null?void 0:t.data)===null||r===void 0?void 0:r.status.error)===!0,l=((n=t==null?void 0:t.data)===null||n===void 0?void 0:n.status)&&((i=t==null?void 0:t.data)===null||i===void 0?void 0:i.status.download);return T.jsxs("div",hr({className:be("rce-mbox-video",{"padding-time":!(t!=null&&t.text)})},{children:[T.jsxs("div",hr({className:"rce-mbox-video--video",style:hr({},(t==null?void 0:t.data.width)&&(t==null?void 0:t.data.height)&&{width:t.data.width,height:t.data.height})},{children:[!l&&T.jsx("img",{src:t==null?void 0:t.data.uri,alt:t==null?void 0:t.data.alt,onClick:t.onOpen,onLoad:t.onLoad,onError:t.onPhotoError}),l&&T.jsxs("video",hr({controls:!0,controlsList:t.controlsList},{children:[T.jsx("source",{src:t==null?void 0:t.data.videoURL,type:"video/mp4"}),"Your browser does not support HTML video."]})),o&&T.jsx("div",hr({className:"rce-mbox-video--video__block"},{children:T.jsx("span",hr({className:"rce-mbox-video--video__block-item rce-mbox-video--error"},{children:T.jsx(tp,{})}))})),!o&&((s=t==null?void 0:t.data)===null||s===void 0?void 0:s.status)&&!l&&T.jsxs("div",hr({className:"rce-mbox-video--video__block"},{children:[!t.data.status.click&&T.jsx("button",hr({onClick:t.onDownload,className:"rce-mbox-video--video__block-item rce-mbox-video--download"},{children:T.jsx(ep,{})})),typeof t.data.status.loading=="number"&&t.data.status.loading!==0&&T.jsx(rp,{animate:t.data.status.loading,className:"rce-mbox-video--video__block-item",progressOptions:a})]}))]})),(t==null?void 0:t.text)&&T.jsx("div",hr({className:"rce-mbox-text"},{children:t.text}))]}))},Da=function(){return Da=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Da.apply(this,arguments)},Tj=function(t){var e=t.data.controlsList;return T.jsxs("div",Da({className:"rce-mbox-audio",style:t.customStyle},{children:[T.jsxs("audio",Da({},t.audioProps,{controls:!0,controlsList:e||"nodownload"},{children:[T.jsx("source",{src:t.data.audioURL,type:t.data.audioType||"audio/mp3"}),"Your browser does not support the audio element."]})),t.text&&T.jsx("div",Da({className:"rce-mbox-text"},{children:t.text}))]}))},_n=function(){return _n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},_n.apply(this,arguments)},jj=function(t){var e;return T.jsx("div",_n({className:"rce-mtlink"},{children:T.jsxs("div",_n({className:"rce-mtlink-content"},{children:[T.jsx("div",_n({className:"rce-mtlink-item"},{children:T.jsx("div",_n({className:"rce-mtlink-title"},{children:t.text}))})),T.jsx("div",_n({className:"rce-mtlink-btn"},{children:(e=t==null?void 0:t.actionButtons)===null||e===void 0?void 0:e.map(function(r){return T.jsx("div",_n({className:"rce-mtlink-btn-content",onClick:function(){var n;return r.onClickButton((n=t==null?void 0:t.meetingID)!==null&&n!==void 0?n:"")}},{children:T.jsx(r.Component,{})}))})}))]}))}))};function Cj(t){return Ye({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M13 14h-2a8.999 8.999 0 0 0-7.968 4.81A10.136 10.136 0 0 1 3 18C3 12.477 7.477 8 13 8V3l10 8-10 8v-5z"}}]}]})(t)}var Se=function(){return Se=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Se.apply(this,arguments)},Aj=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r},Ij=function(t){var e=t.focus,r=e!==void 0&&e,n=t.notch,i=n===void 0||n,s=t.styles,a=Aj(t,["focus","notch","styles"]),o=Ie.useRef(r),l=Ie.useRef(null),u=be("rce-mbox",{"rce-mbox-right":a.position==="right"}),c=!(/(text|video|file|meeting|audio)/g.test(a.type||"text")||a.type==="location"&&a.text),d=a.date&&(a.dateString||Na(a.date));return Ie.useEffect(function(){var h;o.current!==r&&r===!0&&l&&((h=l.current)===null||h===void 0||h.scrollIntoView({block:"center",behavior:"smooth"}),a.onMessageFocused(o)),o.current=r},[r,o]),T.jsxs("div",Se({ref:l,className:be("rce-container-mbox",a.className),onClick:a.onClick},{children:[a.renderAddCmp instanceof Function?a.renderAddCmp():a.renderAddCmp,a.type==="system"?T.jsx(tj,Se({},a,{focus:r,notch:i})):T.jsxs("div",Se({style:s,className:be(u,{"rce-mbox--clear-padding":c},{"rce-mbox--clear-notch":!i},{"message-focus":r})},{children:[T.jsxs("div",Se({className:"rce-mbox-body",onContextMenu:a.onContextMenu},{children:[!a.retracted&&a.forwarded===!0&&T.jsx("div",Se({className:be("rce-mbox-forward",{"rce-mbox-forward-right":a.position==="left"},{"rce-mbox-forward-left":a.position==="right"}),onClick:a.onForwardClick},{children:T.jsx(Cj,{})})),!a.retracted&&a.replyButton===!0&&T.jsx("div",Se({className:a.forwarded!==!0?be("rce-mbox-forward",{"rce-mbox-forward-right":a.position==="left"},{"rce-mbox-forward-left":a.position==="right"}):be("rce-mbox-forward",{"rce-mbox-reply-btn-right":a.position==="left"},{"rce-mbox-reply-btn-left":a.position==="right"}),onClick:a.onReplyClick},{children:T.jsx(fj,{})})),!a.retracted&&a.removeButton===!0&&T.jsx("div",Se({className:a.forwarded===!0?be("rce-mbox-remove",{"rce-mbox-remove-right":a.position==="left"},{"rce-mbox-remove-left":a.position==="right"}):be("rce-mbox-forward",{"rce-mbox-reply-btn-right":a.position==="left"},{"rce-mbox-reply-btn-left":a.position==="right"}),onClick:a.onRemoveMessageClick},{children:T.jsx(dj,{})})),(a.title||a.avatar)&&T.jsxs("div",Se({style:Se({},a.titleColor&&{color:a.titleColor}),onClick:a.onTitleClick,className:be("rce-mbox-title",{"rce-mbox-title--clear":a.type==="text"})},{children:[a.avatar&&T.jsx(yl,{letterItem:a.letterItem,src:a.avatar}),a.title&&T.jsx("span",{children:a.title})]})),a.reply&&T.jsx(oj,Se({onClick:a.onReplyMessageClick},a.reply)),a.type==="text"&&T.jsxs("div",Se({className:be("rce-mbox-text",{"rce-mbox-text-retracted":a.retracted,left:a.position==="left",right:a.position==="right"})},{children:[a.retracted&&T.jsx(pj,{}),a.text]})),a.type==="location"&&T.jsx(nj,Se({focus:r,notch:i},a)),a.type==="photo"&&T.jsx(XT,Se({focus:r,notch:i},a)),a.type==="video"&&T.jsx(Pj,Se({focus:r,notch:i},a)),a.type==="file"&&T.jsx(ej,Se({focus:r,notch:i},a)),a.type==="spotify"&&T.jsx(sj,Se({focus:r,notch:i},a)),a.type==="meeting"&&T.jsx(Oj,Se({focus:r,notch:i},a)),a.type==="audio"&&T.jsx(Tj,Se({focus:r,notch:i},a)),a.type==="meetingLink"&&T.jsx(jj,Se({focus:r,notch:i},a,{actionButtons:a==null?void 0:a.actionButtons})),T.jsxs("div",Se({title:a.statusTitle,className:be("rce-mbox-time",{"rce-mbox-time-block":c},{"non-copiable":!a.copiableDate}),"data-text":a.copiableDate?void 0:d},{children:[a.copiableDate&&a.date&&(a.dateString||Na(a.date)),a.status&&T.jsxs("span",Se({className:"rce-mbox-status"},{children:[a.status==="waiting"&&T.jsx(mj,{}),a.status==="sent"&&T.jsx(gj,{}),a.status==="received"&&T.jsx(uj,{}),a.status==="read"&&T.jsx(hj,{color:"#4FC3F7"})]}))]}))]})),i&&(a.position==="right"?T.jsx("svg",Se({style:a.notchStyle,className:be("rce-mbox-right-notch",{"message-focus":r}),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},{children:T.jsx("path",{d:"M0 0v20L20 0"})})):T.jsx("div",{children:T.jsxs("svg",Se({style:a.notchStyle,className:be("rce-mbox-left-notch",{"message-focus":r}),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},{children:[T.jsx("defs",{children:T.jsxs("filter",Se({id:"filter1",x:"0",y:"0"},{children:[T.jsx("feOffset",{result:"offOut",in:"SourceAlpha",dx:"-2",dy:"-5"}),T.jsx("feGaussianBlur",{result:"blurOut",in:"offOut",stdDeviation:"3"}),T.jsx("feBlend",{in:"SourceGraphic",in2:"blurOut",mode:"normal"})]}))}),T.jsx("path",{d:"M20 0v20L0 0",filter:"url(#filter1)"})]}))}))]}))]}))},si=function(){return si=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},si.apply(this,arguments)},Rj=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r},Nj=function(t){var e=t.referance,r=e===void 0?null:e,n=t.lockable,i=n!==void 0&&n,s=t.toBottomHeight,a=s===void 0?300:s,o=t.downButton,l=Rj(t,["referance","lockable","toBottomHeight","downButton"]),u=Ie.useState(0),c=u[0],d=u[1],h=Ie.useState(!1),b=h[0],v=h[1],O=Ie.useRef(l);Ie.useEffect(function(){var p;r&&(O.current.dataSource.length!==l.dataSource.length&&(d(k(r)),(p=r)&&p.current&&(a==="100%"||a&&c<a?p.current.scrollTop=p.current.scrollHeight:i===!0&&(p.current.scrollTop=p.current.scrollHeight-p.current.offsetHeight-c))),O.current=l)},[O,l]);var k=function(p){return p.current?p.current.scrollHeight-p.current.scrollTop-p.current.offsetHeight:p.scrollHeight-p.scrollTop-p.offsetHeight};return T.jsxs("div",si({className:be(["rce-container-mlist",l.className])},l.customProps,{children:[!!l.children&&l.isShowChild&&l.children,T.jsx("div",si({ref:r,onScroll:function(p){var m=k(p.currentTarget);d(m),a==="100%"||a&&m>a?b!==!0&&(v(!0),d(m)):b!==!1&&(v(!1),d(m)),l.onScroll instanceof Function&&l.onScroll(p)},className:"rce-mlist"},{children:l.dataSource.map(function(p,m){return T.jsx(Ij,si({},p,{onOpen:l.onOpen&&function(f){return S=p,A=m,x=f,void(l.onOpen instanceof Function&&l.onOpen(S,A,x));var S,A,x},onPhotoError:l.onPhotoError&&function(f){return S=p,A=m,x=f,void(l.onPhotoError instanceof Function&&l.onPhotoError(S,A,x));var S,A,x},onDownload:l.onDownload&&function(f){return S=p,A=m,x=f,void(l.onDownload instanceof Function&&l.onDownload(S,A,x));var S,A,x},onTitleClick:l.onTitleClick&&function(f){return S=p,A=m,x=f,void(l.onTitleClick instanceof Function&&l.onTitleClick(S,A,x));var S,A,x},onForwardClick:l.onForwardClick&&function(f){return S=p,A=m,x=f,void(l.onForwardClick instanceof Function&&l.onForwardClick(S,A,x));var S,A,x},onReplyClick:l.onReplyClick&&function(f){return S=p,A=m,x=f,void(l.onReplyClick instanceof Function&&l.onReplyClick(S,A,x));var S,A,x},onReplyMessageClick:l.onReplyMessageClick&&function(f){return S=p,A=m,x=f,void(l.onReplyMessageClick instanceof Function&&l.onReplyMessageClick(S,A,x));var S,A,x},onRemoveMessageClick:l.onRemoveMessageClick&&function(f){return S=p,A=m,x=f,void(l.onRemoveMessageClick instanceof Function&&l.onRemoveMessageClick(S,A,x));var S,A,x},onClick:l.onClick&&function(f){return S=p,A=m,x=f,void(l.onClick instanceof Function&&l.onClick(S,A,x));var S,A,x},onContextMenu:l.onContextMenu&&function(f){return S=p,A=m,x=f,void(l.onContextMenu instanceof Function&&l.onContextMenu(S,A,x));var S,A,x},onMeetingMoreSelect:l.onMeetingMoreSelect&&function(f){return function(S,A,x){l.onMeetingMoreSelect instanceof Function&&l.onMeetingMoreSelect(S,A,x)}(p,m,f)},onMessageFocused:l.onMessageFocused&&function(f){return S=p,A=m,x=f,void(l.onMessageFocused instanceof Function&&l.onMessageFocused(S,A,x));var S,A,x},onMeetingMessageClick:l.onMeetingMessageClick&&function(f){return S=p,A=m,x=f,void(l.onMeetingMessageClick instanceof Function&&l.onMeetingMessageClick(S,A,x));var S,A,x},onMeetingTitleClick:l.onMeetingTitleClick,onMeetingVideoLinkClick:l.onMeetingVideoLinkClick,onMeetingLinkClick:l.onMeetingLinkClick&&function(f){return function(S,A,x){l.onMeetingLinkClick instanceof Function&&l.onMeetingLinkClick(S,A,x)}(p,m,f)},actionButtons:l.actionButtons,styles:l.messageBoxStyles,notchStyle:l.notchStyle}),m)})})),o===!0&&b&&a!=="100%"&&T.jsxs("div",si({className:"rce-mlist-down-button",onClick:function(p){r&&(r.current.scrollTop=r.current.scrollHeight,l.onDownButtonClick instanceof Function&&l.onDownButtonClick(p))}},{children:[T.jsx(VT,{}),l.downButtonBadge!==void 0?T.jsx("span",si({className:"rce-mlist-down-button--badge"},{children:l.downButtonBadge.toString()})):null]}))]}))};function Lj(){const[t,e]=Ie.useState(""),[r,n]=Ie.useState([]),[i,s]=Ie.useState([]),[a,o]=Ie.useState();Ie.useEffect(()=>{console.log(),Q_().then(h=>{o(h)}),u0().then(h=>{var b;console.log("data",h),(b=h.data)==null||b.forEach(v=>{console.log("event",v),$T(v).then(O=>{console.log("res",O),o(O)}).catch(O=>console.error(O))})})},[]);const l=(h,b)=>({position:b==="system"?"left":"right",type:"text",title:b==="system"?"Sales Associate":"User",text:h}),u=async h=>{if(e(h.target.value),h.target.value!=""){const b=await IT(h.target.value);n(b)}else n([])},c=async h=>{h.preventDefault();const b=l(t,"user"),v=[...i,b];s(v),console.log("message before",i),a?await a.call({message:t}).then(O=>{console.log(O.text);const k=l(O.text,"system");s([...v,k]),console.log("message after openai",i)}).catch(O=>console.error(O)):(s([...v,l("AI is not available, please try again","system")]),console.error("openai not available")),e("")},d=h=>{console.log("Selected suggestion:",h)};return T.jsx("div",{id:"overlay",style:{height:"30%"},children:T.jsx("section",{style:{position:"relative",overflow:"hidden",backgroundColor:"black",backgroundSize:"cover"},children:T.jsx("div",{style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},children:T.jsxs("div",{style:{maxWidth:"1200px",width:"100%",margin:"auto",overflow:"hidden",transition:"all",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",backgroundColor:"white",backdropFilter:"blur(10px)",borderRadius:"1rem"},children:[T.jsx("div",{style:{position:"relative"},children:T.jsxs("form",{onSubmit:c,children:[T.jsx("input",{type:"text",value:t,onChange:u,onSubmit:c,style:{width:"100%",height:"3rem",paddingRight:"1rem",color:"black",border:"none",borderRadius:"0.625rem 0.625rem 0 0",paddingLeft:"2.75rem"},placeholder:"Ask me anything! I am not your typical search bar",role:"combobox","aria-expanded":"false","aria-controls":"options"}),T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",style:{position:"absolute",top:"50%",right:"10px",transform:"translateY(-50%)",height:"1.5rem",width:"1.5rem",color:"black"},children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),T.jsxs("div",{style:{display:"flex",borderTop:"1px solid rgba(17, 16, 16, 0.2)",flexDirection:"row"},children:[T.jsx("div",{style:{flex:"1",minWidth:"0",padding:"1.5rem",overflowY:"auto",maxHeight:"24rem"},children:r&&r.map((h,b)=>T.jsx("a",{href:h.url,onClick:()=>d(h),style:{textDecoration:"none",color:"inherit"},children:T.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"8px",borderBottom:"1px solid #ccc",boxSizing:"border-box",cursor:"pointer"},children:[T.jsx("img",{src:h.featured_image.url,alt:h.featured_image.alt,style:{width:"50px",marginRight:"8px"}}),T.jsx("div",{style:{textAlign:"center"},children:h.title})]})},b))}),T.jsx("div",{style:{flex:"1",minWidth:"0",padding:"1.5rem",overflowY:"auto",maxHeight:"24rem"},children:T.jsx(Nj,{className:"message-list",lockable:!0,toBottomHeight:"100%",dataSource:i})})]})]})})})})}function lC(t,e,r,n=1){_l.createRoot(document.getElementById(e)).render(T.jsx(DT,{props:{home:t,mountDiv:e,overlayDiv:r,iconSize:n}}))}function uC(){const t="full-overlay";let e=document.getElementById(t);return e||(e=document.createElement("div"),e.id=t,e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="30%",e.style.backgroundColor="rgba(0, 0, 0, 0.5)",e.style.zIndex="1000",e.style.display="block",e.className="overlay",document.body.appendChild(e),_l.createRoot(document.getElementById(t)).render(T.jsx(Lj,{}))),e}export{MO as B,Xi as C,KO as H,lc as L,Cr as P,V_ as S,uC as a,BO as b,lC as c,lP as d,F_ as r};
