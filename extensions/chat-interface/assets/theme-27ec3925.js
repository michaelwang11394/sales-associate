var Xv=Object.defineProperty;var e_=(t,e,r)=>e in t?Xv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var wr=(t,e,r)=>(e_(t,typeof e!="symbol"?e+"":e,r),r);/* empty css              */function t_(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var ro=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ia(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function r_(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var Zp={exports:{}},il={},Kp={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sa=Symbol.for("react.element"),n_=Symbol.for("react.portal"),i_=Symbol.for("react.fragment"),s_=Symbol.for("react.strict_mode"),a_=Symbol.for("react.profiler"),o_=Symbol.for("react.provider"),l_=Symbol.for("react.context"),u_=Symbol.for("react.forward_ref"),c_=Symbol.for("react.suspense"),d_=Symbol.for("react.memo"),h_=Symbol.for("react.lazy"),Ph=Symbol.iterator;function f_(t){return t===null||typeof t!="object"?null:(t=Ph&&t[Ph]||t["@@iterator"],typeof t=="function"?t:null)}var qp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Wp=Object.assign,Jp={};function Oi(t,e,r){this.props=t,this.context=e,this.refs=Jp,this.updater=r||qp}Oi.prototype.isReactComponent={};Oi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Oi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Gp(){}Gp.prototype=Oi.prototype;function Hc(t,e,r){this.props=t,this.context=e,this.refs=Jp,this.updater=r||qp}var Zc=Hc.prototype=new Gp;Zc.constructor=Hc;Wp(Zc,Oi.prototype);Zc.isPureReactComponent=!0;var Oh=Array.isArray,Yp=Object.prototype.hasOwnProperty,Kc={current:null},Qp={key:!0,ref:!0,__self:!0,__source:!0};function Xp(t,e,r){var n,i={},s=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)Yp.call(e,n)&&!Qp.hasOwnProperty(n)&&(i[n]=e[n]);var o=arguments.length-2;if(o===1)i.children=r;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:sa,type:t,key:s,ref:a,props:i,_owner:Kc.current}}function p_(t,e){return{$$typeof:sa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function qc(t){return typeof t=="object"&&t!==null&&t.$$typeof===sa}function m_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Ah=/\/+/g;function ql(t,e){return typeof t=="object"&&t!==null&&t.key!=null?m_(""+t.key):e.toString(36)}function za(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case sa:case n_:a=!0}}if(a)return a=t,i=i(a),t=n===""?"."+ql(a,0):n,Oh(i)?(r="",t!=null&&(r=t.replace(Ah,"$&/")+"/"),za(i,e,r,"",function(u){return u})):i!=null&&(qc(i)&&(i=p_(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Ah,"$&/")+"/")+t)),e.push(i)),1;if(a=0,n=n===""?".":n+":",Oh(t))for(var o=0;o<t.length;o++){s=t[o];var l=n+ql(s,o);a+=za(s,e,r,l,i)}else if(l=f_(t),typeof l=="function")for(t=l.call(t),o=0;!(s=t.next()).done;)s=s.value,l=n+ql(s,o++),a+=za(s,e,r,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function ma(t,e,r){if(t==null)return t;var n=[],i=0;return za(t,n,"","",function(s){return e.call(r,s,i++)}),n}function g_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Xe={current:null},Ba={transition:null},y_={ReactCurrentDispatcher:Xe,ReactCurrentBatchConfig:Ba,ReactCurrentOwner:Kc};ee.Children={map:ma,forEach:function(t,e,r){ma(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return ma(t,function(){e++}),e},toArray:function(t){return ma(t,function(e){return e})||[]},only:function(t){if(!qc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ee.Component=Oi;ee.Fragment=i_;ee.Profiler=a_;ee.PureComponent=Hc;ee.StrictMode=s_;ee.Suspense=c_;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=y_;ee.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Wp({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=Kc.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)Yp.call(e,l)&&!Qp.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:sa,type:t.type,key:i,ref:s,props:n,_owner:a}};ee.createContext=function(t){return t={$$typeof:l_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:o_,_context:t},t.Consumer=t};ee.createElement=Xp;ee.createFactory=function(t){var e=Xp.bind(null,t);return e.type=t,e};ee.createRef=function(){return{current:null}};ee.forwardRef=function(t){return{$$typeof:u_,render:t}};ee.isValidElement=qc;ee.lazy=function(t){return{$$typeof:h_,_payload:{_status:-1,_result:t},_init:g_}};ee.memo=function(t,e){return{$$typeof:d_,type:t,compare:e===void 0?null:e}};ee.startTransition=function(t){var e=Ba.transition;Ba.transition={};try{t()}finally{Ba.transition=e}};ee.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ee.useCallback=function(t,e){return Xe.current.useCallback(t,e)};ee.useContext=function(t){return Xe.current.useContext(t)};ee.useDebugValue=function(){};ee.useDeferredValue=function(t){return Xe.current.useDeferredValue(t)};ee.useEffect=function(t,e){return Xe.current.useEffect(t,e)};ee.useId=function(){return Xe.current.useId()};ee.useImperativeHandle=function(t,e,r){return Xe.current.useImperativeHandle(t,e,r)};ee.useInsertionEffect=function(t,e){return Xe.current.useInsertionEffect(t,e)};ee.useLayoutEffect=function(t,e){return Xe.current.useLayoutEffect(t,e)};ee.useMemo=function(t,e){return Xe.current.useMemo(t,e)};ee.useReducer=function(t,e,r){return Xe.current.useReducer(t,e,r)};ee.useRef=function(t){return Xe.current.useRef(t)};ee.useState=function(t){return Xe.current.useState(t)};ee.useSyncExternalStore=function(t,e,r){return Xe.current.useSyncExternalStore(t,e,r)};ee.useTransition=function(){return Xe.current.useTransition()};ee.version="18.2.0";Kp.exports=ee;var no=Kp.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v_=no,__=Symbol.for("react.element"),w_=Symbol.for("react.fragment"),b_=Object.prototype.hasOwnProperty,k_=v_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,E_={key:!0,ref:!0,__self:!0,__source:!0};function em(t,e,r){var n,i={},s=null,a=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)b_.call(e,n)&&!E_.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:__,type:t,key:s,ref:a,props:i,_owner:k_.current}}il.Fragment=w_;il.jsx=em;il.jsxs=em;Zp.exports=il;var Va=Zp.exports;(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var Lu={},tm={exports:{}},yt={},rm={exports:{}},nm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,j){var $=M.length;M.push(j);e:for(;0<$;){var U=$-1>>>1,oe=M[U];if(0<i(oe,j))M[U]=j,M[$]=oe,$=U;else break e}}function r(M){return M.length===0?null:M[0]}function n(M){if(M.length===0)return null;var j=M[0],$=M.pop();if($!==j){M[0]=$;e:for(var U=0,oe=M.length,wt=oe>>>1;U<wt;){var Je=2*(U+1)-1,Kt=M[Je],Rt=Je+1,Qr=M[Rt];if(0>i(Kt,$))Rt<oe&&0>i(Qr,Kt)?(M[U]=Qr,M[Rt]=$,U=Rt):(M[U]=Kt,M[Je]=$,U=Je);else if(Rt<oe&&0>i(Qr,$))M[U]=Qr,M[Rt]=$,U=Rt;else break e}}return j}function i(M,j){var $=M.sortIndex-j.sortIndex;return $!==0?$:M.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],u=[],c=1,d=null,h=3,w=!1,v=!1,T=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(M){for(var j=r(u);j!==null;){if(j.callback===null)n(u);else if(j.startTime<=M)n(u),j.sortIndex=j.expirationTime,e(l,j);else break;j=r(u)}}function x(M){if(T=!1,_(M),!v)if(r(l)!==null)v=!0,H(I);else{var j=r(u);j!==null&&ae(x,j.startTime-M)}}function I(M,j){v=!1,T&&(T=!1,y(m),m=-1),w=!0;var $=h;try{for(_(j),d=r(l);d!==null&&(!(d.expirationTime>j)||M&&!A());){var U=d.callback;if(typeof U=="function"){d.callback=null,h=d.priorityLevel;var oe=U(d.expirationTime<=j);j=t.unstable_now(),typeof oe=="function"?d.callback=oe:d===r(l)&&n(l),_(j)}else n(l);d=r(l)}if(d!==null)var wt=!0;else{var Je=r(u);Je!==null&&ae(x,Je.startTime-j),wt=!1}return wt}finally{d=null,h=$,w=!1}}var S=!1,P=null,m=-1,E=5,g=-1;function A(){return!(t.unstable_now()-g<E)}function C(){if(P!==null){var M=t.unstable_now();g=M;var j=!0;try{j=P(!0,M)}finally{j?W():(S=!1,P=null)}}else S=!1}var W;if(typeof p=="function")W=function(){p(C)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,G=q.port2;q.port1.onmessage=C,W=function(){G.postMessage(null)}}else W=function(){b(C,0)};function H(M){P=M,S||(S=!0,W())}function ae(M,j){m=b(function(){M(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){v||w||(v=!0,H(I))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(M){switch(h){case 1:case 2:case 3:var j=3;break;default:j=h}var $=h;h=j;try{return M()}finally{h=$}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,j){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var $=h;h=M;try{return j()}finally{h=$}},t.unstable_scheduleCallback=function(M,j,$){var U=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?U+$:U):$=U,M){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=$+oe,M={id:c++,callback:j,priorityLevel:M,startTime:$,expirationTime:oe,sortIndex:-1},$>U?(M.sortIndex=$,e(u,M),r(l)===null&&M===r(u)&&(T?(y(m),m=-1):T=!0,ae(x,$-U))):(M.sortIndex=oe,e(l,M),v||w||(v=!0,H(I))),M},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(M){var j=h;return function(){var $=h;h=j;try{return M.apply(this,arguments)}finally{h=$}}}})(nm);rm.exports=nm;var S_=rm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var im=no,mt=S_;function R(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sm=new Set,Ps={};function Tn(t,e){oi(t,e),oi(t+"Capture",e)}function oi(t,e){for(Ps[t]=e,t=0;t<e.length;t++)sm.add(e[t])}var hr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$u=Object.prototype.hasOwnProperty,x_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ch={},Ih={};function T_(t){return $u.call(Ih,t)?!0:$u.call(Ch,t)?!1:x_.test(t)?Ih[t]=!0:(Ch[t]=!0,!1)}function P_(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function O_(t,e,r,n){if(e===null||typeof e>"u"||P_(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function et(t,e,r,n,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Le={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Le[t]=new et(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Le[e]=new et(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Le[t]=new et(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Le[t]=new et(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Le[t]=new et(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Le[t]=new et(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Le[t]=new et(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Le[t]=new et(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Le[t]=new et(t,5,!1,t.toLowerCase(),null,!1,!1)});var Wc=/[\-:]([a-z])/g;function Jc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Wc,Jc);Le[e]=new et(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Wc,Jc);Le[e]=new et(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Wc,Jc);Le[e]=new et(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Le[t]=new et(t,1,!1,t.toLowerCase(),null,!1,!1)});Le.xlinkHref=new et("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Le[t]=new et(t,1,!1,t.toLowerCase(),null,!0,!0)});function Gc(t,e,r,n){var i=Le.hasOwnProperty(e)?Le[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(O_(e,r,i,n)&&(r=null),n||i===null?T_(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var _r=im.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ga=Symbol.for("react.element"),Un=Symbol.for("react.portal"),Fn=Symbol.for("react.fragment"),Yc=Symbol.for("react.strict_mode"),Du=Symbol.for("react.profiler"),am=Symbol.for("react.provider"),om=Symbol.for("react.context"),Qc=Symbol.for("react.forward_ref"),Mu=Symbol.for("react.suspense"),Uu=Symbol.for("react.suspense_list"),Xc=Symbol.for("react.memo"),xr=Symbol.for("react.lazy"),lm=Symbol.for("react.offscreen"),jh=Symbol.iterator;function Li(t){return t===null||typeof t!="object"?null:(t=jh&&t[jh]||t["@@iterator"],typeof t=="function"?t:null)}var ye=Object.assign,Wl;function os(t){if(Wl===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Wl=e&&e[1]||""}return`
`+Wl+t}var Jl=!1;function Gl(t,e){if(!t||Jl)return"";Jl=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=n.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{Jl=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?os(t):""}function A_(t){switch(t.tag){case 5:return os(t.type);case 16:return os("Lazy");case 13:return os("Suspense");case 19:return os("SuspenseList");case 0:case 2:case 15:return t=Gl(t.type,!1),t;case 11:return t=Gl(t.type.render,!1),t;case 1:return t=Gl(t.type,!0),t;default:return""}}function Fu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Fn:return"Fragment";case Un:return"Portal";case Du:return"Profiler";case Yc:return"StrictMode";case Mu:return"Suspense";case Uu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case om:return(t.displayName||"Context")+".Consumer";case am:return(t._context.displayName||"Context")+".Provider";case Qc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Xc:return e=t.displayName||null,e!==null?e:Fu(t.type)||"Memo";case xr:e=t._payload,t=t._init;try{return Fu(t(e))}catch{}}return null}function C_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fu(e);case 8:return e===Yc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Vr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function um(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function I_(t){var e=um(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ya(t){t._valueTracker||(t._valueTracker=I_(t))}function cm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=um(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function io(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function zu(t,e){var r=e.checked;return ye({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Rh(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Vr(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function dm(t,e){e=e.checked,e!=null&&Gc(t,"checked",e,!1)}function Bu(t,e){dm(t,e);var r=Vr(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Vu(t,e.type,r):e.hasOwnProperty("defaultValue")&&Vu(t,e.type,Vr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Nh(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Vu(t,e,r){(e!=="number"||io(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var ls=Array.isArray;function ei(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Vr(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Hu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(R(91));return ye({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Lh(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(R(92));if(ls(r)){if(1<r.length)throw Error(R(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Vr(r)}}function hm(t,e){var r=Vr(e.value),n=Vr(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function $h(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function fm(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?fm(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var va,pm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(va=va||document.createElement("div"),va.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=va.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Os(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var fs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},j_=["Webkit","ms","Moz","O"];Object.keys(fs).forEach(function(t){j_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),fs[e]=fs[t]})});function mm(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||fs.hasOwnProperty(t)&&fs[t]?(""+e).trim():e+"px"}function gm(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=mm(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var R_=ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ku(t,e){if(e){if(R_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(R(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(R(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(R(61))}if(e.style!=null&&typeof e.style!="object")throw Error(R(62))}}function qu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wu=null;function ed(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ju=null,ti=null,ri=null;function Dh(t){if(t=la(t)){if(typeof Ju!="function")throw Error(R(280));var e=t.stateNode;e&&(e=ul(e),Ju(t.stateNode,t.type,e))}}function ym(t){ti?ri?ri.push(t):ri=[t]:ti=t}function vm(){if(ti){var t=ti,e=ri;if(ri=ti=null,Dh(t),e)for(t=0;t<e.length;t++)Dh(e[t])}}function _m(t,e){return t(e)}function wm(){}var Yl=!1;function bm(t,e,r){if(Yl)return t(e,r);Yl=!0;try{return _m(t,e,r)}finally{Yl=!1,(ti!==null||ri!==null)&&(wm(),vm())}}function As(t,e){var r=t.stateNode;if(r===null)return null;var n=ul(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(R(231,e,typeof r));return r}var Gu=!1;if(hr)try{var $i={};Object.defineProperty($i,"passive",{get:function(){Gu=!0}}),window.addEventListener("test",$i,$i),window.removeEventListener("test",$i,$i)}catch{Gu=!1}function N_(t,e,r,n,i,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(c){this.onError(c)}}var ps=!1,so=null,ao=!1,Yu=null,L_={onError:function(t){ps=!0,so=t}};function $_(t,e,r,n,i,s,a,o,l){ps=!1,so=null,N_.apply(L_,arguments)}function D_(t,e,r,n,i,s,a,o,l){if($_.apply(this,arguments),ps){if(ps){var u=so;ps=!1,so=null}else throw Error(R(198));ao||(ao=!0,Yu=u)}}function Pn(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function km(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Mh(t){if(Pn(t)!==t)throw Error(R(188))}function M_(t){var e=t.alternate;if(!e){if(e=Pn(t),e===null)throw Error(R(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return Mh(i),t;if(s===n)return Mh(i),e;s=s.sibling}throw Error(R(188))}if(r.return!==n.return)r=i,n=s;else{for(var a=!1,o=i.child;o;){if(o===r){a=!0,r=i,n=s;break}if(o===n){a=!0,n=i,r=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===r){a=!0,r=s,n=i;break}if(o===n){a=!0,n=s,r=i;break}o=o.sibling}if(!a)throw Error(R(189))}}if(r.alternate!==n)throw Error(R(190))}if(r.tag!==3)throw Error(R(188));return r.stateNode.current===r?t:e}function Em(t){return t=M_(t),t!==null?Sm(t):null}function Sm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Sm(t);if(e!==null)return e;t=t.sibling}return null}var xm=mt.unstable_scheduleCallback,Uh=mt.unstable_cancelCallback,U_=mt.unstable_shouldYield,F_=mt.unstable_requestPaint,we=mt.unstable_now,z_=mt.unstable_getCurrentPriorityLevel,td=mt.unstable_ImmediatePriority,Tm=mt.unstable_UserBlockingPriority,oo=mt.unstable_NormalPriority,B_=mt.unstable_LowPriority,Pm=mt.unstable_IdlePriority,sl=null,Qt=null;function V_(t){if(Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(sl,t,void 0,(t.current.flags&128)===128)}catch{}}var zt=Math.clz32?Math.clz32:K_,H_=Math.log,Z_=Math.LN2;function K_(t){return t>>>=0,t===0?32:31-(H_(t)/Z_|0)|0}var _a=64,wa=4194304;function us(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function lo(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,a=r&268435455;if(a!==0){var o=a&~i;o!==0?n=us(o):(s&=a,s!==0&&(n=us(s)))}else a=r&~i,a!==0?n=us(a):s!==0&&(n=us(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-zt(e),i=1<<r,n|=t[r],e&=~i;return n}function q_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function W_(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-zt(s),o=1<<a,l=i[a];l===-1?(!(o&r)||o&n)&&(i[a]=q_(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}}function Qu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Om(){var t=_a;return _a<<=1,!(_a&4194240)&&(_a=64),t}function Ql(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function aa(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zt(e),t[e]=r}function J_(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-zt(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function rd(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-zt(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var le=0;function Am(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Cm,nd,Im,jm,Rm,Xu=!1,ba=[],Rr=null,Nr=null,Lr=null,Cs=new Map,Is=new Map,Or=[],G_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fh(t,e){switch(t){case"focusin":case"focusout":Rr=null;break;case"dragenter":case"dragleave":Nr=null;break;case"mouseover":case"mouseout":Lr=null;break;case"pointerover":case"pointerout":Cs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Is.delete(e.pointerId)}}function Di(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=la(e),e!==null&&nd(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Y_(t,e,r,n,i){switch(e){case"focusin":return Rr=Di(Rr,t,e,r,n,i),!0;case"dragenter":return Nr=Di(Nr,t,e,r,n,i),!0;case"mouseover":return Lr=Di(Lr,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return Cs.set(s,Di(Cs.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Is.set(s,Di(Is.get(s)||null,t,e,r,n,i)),!0}return!1}function Nm(t){var e=cn(t.target);if(e!==null){var r=Pn(e);if(r!==null){if(e=r.tag,e===13){if(e=km(r),e!==null){t.blockedOn=e,Rm(t.priority,function(){Im(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ha(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=ec(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Wu=n,r.target.dispatchEvent(n),Wu=null}else return e=la(r),e!==null&&nd(e),t.blockedOn=r,!1;e.shift()}return!0}function zh(t,e,r){Ha(t)&&r.delete(e)}function Q_(){Xu=!1,Rr!==null&&Ha(Rr)&&(Rr=null),Nr!==null&&Ha(Nr)&&(Nr=null),Lr!==null&&Ha(Lr)&&(Lr=null),Cs.forEach(zh),Is.forEach(zh)}function Mi(t,e){t.blockedOn===e&&(t.blockedOn=null,Xu||(Xu=!0,mt.unstable_scheduleCallback(mt.unstable_NormalPriority,Q_)))}function js(t){function e(i){return Mi(i,t)}if(0<ba.length){Mi(ba[0],t);for(var r=1;r<ba.length;r++){var n=ba[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Rr!==null&&Mi(Rr,t),Nr!==null&&Mi(Nr,t),Lr!==null&&Mi(Lr,t),Cs.forEach(e),Is.forEach(e),r=0;r<Or.length;r++)n=Or[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Or.length&&(r=Or[0],r.blockedOn===null);)Nm(r),r.blockedOn===null&&Or.shift()}var ni=_r.ReactCurrentBatchConfig,uo=!0;function X_(t,e,r,n){var i=le,s=ni.transition;ni.transition=null;try{le=1,id(t,e,r,n)}finally{le=i,ni.transition=s}}function ew(t,e,r,n){var i=le,s=ni.transition;ni.transition=null;try{le=4,id(t,e,r,n)}finally{le=i,ni.transition=s}}function id(t,e,r,n){if(uo){var i=ec(t,e,r,n);if(i===null)lu(t,e,n,co,r),Fh(t,n);else if(Y_(i,t,e,r,n))n.stopPropagation();else if(Fh(t,n),e&4&&-1<G_.indexOf(t)){for(;i!==null;){var s=la(i);if(s!==null&&Cm(s),s=ec(t,e,r,n),s===null&&lu(t,e,n,co,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else lu(t,e,n,null,r)}}var co=null;function ec(t,e,r,n){if(co=null,t=ed(n),t=cn(t),t!==null)if(e=Pn(t),e===null)t=null;else if(r=e.tag,r===13){if(t=km(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return co=t,null}function Lm(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(z_()){case td:return 1;case Tm:return 4;case oo:case B_:return 16;case Pm:return 536870912;default:return 16}default:return 16}}var Ir=null,sd=null,Za=null;function $m(){if(Za)return Za;var t,e=sd,r=e.length,n,i="value"in Ir?Ir.value:Ir.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===i[s-n];n++);return Za=i.slice(t,1<n?1-n:void 0)}function Ka(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ka(){return!0}function Bh(){return!1}function vt(t){function e(r,n,i,s,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ka:Bh,this.isPropagationStopped=Bh,this}return ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ka)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ka)},persist:function(){},isPersistent:ka}),e}var Ai={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ad=vt(Ai),oa=ye({},Ai,{view:0,detail:0}),tw=vt(oa),Xl,eu,Ui,al=ye({},oa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:od,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ui&&(Ui&&t.type==="mousemove"?(Xl=t.screenX-Ui.screenX,eu=t.screenY-Ui.screenY):eu=Xl=0,Ui=t),Xl)},movementY:function(t){return"movementY"in t?t.movementY:eu}}),Vh=vt(al),rw=ye({},al,{dataTransfer:0}),nw=vt(rw),iw=ye({},oa,{relatedTarget:0}),tu=vt(iw),sw=ye({},Ai,{animationName:0,elapsedTime:0,pseudoElement:0}),aw=vt(sw),ow=ye({},Ai,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),lw=vt(ow),uw=ye({},Ai,{data:0}),Hh=vt(uw),cw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hw[t])?!!e[t]:!1}function od(){return fw}var pw=ye({},oa,{key:function(t){if(t.key){var e=cw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ka(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?dw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:od,charCode:function(t){return t.type==="keypress"?Ka(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ka(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),mw=vt(pw),gw=ye({},al,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zh=vt(gw),yw=ye({},oa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:od}),vw=vt(yw),_w=ye({},Ai,{propertyName:0,elapsedTime:0,pseudoElement:0}),ww=vt(_w),bw=ye({},al,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),kw=vt(bw),Ew=[9,13,27,32],ld=hr&&"CompositionEvent"in window,ms=null;hr&&"documentMode"in document&&(ms=document.documentMode);var Sw=hr&&"TextEvent"in window&&!ms,Dm=hr&&(!ld||ms&&8<ms&&11>=ms),Kh=String.fromCharCode(32),qh=!1;function Mm(t,e){switch(t){case"keyup":return Ew.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Um(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var zn=!1;function xw(t,e){switch(t){case"compositionend":return Um(e);case"keypress":return e.which!==32?null:(qh=!0,Kh);case"textInput":return t=e.data,t===Kh&&qh?null:t;default:return null}}function Tw(t,e){if(zn)return t==="compositionend"||!ld&&Mm(t,e)?(t=$m(),Za=sd=Ir=null,zn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Dm&&e.locale!=="ko"?null:e.data;default:return null}}var Pw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Pw[t.type]:e==="textarea"}function Fm(t,e,r,n){ym(n),e=ho(e,"onChange"),0<e.length&&(r=new ad("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var gs=null,Rs=null;function Ow(t){Ym(t,0)}function ol(t){var e=Hn(t);if(cm(e))return t}function Aw(t,e){if(t==="change")return e}var zm=!1;if(hr){var ru;if(hr){var nu="oninput"in document;if(!nu){var Jh=document.createElement("div");Jh.setAttribute("oninput","return;"),nu=typeof Jh.oninput=="function"}ru=nu}else ru=!1;zm=ru&&(!document.documentMode||9<document.documentMode)}function Gh(){gs&&(gs.detachEvent("onpropertychange",Bm),Rs=gs=null)}function Bm(t){if(t.propertyName==="value"&&ol(Rs)){var e=[];Fm(e,Rs,t,ed(t)),bm(Ow,e)}}function Cw(t,e,r){t==="focusin"?(Gh(),gs=e,Rs=r,gs.attachEvent("onpropertychange",Bm)):t==="focusout"&&Gh()}function Iw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ol(Rs)}function jw(t,e){if(t==="click")return ol(e)}function Rw(t,e){if(t==="input"||t==="change")return ol(e)}function Nw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Vt=typeof Object.is=="function"?Object.is:Nw;function Ns(t,e){if(Vt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!$u.call(e,i)||!Vt(t[i],e[i]))return!1}return!0}function Yh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Qh(t,e){var r=Yh(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Yh(r)}}function Vm(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Vm(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Hm(){for(var t=window,e=io();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=io(t.document)}return e}function ud(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Lw(t){var e=Hm(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Vm(r.ownerDocument.documentElement,r)){if(n!==null&&ud(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=Qh(r,s);var a=Qh(r,n);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var $w=hr&&"documentMode"in document&&11>=document.documentMode,Bn=null,tc=null,ys=null,rc=!1;function Xh(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;rc||Bn==null||Bn!==io(n)||(n=Bn,"selectionStart"in n&&ud(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ys&&Ns(ys,n)||(ys=n,n=ho(tc,"onSelect"),0<n.length&&(e=new ad("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Bn)))}function Ea(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Vn={animationend:Ea("Animation","AnimationEnd"),animationiteration:Ea("Animation","AnimationIteration"),animationstart:Ea("Animation","AnimationStart"),transitionend:Ea("Transition","TransitionEnd")},iu={},Zm={};hr&&(Zm=document.createElement("div").style,"AnimationEvent"in window||(delete Vn.animationend.animation,delete Vn.animationiteration.animation,delete Vn.animationstart.animation),"TransitionEvent"in window||delete Vn.transitionend.transition);function ll(t){if(iu[t])return iu[t];if(!Vn[t])return t;var e=Vn[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Zm)return iu[t]=e[r];return t}var Km=ll("animationend"),qm=ll("animationiteration"),Wm=ll("animationstart"),Jm=ll("transitionend"),Gm=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jr(t,e){Gm.set(t,e),Tn(e,[t])}for(var su=0;su<ef.length;su++){var au=ef[su],Dw=au.toLowerCase(),Mw=au[0].toUpperCase()+au.slice(1);Jr(Dw,"on"+Mw)}Jr(Km,"onAnimationEnd");Jr(qm,"onAnimationIteration");Jr(Wm,"onAnimationStart");Jr("dblclick","onDoubleClick");Jr("focusin","onFocus");Jr("focusout","onBlur");Jr(Jm,"onTransitionEnd");oi("onMouseEnter",["mouseout","mouseover"]);oi("onMouseLeave",["mouseout","mouseover"]);oi("onPointerEnter",["pointerout","pointerover"]);oi("onPointerLeave",["pointerout","pointerover"]);Tn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Tn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Tn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Tn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Tn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Tn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Uw=new Set("cancel close invalid load scroll toggle".split(" ").concat(cs));function tf(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,D_(n,e,void 0,t),t.currentTarget=null}function Ym(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;tf(i,o,u),s=l}else for(a=0;a<n.length;a++){if(o=n[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;tf(i,o,u),s=l}}}if(ao)throw t=Yu,ao=!1,Yu=null,t}function de(t,e){var r=e[oc];r===void 0&&(r=e[oc]=new Set);var n=t+"__bubble";r.has(n)||(Qm(e,t,2,!1),r.add(n))}function ou(t,e,r){var n=0;e&&(n|=4),Qm(r,t,n,e)}var Sa="_reactListening"+Math.random().toString(36).slice(2);function Ls(t){if(!t[Sa]){t[Sa]=!0,sm.forEach(function(r){r!=="selectionchange"&&(Uw.has(r)||ou(r,!1,t),ou(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Sa]||(e[Sa]=!0,ou("selectionchange",!1,e))}}function Qm(t,e,r,n){switch(Lm(e)){case 1:var i=X_;break;case 4:i=ew;break;default:i=id}r=i.bind(null,e,r,t),i=void 0,!Gu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function lu(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=cn(o),a===null)return;if(l=a.tag,l===5||l===6){n=s=a;continue e}o=o.parentNode}}n=n.return}bm(function(){var u=s,c=ed(r),d=[];e:{var h=Gm.get(t);if(h!==void 0){var w=ad,v=t;switch(t){case"keypress":if(Ka(r)===0)break e;case"keydown":case"keyup":w=mw;break;case"focusin":v="focus",w=tu;break;case"focusout":v="blur",w=tu;break;case"beforeblur":case"afterblur":w=tu;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Vh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=nw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=vw;break;case Km:case qm:case Wm:w=aw;break;case Jm:w=ww;break;case"scroll":w=tw;break;case"wheel":w=kw;break;case"copy":case"cut":case"paste":w=lw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Zh}var T=(e&4)!==0,b=!T&&t==="scroll",y=T?h!==null?h+"Capture":null:h;T=[];for(var p=u,_;p!==null;){_=p;var x=_.stateNode;if(_.tag===5&&x!==null&&(_=x,y!==null&&(x=As(p,y),x!=null&&T.push($s(p,x,_)))),b)break;p=p.return}0<T.length&&(h=new w(h,v,null,r,c),d.push({event:h,listeners:T}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",h&&r!==Wu&&(v=r.relatedTarget||r.fromElement)&&(cn(v)||v[fr]))break e;if((w||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,w?(v=r.relatedTarget||r.toElement,w=u,v=v?cn(v):null,v!==null&&(b=Pn(v),v!==b||v.tag!==5&&v.tag!==6)&&(v=null)):(w=null,v=u),w!==v)){if(T=Vh,x="onMouseLeave",y="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(T=Zh,x="onPointerLeave",y="onPointerEnter",p="pointer"),b=w==null?h:Hn(w),_=v==null?h:Hn(v),h=new T(x,p+"leave",w,r,c),h.target=b,h.relatedTarget=_,x=null,cn(c)===u&&(T=new T(y,p+"enter",v,r,c),T.target=_,T.relatedTarget=b,x=T),b=x,w&&v)t:{for(T=w,y=v,p=0,_=T;_;_=An(_))p++;for(_=0,x=y;x;x=An(x))_++;for(;0<p-_;)T=An(T),p--;for(;0<_-p;)y=An(y),_--;for(;p--;){if(T===y||y!==null&&T===y.alternate)break t;T=An(T),y=An(y)}T=null}else T=null;w!==null&&rf(d,h,w,T,!1),v!==null&&b!==null&&rf(d,b,v,T,!0)}}e:{if(h=u?Hn(u):window,w=h.nodeName&&h.nodeName.toLowerCase(),w==="select"||w==="input"&&h.type==="file")var I=Aw;else if(Wh(h))if(zm)I=Rw;else{I=Iw;var S=Cw}else(w=h.nodeName)&&w.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(I=jw);if(I&&(I=I(t,u))){Fm(d,I,r,c);break e}S&&S(t,h,u),t==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&Vu(h,"number",h.value)}switch(S=u?Hn(u):window,t){case"focusin":(Wh(S)||S.contentEditable==="true")&&(Bn=S,tc=u,ys=null);break;case"focusout":ys=tc=Bn=null;break;case"mousedown":rc=!0;break;case"contextmenu":case"mouseup":case"dragend":rc=!1,Xh(d,r,c);break;case"selectionchange":if($w)break;case"keydown":case"keyup":Xh(d,r,c)}var P;if(ld)e:{switch(t){case"compositionstart":var m="onCompositionStart";break e;case"compositionend":m="onCompositionEnd";break e;case"compositionupdate":m="onCompositionUpdate";break e}m=void 0}else zn?Mm(t,r)&&(m="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(m="onCompositionStart");m&&(Dm&&r.locale!=="ko"&&(zn||m!=="onCompositionStart"?m==="onCompositionEnd"&&zn&&(P=$m()):(Ir=c,sd="value"in Ir?Ir.value:Ir.textContent,zn=!0)),S=ho(u,m),0<S.length&&(m=new Hh(m,t,null,r,c),d.push({event:m,listeners:S}),P?m.data=P:(P=Um(r),P!==null&&(m.data=P)))),(P=Sw?xw(t,r):Tw(t,r))&&(u=ho(u,"onBeforeInput"),0<u.length&&(c=new Hh("onBeforeInput","beforeinput",null,r,c),d.push({event:c,listeners:u}),c.data=P))}Ym(d,e)})}function $s(t,e,r){return{instance:t,listener:e,currentTarget:r}}function ho(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=As(t,r),s!=null&&n.unshift($s(t,s,i)),s=As(t,e),s!=null&&n.push($s(t,s,i))),t=t.return}return n}function An(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function rf(t,e,r,n,i){for(var s=e._reactName,a=[];r!==null&&r!==n;){var o=r,l=o.alternate,u=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&u!==null&&(o=u,i?(l=As(r,s),l!=null&&a.unshift($s(r,l,o))):i||(l=As(r,s),l!=null&&a.push($s(r,l,o)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var Fw=/\r\n?/g,zw=/\u0000|\uFFFD/g;function nf(t){return(typeof t=="string"?t:""+t).replace(Fw,`
`).replace(zw,"")}function xa(t,e,r){if(e=nf(e),nf(t)!==e&&r)throw Error(R(425))}function fo(){}var nc=null,ic=null;function sc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ac=typeof setTimeout=="function"?setTimeout:void 0,Bw=typeof clearTimeout=="function"?clearTimeout:void 0,sf=typeof Promise=="function"?Promise:void 0,Vw=typeof queueMicrotask=="function"?queueMicrotask:typeof sf<"u"?function(t){return sf.resolve(null).then(t).catch(Hw)}:ac;function Hw(t){setTimeout(function(){throw t})}function uu(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),js(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);js(e)}function $r(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function af(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Ci=Math.random().toString(36).slice(2),Jt="__reactFiber$"+Ci,Ds="__reactProps$"+Ci,fr="__reactContainer$"+Ci,oc="__reactEvents$"+Ci,Zw="__reactListeners$"+Ci,Kw="__reactHandles$"+Ci;function cn(t){var e=t[Jt];if(e)return e;for(var r=t.parentNode;r;){if(e=r[fr]||r[Jt]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=af(t);t!==null;){if(r=t[Jt])return r;t=af(t)}return e}t=r,r=t.parentNode}return null}function la(t){return t=t[Jt]||t[fr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Hn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(R(33))}function ul(t){return t[Ds]||null}var lc=[],Zn=-1;function Gr(t){return{current:t}}function he(t){0>Zn||(t.current=lc[Zn],lc[Zn]=null,Zn--)}function ce(t,e){Zn++,lc[Zn]=t.current,t.current=e}var Hr={},qe=Gr(Hr),ot=Gr(!1),vn=Hr;function li(t,e){var r=t.type.contextTypes;if(!r)return Hr;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function lt(t){return t=t.childContextTypes,t!=null}function po(){he(ot),he(qe)}function of(t,e,r){if(qe.current!==Hr)throw Error(R(168));ce(qe,e),ce(ot,r)}function Xm(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(R(108,C_(t)||"Unknown",i));return ye({},r,n)}function mo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Hr,vn=qe.current,ce(qe,t),ce(ot,ot.current),!0}function lf(t,e,r){var n=t.stateNode;if(!n)throw Error(R(169));r?(t=Xm(t,e,vn),n.__reactInternalMemoizedMergedChildContext=t,he(ot),he(qe),ce(qe,t)):he(ot),ce(ot,r)}var sr=null,cl=!1,cu=!1;function eg(t){sr===null?sr=[t]:sr.push(t)}function qw(t){cl=!0,eg(t)}function Yr(){if(!cu&&sr!==null){cu=!0;var t=0,e=le;try{var r=sr;for(le=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}sr=null,cl=!1}catch(i){throw sr!==null&&(sr=sr.slice(t+1)),xm(td,Yr),i}finally{le=e,cu=!1}}return null}var Kn=[],qn=0,go=null,yo=0,Et=[],St=0,_n=null,lr=1,ur="";function rn(t,e){Kn[qn++]=yo,Kn[qn++]=go,go=t,yo=e}function tg(t,e,r){Et[St++]=lr,Et[St++]=ur,Et[St++]=_n,_n=t;var n=lr;t=ur;var i=32-zt(n)-1;n&=~(1<<i),r+=1;var s=32-zt(e)+i;if(30<s){var a=i-i%5;s=(n&(1<<a)-1).toString(32),n>>=a,i-=a,lr=1<<32-zt(e)+i|r<<i|n,ur=s+t}else lr=1<<s|r<<i|n,ur=t}function cd(t){t.return!==null&&(rn(t,1),tg(t,1,0))}function dd(t){for(;t===go;)go=Kn[--qn],Kn[qn]=null,yo=Kn[--qn],Kn[qn]=null;for(;t===_n;)_n=Et[--St],Et[St]=null,ur=Et[--St],Et[St]=null,lr=Et[--St],Et[St]=null}var ft=null,ht=null,pe=!1,Ft=null;function rg(t,e){var r=xt(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function uf(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ft=t,ht=$r(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ft=t,ht=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=_n!==null?{id:lr,overflow:ur}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=xt(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,ft=t,ht=null,!0):!1;default:return!1}}function uc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function cc(t){if(pe){var e=ht;if(e){var r=e;if(!uf(t,e)){if(uc(t))throw Error(R(418));e=$r(r.nextSibling);var n=ft;e&&uf(t,e)?rg(n,r):(t.flags=t.flags&-4097|2,pe=!1,ft=t)}}else{if(uc(t))throw Error(R(418));t.flags=t.flags&-4097|2,pe=!1,ft=t}}}function cf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ft=t}function Ta(t){if(t!==ft)return!1;if(!pe)return cf(t),pe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!sc(t.type,t.memoizedProps)),e&&(e=ht)){if(uc(t))throw ng(),Error(R(418));for(;e;)rg(t,e),e=$r(e.nextSibling)}if(cf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(R(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){ht=$r(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}ht=null}}else ht=ft?$r(t.stateNode.nextSibling):null;return!0}function ng(){for(var t=ht;t;)t=$r(t.nextSibling)}function ui(){ht=ft=null,pe=!1}function hd(t){Ft===null?Ft=[t]:Ft.push(t)}var Ww=_r.ReactCurrentBatchConfig;function Dt(t,e){if(t&&t.defaultProps){e=ye({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}var vo=Gr(null),_o=null,Wn=null,fd=null;function pd(){fd=Wn=_o=null}function md(t){var e=vo.current;he(vo),t._currentValue=e}function dc(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function ii(t,e){_o=t,fd=Wn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(at=!0),t.firstContext=null)}function Ct(t){var e=t._currentValue;if(fd!==t)if(t={context:t,memoizedValue:e,next:null},Wn===null){if(_o===null)throw Error(R(308));Wn=t,_o.dependencies={lanes:0,firstContext:t}}else Wn=Wn.next=t;return e}var dn=null;function gd(t){dn===null?dn=[t]:dn.push(t)}function ig(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,gd(e)):(r.next=i.next,i.next=r),e.interleaved=r,pr(t,n)}function pr(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Tr=!1;function yd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function cr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Dr(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,ie&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,pr(t,r)}return i=n.interleaved,i===null?(e.next=e,gd(n)):(e.next=i.next,i.next=e),n.interleaved=e,pr(t,r)}function qa(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,rd(t,r)}}function df(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=a:s=s.next=a,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function wo(t,e,r,n){var i=t.updateQueue;Tr=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?s=u:a.next=u,a=l;var c=t.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==a&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;a=0,c=u=l=null,o=s;do{var h=o.lane,w=o.eventTime;if((n&h)===h){c!==null&&(c=c.next={eventTime:w,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=t,T=o;switch(h=e,w=r,T.tag){case 1:if(v=T.payload,typeof v=="function"){d=v.call(w,d,h);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=T.payload,h=typeof v=="function"?v.call(w,d,h):v,h==null)break e;d=ye({},d,h);break e;case 2:Tr=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[o]:h.push(o))}else w={eventTime:w,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=w,l=d):c=c.next=w,a|=h;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;h=o,o=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);bn|=a,t.lanes=a,t.memoizedState=d}}function hf(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(R(191,i));i.call(n)}}}var ag=new im.Component().refs;function hc(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:ye({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var dl={isMounted:function(t){return(t=t._reactInternals)?Pn(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Qe(),i=Ur(t),s=cr(n,i);s.payload=e,r!=null&&(s.callback=r),e=Dr(t,s,i),e!==null&&(Bt(e,t,i,n),qa(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Qe(),i=Ur(t),s=cr(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=Dr(t,s,i),e!==null&&(Bt(e,t,i,n),qa(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Qe(),n=Ur(t),i=cr(r,n);i.tag=2,e!=null&&(i.callback=e),e=Dr(t,i,n),e!==null&&(Bt(e,t,n,r),qa(e,t,n))}};function ff(t,e,r,n,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,a):e.prototype&&e.prototype.isPureReactComponent?!Ns(r,n)||!Ns(i,s):!0}function og(t,e,r){var n=!1,i=Hr,s=e.contextType;return typeof s=="object"&&s!==null?s=Ct(s):(i=lt(e)?vn:qe.current,n=e.contextTypes,s=(n=n!=null)?li(t,i):Hr),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=dl,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function pf(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&dl.enqueueReplaceState(e,e.state,null)}function fc(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs=ag,yd(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ct(s):(s=lt(e)?vn:qe.current,i.context=li(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(hc(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&dl.enqueueReplaceState(i,i.state,null),wo(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Fi(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(R(309));var n=r.stateNode}if(!n)throw Error(R(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;o===ag&&(o=i.refs={}),a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(R(284));if(!r._owner)throw Error(R(290,t))}return t}function Pa(t,e){throw t=Object.prototype.toString.call(e),Error(R(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function mf(t){var e=t._init;return e(t._payload)}function lg(t){function e(y,p){if(t){var _=y.deletions;_===null?(y.deletions=[p],y.flags|=16):_.push(p)}}function r(y,p){if(!t)return null;for(;p!==null;)e(y,p),p=p.sibling;return null}function n(y,p){for(y=new Map;p!==null;)p.key!==null?y.set(p.key,p):y.set(p.index,p),p=p.sibling;return y}function i(y,p){return y=Fr(y,p),y.index=0,y.sibling=null,y}function s(y,p,_){return y.index=_,t?(_=y.alternate,_!==null?(_=_.index,_<p?(y.flags|=2,p):_):(y.flags|=2,p)):(y.flags|=1048576,p)}function a(y){return t&&y.alternate===null&&(y.flags|=2),y}function o(y,p,_,x){return p===null||p.tag!==6?(p=yu(_,y.mode,x),p.return=y,p):(p=i(p,_),p.return=y,p)}function l(y,p,_,x){var I=_.type;return I===Fn?c(y,p,_.props.children,x,_.key):p!==null&&(p.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===xr&&mf(I)===p.type)?(x=i(p,_.props),x.ref=Fi(y,p,_),x.return=y,x):(x=Xa(_.type,_.key,_.props,null,y.mode,x),x.ref=Fi(y,p,_),x.return=y,x)}function u(y,p,_,x){return p===null||p.tag!==4||p.stateNode.containerInfo!==_.containerInfo||p.stateNode.implementation!==_.implementation?(p=vu(_,y.mode,x),p.return=y,p):(p=i(p,_.children||[]),p.return=y,p)}function c(y,p,_,x,I){return p===null||p.tag!==7?(p=mn(_,y.mode,x,I),p.return=y,p):(p=i(p,_),p.return=y,p)}function d(y,p,_){if(typeof p=="string"&&p!==""||typeof p=="number")return p=yu(""+p,y.mode,_),p.return=y,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case ga:return _=Xa(p.type,p.key,p.props,null,y.mode,_),_.ref=Fi(y,null,p),_.return=y,_;case Un:return p=vu(p,y.mode,_),p.return=y,p;case xr:var x=p._init;return d(y,x(p._payload),_)}if(ls(p)||Li(p))return p=mn(p,y.mode,_,null),p.return=y,p;Pa(y,p)}return null}function h(y,p,_,x){var I=p!==null?p.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return I!==null?null:o(y,p,""+_,x);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ga:return _.key===I?l(y,p,_,x):null;case Un:return _.key===I?u(y,p,_,x):null;case xr:return I=_._init,h(y,p,I(_._payload),x)}if(ls(_)||Li(_))return I!==null?null:c(y,p,_,x,null);Pa(y,_)}return null}function w(y,p,_,x,I){if(typeof x=="string"&&x!==""||typeof x=="number")return y=y.get(_)||null,o(p,y,""+x,I);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ga:return y=y.get(x.key===null?_:x.key)||null,l(p,y,x,I);case Un:return y=y.get(x.key===null?_:x.key)||null,u(p,y,x,I);case xr:var S=x._init;return w(y,p,_,S(x._payload),I)}if(ls(x)||Li(x))return y=y.get(_)||null,c(p,y,x,I,null);Pa(p,x)}return null}function v(y,p,_,x){for(var I=null,S=null,P=p,m=p=0,E=null;P!==null&&m<_.length;m++){P.index>m?(E=P,P=null):E=P.sibling;var g=h(y,P,_[m],x);if(g===null){P===null&&(P=E);break}t&&P&&g.alternate===null&&e(y,P),p=s(g,p,m),S===null?I=g:S.sibling=g,S=g,P=E}if(m===_.length)return r(y,P),pe&&rn(y,m),I;if(P===null){for(;m<_.length;m++)P=d(y,_[m],x),P!==null&&(p=s(P,p,m),S===null?I=P:S.sibling=P,S=P);return pe&&rn(y,m),I}for(P=n(y,P);m<_.length;m++)E=w(P,y,m,_[m],x),E!==null&&(t&&E.alternate!==null&&P.delete(E.key===null?m:E.key),p=s(E,p,m),S===null?I=E:S.sibling=E,S=E);return t&&P.forEach(function(A){return e(y,A)}),pe&&rn(y,m),I}function T(y,p,_,x){var I=Li(_);if(typeof I!="function")throw Error(R(150));if(_=I.call(_),_==null)throw Error(R(151));for(var S=I=null,P=p,m=p=0,E=null,g=_.next();P!==null&&!g.done;m++,g=_.next()){P.index>m?(E=P,P=null):E=P.sibling;var A=h(y,P,g.value,x);if(A===null){P===null&&(P=E);break}t&&P&&A.alternate===null&&e(y,P),p=s(A,p,m),S===null?I=A:S.sibling=A,S=A,P=E}if(g.done)return r(y,P),pe&&rn(y,m),I;if(P===null){for(;!g.done;m++,g=_.next())g=d(y,g.value,x),g!==null&&(p=s(g,p,m),S===null?I=g:S.sibling=g,S=g);return pe&&rn(y,m),I}for(P=n(y,P);!g.done;m++,g=_.next())g=w(P,y,m,g.value,x),g!==null&&(t&&g.alternate!==null&&P.delete(g.key===null?m:g.key),p=s(g,p,m),S===null?I=g:S.sibling=g,S=g);return t&&P.forEach(function(C){return e(y,C)}),pe&&rn(y,m),I}function b(y,p,_,x){if(typeof _=="object"&&_!==null&&_.type===Fn&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case ga:e:{for(var I=_.key,S=p;S!==null;){if(S.key===I){if(I=_.type,I===Fn){if(S.tag===7){r(y,S.sibling),p=i(S,_.props.children),p.return=y,y=p;break e}}else if(S.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===xr&&mf(I)===S.type){r(y,S.sibling),p=i(S,_.props),p.ref=Fi(y,S,_),p.return=y,y=p;break e}r(y,S);break}else e(y,S);S=S.sibling}_.type===Fn?(p=mn(_.props.children,y.mode,x,_.key),p.return=y,y=p):(x=Xa(_.type,_.key,_.props,null,y.mode,x),x.ref=Fi(y,p,_),x.return=y,y=x)}return a(y);case Un:e:{for(S=_.key;p!==null;){if(p.key===S)if(p.tag===4&&p.stateNode.containerInfo===_.containerInfo&&p.stateNode.implementation===_.implementation){r(y,p.sibling),p=i(p,_.children||[]),p.return=y,y=p;break e}else{r(y,p);break}else e(y,p);p=p.sibling}p=vu(_,y.mode,x),p.return=y,y=p}return a(y);case xr:return S=_._init,b(y,p,S(_._payload),x)}if(ls(_))return v(y,p,_,x);if(Li(_))return T(y,p,_,x);Pa(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,p!==null&&p.tag===6?(r(y,p.sibling),p=i(p,_),p.return=y,y=p):(r(y,p),p=yu(_,y.mode,x),p.return=y,y=p),a(y)):r(y,p)}return b}var ci=lg(!0),ug=lg(!1),ua={},Xt=Gr(ua),Ms=Gr(ua),Us=Gr(ua);function hn(t){if(t===ua)throw Error(R(174));return t}function vd(t,e){switch(ce(Us,e),ce(Ms,t),ce(Xt,ua),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Zu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Zu(e,t)}he(Xt),ce(Xt,e)}function di(){he(Xt),he(Ms),he(Us)}function cg(t){hn(Us.current);var e=hn(Xt.current),r=Zu(e,t.type);e!==r&&(ce(Ms,t),ce(Xt,r))}function _d(t){Ms.current===t&&(he(Xt),he(Ms))}var me=Gr(0);function bo(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var du=[];function wd(){for(var t=0;t<du.length;t++)du[t]._workInProgressVersionPrimary=null;du.length=0}var Wa=_r.ReactCurrentDispatcher,hu=_r.ReactCurrentBatchConfig,wn=0,ge=null,Se=null,Oe=null,ko=!1,vs=!1,Fs=0,Jw=0;function Ue(){throw Error(R(321))}function bd(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Vt(t[r],e[r]))return!1;return!0}function kd(t,e,r,n,i,s){if(wn=s,ge=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Wa.current=t===null||t.memoizedState===null?Xw:e0,t=r(n,i),vs){s=0;do{if(vs=!1,Fs=0,25<=s)throw Error(R(301));s+=1,Oe=Se=null,e.updateQueue=null,Wa.current=t0,t=r(n,i)}while(vs)}if(Wa.current=Eo,e=Se!==null&&Se.next!==null,wn=0,Oe=Se=ge=null,ko=!1,e)throw Error(R(300));return t}function Ed(){var t=Fs!==0;return Fs=0,t}function Wt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Oe===null?ge.memoizedState=Oe=t:Oe=Oe.next=t,Oe}function It(){if(Se===null){var t=ge.alternate;t=t!==null?t.memoizedState:null}else t=Se.next;var e=Oe===null?ge.memoizedState:Oe.next;if(e!==null)Oe=e,Se=t;else{if(t===null)throw Error(R(310));Se=t,t={memoizedState:Se.memoizedState,baseState:Se.baseState,baseQueue:Se.baseQueue,queue:Se.queue,next:null},Oe===null?ge.memoizedState=Oe=t:Oe=Oe.next=t}return Oe}function zs(t,e){return typeof e=="function"?e(t):e}function fu(t){var e=It(),r=e.queue;if(r===null)throw Error(R(311));r.lastRenderedReducer=t;var n=Se,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var o=a=null,l=null,u=s;do{var c=u.lane;if((wn&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=d,a=n):l=l.next=d,ge.lanes|=c,bn|=c}u=u.next}while(u!==null&&u!==s);l===null?a=n:l.next=o,Vt(n,e.memoizedState)||(at=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,ge.lanes|=s,bn|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function pu(t){var e=It(),r=e.queue;if(r===null)throw Error(R(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);Vt(s,e.memoizedState)||(at=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function dg(){}function hg(t,e){var r=ge,n=It(),i=e(),s=!Vt(n.memoizedState,i);if(s&&(n.memoizedState=i,at=!0),n=n.queue,Sd(mg.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||Oe!==null&&Oe.memoizedState.tag&1){if(r.flags|=2048,Bs(9,pg.bind(null,r,n,i,e),void 0,null),Ae===null)throw Error(R(349));wn&30||fg(r,e,i)}return i}function fg(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=ge.updateQueue,e===null?(e={lastEffect:null,stores:null},ge.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function pg(t,e,r,n){e.value=r,e.getSnapshot=n,gg(e)&&yg(t)}function mg(t,e,r){return r(function(){gg(e)&&yg(t)})}function gg(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Vt(t,r)}catch{return!0}}function yg(t){var e=pr(t,1);e!==null&&Bt(e,t,1,-1)}function gf(t){var e=Wt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zs,lastRenderedState:t},e.queue=t,t=t.dispatch=Qw.bind(null,ge,t),[e.memoizedState,t]}function Bs(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=ge.updateQueue,e===null?(e={lastEffect:null,stores:null},ge.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function vg(){return It().memoizedState}function Ja(t,e,r,n){var i=Wt();ge.flags|=t,i.memoizedState=Bs(1|e,r,void 0,n===void 0?null:n)}function hl(t,e,r,n){var i=It();n=n===void 0?null:n;var s=void 0;if(Se!==null){var a=Se.memoizedState;if(s=a.destroy,n!==null&&bd(n,a.deps)){i.memoizedState=Bs(e,r,s,n);return}}ge.flags|=t,i.memoizedState=Bs(1|e,r,s,n)}function yf(t,e){return Ja(8390656,8,t,e)}function Sd(t,e){return hl(2048,8,t,e)}function _g(t,e){return hl(4,2,t,e)}function wg(t,e){return hl(4,4,t,e)}function bg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function kg(t,e,r){return r=r!=null?r.concat([t]):null,hl(4,4,bg.bind(null,e,t),r)}function xd(){}function Eg(t,e){var r=It();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&bd(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function Sg(t,e){var r=It();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&bd(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function xg(t,e,r){return wn&21?(Vt(r,e)||(r=Om(),ge.lanes|=r,bn|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,at=!0),t.memoizedState=r)}function Gw(t,e){var r=le;le=r!==0&&4>r?r:4,t(!0);var n=hu.transition;hu.transition={};try{t(!1),e()}finally{le=r,hu.transition=n}}function Tg(){return It().memoizedState}function Yw(t,e,r){var n=Ur(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Pg(t))Og(e,r);else if(r=ig(t,e,r,n),r!==null){var i=Qe();Bt(r,t,n,i),Ag(r,e,n)}}function Qw(t,e,r){var n=Ur(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Pg(t))Og(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,r);if(i.hasEagerState=!0,i.eagerState=o,Vt(o,a)){var l=e.interleaved;l===null?(i.next=i,gd(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=ig(t,e,i,n),r!==null&&(i=Qe(),Bt(r,t,n,i),Ag(r,e,n))}}function Pg(t){var e=t.alternate;return t===ge||e!==null&&e===ge}function Og(t,e){vs=ko=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Ag(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,rd(t,r)}}var Eo={readContext:Ct,useCallback:Ue,useContext:Ue,useEffect:Ue,useImperativeHandle:Ue,useInsertionEffect:Ue,useLayoutEffect:Ue,useMemo:Ue,useReducer:Ue,useRef:Ue,useState:Ue,useDebugValue:Ue,useDeferredValue:Ue,useTransition:Ue,useMutableSource:Ue,useSyncExternalStore:Ue,useId:Ue,unstable_isNewReconciler:!1},Xw={readContext:Ct,useCallback:function(t,e){return Wt().memoizedState=[t,e===void 0?null:e],t},useContext:Ct,useEffect:yf,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Ja(4194308,4,bg.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Ja(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ja(4,2,t,e)},useMemo:function(t,e){var r=Wt();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Wt();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Yw.bind(null,ge,t),[n.memoizedState,t]},useRef:function(t){var e=Wt();return t={current:t},e.memoizedState=t},useState:gf,useDebugValue:xd,useDeferredValue:function(t){return Wt().memoizedState=t},useTransition:function(){var t=gf(!1),e=t[0];return t=Gw.bind(null,t[1]),Wt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=ge,i=Wt();if(pe){if(r===void 0)throw Error(R(407));r=r()}else{if(r=e(),Ae===null)throw Error(R(349));wn&30||fg(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,yf(mg.bind(null,n,s,t),[t]),n.flags|=2048,Bs(9,pg.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=Wt(),e=Ae.identifierPrefix;if(pe){var r=ur,n=lr;r=(n&~(1<<32-zt(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Fs++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Jw++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},e0={readContext:Ct,useCallback:Eg,useContext:Ct,useEffect:Sd,useImperativeHandle:kg,useInsertionEffect:_g,useLayoutEffect:wg,useMemo:Sg,useReducer:fu,useRef:vg,useState:function(){return fu(zs)},useDebugValue:xd,useDeferredValue:function(t){var e=It();return xg(e,Se.memoizedState,t)},useTransition:function(){var t=fu(zs)[0],e=It().memoizedState;return[t,e]},useMutableSource:dg,useSyncExternalStore:hg,useId:Tg,unstable_isNewReconciler:!1},t0={readContext:Ct,useCallback:Eg,useContext:Ct,useEffect:Sd,useImperativeHandle:kg,useInsertionEffect:_g,useLayoutEffect:wg,useMemo:Sg,useReducer:pu,useRef:vg,useState:function(){return pu(zs)},useDebugValue:xd,useDeferredValue:function(t){var e=It();return Se===null?e.memoizedState=t:xg(e,Se.memoizedState,t)},useTransition:function(){var t=pu(zs)[0],e=It().memoizedState;return[t,e]},useMutableSource:dg,useSyncExternalStore:hg,useId:Tg,unstable_isNewReconciler:!1};function hi(t,e){try{var r="",n=e;do r+=A_(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function mu(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function pc(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var r0=typeof WeakMap=="function"?WeakMap:Map;function Cg(t,e,r){r=cr(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){xo||(xo=!0,Sc=n),pc(t,e)},r}function Ig(t,e,r){r=cr(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){pc(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){pc(t,e),typeof n!="function"&&(Mr===null?Mr=new Set([this]):Mr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function vf(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new r0;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=g0.bind(null,t,e,r),e.then(t,t))}function _f(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function wf(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=cr(-1,1),e.tag=2,Dr(r,e,1))),r.lanes|=1),t)}var n0=_r.ReactCurrentOwner,at=!1;function Ye(t,e,r,n){e.child=t===null?ug(e,null,r,n):ci(e,t.child,r,n)}function bf(t,e,r,n,i){r=r.render;var s=e.ref;return ii(e,i),n=kd(t,e,r,n,s,i),r=Ed(),t!==null&&!at?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,mr(t,e,i)):(pe&&r&&cd(e),e.flags|=1,Ye(t,e,n,i),e.child)}function kf(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!Rd(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,jg(t,e,s,n,i)):(t=Xa(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(r=r.compare,r=r!==null?r:Ns,r(a,n)&&t.ref===e.ref)return mr(t,e,i)}return e.flags|=1,t=Fr(s,n),t.ref=e.ref,t.return=e,e.child=t}function jg(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(Ns(s,n)&&t.ref===e.ref)if(at=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(at=!0);else return e.lanes=t.lanes,mr(t,e,i)}return mc(t,e,r,n,i)}function Rg(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ce(Gn,dt),dt|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ce(Gn,dt),dt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,ce(Gn,dt),dt|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,ce(Gn,dt),dt|=n;return Ye(t,e,i,r),e.child}function Ng(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function mc(t,e,r,n,i){var s=lt(r)?vn:qe.current;return s=li(e,s),ii(e,i),r=kd(t,e,r,n,s,i),n=Ed(),t!==null&&!at?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,mr(t,e,i)):(pe&&n&&cd(e),e.flags|=1,Ye(t,e,r,i),e.child)}function Ef(t,e,r,n,i){if(lt(r)){var s=!0;mo(e)}else s=!1;if(ii(e,i),e.stateNode===null)Ga(t,e),og(e,r,n),fc(e,r,n,i),n=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=Ct(u):(u=lt(r)?vn:qe.current,u=li(e,u));var c=r.getDerivedStateFromProps,d=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||l!==u)&&pf(e,a,n,u),Tr=!1;var h=e.memoizedState;a.state=h,wo(e,n,a,i),l=e.memoizedState,o!==n||h!==l||ot.current||Tr?(typeof c=="function"&&(hc(e,r,c,n),l=e.memoizedState),(o=Tr||ff(e,r,o,n,h,l,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),a.props=n,a.state=l,a.context=u,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,sg(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:Dt(e.type,o),a.props=u,d=e.pendingProps,h=a.context,l=r.contextType,typeof l=="object"&&l!==null?l=Ct(l):(l=lt(r)?vn:qe.current,l=li(e,l));var w=r.getDerivedStateFromProps;(c=typeof w=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||h!==l)&&pf(e,a,n,l),Tr=!1,h=e.memoizedState,a.state=h,wo(e,n,a,i);var v=e.memoizedState;o!==d||h!==v||ot.current||Tr?(typeof w=="function"&&(hc(e,r,w,n),v=e.memoizedState),(u=Tr||ff(e,r,u,n,h,v,l)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,v,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,v,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),a.props=n,a.state=v,a.context=l,n=u):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return gc(t,e,r,n,s,i)}function gc(t,e,r,n,i,s){Ng(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return i&&lf(e,r,!1),mr(t,e,s);n=e.stateNode,n0.current=e;var o=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=ci(e,t.child,null,s),e.child=ci(e,null,o,s)):Ye(t,e,o,s),e.memoizedState=n.state,i&&lf(e,r,!0),e.child}function Lg(t){var e=t.stateNode;e.pendingContext?of(t,e.pendingContext,e.pendingContext!==e.context):e.context&&of(t,e.context,!1),vd(t,e.containerInfo)}function Sf(t,e,r,n,i){return ui(),hd(i),e.flags|=256,Ye(t,e,r,n),e.child}var yc={dehydrated:null,treeContext:null,retryLane:0};function vc(t){return{baseLanes:t,cachePool:null,transitions:null}}function $g(t,e,r){var n=e.pendingProps,i=me.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ce(me,i&1),t===null)return cc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,s?(n=e.mode,s=e.child,a={mode:"hidden",children:a},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=ml(a,n,0,null),t=mn(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=vc(r),e.memoizedState=yc,t):Td(e,a));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return i0(t,e,a,n,o,i,r);if(s){s=n.fallback,a=e.mode,i=t.child,o=i.sibling;var l={mode:"hidden",children:n.children};return!(a&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Fr(i,l),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=Fr(o,s):(s=mn(s,a,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,a=t.child.memoizedState,a=a===null?vc(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~r,e.memoizedState=yc,n}return s=t.child,t=s.sibling,n=Fr(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Td(t,e){return e=ml({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Oa(t,e,r,n){return n!==null&&hd(n),ci(e,t.child,null,r),t=Td(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function i0(t,e,r,n,i,s,a){if(r)return e.flags&256?(e.flags&=-257,n=mu(Error(R(422))),Oa(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=ml({mode:"visible",children:n.children},i,0,null),s=mn(s,i,a,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&ci(e,t.child,null,a),e.child.memoizedState=vc(a),e.memoizedState=yc,s);if(!(e.mode&1))return Oa(t,e,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,s=Error(R(419)),n=mu(s,n,void 0),Oa(t,e,a,n)}if(o=(a&t.childLanes)!==0,at||o){if(n=Ae,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,pr(t,i),Bt(n,t,i,-1))}return jd(),n=mu(Error(R(421))),Oa(t,e,a,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=y0.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ht=$r(i.nextSibling),ft=e,pe=!0,Ft=null,t!==null&&(Et[St++]=lr,Et[St++]=ur,Et[St++]=_n,lr=t.id,ur=t.overflow,_n=e),e=Td(e,n.children),e.flags|=4096,e)}function xf(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),dc(t.return,e,r)}function gu(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function Dg(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(Ye(t,e,n.children,r),n=me.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&xf(t,r,e);else if(t.tag===19)xf(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(ce(me,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&bo(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),gu(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&bo(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}gu(e,!0,r,null,s);break;case"together":gu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ga(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function mr(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),bn|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(R(153));if(e.child!==null){for(t=e.child,r=Fr(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Fr(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function s0(t,e,r){switch(e.tag){case 3:Lg(e),ui();break;case 5:cg(e);break;case 1:lt(e.type)&&mo(e);break;case 4:vd(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;ce(vo,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(ce(me,me.current&1),e.flags|=128,null):r&e.child.childLanes?$g(t,e,r):(ce(me,me.current&1),t=mr(t,e,r),t!==null?t.sibling:null);ce(me,me.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return Dg(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ce(me,me.current),n)break;return null;case 22:case 23:return e.lanes=0,Rg(t,e,r)}return mr(t,e,r)}var Mg,_c,Ug,Fg;Mg=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};_c=function(){};Ug=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,hn(Xt.current);var s=null;switch(r){case"input":i=zu(t,i),n=zu(t,n),s=[];break;case"select":i=ye({},i,{value:void 0}),n=ye({},n,{value:void 0}),s=[];break;case"textarea":i=Hu(t,i),n=Hu(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=fo)}Ku(r,n);var a;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ps.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var l=n[u];if(o=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(r||(r={}),r[a]=l[a])}else r||(s||(s=[]),s.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ps.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&de("scroll",t),s||o===l||(s=[])):(s=s||[]).push(u,l))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Fg=function(t,e,r,n){r!==n&&(e.flags|=4)};function zi(t,e){if(!pe)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Fe(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function a0(t,e,r){var n=e.pendingProps;switch(dd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fe(e),null;case 1:return lt(e.type)&&po(),Fe(e),null;case 3:return n=e.stateNode,di(),he(ot),he(qe),wd(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Ta(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ft!==null&&(Pc(Ft),Ft=null))),_c(t,e),Fe(e),null;case 5:_d(e);var i=hn(Us.current);if(r=e.type,t!==null&&e.stateNode!=null)Ug(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(R(166));return Fe(e),null}if(t=hn(Xt.current),Ta(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[Jt]=e,n[Ds]=s,t=(e.mode&1)!==0,r){case"dialog":de("cancel",n),de("close",n);break;case"iframe":case"object":case"embed":de("load",n);break;case"video":case"audio":for(i=0;i<cs.length;i++)de(cs[i],n);break;case"source":de("error",n);break;case"img":case"image":case"link":de("error",n),de("load",n);break;case"details":de("toggle",n);break;case"input":Rh(n,s),de("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},de("invalid",n);break;case"textarea":Lh(n,s),de("invalid",n)}Ku(r,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?n.textContent!==o&&(s.suppressHydrationWarning!==!0&&xa(n.textContent,o,t),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&xa(n.textContent,o,t),i=["children",""+o]):Ps.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&de("scroll",n)}switch(r){case"input":ya(n),Nh(n,s,!0);break;case"textarea":ya(n),$h(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=fo)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=fm(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[Jt]=e,t[Ds]=n,Mg(t,e,!1,!1),e.stateNode=t;e:{switch(a=qu(r,n),r){case"dialog":de("cancel",t),de("close",t),i=n;break;case"iframe":case"object":case"embed":de("load",t),i=n;break;case"video":case"audio":for(i=0;i<cs.length;i++)de(cs[i],t);i=n;break;case"source":de("error",t),i=n;break;case"img":case"image":case"link":de("error",t),de("load",t),i=n;break;case"details":de("toggle",t),i=n;break;case"input":Rh(t,n),i=zu(t,n),de("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=ye({},n,{value:void 0}),de("invalid",t);break;case"textarea":Lh(t,n),i=Hu(t,n),de("invalid",t);break;default:i=n}Ku(r,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?gm(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&pm(t,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Os(t,l):typeof l=="number"&&Os(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ps.hasOwnProperty(s)?l!=null&&s==="onScroll"&&de("scroll",t):l!=null&&Gc(t,s,l,a))}switch(r){case"input":ya(t),Nh(t,n,!1);break;case"textarea":ya(t),$h(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Vr(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?ei(t,!!n.multiple,s,!1):n.defaultValue!=null&&ei(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=fo)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Fe(e),null;case 6:if(t&&e.stateNode!=null)Fg(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(R(166));if(r=hn(Us.current),hn(Xt.current),Ta(e)){if(n=e.stateNode,r=e.memoizedProps,n[Jt]=e,(s=n.nodeValue!==r)&&(t=ft,t!==null))switch(t.tag){case 3:xa(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&xa(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Jt]=e,e.stateNode=n}return Fe(e),null;case 13:if(he(me),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(pe&&ht!==null&&e.mode&1&&!(e.flags&128))ng(),ui(),e.flags|=98560,s=!1;else if(s=Ta(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(R(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(R(317));s[Jt]=e}else ui(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Fe(e),s=!1}else Ft!==null&&(Pc(Ft),Ft=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||me.current&1?xe===0&&(xe=3):jd())),e.updateQueue!==null&&(e.flags|=4),Fe(e),null);case 4:return di(),_c(t,e),t===null&&Ls(e.stateNode.containerInfo),Fe(e),null;case 10:return md(e.type._context),Fe(e),null;case 17:return lt(e.type)&&po(),Fe(e),null;case 19:if(he(me),s=e.memoizedState,s===null)return Fe(e),null;if(n=(e.flags&128)!==0,a=s.rendering,a===null)if(n)zi(s,!1);else{if(xe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=bo(t),a!==null){for(e.flags|=128,zi(s,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return ce(me,me.current&1|2),e.child}t=t.sibling}s.tail!==null&&we()>fi&&(e.flags|=128,n=!0,zi(s,!1),e.lanes=4194304)}else{if(!n)if(t=bo(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),zi(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!pe)return Fe(e),null}else 2*we()-s.renderingStartTime>fi&&r!==1073741824&&(e.flags|=128,n=!0,zi(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(r=s.last,r!==null?r.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=we(),e.sibling=null,r=me.current,ce(me,n?r&1|2:r&1),e):(Fe(e),null);case 22:case 23:return Id(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?dt&1073741824&&(Fe(e),e.subtreeFlags&6&&(e.flags|=8192)):Fe(e),null;case 24:return null;case 25:return null}throw Error(R(156,e.tag))}function o0(t,e){switch(dd(e),e.tag){case 1:return lt(e.type)&&po(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return di(),he(ot),he(qe),wd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return _d(e),null;case 13:if(he(me),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(R(340));ui()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return he(me),null;case 4:return di(),null;case 10:return md(e.type._context),null;case 22:case 23:return Id(),null;case 24:return null;default:return null}}var Aa=!1,Ve=!1,l0=typeof WeakSet=="function"?WeakSet:Set,Z=null;function Jn(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){_e(t,e,n)}else r.current=null}function wc(t,e,r){try{r()}catch(n){_e(t,e,n)}}var Tf=!1;function u0(t,e){if(nc=uo,t=Hm(),ud(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var a=0,o=-1,l=-1,u=0,c=0,d=t,h=null;t:for(;;){for(var w;d!==r||i!==0&&d.nodeType!==3||(o=a+i),d!==s||n!==0&&d.nodeType!==3||(l=a+n),d.nodeType===3&&(a+=d.nodeValue.length),(w=d.firstChild)!==null;)h=d,d=w;for(;;){if(d===t)break t;if(h===r&&++u===i&&(o=a),h===s&&++c===n&&(l=a),(w=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=w}r=o===-1||l===-1?null:{start:o,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(ic={focusedElem:t,selectionRange:r},uo=!1,Z=e;Z!==null;)if(e=Z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Z=t;else for(;Z!==null;){e=Z;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var T=v.memoizedProps,b=v.memoizedState,y=e.stateNode,p=y.getSnapshotBeforeUpdate(e.elementType===e.type?T:Dt(e.type,T),b);y.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(x){_e(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,Z=t;break}Z=e.return}return v=Tf,Tf=!1,v}function _s(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&wc(e,r,s)}i=i.next}while(i!==n)}}function fl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function bc(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function zg(t){var e=t.alternate;e!==null&&(t.alternate=null,zg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Jt],delete e[Ds],delete e[oc],delete e[Zw],delete e[Kw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Bg(t){return t.tag===5||t.tag===3||t.tag===4}function Pf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Bg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function kc(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=fo));else if(n!==4&&(t=t.child,t!==null))for(kc(t,e,r),t=t.sibling;t!==null;)kc(t,e,r),t=t.sibling}function Ec(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Ec(t,e,r),t=t.sibling;t!==null;)Ec(t,e,r),t=t.sibling}var Ie=null,Mt=!1;function br(t,e,r){for(r=r.child;r!==null;)Vg(t,e,r),r=r.sibling}function Vg(t,e,r){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(sl,r)}catch{}switch(r.tag){case 5:Ve||Jn(r,e);case 6:var n=Ie,i=Mt;Ie=null,br(t,e,r),Ie=n,Mt=i,Ie!==null&&(Mt?(t=Ie,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Ie.removeChild(r.stateNode));break;case 18:Ie!==null&&(Mt?(t=Ie,r=r.stateNode,t.nodeType===8?uu(t.parentNode,r):t.nodeType===1&&uu(t,r),js(t)):uu(Ie,r.stateNode));break;case 4:n=Ie,i=Mt,Ie=r.stateNode.containerInfo,Mt=!0,br(t,e,r),Ie=n,Mt=i;break;case 0:case 11:case 14:case 15:if(!Ve&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&wc(r,e,a),i=i.next}while(i!==n)}br(t,e,r);break;case 1:if(!Ve&&(Jn(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){_e(r,e,o)}br(t,e,r);break;case 21:br(t,e,r);break;case 22:r.mode&1?(Ve=(n=Ve)||r.memoizedState!==null,br(t,e,r),Ve=n):br(t,e,r);break;default:br(t,e,r)}}function Of(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new l0),e.forEach(function(n){var i=v0.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Lt(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Ie=o.stateNode,Mt=!1;break e;case 3:Ie=o.stateNode.containerInfo,Mt=!0;break e;case 4:Ie=o.stateNode.containerInfo,Mt=!0;break e}o=o.return}if(Ie===null)throw Error(R(160));Vg(s,a,i),Ie=null,Mt=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){_e(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Hg(e,t),e=e.sibling}function Hg(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Lt(e,t),qt(t),n&4){try{_s(3,t,t.return),fl(3,t)}catch(T){_e(t,t.return,T)}try{_s(5,t,t.return)}catch(T){_e(t,t.return,T)}}break;case 1:Lt(e,t),qt(t),n&512&&r!==null&&Jn(r,r.return);break;case 5:if(Lt(e,t),qt(t),n&512&&r!==null&&Jn(r,r.return),t.flags&32){var i=t.stateNode;try{Os(i,"")}catch(T){_e(t,t.return,T)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=r!==null?r.memoizedProps:s,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&dm(i,s),qu(o,a);var u=qu(o,s);for(a=0;a<l.length;a+=2){var c=l[a],d=l[a+1];c==="style"?gm(i,d):c==="dangerouslySetInnerHTML"?pm(i,d):c==="children"?Os(i,d):Gc(i,c,d,u)}switch(o){case"input":Bu(i,s);break;case"textarea":hm(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var w=s.value;w!=null?ei(i,!!s.multiple,w,!1):h!==!!s.multiple&&(s.defaultValue!=null?ei(i,!!s.multiple,s.defaultValue,!0):ei(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ds]=s}catch(T){_e(t,t.return,T)}}break;case 6:if(Lt(e,t),qt(t),n&4){if(t.stateNode===null)throw Error(R(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(T){_e(t,t.return,T)}}break;case 3:if(Lt(e,t),qt(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{js(e.containerInfo)}catch(T){_e(t,t.return,T)}break;case 4:Lt(e,t),qt(t);break;case 13:Lt(e,t),qt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Ad=we())),n&4&&Of(t);break;case 22:if(c=r!==null&&r.memoizedState!==null,t.mode&1?(Ve=(u=Ve)||c,Lt(e,t),Ve=u):Lt(e,t),qt(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(Z=t,c=t.child;c!==null;){for(d=Z=c;Z!==null;){switch(h=Z,w=h.child,h.tag){case 0:case 11:case 14:case 15:_s(4,h,h.return);break;case 1:Jn(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){n=h,r=h.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(T){_e(n,r,T)}}break;case 5:Jn(h,h.return);break;case 22:if(h.memoizedState!==null){Cf(d);continue}}w!==null?(w.return=h,Z=w):Cf(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=mm("display",a))}catch(T){_e(t,t.return,T)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(T){_e(t,t.return,T)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Lt(e,t),qt(t),n&4&&Of(t);break;case 21:break;default:Lt(e,t),qt(t)}}function qt(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Bg(r)){var n=r;break e}r=r.return}throw Error(R(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Os(i,""),n.flags&=-33);var s=Pf(t);Ec(t,s,i);break;case 3:case 4:var a=n.stateNode.containerInfo,o=Pf(t);kc(t,o,a);break;default:throw Error(R(161))}}catch(l){_e(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function c0(t,e,r){Z=t,Zg(t)}function Zg(t,e,r){for(var n=(t.mode&1)!==0;Z!==null;){var i=Z,s=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||Aa;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||Ve;o=Aa;var u=Ve;if(Aa=a,(Ve=l)&&!u)for(Z=i;Z!==null;)a=Z,l=a.child,a.tag===22&&a.memoizedState!==null?If(i):l!==null?(l.return=a,Z=l):If(i);for(;s!==null;)Z=s,Zg(s),s=s.sibling;Z=i,Aa=o,Ve=u}Af(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Z=s):Af(t)}}function Af(t){for(;Z!==null;){var e=Z;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ve||fl(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Ve)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Dt(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&hf(e,s,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}hf(e,a,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&js(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}Ve||e.flags&512&&bc(e)}catch(h){_e(e,e.return,h)}}if(e===t){Z=null;break}if(r=e.sibling,r!==null){r.return=e.return,Z=r;break}Z=e.return}}function Cf(t){for(;Z!==null;){var e=Z;if(e===t){Z=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Z=r;break}Z=e.return}}function If(t){for(;Z!==null;){var e=Z;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{fl(4,e)}catch(l){_e(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){_e(e,i,l)}}var s=e.return;try{bc(e)}catch(l){_e(e,s,l)}break;case 5:var a=e.return;try{bc(e)}catch(l){_e(e,a,l)}}}catch(l){_e(e,e.return,l)}if(e===t){Z=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Z=o;break}Z=e.return}}var d0=Math.ceil,So=_r.ReactCurrentDispatcher,Pd=_r.ReactCurrentOwner,Pt=_r.ReactCurrentBatchConfig,ie=0,Ae=null,Ee=null,Ne=0,dt=0,Gn=Gr(0),xe=0,Vs=null,bn=0,pl=0,Od=0,ws=null,st=null,Ad=0,fi=1/0,ir=null,xo=!1,Sc=null,Mr=null,Ca=!1,jr=null,To=0,bs=0,xc=null,Ya=-1,Qa=0;function Qe(){return ie&6?we():Ya!==-1?Ya:Ya=we()}function Ur(t){return t.mode&1?ie&2&&Ne!==0?Ne&-Ne:Ww.transition!==null?(Qa===0&&(Qa=Om()),Qa):(t=le,t!==0||(t=window.event,t=t===void 0?16:Lm(t.type)),t):1}function Bt(t,e,r,n){if(50<bs)throw bs=0,xc=null,Error(R(185));aa(t,r,n),(!(ie&2)||t!==Ae)&&(t===Ae&&(!(ie&2)&&(pl|=r),xe===4&&Ar(t,Ne)),ut(t,n),r===1&&ie===0&&!(e.mode&1)&&(fi=we()+500,cl&&Yr()))}function ut(t,e){var r=t.callbackNode;W_(t,e);var n=lo(t,t===Ae?Ne:0);if(n===0)r!==null&&Uh(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Uh(r),e===1)t.tag===0?qw(jf.bind(null,t)):eg(jf.bind(null,t)),Vw(function(){!(ie&6)&&Yr()}),r=null;else{switch(Am(n)){case 1:r=td;break;case 4:r=Tm;break;case 16:r=oo;break;case 536870912:r=Pm;break;default:r=oo}r=Xg(r,Kg.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Kg(t,e){if(Ya=-1,Qa=0,ie&6)throw Error(R(327));var r=t.callbackNode;if(si()&&t.callbackNode!==r)return null;var n=lo(t,t===Ae?Ne:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Po(t,n);else{e=n;var i=ie;ie|=2;var s=Wg();(Ae!==t||Ne!==e)&&(ir=null,fi=we()+500,pn(t,e));do try{p0();break}catch(o){qg(t,o)}while(1);pd(),So.current=s,ie=i,Ee!==null?e=0:(Ae=null,Ne=0,e=xe)}if(e!==0){if(e===2&&(i=Qu(t),i!==0&&(n=i,e=Tc(t,i))),e===1)throw r=Vs,pn(t,0),Ar(t,n),ut(t,we()),r;if(e===6)Ar(t,n);else{if(i=t.current.alternate,!(n&30)&&!h0(i)&&(e=Po(t,n),e===2&&(s=Qu(t),s!==0&&(n=s,e=Tc(t,s))),e===1))throw r=Vs,pn(t,0),Ar(t,n),ut(t,we()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(R(345));case 2:nn(t,st,ir);break;case 3:if(Ar(t,n),(n&130023424)===n&&(e=Ad+500-we(),10<e)){if(lo(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Qe(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ac(nn.bind(null,t,st,ir),e);break}nn(t,st,ir);break;case 4:if(Ar(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var a=31-zt(n);s=1<<a,a=e[a],a>i&&(i=a),n&=~s}if(n=i,n=we()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*d0(n/1960))-n,10<n){t.timeoutHandle=ac(nn.bind(null,t,st,ir),n);break}nn(t,st,ir);break;case 5:nn(t,st,ir);break;default:throw Error(R(329))}}}return ut(t,we()),t.callbackNode===r?Kg.bind(null,t):null}function Tc(t,e){var r=ws;return t.current.memoizedState.isDehydrated&&(pn(t,e).flags|=256),t=Po(t,e),t!==2&&(e=st,st=r,e!==null&&Pc(e)),t}function Pc(t){st===null?st=t:st.push.apply(st,t)}function h0(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!Vt(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ar(t,e){for(e&=~Od,e&=~pl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-zt(e),n=1<<r;t[r]=-1,e&=~n}}function jf(t){if(ie&6)throw Error(R(327));si();var e=lo(t,0);if(!(e&1))return ut(t,we()),null;var r=Po(t,e);if(t.tag!==0&&r===2){var n=Qu(t);n!==0&&(e=n,r=Tc(t,n))}if(r===1)throw r=Vs,pn(t,0),Ar(t,e),ut(t,we()),r;if(r===6)throw Error(R(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,nn(t,st,ir),ut(t,we()),null}function Cd(t,e){var r=ie;ie|=1;try{return t(e)}finally{ie=r,ie===0&&(fi=we()+500,cl&&Yr())}}function kn(t){jr!==null&&jr.tag===0&&!(ie&6)&&si();var e=ie;ie|=1;var r=Pt.transition,n=le;try{if(Pt.transition=null,le=1,t)return t()}finally{le=n,Pt.transition=r,ie=e,!(ie&6)&&Yr()}}function Id(){dt=Gn.current,he(Gn)}function pn(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Bw(r)),Ee!==null)for(r=Ee.return;r!==null;){var n=r;switch(dd(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&po();break;case 3:di(),he(ot),he(qe),wd();break;case 5:_d(n);break;case 4:di();break;case 13:he(me);break;case 19:he(me);break;case 10:md(n.type._context);break;case 22:case 23:Id()}r=r.return}if(Ae=t,Ee=t=Fr(t.current,null),Ne=dt=e,xe=0,Vs=null,Od=pl=bn=0,st=ws=null,dn!==null){for(e=0;e<dn.length;e++)if(r=dn[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var a=s.next;s.next=i,n.next=a}r.pending=n}dn=null}return t}function qg(t,e){do{var r=Ee;try{if(pd(),Wa.current=Eo,ko){for(var n=ge.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}ko=!1}if(wn=0,Oe=Se=ge=null,vs=!1,Fs=0,Pd.current=null,r===null||r.return===null){xe=1,Vs=e,Ee=null;break}e:{var s=t,a=r.return,o=r,l=e;if(e=Ne,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=o,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var w=_f(a);if(w!==null){w.flags&=-257,wf(w,a,o,s,e),w.mode&1&&vf(s,u,e),e=w,l=u;var v=e.updateQueue;if(v===null){var T=new Set;T.add(l),e.updateQueue=T}else v.add(l);break e}else{if(!(e&1)){vf(s,u,e),jd();break e}l=Error(R(426))}}else if(pe&&o.mode&1){var b=_f(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),wf(b,a,o,s,e),hd(hi(l,o));break e}}s=l=hi(l,o),xe!==4&&(xe=2),ws===null?ws=[s]:ws.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=Cg(s,l,e);df(s,y);break e;case 1:o=l;var p=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof p.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Mr===null||!Mr.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=Ig(s,o,e);df(s,x);break e}}s=s.return}while(s!==null)}Gg(r)}catch(I){e=I,Ee===r&&r!==null&&(Ee=r=r.return);continue}break}while(1)}function Wg(){var t=So.current;return So.current=Eo,t===null?Eo:t}function jd(){(xe===0||xe===3||xe===2)&&(xe=4),Ae===null||!(bn&268435455)&&!(pl&268435455)||Ar(Ae,Ne)}function Po(t,e){var r=ie;ie|=2;var n=Wg();(Ae!==t||Ne!==e)&&(ir=null,pn(t,e));do try{f0();break}catch(i){qg(t,i)}while(1);if(pd(),ie=r,So.current=n,Ee!==null)throw Error(R(261));return Ae=null,Ne=0,xe}function f0(){for(;Ee!==null;)Jg(Ee)}function p0(){for(;Ee!==null&&!U_();)Jg(Ee)}function Jg(t){var e=Qg(t.alternate,t,dt);t.memoizedProps=t.pendingProps,e===null?Gg(t):Ee=e,Pd.current=null}function Gg(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=o0(r,e),r!==null){r.flags&=32767,Ee=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xe=6,Ee=null;return}}else if(r=a0(r,e,dt),r!==null){Ee=r;return}if(e=e.sibling,e!==null){Ee=e;return}Ee=e=t}while(e!==null);xe===0&&(xe=5)}function nn(t,e,r){var n=le,i=Pt.transition;try{Pt.transition=null,le=1,m0(t,e,r,n)}finally{Pt.transition=i,le=n}return null}function m0(t,e,r,n){do si();while(jr!==null);if(ie&6)throw Error(R(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(R(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(J_(t,s),t===Ae&&(Ee=Ae=null,Ne=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ca||(Ca=!0,Xg(oo,function(){return si(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Pt.transition,Pt.transition=null;var a=le;le=1;var o=ie;ie|=4,Pd.current=null,u0(t,r),Hg(r,t),Lw(ic),uo=!!nc,ic=nc=null,t.current=r,c0(r),F_(),ie=o,le=a,Pt.transition=s}else t.current=r;if(Ca&&(Ca=!1,jr=t,To=i),s=t.pendingLanes,s===0&&(Mr=null),V_(r.stateNode),ut(t,we()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(xo)throw xo=!1,t=Sc,Sc=null,t;return To&1&&t.tag!==0&&si(),s=t.pendingLanes,s&1?t===xc?bs++:(bs=0,xc=t):bs=0,Yr(),null}function si(){if(jr!==null){var t=Am(To),e=Pt.transition,r=le;try{if(Pt.transition=null,le=16>t?16:t,jr===null)var n=!1;else{if(t=jr,jr=null,To=0,ie&6)throw Error(R(331));var i=ie;for(ie|=4,Z=t.current;Z!==null;){var s=Z,a=s.child;if(Z.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(Z=u;Z!==null;){var c=Z;switch(c.tag){case 0:case 11:case 15:_s(8,c,s)}var d=c.child;if(d!==null)d.return=c,Z=d;else for(;Z!==null;){c=Z;var h=c.sibling,w=c.return;if(zg(c),c===u){Z=null;break}if(h!==null){h.return=w,Z=h;break}Z=w}}}var v=s.alternate;if(v!==null){var T=v.child;if(T!==null){v.child=null;do{var b=T.sibling;T.sibling=null,T=b}while(T!==null)}}Z=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Z=a;else e:for(;Z!==null;){if(s=Z,s.flags&2048)switch(s.tag){case 0:case 11:case 15:_s(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Z=y;break e}Z=s.return}}var p=t.current;for(Z=p;Z!==null;){a=Z;var _=a.child;if(a.subtreeFlags&2064&&_!==null)_.return=a,Z=_;else e:for(a=p;Z!==null;){if(o=Z,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:fl(9,o)}}catch(I){_e(o,o.return,I)}if(o===a){Z=null;break e}var x=o.sibling;if(x!==null){x.return=o.return,Z=x;break e}Z=o.return}}if(ie=i,Yr(),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(sl,t)}catch{}n=!0}return n}finally{le=r,Pt.transition=e}}return!1}function Rf(t,e,r){e=hi(r,e),e=Cg(t,e,1),t=Dr(t,e,1),e=Qe(),t!==null&&(aa(t,1,e),ut(t,e))}function _e(t,e,r){if(t.tag===3)Rf(t,t,r);else for(;e!==null;){if(e.tag===3){Rf(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Mr===null||!Mr.has(n))){t=hi(r,t),t=Ig(e,t,1),e=Dr(e,t,1),t=Qe(),e!==null&&(aa(e,1,t),ut(e,t));break}}e=e.return}}function g0(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Qe(),t.pingedLanes|=t.suspendedLanes&r,Ae===t&&(Ne&r)===r&&(xe===4||xe===3&&(Ne&130023424)===Ne&&500>we()-Ad?pn(t,0):Od|=r),ut(t,e)}function Yg(t,e){e===0&&(t.mode&1?(e=wa,wa<<=1,!(wa&130023424)&&(wa=4194304)):e=1);var r=Qe();t=pr(t,e),t!==null&&(aa(t,e,r),ut(t,r))}function y0(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Yg(t,r)}function v0(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(R(314))}n!==null&&n.delete(e),Yg(t,r)}var Qg;Qg=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||ot.current)at=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return at=!1,s0(t,e,r);at=!!(t.flags&131072)}else at=!1,pe&&e.flags&1048576&&tg(e,yo,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Ga(t,e),t=e.pendingProps;var i=li(e,qe.current);ii(e,r),i=kd(null,e,n,t,i,r);var s=Ed();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,lt(n)?(s=!0,mo(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,yd(e),i.updater=dl,e.stateNode=i,i._reactInternals=e,fc(e,n,t,r),e=gc(null,e,n,!0,s,r)):(e.tag=0,pe&&s&&cd(e),Ye(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Ga(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=w0(n),t=Dt(n,t),i){case 0:e=mc(null,e,n,t,r);break e;case 1:e=Ef(null,e,n,t,r);break e;case 11:e=bf(null,e,n,t,r);break e;case 14:e=kf(null,e,n,Dt(n.type,t),r);break e}throw Error(R(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Dt(n,i),mc(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Dt(n,i),Ef(t,e,n,i,r);case 3:e:{if(Lg(e),t===null)throw Error(R(387));n=e.pendingProps,s=e.memoizedState,i=s.element,sg(t,e),wo(e,n,null,r);var a=e.memoizedState;if(n=a.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=hi(Error(R(423)),e),e=Sf(t,e,n,r,i);break e}else if(n!==i){i=hi(Error(R(424)),e),e=Sf(t,e,n,r,i);break e}else for(ht=$r(e.stateNode.containerInfo.firstChild),ft=e,pe=!0,Ft=null,r=ug(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ui(),n===i){e=mr(t,e,r);break e}Ye(t,e,n,r)}e=e.child}return e;case 5:return cg(e),t===null&&cc(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,sc(n,i)?a=null:s!==null&&sc(n,s)&&(e.flags|=32),Ng(t,e),Ye(t,e,a,r),e.child;case 6:return t===null&&cc(e),null;case 13:return $g(t,e,r);case 4:return vd(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=ci(e,null,n,r):Ye(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Dt(n,i),bf(t,e,n,i,r);case 7:return Ye(t,e,e.pendingProps,r),e.child;case 8:return Ye(t,e,e.pendingProps.children,r),e.child;case 12:return Ye(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,ce(vo,n._currentValue),n._currentValue=a,s!==null)if(Vt(s.value,a)){if(s.children===i.children&&!ot.current){e=mr(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=cr(-1,r&-r),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),dc(s.return,r,e),o.lanes|=r;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(R(341));a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),dc(a,r,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Ye(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,ii(e,r),i=Ct(i),n=n(i),e.flags|=1,Ye(t,e,n,r),e.child;case 14:return n=e.type,i=Dt(n,e.pendingProps),i=Dt(n.type,i),kf(t,e,n,i,r);case 15:return jg(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Dt(n,i),Ga(t,e),e.tag=1,lt(n)?(t=!0,mo(e)):t=!1,ii(e,r),og(e,n,i),fc(e,n,i,r),gc(null,e,n,!0,t,r);case 19:return Dg(t,e,r);case 22:return Rg(t,e,r)}throw Error(R(156,e.tag))};function Xg(t,e){return xm(t,e)}function _0(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xt(t,e,r,n){return new _0(t,e,r,n)}function Rd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function w0(t){if(typeof t=="function")return Rd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Qc)return 11;if(t===Xc)return 14}return 2}function Fr(t,e){var r=t.alternate;return r===null?(r=xt(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Xa(t,e,r,n,i,s){var a=2;if(n=t,typeof t=="function")Rd(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Fn:return mn(r.children,i,s,e);case Yc:a=8,i|=8;break;case Du:return t=xt(12,r,e,i|2),t.elementType=Du,t.lanes=s,t;case Mu:return t=xt(13,r,e,i),t.elementType=Mu,t.lanes=s,t;case Uu:return t=xt(19,r,e,i),t.elementType=Uu,t.lanes=s,t;case lm:return ml(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case am:a=10;break e;case om:a=9;break e;case Qc:a=11;break e;case Xc:a=14;break e;case xr:a=16,n=null;break e}throw Error(R(130,t==null?t:typeof t,""))}return e=xt(a,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function mn(t,e,r,n){return t=xt(7,t,n,e),t.lanes=r,t}function ml(t,e,r,n){return t=xt(22,t,n,e),t.elementType=lm,t.lanes=r,t.stateNode={isHidden:!1},t}function yu(t,e,r){return t=xt(6,t,null,e),t.lanes=r,t}function vu(t,e,r){return e=xt(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function b0(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ql(0),this.expirationTimes=Ql(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ql(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Nd(t,e,r,n,i,s,a,o,l){return t=new b0(t,e,r,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=xt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},yd(s),t}function k0(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Un,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function ey(t){if(!t)return Hr;t=t._reactInternals;e:{if(Pn(t)!==t||t.tag!==1)throw Error(R(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(lt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(R(171))}if(t.tag===1){var r=t.type;if(lt(r))return Xm(t,r,e)}return e}function ty(t,e,r,n,i,s,a,o,l){return t=Nd(r,n,!0,t,i,s,a,o,l),t.context=ey(null),r=t.current,n=Qe(),i=Ur(r),s=cr(n,i),s.callback=e??null,Dr(r,s,i),t.current.lanes=i,aa(t,i,n),ut(t,n),t}function gl(t,e,r,n){var i=e.current,s=Qe(),a=Ur(i);return r=ey(r),e.context===null?e.context=r:e.pendingContext=r,e=cr(s,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Dr(i,e,a),t!==null&&(Bt(t,i,a,s),qa(t,i,a)),a}function Oo(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Nf(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Ld(t,e){Nf(t,e),(t=t.alternate)&&Nf(t,e)}function E0(){return null}var ry=typeof reportError=="function"?reportError:function(t){console.error(t)};function $d(t){this._internalRoot=t}yl.prototype.render=$d.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(R(409));gl(t,e,null,null)};yl.prototype.unmount=$d.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;kn(function(){gl(null,t,null,null)}),e[fr]=null}};function yl(t){this._internalRoot=t}yl.prototype.unstable_scheduleHydration=function(t){if(t){var e=jm();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Or.length&&e!==0&&e<Or[r].priority;r++);Or.splice(r,0,t),r===0&&Nm(t)}};function Dd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Lf(){}function S0(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var u=Oo(a);s.call(u)}}var a=ty(e,n,t,0,null,!1,!1,"",Lf);return t._reactRootContainer=a,t[fr]=a.current,Ls(t.nodeType===8?t.parentNode:t),kn(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var u=Oo(l);o.call(u)}}var l=Nd(t,0,!1,null,null,!1,!1,"",Lf);return t._reactRootContainer=l,t[fr]=l.current,Ls(t.nodeType===8?t.parentNode:t),kn(function(){gl(e,l,r,n)}),l}function _l(t,e,r,n,i){var s=r._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=Oo(a);o.call(l)}}gl(e,a,t,i)}else a=S0(r,e,t,i,n);return Oo(a)}Cm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=us(e.pendingLanes);r!==0&&(rd(e,r|1),ut(e,we()),!(ie&6)&&(fi=we()+500,Yr()))}break;case 13:kn(function(){var n=pr(t,1);if(n!==null){var i=Qe();Bt(n,t,1,i)}}),Ld(t,1)}};nd=function(t){if(t.tag===13){var e=pr(t,134217728);if(e!==null){var r=Qe();Bt(e,t,134217728,r)}Ld(t,134217728)}};Im=function(t){if(t.tag===13){var e=Ur(t),r=pr(t,e);if(r!==null){var n=Qe();Bt(r,t,e,n)}Ld(t,e)}};jm=function(){return le};Rm=function(t,e){var r=le;try{return le=t,e()}finally{le=r}};Ju=function(t,e,r){switch(e){case"input":if(Bu(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=ul(n);if(!i)throw Error(R(90));cm(n),Bu(n,i)}}}break;case"textarea":hm(t,r);break;case"select":e=r.value,e!=null&&ei(t,!!r.multiple,e,!1)}};_m=Cd;wm=kn;var x0={usingClientEntryPoint:!1,Events:[la,Hn,ul,ym,vm,Cd]},Bi={findFiberByHostInstance:cn,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},T0={bundleType:Bi.bundleType,version:Bi.version,rendererPackageName:Bi.rendererPackageName,rendererConfig:Bi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_r.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Em(t),t===null?null:t.stateNode},findFiberByHostInstance:Bi.findFiberByHostInstance||E0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ia=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ia.isDisabled&&Ia.supportsFiber)try{sl=Ia.inject(T0),Qt=Ia}catch{}}yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=x0;yt.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dd(e))throw Error(R(200));return k0(t,e,null,r)};yt.createRoot=function(t,e){if(!Dd(t))throw Error(R(299));var r=!1,n="",i=ry;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Nd(t,1,!1,null,null,r,!1,n,i),t[fr]=e.current,Ls(t.nodeType===8?t.parentNode:t),new $d(e)};yt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(R(188)):(t=Object.keys(t).join(","),Error(R(268,t)));return t=Em(e),t=t===null?null:t.stateNode,t};yt.flushSync=function(t){return kn(t)};yt.hydrate=function(t,e,r){if(!vl(e))throw Error(R(200));return _l(null,t,e,!0,r)};yt.hydrateRoot=function(t,e,r){if(!Dd(t))throw Error(R(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",a=ry;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=ty(e,null,t,1,r??null,i,!1,s,a),t[fr]=e.current,Ls(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new yl(e)};yt.render=function(t,e,r){if(!vl(e))throw Error(R(200));return _l(null,t,e,!1,r)};yt.unmountComponentAtNode=function(t){if(!vl(t))throw Error(R(40));return t._reactRootContainer?(kn(function(){_l(null,null,t,!1,function(){t._reactRootContainer=null,t[fr]=null})}),!0):!1};yt.unstable_batchedUpdates=Cd;yt.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!vl(r))throw Error(R(200));if(t==null||t._reactInternals===void 0)throw Error(R(38));return _l(t,e,r,!1,n)};yt.version="18.2.0-next-9e3b772b8-20220608";function ny(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ny)}catch(t){console.error(t)}}ny(),tm.exports=yt;var P0=tm.exports,$f=P0;Lu.createRoot=$f.createRoot,Lu.hydrateRoot=$f.hydrateRoot;const O0="modulepreload",A0=function(t,e){return new URL(t,e).href},Df={},je=function(e,r,n){if(!r||r.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(r.map(s=>{if(s=A0(s,n),s in Df)return;Df[s]=!0;const a=s.endsWith(".css"),o=a?'[rel="stylesheet"]':"";if(!!n)for(let c=i.length-1;c>=0;c--){const d=i[c];if(d.href===s&&(!a||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${o}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":O0,a||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),a)return new Promise((c,d)=>{u.addEventListener("load",c),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s})},C0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>je(()=>Promise.resolve().then(()=>ca),void 0,import.meta.url).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class Md extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class I0 extends Md{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class j0 extends Md{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class R0 extends Md{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var N0=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{u(n.next(c))}catch(d){a(d)}}function l(c){try{u(n.throw(c))}catch(d){a(d)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((n=n.apply(t,e||[])).next())})};class L0{constructor(e,{headers:r={},customFetch:n}={}){this.url=e,this.headers=r,this.fetch=C0(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var n;return N0(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:a}=r;let o={},l;a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",l=a):typeof a=="string"?(o["Content-Type"]="text/plain",l=a):typeof FormData<"u"&&a instanceof FormData?l=a:(o["Content-Type"]="application/json",l=JSON.stringify(a)));const u=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),i),body:l}).catch(w=>{throw new I0(w)}),c=u.headers.get("x-relay-error");if(c&&c==="true")throw new j0(u);if(!u.ok)throw new R0(u);let d=((n=u.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),h;return d==="application/json"?h=yield u.json():d==="application/octet-stream"?h=yield u.blob():d==="multipart/form-data"?h=yield u.formData():h=yield u.text(),{data:h,error:null}}catch(i){return{data:null,error:i}}})}}var Oc={exports:{}};(function(t,e){var r=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof ro<"u")return ro;throw new Error("unable to locate global object")},n=r();t.exports=e=n.fetch,n.fetch&&(e.default=n.fetch.bind(n)),e.Headers=n.Headers,e.Request=n.Request,e.Response=n.Response})(Oc,Oc.exports);var Ud=Oc.exports;const Fd=ia(Ud),ca=t_({__proto__:null,default:Fd},[Ud]);class $0{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Fd:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var a,o,l;let u=null,c=null,d=null,h=s.status,w=s.statusText;if(s.ok){if(this.method!=="HEAD"){const y=await s.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?c=y:c=JSON.parse(y))}const T=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),b=(o=s.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");T&&b&&b.length>1&&(d=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(c)&&(c.length>1?(u={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,d=null,h=406,w="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{const T=await s.text();try{u=JSON.parse(T),Array.isArray(u)&&s.status===404&&(c=[],u=null,h=200,w="OK")}catch{s.status===404&&T===""?(h=204,w="No Content"):u={message:T}}if(u&&this.isMaybeSingle&&(!((l=u==null?void 0:u.details)===null||l===void 0)&&l.includes("Results contain 0 rows"))&&(u=null,h=200,w="OK"),u&&this.shouldThrowOnError)throw u}return{error:u,data:c,count:d,status:h,statusText:w}});return this.shouldThrowOnError||(i=i.catch(s=>{var a,o,l;return{error:{message:`${(a=s==null?void 0:s.name)!==null&&a!==void 0?a:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(o=s==null?void 0:s.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,r)}}class D0 extends $0{select(e){let r=!1;const n=(e??"*").split("").map(i=>/\s/.test(i)&&!r?"":(i==='"'&&(r=!r),i)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:r=!0,nullsFirst:n,foreignTable:i}={}){const s=i?`${i}.order`:"order",a=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${a?`${a},`:""}${e}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,r,{foreignTable:n}={}){const i=typeof n>"u"?"offset":`${n}.offset`,s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(s,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:r=!1,settings:n=!1,buffers:i=!1,wal:s=!1,format:a="text"}={}){const o=[e?"analyze":null,r?"verbose":null,n?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=this.headers.Accept;return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${l}"; options=${o};`,a==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class $n extends D0{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const n=r.map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:n,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${s}fts${a}.${r}`),this}match(e){return Object.entries(e).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(e,r,n){return this.url.searchParams.append(e,`not.${r}.${n}`),this}or(e,{foreignTable:r}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,r,n){return this.url.searchParams.append(e,`${r}.${n}`),this}}class M0{constructor(e,{headers:r={},schema:n,fetch:i}){this.url=e,this.headers=r,this.schema=n,this.fetch=i}select(e,{head:r=!1,count:n}={}){const i=r?"HEAD":"GET";let s=!1;const a=(e??"*").split("").map(o=>/\s/.test(o)&&!s?"":(o==='"'&&(s=!s),o)).join("");return this.url.searchParams.set("select",a),n&&(this.headers.Prefer=`count=${n}`),new $n({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:r,defaultToNull:n=!0}={}){const i="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),n||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const a=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(a.length>0){const o=[...new Set(a)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new $n({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:r,ignoreDuplicates:n=!1,count:i,defaultToNull:s=!0}={}){const a="POST",o=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&o.push(this.headers.Prefer),i&&o.push(`count=${i}`),s||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const l=e.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){const u=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new $n({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:r}={}){const n="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),this.headers.Prefer=i.join(","),new $n({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const r="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new $n({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const U0="1.8.4",F0={"X-Client-Info":`postgrest-js/${U0}`};class zd{constructor(e,{headers:r={},schema:n,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},F0),r),this.schemaName=n,this.fetch=i}from(e){const r=new URL(`${this.url}/${e}`);return new M0(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new zd(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,count:i}={}){let s;const a=new URL(`${this.url}/rpc/${e}`);let o;n?(s="HEAD",Object.entries(r).forEach(([u,c])=>{a.searchParams.append(u,`${c}`)})):(s="POST",o=r);const l=Object.assign({},this.headers);return i&&(l.Prefer=`count=${i}`),new $n({method:s,url:a,headers:l,schema:this.schemaName,body:o,fetch:this.fetch,allowEmpty:!1})}}var _u,Mf;function z0(){if(Mf)return _u;Mf=1;var t=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return _u=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return t()}try{return __global__||t()}finally{delete Object.prototype.__global__}}(),_u}const B0="websocket",V0="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",H0=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],Z0="Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",K0=["Iñaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],q0="1.0.34",W0={type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},J0="https://github.com/theturtle32/WebSocket-Node",G0={node:">=4.0.0"},Y0={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},Q0={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},X0={verbose:!1},eb={test:"tape test/unit/*.js",gulp:"gulp"},tb="index",rb={lib:"./lib"},nb="lib/browser.js",ib="Apache-2.0",sb={name:B0,description:V0,keywords:H0,author:Z0,contributors:K0,version:q0,repository:W0,homepage:J0,engines:G0,dependencies:Y0,devDependencies:Q0,config:X0,scripts:eb,main:tb,directories:rb,browser:nb,license:ib};var ab=sb.version,sn;if(typeof globalThis=="object")sn=globalThis;else try{sn=z0()}catch{}finally{if(!sn&&typeof window<"u"&&(sn=window),!sn)throw new Error("Could not determine global this")}var Hs=sn.WebSocket||sn.MozWebSocket,ob=ab;function iy(t,e){var r;return e?r=new Hs(t,e):r=new Hs(t),r}Hs&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(t){Object.defineProperty(iy,t,{get:function(){return Hs[t]}})});var lb={w3cwebsocket:Hs?iy:null,version:ob};const ub="2.8.0",cb={"X-Client-Info":`realtime-js/${ub}`},db="1.0.0",sy=1e4,hb=1e3;var ks;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ks||(ks={}));var ct;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ct||(ct={}));var Ut;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ut||(Ut={}));var Ac;(function(t){t.websocket="websocket"})(Ac||(Ac={}));var an;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(an||(an={}));class ay{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class fb{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const i=r.getUint8(1),s=r.getUint8(2);let a=this.HEADER_LENGTH+2;const o=n.decode(e.slice(a,a+i));a=a+i;const l=n.decode(e.slice(a,a+s));a=a+s;const u=JSON.parse(n.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:l,payload:u}}}class wu{constructor(e,r,n={},i=sy){this.channel=e,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null,this.rateLimited=!1}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){if(this._hasReceived("timeout"))return;this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()})==="rate limited"&&(this.rateLimited=!0)}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Uf;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Uf||(Uf={}));class Es{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Es.syncState(this.state,i,s,a),this.pendingDiffs.forEach(l=>{this.state=Es.syncDiff(this.state,l,s,a)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Es.syncDiff(this.state,i,s,a),o())}),this.onJoin((i,s,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:a})}),this.onLeave((i,s,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,i){const s=this.cloneDeep(e),a=this.transformState(r),o={},l={};return this.map(s,(u,c)=>{a[u]||(l[u]=c)}),this.map(a,(u,c)=>{const d=s[u];if(d){const h=c.map(b=>b.presence_ref),w=d.map(b=>b.presence_ref),v=c.filter(b=>w.indexOf(b.presence_ref)<0),T=d.filter(b=>h.indexOf(b.presence_ref)<0);v.length>0&&(o[u]=v),T.length>0&&(l[u]=T)}else o[u]=c}),this.syncDiff(s,{joins:o,leaves:l},n,i)}static syncDiff(e,r,n,i){const{joins:s,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(s,(o,l)=>{var u;const c=(u=e[o])!==null&&u!==void 0?u:[];if(e[o]=this.cloneDeep(l),c.length>0){const d=e[o].map(w=>w.presence_ref),h=c.filter(w=>d.indexOf(w.presence_ref)<0);e[o].unshift(...h)}n(o,c,l)}),this.map(a,(o,l)=>{let u=e[o];if(!u)return;const c=l.map(d=>d.presence_ref);u=u.filter(d=>c.indexOf(d.presence_ref)<0),e[o]=u,i(o,u,l),u.length===0&&delete e[o]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const i=e[n];return"metas"in i?r[n]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):r[n]=i,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ue;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ue||(ue={}));const Ff=(t,e,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((s,a)=>(s[a]=pb(a,t,e,i),s),{})},pb=(t,e,r,n)=>{const i=e.find(o=>o.name===t),s=i==null?void 0:i.type,a=r[t];return s&&!n.includes(s)?oy(s,a):Cc(a)},oy=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return vb(e,r)}switch(t){case ue.bool:return mb(e);case ue.float4:case ue.float8:case ue.int2:case ue.int4:case ue.int8:case ue.numeric:case ue.oid:return gb(e);case ue.json:case ue.jsonb:return yb(e);case ue.timestamp:return _b(e);case ue.abstime:case ue.date:case ue.daterange:case ue.int4range:case ue.int8range:case ue.money:case ue.reltime:case ue.text:case ue.time:case ue.timestamptz:case ue.timetz:case ue.tsrange:case ue.tstzrange:return Cc(e);default:return Cc(e)}},Cc=t=>t,mb=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},gb=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},yb=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},vb=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let s;const a=t.slice(1,r);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(o=>oy(e,o))}return t},_b=t=>typeof t=="string"?t.replace(" ","T"):t;var zf;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(zf||(zf={}));var Bf;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes"})(Bf||(Bf={}));var Vf;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Vf||(Vf={}));class Bd{constructor(e,r={config:{}},n){this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=ct.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},r.config),this.timeout=this.socket.timeout,this.joinPush=new wu(this,Ut.join,this.params,this.timeout),this.rejoinTimer=new ay(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ct.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ct.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=ct.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ct.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ut.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new Es(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,r=this.timeout){var n,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:a}}=this.params;this._onError(u=>e&&e("CHANNEL_ERROR",u)),this._onClose(()=>e&&e("CLOSED"));const o={},l={broadcast:s,presence:a,postgres_changes:(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&i!==void 0?i:[]};this.socket.accessToken&&(o.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:l},o)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",({postgres_changes:u})=>{var c;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),u===void 0){e&&e("SUBSCRIBED");return}else{const d=this.bindings.postgres_changes,h=(c=d==null?void 0:d.length)!==null&&c!==void 0?c:0,w=[];for(let v=0;v<h;v++){const T=d[v],{filter:{event:b,schema:y,table:p,filter:_}}=T,x=u&&u[v];if(x&&x.event===b&&x.schema===y&&x.table===p&&x.filter===_)w.push(Object.assign(Object.assign({},T),{id:x.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e("SUBSCRIBED");return}}).receive("error",u=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this._on(e,r,n)}async send(e,r={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:a}=e,o={method:"POST",headers:{apikey:(n=this.socket.accessToken)!==null&&n!==void 0?n:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=r.timeout)!==null&&i!==void 0?i:this.timeout)).ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,o,l;const u=this._push(e.type,e,r.timeout||this.timeout);u.rateLimited&&s("rate limited"),e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ct.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ut.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const i=new wu(this,Ut.leave,{},e);i.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,r,n){const i=new AbortController,s=setTimeout(()=>i.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(s),a}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new wu(this,e,r,n);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var i,s;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:u,join:c}=Ut;if(n&&[o,l,u,c].indexOf(a)>=0&&n!==this._joinRef())return;let h=this._onMessage(a,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(w=>{var v,T,b;return((v=w.filter)===null||v===void 0?void 0:v.event)==="*"||((b=(T=w.filter)===null||T===void 0?void 0:T.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===a}).map(w=>w.callback(h,n)):(s=this.bindings[a])===null||s===void 0||s.filter(w=>{var v,T,b,y,p,_;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in w){const x=w.id,I=(v=w.filter)===null||v===void 0?void 0:v.event;return x&&((T=r.ids)===null||T===void 0?void 0:T.includes(x))&&(I==="*"||(I==null?void 0:I.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const x=(p=(y=w==null?void 0:w.filter)===null||y===void 0?void 0:y.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return x==="*"||x===((_=r==null?void 0:r.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===a}).map(w=>{if(typeof h=="object"&&"ids"in h){const v=h.data,{schema:T,table:b,commit_timestamp:y,type:p,errors:_}=v;h=Object.assign(Object.assign({},{schema:T,table:b,commit_timestamp:y,eventType:p,new:{},old:{},errors:_}),this._getPayloadRecords(v))}w.callback(h,n)})}_isClosed(){return this.state===ct.closed}_isJoined(){return this.state===ct.joined}_isJoining(){return this.state===ct.joining}_isLeaving(){return this.state===ct.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const i=e.toLocaleLowerCase(),s={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===n&&Bd.isEqual(i.filter,r))}),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ut.close,{},e)}_onError(e){this._on(Ut.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ct.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Ff(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Ff(e.columns,e.old_record)),r}}const wb=()=>{};class bb{constructor(e,r){var n,i;this.accessToken=null,this.channels=[],this.endPoint="",this.headers=cb,this.params={},this.timeout=sy,this.transport=lb.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=wb,this.conn=null,this.sendBuffer=[],this.serializer=new fb,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.eventsPerSecondLimitMs=100,this.inThrottle=!1,this._resolveFetch=o=>{let l;return o?l=o:typeof fetch>"u"?l=(...u)=>je(()=>Promise.resolve().then(()=>ca),void 0,import.meta.url).then(({default:c})=>c(...u)):l=fetch,(...u)=>l(...u)},this.endPoint=`${e}/${Ac.websocket}`,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),r!=null&&r.transport&&(this.transport=r.transport),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.eventsPerSecond;s&&(this.eventsPerSecondLimitMs=Math.floor(1e3/s));const a=(i=r==null?void 0:r.params)===null||i===void 0?void 0:i.apikey;a&&(this.accessToken=a),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(o,l)=>l(JSON.stringify(o)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new ay(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){this.conn||(this.conn=new this.transport(this._endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e)))}disconnect(e,r){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ks.connecting:return an.Connecting;case ks.open:return an.Open;case ks.closing:return an.Closing;default:return an.Closed}}isConnected(){return this.connectionState()===an.Open}channel(e,r={config:{}}){const n=new Bd(`realtime:${e}`,r,this);return this.channels.push(n),n}push(e){const{topic:r,event:n,payload:i,ref:s}=e;let a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};if(this.log("push",`${r} ${n} (${s})`,i),this.isConnected())if(["broadcast","presence","postgres_changes"].includes(n)){if(this._throttle(a)())return"rate limited"}else a();else this.sendBuffer.push(a)}setAuth(e){this.accessToken=e,this.channels.forEach(r=>{e&&r.updateJoinPayload({access_token:e}),r.joinedOnce&&r._isJoined()&&r._push(Ut.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r._joinRef()!==e._joinRef())}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:db}))}_onConnMessage(e){this.decode(e.data,r=>{let{topic:n,event:i,payload:s,ref:a}=r;(a&&a===this.pendingHeartbeatRef||i===(s==null?void 0:s.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${n} ${i} ${a&&"("+a+")"||""}`,s),this.channels.filter(o=>o._isMember(n)).forEach(o=>o._trigger(i,s,a)),this.stateChangeCallbacks.message.forEach(o=>o(r))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ut.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${e}${n}${i}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(hb,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_throttle(e,r=this.eventsPerSecondLimitMs){return()=>this.inThrottle?!0:(e(),r>0&&(this.inThrottle=!0,setTimeout(()=>{this.inThrottle=!1},r)),!1)}}class Vd extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ze(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class kb extends Vd{constructor(e,r){super(e),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Hf extends Vd{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var Eb=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{u(n.next(c))}catch(d){a(d)}}function l(c){try{u(n.throw(c))}catch(d){a(d)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((n=n.apply(t,e||[])).next())})};const ly=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>je(()=>Promise.resolve().then(()=>ca),void 0,import.meta.url).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},Sb=()=>Eb(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield je(()=>Promise.resolve().then(()=>ca),void 0,import.meta.url)).Response:Response});var Ii=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{u(n.next(c))}catch(d){a(d)}}function l(c){try{u(n.throw(c))}catch(d){a(d)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((n=n.apply(t,e||[])).next())})};const bu=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),xb=(t,e)=>Ii(void 0,void 0,void 0,function*(){const r=yield Sb();t instanceof r?t.json().then(n=>{e(new kb(bu(n),t.status||500))}).catch(n=>{e(new Hf(bu(n),n))}):e(new Hf(bu(t),t))}),Tb=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};function wl(t,e,r,n,i,s){return Ii(this,void 0,void 0,function*(){return new Promise((a,o)=>{t(r,Tb(e,n,i,s)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>xb(l,o))})})}function Ic(t,e,r,n){return Ii(this,void 0,void 0,function*(){return wl(t,"GET",e,r,n)})}function Pr(t,e,r,n,i){return Ii(this,void 0,void 0,function*(){return wl(t,"POST",e,n,i,r)})}function Pb(t,e,r,n,i){return Ii(this,void 0,void 0,function*(){return wl(t,"PUT",e,n,i,r)})}function uy(t,e,r,n,i){return Ii(this,void 0,void 0,function*(){return wl(t,"DELETE",e,n,i,r)})}var bt=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{u(n.next(c))}catch(d){a(d)}}function l(c){try{u(n.throw(c))}catch(d){a(d)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((n=n.apply(t,e||[])).next())})};const Ob={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Zf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ab{constructor(e,r={},n,i){this.url=e,this.headers=r,this.bucketId=n,this.fetch=ly(i)}uploadOrUpdate(e,r,n,i){return bt(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},Zf),i),o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.append("cacheControl",a.cacheControl)):(s=n,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType);const l=this._removeEmptyFolders(r),u=this._getFinalPath(l),c=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:s,headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return c.ok?{data:{path:l},error:null}:{data:null,error:yield c.json()}}catch(s){if(ze(s))return{data:null,error:s};throw s}})}upload(e,r,n){return bt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,i){return bt(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),a=this._getFinalPath(s),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",r);try{let l;const u=Object.assign({upsert:Zf.upsert},i),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const d=yield this.fetch(o.toString(),{method:"PUT",body:l,headers:c});return d.ok?{data:{path:s},error:null}:{data:null,error:yield d.json()}}catch(l){if(ze(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e){return bt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const n=yield Pr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:this.headers}),i=new URL(this.url+n.url),s=i.searchParams.get("token");if(!s)throw new Vd("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:s},error:null}}catch(r){if(ze(r))return{data:null,error:r};throw r}})}update(e,r,n){return bt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r){return bt(this,void 0,void 0,function*(){try{return{data:yield Pr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r},{headers:this.headers}),error:null}}catch(n){if(ze(n))return{data:null,error:n};throw n}})}copy(e,r){return bt(this,void 0,void 0,function*(){try{return{data:{path:(yield Pr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r},{headers:this.headers})).Key},error:null}}catch(n){if(ze(n))return{data:null,error:n};throw n}})}createSignedUrl(e,r,n){return bt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield Pr(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(i){if(ze(i))return{data:null,error:i};throw i}})}createSignedUrls(e,r,n){return bt(this,void 0,void 0,function*(){try{const i=yield Pr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(i){if(ze(i))return{data:null,error:i};throw i}})}download(e,r){return bt(this,void 0,void 0,function*(){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),a=s?`?${s}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield Ic(this.fetch,`${this.url}/${i}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(ze(o))return{data:null,error:o};throw o}})}getPublicUrl(e,r){const n=this._getFinalPath(e),i=[],s=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";s!==""&&i.push(s);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${u}`)}}}remove(e){return bt(this,void 0,void 0,function*(){try{return{data:yield uy(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(ze(r))return{data:null,error:r};throw r}})}list(e,r,n){return bt(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Ob),r),{prefix:e||""});return{data:yield Pr(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(ze(i))return{data:null,error:i};throw i}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const Cb="2.5.4",Ib={"X-Client-Info":`storage-js/${Cb}`};var Cn=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{u(n.next(c))}catch(d){a(d)}}function l(c){try{u(n.throw(c))}catch(d){a(d)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((n=n.apply(t,e||[])).next())})};class jb{constructor(e,r={},n){this.url=e,this.headers=Object.assign(Object.assign({},Ib),r),this.fetch=ly(n)}listBuckets(){return Cn(this,void 0,void 0,function*(){try{return{data:yield Ic(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ze(e))return{data:null,error:e};throw e}})}getBucket(e){return Cn(this,void 0,void 0,function*(){try{return{data:yield Ic(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(ze(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return Cn(this,void 0,void 0,function*(){try{return{data:yield Pr(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ze(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return Cn(this,void 0,void 0,function*(){try{return{data:yield Pb(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ze(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Cn(this,void 0,void 0,function*(){try{return{data:yield Pr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(ze(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Cn(this,void 0,void 0,function*(){try{return{data:yield uy(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(ze(r))return{data:null,error:r};throw r}})}}class Rb extends jb{constructor(e,r={},n){super(e,r,n)}from(e){return new Ab(this.url,this.headers,e,this.fetch)}}const Nb="2.37.0";let ds="";typeof Deno<"u"?ds="deno":typeof document<"u"?ds="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ds="react-native":ds="node";const Lb={"X-Client-Info":`supabase-js-${ds}/${Nb}`};var $b=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{u(n.next(c))}catch(d){a(d)}}function l(c){try{u(n.throw(c))}catch(d){a(d)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((n=n.apply(t,e||[])).next())})};const Db=t=>{let e;return t?e=t:typeof fetch>"u"?e=Fd:e=fetch,(...r)=>e(...r)},Mb=()=>typeof Headers>"u"?Ud.Headers:Headers,Ub=(t,e,r)=>{const n=Db(r),i=Mb();return(s,a)=>$b(void 0,void 0,void 0,function*(){var o;const l=(o=yield e())!==null&&o!==void 0?o:t;let u=new i(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),n(s,Object.assign(Object.assign({},a),{headers:u}))})};function Fb(t){return t.replace(/\/$/,"")}function zb(t,e){const{db:r,auth:n,realtime:i,global:s}=t,{db:a,auth:o,realtime:l,global:u}=e;return{db:Object.assign(Object.assign({},a),r),auth:Object.assign(Object.assign({},o),n),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},u),s)}}function Bb(t){return Math.round(Date.now()/1e3)+t}function Vb(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const nr=()=>typeof document<"u",Xr={tested:!1,writable:!1},Ss=()=>{if(!nr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Xr.tested)return Xr.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Xr.tested=!0,Xr.writable=!0}catch{Xr.tested=!0,Xr.writable=!1}return Xr.writable};function ku(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return r.searchParams.forEach((n,i)=>{e[i]=n}),e}const cy=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>je(()=>Promise.resolve().then(()=>ca),void 0,import.meta.url).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},Hb=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",In=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},ja=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Eu=async(t,e)=>{await t.removeItem(e)};function Zb(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let r="",n,i,s,a,o,l,u,c=0;for(t=t.replace("-","+").replace("_","/");c<t.length;)a=e.indexOf(t.charAt(c++)),o=e.indexOf(t.charAt(c++)),l=e.indexOf(t.charAt(c++)),u=e.indexOf(t.charAt(c++)),n=a<<2|o>>4,i=(o&15)<<4|l>>2,s=(l&3)<<6|u,r=r+String.fromCharCode(n),l!=64&&i!=0&&(r=r+String.fromCharCode(i)),u!=64&&s!=0&&(r=r+String.fromCharCode(s));return r}class bl{constructor(){this.promise=new bl.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}bl.promiseConstructor=Promise;function Kf(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,r=t.split(".");if(r.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(r[1]))throw new Error("JWT is not valid: payload is not in base64url format");const n=r[1];return JSON.parse(Zb(n))}async function Kb(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function qb(t,e){return new Promise((n,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await t(s);if(!e(s,null,a)){n(a);return}}catch(a){if(!e(s,a)){i(a);return}}})()})}function Wb(t){return("0"+t.toString(16)).substr(-2)}function Vi(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let s=0;s<56;s++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,Wb).join("")}async function Jb(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}function Gb(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Hi(t){if(typeof crypto>"u")return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const e=await Jb(t);return Gb(e)}class Hd extends Error{constructor(e,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r}}function re(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Yb extends Hd{constructor(e,r){super(e,r),this.name="AuthApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function Qb(t){return re(t)&&t.name==="AuthApiError"}class dy extends Hd{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class ji extends Hd{constructor(e,r,n){super(e),this.name=r,this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class jn extends ji{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class Su extends ji{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class Ra extends ji{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class Na extends ji{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class qf extends ji{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class jc extends ji{constructor(e,r){super(e,"AuthRetryableFetchError",r)}}function Wf(t){return re(t)&&t.name==="AuthRetryableFetchError"}var Xb=globalThis&&globalThis.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};const hs=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),e1=[502,503,504];async function Jf(t){if(!Hb(t))throw new jc(hs(t),0);if(e1.includes(t.status))throw new jc(hs(t),t.status);let e;try{e=await t.json()}catch(r){throw new dy(hs(r),r)}throw new Yb(hs(e),t.status||500)}const t1=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function se(t,e,r,n){var i;const s=Object.assign({},n==null?void 0:n.headers);n!=null&&n.jwt&&(s.Authorization=`Bearer ${n.jwt}`);const a=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await r1(t,e,r+o,{headers:s,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function r1(t,e,r,n,i,s){const a=t1(e,n,i,s);let o;try{o=await t(r,a)}catch(l){throw console.error(l),new jc(hs(l),0)}if(o.ok||await Jf(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(l){await Jf(l)}}function kr(t){var e;let r=null;a1(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=Bb(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function Cr(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function n1(t){return{data:t,error:null}}function i1(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s}=t,a=Xb(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function s1(t){return t}function a1(t){return t.access_token&&t.refresh_token&&t.expires_in}var o1=globalThis&&globalThis.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};class l1{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=cy(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r="global"){try{return await se(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(re(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await se(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Cr})}catch(n){if(re(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=o1(e,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await se(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:i1,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(re(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await se(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Cr})}catch(r){if(re(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,i,s,a,o,l;try{const u={nextPage:null,lastPage:0,total:0},c=await se(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:s1});if(c.error)throw c.error;const d=await c.json(),h=(a=c.headers.get("x-total-count"))!==null&&a!==void 0?a:0,w=(l=(o=c.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return w.length>0&&(w.forEach(v=>{const T=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(v.split(";")[1].split("=")[1]);u[`${b}Page`]=T}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(re(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await se(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Cr})}catch(r){if(re(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){try{return await se(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Cr})}catch(n){if(re(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){try{return await se(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Cr})}catch(n){if(re(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:r,error:n}=await se(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(re(r))return{data:null,error:r};throw r}}async _deleteFactor(e){try{return{data:await se(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(re(r))return{data:null,error:r};throw r}}}const hy="2.54.0",u1="http://localhost:9999",c1="supabase.auth.token",d1={"X-Client-Info":`gotrue-js/${hy}`},Gf=10,h1={getItem:t=>Ss()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Ss()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Ss()&&globalThis.localStorage.removeItem(t)}};function Yf(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function f1(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}globalThis&&Ss()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug");class p1 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}f1();const m1={url:u1,storageKey:c1,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:d1,flowType:"implicit",debug:!1},Zi=30*1e3,Qf=3;async function g1(t,e,r){return await r()}class Zs{constructor(e){var r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Zs.nextInstanceID,Zs.nextInstanceID+=1,this.instanceID>0&&nr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},m1),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new l1({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=cy(n.fetch),this.lock=n.lock||g1,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:Ss()?this.storage=h1:(this.memoryStorage={},this.storage=Yf(this.memoryStorage)):(this.memoryStorage={},this.storage=Yf(this.memoryStorage)),nr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${hy}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=nr()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:r,error:n}=await this._getSessionFromURL(e);if(n)return this._debug("#_initialize()","error detecting session from URL",n),await this._removeSession(),{error:n};const{session:i,redirectType:s}=r;return this._debug("#_initialize()","detected session in URL",i,"redirect type",s),await this._saveSession(i),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return re(e)?{error:e}:{error:new dy("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signUp(e){var r,n,i;try{await this._removeSession();let s;if("email"in e){const{email:c,password:d,options:h}=e;let w=null,v=null;if(this.flowType==="pkce"){const T=Vi();await In(this.storage,`${this.storageKey}-code-verifier`,T),w=await Hi(T),v=T===w?"plain":"s256"}s=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:c,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:w,code_challenge_method:v},xform:kr})}else if("phone"in e){const{phone:c,password:d,options:h}=e;s=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(i=h==null?void 0:h.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:kr})}else throw new Ra("You must provide either an email or phone number and a password");const{data:a,error:o}=s;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(re(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{await this._removeSession();let r;if("email"in e){const{email:s,password:a,options:o}=e;r=await se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:kr})}else if("phone"in e){const{phone:s,password:a,options:o}=e;r=await se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:kr})}else throw new Ra("You must provide either an email or phone number and a password");const{data:n,error:i}=r;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Su}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:{user:n.user,session:n.session},error:i})}catch(r){if(re(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,i,s;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const r=await ja(this.storage,`${this.storageKey}-code-verifier`),{data:n,error:i}=await se(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:kr});return await Eu(this.storage,`${this.storageKey}-code-verifier`),i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Su}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:n,error:i})}async signInWithIdToken(e){await this._removeSession();try{const{options:r,provider:n,token:i,access_token:s,nonce:a}=e,o=await se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:kr}),{data:l,error:u}=o;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Su}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(r){if(re(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,i,s,a;try{if(await this._removeSession(),"email"in e){const{email:o,options:l}=e;let u=null,c=null;if(this.flowType==="pkce"){const h=Vi();await In(this.storage,`${this.storageKey}-code-verifier`,h),u=await Hi(h),c=h===u?"plain":"s256"}const{error:d}=await se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:o,options:l}=e,{data:u,error:c}=await se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new Ra("You must provide either an email or phone number.")}catch(o){if(re(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var r,n;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();let i,s;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,s=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:o}=await se(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:kr});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,u=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(re(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var r,n,i;try{return await this._removeSession(),await se(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:n1})}catch(s){if(re(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new jn;const{error:i}=await se(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(re(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const r=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:s}=e,{error:a}=await se(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:n,type:i,options:s}=e,{data:a,error:o}=await se(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new Ra("You must provide either an email or phone number and a type")}catch(r){if(re(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await ja(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n)return{data:{session:e},error:null};const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Cr}):await this._useSession(async r=>{var n,i;const{data:s,error:a}=r;if(a)throw a;return await se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:Cr})})}catch(r){if(re(r))return{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:i,error:s}=n;if(s)throw s;if(!i.session)throw new jn;const a=i.session;let o=null,l=null;if(this.flowType==="pkce"&&e.email!=null){const d=Vi();await In(this.storage,`${this.storageKey}-code-verifier`,d),o=await Hi(d),l=d===o?"plain":"s256"}const{data:u,error:c}=await se(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:Cr});if(c)throw c;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(n){if(re(n))return{data:{user:null},error:n};throw n}}_decodeJWT(e){return Kf(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new jn;const r=Date.now()/1e3;let n=r,i=!0,s=null;const a=Kf(e.access_token);if(a.exp&&(n=a.exp,i=n<=r),i){const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};s=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(r){if(re(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:a,error:o}=r;if(o)throw o;e=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new jn;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(re(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e){try{if(!nr())throw new Na("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Na("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new qf("Not a valid PKCE flow url.");const r=ku(window.location.href);if(e){if(!r.code)throw new qf("No code detected.");const{data:p,error:_}=await this._exchangeCodeForSession(r.code);if(_)throw _;const x=new URL(window.location.href);return x.searchParams.delete("code"),window.history.replaceState(window.history.state,"",x.toString()),{data:{session:p.session,redirectType:null},error:null}}if(r.error||r.error_description||r.error_code)throw new Na(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});const{provider_token:n,provider_refresh_token:i,access_token:s,refresh_token:a,expires_in:o,expires_at:l,token_type:u}=r;if(!s||!o||!a||!u)throw new Na("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(o);let h=c+d;l&&(h=parseInt(l));const w=h-c;w*1e3<=Zi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${d}s`);const v=h-d;c-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,h,c):c-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",v,h,c);const{data:T,error:b}=await this._getUser(s);if(b)throw b;const y={provider_token:n,provider_refresh_token:i,access_token:s,expires_in:d,expires_at:h,refresh_token:a,token_type:u,user:T.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:r.type},error:null}}catch(r){if(re(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantFlow(){const e=ku(window.location.href);return!!(nr()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=ku(window.location.href),r=await ja(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return{error:s};const a=(n=i.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(Qb(o)&&(o.status===404||o.status===401)))return{error:o}}return e!=="others"&&(await this._removeSession(),await Eu(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const r=Vb(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,i;try{const{data:{session:s},error:a}=r;if(a)throw a;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,r={}){let n=null,i=null;if(this.flowType==="pkce"){const s=Vi();await In(this.storage,`${this.storageKey}-code-verifier`,s),n=await Hi(s),i=s===n?"plain":"s256"}try{return await se(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(re(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await qb(async i=>(await Kb(i*200),this._debug(r,"refreshing attempt",i),await se(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:kr})),(i,s,a)=>a&&a.error&&Wf(a.error)&&Date.now()+(i+1)*200-n<Zi)}catch(n){if(this._debug(r,"error",n),re(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),nr()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await ja(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const i=Math.round(Date.now()/1e3),s=((e=n.expires_at)!==null&&e!==void 0?e:1/0)<i+Gf;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${Gf}s`),s){if(this.autoRefreshToken&&n.refresh_token){const{error:a}=await this._callRefreshToken(n.refresh_token);a&&(console.error(a),Wf(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new jn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new bl;const{data:s,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new jn;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const o={session:s.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(s){if(this._debug(i,"error",s),re(s)){const a={session:null,error:s};return(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,r,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,r)}catch(l){s.push(l)}});if(await Promise.all(a),s.length>0){for(let o=0;o<s.length;o+=1)console.error(s[o]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),await this._persistSession(e)}_persistSession(e){return this._debug("#_persistSession()",e),In(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Eu(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&nr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Zi);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/Zi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Zi}ms, refresh threshold is ${Qf} ticks`),i<=Qf&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof p1)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!nr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r){const n=[`provider=${encodeURIComponent(e)}`];if(r!=null&&r.redirectTo&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const i=Vi();await In(this.storage,`${this.storageKey}-code-verifier`,i);const s=await Hi(i),a=i===s?"plain":"s256";this._debug("PKCE","code verifier",`${i.substring(0,5)}...`,"code challenge",s,"method",a);const o=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});n.push(o.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);n.push(i.toString())}return`${this.url}/authorize?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;return s?{data:null,error:s}:await se(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(re(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,i;const{data:s,error:a}=r;if(a)return{data:null,error:a};const{data:o,error:l}=await se(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(!((i=o==null?void 0:o.totp)===null||i===void 0)&&i.qr_code&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(r){if(re(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return{data:null,error:s};const{data:a,error:o}=await se(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(r){if(re(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;return s?{data:null,error:s}:await se(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(re(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(e==null?void 0:e.factors)||[],i=n.filter(s=>s.factor_type==="totp"&&s.status==="verified");return{data:{all:n,totp:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const a=this._decodeJWT(i.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((n=(r=i.user.factors)===null||r===void 0?void 0:r.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const c=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}}Zs.nextInstanceID=0;class y1 extends Zs{constructor(e){super(e)}}var v1=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{u(n.next(c))}catch(d){a(d)}}function l(c){try{u(n.throw(c))}catch(d){a(d)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((n=n.apply(t,e||[])).next())})};const _1={headers:Lb},w1={schema:"public"},b1={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},k1={};class E1{constructor(e,r,n){var i,s,a,o,l,u,c,d;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const h=Fb(e);this.realtimeUrl=`${h}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${h}/auth/v1`,this.storageUrl=`${h}/storage/v1`,this.functionsUrl=`${h}/functions/v1`;const w=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,v={db:w1,realtime:k1,auth:Object.assign(Object.assign({},b1),{storageKey:w}),global:_1},T=zb(n??{},v);this.storageKey=(s=(i=T.auth)===null||i===void 0?void 0:i.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=(a=T.global)===null||a===void 0?void 0:a.headers)!==null&&o!==void 0?o:{},this.auth=this._initSupabaseAuthClient((l=T.auth)!==null&&l!==void 0?l:{},this.headers,(u=T.global)===null||u===void 0?void 0:u.fetch),this.fetch=Ub(r,this._getAccessToken.bind(this),(c=T.global)===null||c===void 0?void 0:c.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},T.realtime)),this.rest=new zd(`${h}/rest/v1`,{headers:this.headers,schema:(d=T.db)===null||d===void 0?void 0:d.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new L0(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Rb(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return v1(this,void 0,void 0,function*(){const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,storageKey:s,flowType:a,debug:o},l,u){const c={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new y1({url:this.authUrl,headers:Object.assign(Object.assign({},c),l),storageKey:s,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,flowType:a,debug:o,fetch:u})}_initRealtimeClient(e){return new bb(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.realtime.setAuth(n??null),this.changedAccessToken=n):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const S1=(t,e,r)=>new E1(t,e,r),x1="https://xrxqgzrdxkvoszkhvnzg.supabase.co",T1="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhyeHFnenJkeGt2b3N6a2h2bnpnIiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTYxMDY2NDgsImV4cCI6MjAxMTY4MjY0OH0.7wQAVyg2lK41GxRae6B-lmEYR1ahWCHBDWoS09aiOnw",Ri=S1(x1,T1),P1=async()=>{const{data:t,error:e}=await Ri.from("events").select("*").order("timestamp",{ascending:!1}).limit(1);if(e){console.log("Error",e);return}return console.log("Data",t),t},O1=async t=>{const e=new Date;e.setDate(e.getDate()-7);const{data:r,error:n}=await Ri.from("events").select("*").eq("clientId",t).gte("timestamp",e.toISOString());return n?(console.log("Error",n),[!1,"Error checking if customer is new."]):r.length<=1?[!0,"This is the first time the customer has visited the store."]:[!1,"This customer has visited the store before."]},A1=async t=>{const{data:e,error:r}=await Ri.from("events").select("*").eq("clientId",t).eq("name","cart_viewed").order("timestamp",{ascending:!1}).limit(1);if(r)return console.log("Error",r),[!1,"Error checking if customer has items in their cart."];if(e.length>0){const n=e[0].detail.cart.lines.map(s=>s.merchandise.product.title),i=e[0].context.document.location.href;return[!0,`This customer has the following items in their cart: ${n.join(", ")}`,`The customer can go to their cart by clicking this link: ${i}`]}else return[!1,"This customer does not have items in their cart."]},C1=async t=>{const e=new Date;e.setDate(e.getDate()-7);const{data:r,error:n}=await Ri.from("events").select("*").eq("clientId",t).eq("name","product_viewed").gte("timestamp",e.toISOString());if(n)return console.log("Error",n),[!1,"Error checking if customer has viewed products."];if(r.length>0){const i=r.map(a=>a.detail.productVariant.product.title),s=r.map(a=>a.context.document.location.href);return[!0,`This customer has viewed the following products: ${i.join(", ")}`,`The customer can revisit these products by clicking these links: ${s.join(", ")}`]}else return[!1,"This customer has not viewed any products."]},I1=async t=>{const e=new Date;e.setMinutes(e.getMinutes()-30);const{data:r,error:n}=await Ri.from("events").select("*").eq("clientId",t).eq("name","cart_viewed").gte("timestamp",e.toISOString());return n?(console.log("Error",n),[!1,"Error checking if customer has viewed products."]):r.length>2};async function j1(){const{data:t,error:e}=await Ri.from("catalog").select("Title, Tags, Variant_Price");if(e){console.error("Error fetching data:",e);return}return t}const Dn="4.4.0";class R1{constructor(e,r){this.response=e,this.controller=r,this.decoder=new N1}async*iterMessages(){if(!this.response.body)throw this.controller.abort(),new Error("Attempted to iterate over a response with no body");const e=new pi,r=$1(this.response.body);for await(const n of r)for(const i of e.decode(n)){const s=this.decoder.decode(i);s&&(yield s)}for(const n of e.flush()){const i=this.decoder.decode(n);i&&(yield i)}}async*[Symbol.asyncIterator](){let e=!1;try{for await(const r of this.iterMessages())if(!e){if(r.data.startsWith("[DONE]")){e=!0;continue}if(r.event===null)try{yield JSON.parse(r.data)}catch(n){throw console.error("Could not parse message into JSON:",r.data),console.error("From chunk:",r.raw),n}}e=!0}catch(r){if(r instanceof Error&&r.name==="AbortError")return;throw r}finally{e||this.controller.abort()}}}class N1{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[r,n,i]=L1(e,":");return i.startsWith(" ")&&(i=i.substring(1)),r==="event"?this.event=i:r==="data"&&this.data.push(i),null}}class pi{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let r=this.decodeText(e);if(this.trailingCR&&(r="\r"+r,this.trailingCR=!1),r.endsWith("\r")&&(this.trailingCR=!0,r=r.slice(0,-1)),!r)return[];const n=pi.NEWLINE_CHARS.has(r[r.length-1]||"");let i=r.split(pi.NEWLINE_REGEXP);return i.length===1&&!n?(this.buffer.push(i[0]),[]):(this.buffer.length>0&&(i=[this.buffer.join("")+i[0],...i.slice(1)],this.buffer=[]),n||(this.buffer=[i.pop()||""]),i)}decodeText(e){var r;if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new Error(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return(r=this.textDecoder)!==null&&r!==void 0||(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new Error(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new Error("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}pi.NEWLINE_CHARS=new Set([`
`,"\r","\v","\f","","","","","\u2028","\u2029"]);pi.NEWLINE_REGEXP=/\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;function L1(t,e){const r=t.indexOf(e);return r!==-1?[t.substring(0,r),e,t.substring(r+e.length)]:[t,"",""]}function $1(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const r=await e.read();return r!=null&&r.done&&e.releaseLock(),r}catch(r){throw e.releaseLock(),r}},async return(){const r=e.cancel();return e.releaseLock(),await r,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}let _t=class Rc extends Error{constructor(e,r,n,i){super(Rc.makeMessage(r,n)),this.status=e,this.headers=i;const s=r;this.error=s,this.code=s==null?void 0:s.code,this.param=s==null?void 0:s.param,this.type=s==null?void 0:s.type}static makeMessage(e,r){return e!=null&&e.message?typeof e.message=="string"?e.message:JSON.stringify(e.message):e?JSON.stringify(e):r||"Unknown error occurred"}static generate(e,r,n,i){if(!e)return new da({cause:vy(r)});const s=r==null?void 0:r.error;return e===400?new Kd(e,s,n,i):e===401?new qd(e,s,n,i):e===403?new Wd(e,s,n,i):e===404?new Jd(e,s,n,i):e===409?new Gd(e,s,n,i):e===422?new Yd(e,s,n,i):e===429?new Qd(e,s,n,i):e>=500?new Xd(e,s,n,i):new Rc(e,s,n,i)}},Ao=class extends _t{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0),this.status=void 0}},da=class extends _t{constructor({message:e,cause:r}){super(void 0,void 0,e||"Connection error.",void 0),this.status=void 0,r&&(this.cause=r)}},Zd=class extends da{constructor(){super({message:"Request timed out."})}},Kd=class extends _t{constructor(){super(...arguments),this.status=400}},qd=class extends _t{constructor(){super(...arguments),this.status=401}},Wd=class extends _t{constructor(){super(...arguments),this.status=403}},Jd=class extends _t{constructor(){super(...arguments),this.status=404}},Gd=class extends _t{constructor(){super(...arguments),this.status=409}},Yd=class extends _t{constructor(){super(...arguments),this.status=422}},Qd=class extends _t{constructor(){super(...arguments),this.status=429}},Xd=class extends _t{};const D1=Object.freeze(Object.defineProperty({__proto__:null,APIConnectionError:da,APIConnectionTimeoutError:Zd,APIError:_t,APIUserAbortError:Ao,AuthenticationError:qd,BadRequestError:Kd,ConflictError:Gd,InternalServerError:Xd,NotFoundError:Jd,PermissionDeniedError:Wd,RateLimitError:Qd,UnprocessableEntityError:Yd},Symbol.toStringTag,{value:"Module"})),M1=t=>{},U1=fetch.bind(void 0),F1=!1,z1=FormData,Xf=typeof File<"u"?File:class extends Blob{constructor(){throw new Error("file uploads aren't supported in this environment yet as 'File' is not defined")}};async function B1(t,e){return{...e,body:new Y1(t)}}async function V1(){throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")}function H1(t){return!1}const fy=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function",Z1=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&py(t),py=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",K1=t=>Z1(t)||fy(t)||H1();async function my(t,e,r={}){var n,i,s;if(t=await t,fy(t)){const o=await t.blob();return e||(e=(n=new URL(t.url).pathname.split(/[\\/]/).pop())!==null&&n!==void 0?n:"unknown_file"),new Xf([o],e,r)}const a=await q1(t);if(e||(e=(i=J1(t))!==null&&i!==void 0?i:"unknown_file"),!r.type){const o=(s=a[0])===null||s===void 0?void 0:s.type;typeof o=="string"&&(r={...r,type:o})}return new Xf(a,e,r)}async function q1(t){var e;let r=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)r.push(t);else if(py(t))r.push(await t.arrayBuffer());else if(G1(t))for await(const n of t)r.push(n);else throw new Error(`Unexpected data type: ${typeof t}; constructor: ${(e=t==null?void 0:t.constructor)===null||e===void 0?void 0:e.name}; props: ${W1(t)}`);return r}function W1(t){return`[${Object.getOwnPropertyNames(t).map(r=>`"${r}"`).join(", ")}]`}function J1(t){var e;return xu(t.name)||xu(t.filename)||((e=xu(t.path))===null||e===void 0?void 0:e.split(/[\\/]/).pop())}const xu=t=>{if(typeof t=="string")return t;if(typeof Buffer<"u"&&t instanceof Buffer)return String(t)},G1=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";class Y1{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}const ep=t=>t&&typeof t=="object"&&t.body&&t[Symbol.toStringTag]==="MultipartBody",Ks=async t=>{const e=await Q1(t.body);return B1(e,t)},Q1=async t=>{const e=new z1;return await Promise.all(Object.entries(t||{}).map(([r,n])=>Nc(e,r,n))),e},Nc=async(t,e,r)=>{if(r!==void 0){if(r==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")t.append(e,String(r));else if(K1(r)){const n=await my(r);t.append(e,n)}else if(Array.isArray(r))await Promise.all(r.map(n=>Nc(t,e+"[]",n)));else if(typeof r=="object")await Promise.all(Object.entries(r).map(([n,i])=>Nc(t,`${e}[${n}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`)}};var X1=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},ek=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},La;const tk=2;async function gy(t){const{response:e}=t;if(t.options.stream)return new R1(e,t.controller);const r=e.headers.get("content-type");if(r!=null&&r.includes("application/json")){const i=await e.json();return Co("response",e.status,e.url,e.headers,i),i}const n=await e.text();return Co("response",e.status,e.url,e.headers,n),n}class kl extends Promise{constructor(e,r=gy){super(n=>{n(null)}),this.responsePromise=e,this.parseResponse=r}_thenUnwrap(e){return new kl(this.responsePromise,async r=>e(await this.parseResponse(r)))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,r]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:r}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,r){return this.parse().then(e,r)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class rk{constructor({baseURL:e,maxRetries:r,timeout:n=6e5,httpAgent:i,fetch:s}){this.baseURL=e,this.maxRetries=Tu("maxRetries",r??tk),this.timeout=Tu("timeout",n),this.httpAgent=i,this.fetch=s??U1}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...lk(),...this.authHeaders(e)}}validateHeaders(e,r){}defaultIdempotencyKey(){return`stainless-node-retry-${pk()}`}get(e,r){return this.methodRequest("get",e,r)}post(e,r){return this.methodRequest("post",e,r)}patch(e,r){return this.methodRequest("patch",e,r)}put(e,r){return this.methodRequest("put",e,r)}delete(e,r){return this.methodRequest("delete",e,r)}methodRequest(e,r,n){return this.request(Promise.resolve(n).then(i=>({method:e,path:r,...i})))}getAPIList(e,r,n){return this.requestAPIList(r,{method:"get",path:e,...n})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}return null}buildRequest(e){var r,n,i,s,a,o;const{method:l,path:u,query:c,headers:d={}}=e,h=ep(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,w=this.calculateContentLength(h),v=this.buildURL(u,c);"timeout"in e&&Tu("timeout",e.timeout);const T=(r=e.timeout)!==null&&r!==void 0?r:this.timeout,b=(i=(n=e.httpAgent)!==null&&n!==void 0?n:this.httpAgent)!==null&&i!==void 0?i:M1(),y=T+1e3;typeof((s=b==null?void 0:b.options)===null||s===void 0?void 0:s.timeout)=="number"&&y>((a=b.options.timeout)!==null&&a!==void 0?a:0)&&(b.options.timeout=y),this.idempotencyHeader&&l!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),d[this.idempotencyHeader]=e.idempotencyKey);const p={...w&&{"Content-Length":w},...this.defaultHeaders(e),...d};ep(e.body)&&!F1&&delete p["Content-Type"],Object.keys(p).forEach(x=>p[x]===null&&delete p[x]);const _={method:l,...h&&{body:h},headers:p,...b&&{agent:b},signal:(o=e.signal)!==null&&o!==void 0?o:null};return this.validateHeaders(p,d),{req:_,url:v,timeout:T}}async prepareRequest(e,{url:r,options:n}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(r=>[...r])):{...e}:{}}makeStatusError(e,r,n,i){return _t.generate(e,r,n,i)}request(e,r=null){return new kl(this.makeRequest(e,r))}async makeRequest(e,r){var n,i,s;const a=await e;r==null&&(r=(n=a.maxRetries)!==null&&n!==void 0?n:this.maxRetries);const{req:o,url:l,timeout:u}=this.buildRequest(a);if(await this.prepareRequest(o,{url:l,options:a}),Co("request",l,a,o.headers),!((i=a.signal)===null||i===void 0)&&i.aborted)throw new Ao;const c=new AbortController,d=await this.fetchWithTimeout(l,o,u,c).catch(vy);if(d instanceof Error){if(!((s=a.signal)===null||s===void 0)&&s.aborted)throw new Ao;if(r)return this.retryRequest(a,r);throw d.name==="AbortError"?new Zd:new da({cause:d})}const h=ik(d.headers);if(!d.ok){if(r&&this.shouldRetry(d))return this.retryRequest(a,r,h);const w=await d.text().catch(()=>"Unknown"),v=uk(w),T=v?void 0:w;throw Co("response",d.status,l,h,T),this.makeStatusError(d.status,v,T,h)}return{response:d,options:a,controller:c}}requestAPIList(e,r){const n=this.makeRequest(r,null);return new nk(this,n,e)}buildURL(e,r){const n=dk(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),i=this.defaultQuery();return _y(i)||(r={...i,...r}),r&&(n.search=this.stringifyQuery(r)),n.toString()}stringifyQuery(e){return Object.entries(e).filter(([r,n])=>typeof n<"u").map(([r,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(r)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(r)}=`;throw new Error(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,r,n,i){const{signal:s,...a}=r||{};s&&s.addEventListener("abort",()=>i.abort());const o=setTimeout(()=>i.abort(),n);return this.getRequestClient().fetch(e,{signal:i.signal,...a}).finally(()=>{clearTimeout(o)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(e){const r=e.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:e.status===409||e.status===429||e.status>=500}async retryRequest(e,r,n){var i;r-=1;const s=parseInt((n==null?void 0:n["retry-after"])||""),a=(i=e.maxRetries)!==null&&i!==void 0?i:this.maxRetries,o=this.calculateRetryTimeoutSeconds(r,s,a)*1e3;return await hk(o),this.makeRequest(e,r)}calculateRetryTimeoutSeconds(e,r,n){if(Number.isInteger(r)&&r<=60)return r;const a=n-e,o=Math.min(.5*Math.pow(a-1,2),2),l=Math.random()-.5;return o+l}getUserAgent(){return`${this.constructor.name}/JS ${Dn}`}}class yy{constructor(e,r,n,i){La.set(this,void 0),X1(this,La,e,"f"),this.options=i,this.response=r,this.body=n}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new Error("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const r={...this.options};if("params"in e)r.query={...r.query,...e.params};else if("url"in e){const n=[...Object.entries(r.query||{}),...e.url.searchParams.entries()];for(const[i,s]of n)e.url.searchParams.set(i,s);r.query=void 0,r.path=e.url.toString()}return await ek(this,La,"f").requestAPIList(this.constructor,r)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(La=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const r of e.getPaginatedItems())yield r}}class nk extends kl{constructor(e,r,n){super(r,async i=>new n(e,i.response,await gy(i),i.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const r of e)yield r}}const ik=t=>new Proxy(Object.fromEntries(t.entries()),{get(e,r){const n=r.toString();return e[n.toLowerCase()]||e[n]}}),sk={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0},tp=t=>typeof t=="object"&&t!==null&&!_y(t)&&Object.keys(t).every(e=>fk(sk,e)),ak=()=>{if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Dn,"X-Stainless-OS":np(Deno.build.os),"X-Stainless-Arch":rp(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":Deno.version};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Dn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Dn,"X-Stainless-OS":np(process.platform),"X-Stainless-Arch":rp(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const t=ok();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Dn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Dn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function ok(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:r}of t){const n=r.exec(navigator.userAgent);if(n){const i=n[1]||0,s=n[2]||0,a=n[3]||0;return{browser:e,version:`${i}.${s}.${a}`}}}return null}const rp=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",np=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let $a;const lk=()=>$a??($a=ak()),uk=t=>{try{return JSON.parse(t)}catch{return}},ck=new RegExp("^(?:[a-z]+:)?//","i"),dk=t=>ck.test(t),hk=t=>new Promise(e=>setTimeout(e,t)),Tu=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Error(`${t} must be an integer`);if(e<0)throw new Error(`${t} must be a positive integer`);return e},vy=t=>t instanceof Error?t:new Error(t),ip=t=>{var e,r,n,i;if(typeof process<"u")return(r=(e=process.env)===null||e===void 0?void 0:e[t])!==null&&r!==void 0?r:void 0;if(typeof Deno<"u")return(i=(n=Deno.env)===null||n===void 0?void 0:n.get)===null||i===void 0?void 0:i.call(n,t)};function _y(t){if(!t)return!0;for(const e in t)return!1;return!0}function fk(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Co(t,...e){typeof process<"u"&&process.env.DEBUG==="true"&&console.log(`OpenAI:DEBUG:${t}`,...e)}const pk=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)}),mk=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";class El extends yy{constructor(e,r,n,i){super(e,r,n,i),this.object=n.object,this.data=n.data}getPaginatedItems(){return this.data}nextPageParams(){return null}nextPageInfo(){return null}}class eh extends yy{constructor(e,r,n,i){super(e,r,n,i),this.data=n.data}getPaginatedItems(){return this.data}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const r=Object.fromEntries(e.url.searchParams);return Object.keys(r).length?r:null}nextPageInfo(){var e,r;if(!(!((e=this.data)===null||e===void 0)&&e.length))return null;const n=(r=this.data[this.data.length-1])===null||r===void 0?void 0:r.id;return n?{params:{after:n}}:null}}class tt{constructor(e){this.client=e,this.get=e.get.bind(e),this.post=e.post.bind(e),this.patch=e.patch.bind(e),this.put=e.put.bind(e),this.delete=e.delete.bind(e),this.getAPIList=e.getAPIList.bind(e)}}class Io extends tt{create(e,r){return this.post("/audio/transcriptions",Ks({body:e,...r}))}}Io||(Io={});class jo extends tt{create(e,r){return this.post("/audio/translations",Ks({body:e,...r}))}}jo||(jo={});class Ro extends tt{constructor(){super(...arguments),this.transcriptions=new Io(this.client),this.translations=new jo(this.client)}}(function(t){t.Transcriptions=Io,t.Translations=jo})(Ro||(Ro={}));let No=class extends tt{create(e,r){var n;return this.post("/chat/completions",{body:e,...r,stream:(n=e.stream)!==null&&n!==void 0?n:!1})}};No||(No={});class Lo extends tt{constructor(){super(...arguments),this.completions=new No(this.client)}}(function(t){t.Completions=No})(Lo||(Lo={}));class $o extends tt{create(e,r){var n;return this.post("/completions",{body:e,...r,stream:(n=e.stream)!==null&&n!==void 0?n:!1})}}$o||($o={});class Do extends tt{create(e,r){return this.post("/embeddings",{body:e,...r})}}Do||(Do={});class Mo extends tt{create(e,r){return this.post("/edits",{body:e,...r})}}Mo||(Mo={});class Uo extends tt{create(e,r){return this.post("/files",Ks({body:e,...r}))}retrieve(e,r){return this.get(`/files/${e}`,r)}list(e){return this.getAPIList("/files",wy,e)}del(e,r){return this.delete(`/files/${e}`,r)}retrieveContent(e,r){return this.get(`/files/${e}/content`,{...r,headers:{Accept:"application/json",...r==null?void 0:r.headers}})}}class wy extends El{}Uo||(Uo={});class Fo extends tt{create(e,r){return this.post("/fine-tunes",{body:e,...r})}retrieve(e,r){return this.get(`/fine-tunes/${e}`,r)}list(e){return this.getAPIList("/fine-tunes",by,e)}cancel(e,r){return this.post(`/fine-tunes/${e}/cancel`,r)}listEvents(e,r,n){var i;return this.get(`/fine-tunes/${e}/events`,{query:r,timeout:864e5,...n,stream:(i=r==null?void 0:r.stream)!==null&&i!==void 0?i:!1})}}class by extends El{}Fo||(Fo={});class zo extends tt{create(e,r){return this.post("/fine_tuning/jobs",{body:e,...r})}retrieve(e,r){return this.get(`/fine_tuning/jobs/${e}`,r)}list(e={},r){return tp(e)?this.list({},e):this.getAPIList("/fine_tuning/jobs",ky,{query:e,...r})}cancel(e,r){return this.post(`/fine_tuning/jobs/${e}/cancel`,r)}listEvents(e,r={},n){return tp(r)?this.listEvents(e,{},r):this.getAPIList(`/fine_tuning/jobs/${e}/events`,Ey,{query:r,...n})}}class ky extends eh{}class Ey extends eh{}zo||(zo={});class Bo extends tt{constructor(){super(...arguments),this.jobs=new zo(this.client)}}(function(t){t.Jobs=zo,t.FineTuningJobsPage=ky,t.FineTuningJobEventsPage=Ey})(Bo||(Bo={}));class Vo extends tt{createVariation(e,r){return this.post("/images/variations",Ks({body:e,...r}))}edit(e,r){return this.post("/images/edits",Ks({body:e,...r}))}generate(e,r){return this.post("/images/generations",{body:e,...r})}}Vo||(Vo={});class Ho extends tt{retrieve(e,r){return this.get(`/models/${e}`,r)}list(e){return this.getAPIList("/models",Sy,e)}del(e,r){return this.delete(`/models/${e}`,r)}}class Sy extends El{}Ho||(Ho={});class Zo extends tt{create(e,r){return this.post("/moderations",{body:e,...r})}}Zo||(Zo={});var xy;class $e extends rk{constructor(e){var r,n,{apiKey:i=ip("OPENAI_API_KEY"),organization:s=(r=ip("OPENAI_ORG_ID"))!==null&&r!==void 0?r:null,...a}=e===void 0?{}:e;if(i===void 0)throw new Error("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'my apiKey' }).");const o={apiKey:i,organization:s,baseURL:"https://api.openai.com/v1",...a};if(!o.dangerouslyAllowBrowser&&mk())throw new Error(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:o.baseURL,timeout:(n=o.timeout)!==null&&n!==void 0?n:6e5,httpAgent:o.httpAgent,maxRetries:o.maxRetries,fetch:o.fetch}),this.completions=new $o(this),this.chat=new Lo(this),this.edits=new Mo(this),this.embeddings=new Do(this),this.files=new Uo(this),this.images=new Vo(this),this.audio=new Ro(this),this.moderations=new Zo(this),this.models=new Ho(this),this.fineTuning=new Bo(this),this.fineTunes=new Fo(this),this._options=o,this.apiKey=i,this.organization=s}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}}xy=$e;$e.OpenAI=xy;$e.APIError=_t;$e.APIConnectionError=da;$e.APIConnectionTimeoutError=Zd;$e.APIUserAbortError=Ao;$e.NotFoundError=Jd;$e.ConflictError=Gd;$e.RateLimitError=Qd;$e.BadRequestError=Kd;$e.AuthenticationError=qd;$e.InternalServerError=Xd;$e.PermissionDeniedError=Wd;$e.UnprocessableEntityError=Yd;const{APIError:dP,APIConnectionError:hP,APIConnectionTimeoutError:gk,APIUserAbortError:yk,NotFoundError:fP,ConflictError:pP,RateLimitError:mP,BadRequestError:gP,AuthenticationError:yP,InternalServerError:vP,PermissionDeniedError:_P,UnprocessableEntityError:wP}=D1;(function(t){t.toFile=my,t.fileFromPath=V1,t.Page=El,t.CursorPage=eh,t.Completions=$o,t.Chat=Lo,t.Edits=Mo,t.Embeddings=Do,t.Files=Uo,t.FileObjectsPage=wy,t.Images=Vo,t.Audio=Ro,t.Moderations=Zo,t.Models=Ho,t.ModelsPage=Sy,t.FineTuning=Bo,t.FineTunes=Fo,t.FineTunesPage=by})($e||($e={}));var vk=Object.defineProperty,_k=(t,e,r)=>e in t?vk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,wk=(t,e,r)=>(_k(t,typeof e!="symbol"?e+"":e,r),r),Sl={};Sl.byteLength=Ek;Sl.toByteArray=xk;Sl.fromByteArray=Ok;var Gt=[],kt=[],bk=typeof Uint8Array<"u"?Uint8Array:Array,Pu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Rn=0,kk=Pu.length;Rn<kk;++Rn)Gt[Rn]=Pu[Rn],kt[Pu.charCodeAt(Rn)]=Rn;kt["-".charCodeAt(0)]=62;kt["_".charCodeAt(0)]=63;function Ty(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function Ek(t){var e=Ty(t),r=e[0],n=e[1];return(r+n)*3/4-n}function Sk(t,e,r){return(e+r)*3/4-r}function xk(t){var e,r=Ty(t),n=r[0],i=r[1],s=new bk(Sk(t,n,i)),a=0,o=i>0?n-4:n,l;for(l=0;l<o;l+=4)e=kt[t.charCodeAt(l)]<<18|kt[t.charCodeAt(l+1)]<<12|kt[t.charCodeAt(l+2)]<<6|kt[t.charCodeAt(l+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return i===2&&(e=kt[t.charCodeAt(l)]<<2|kt[t.charCodeAt(l+1)]>>4,s[a++]=e&255),i===1&&(e=kt[t.charCodeAt(l)]<<10|kt[t.charCodeAt(l+1)]<<4|kt[t.charCodeAt(l+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function Tk(t){return Gt[t>>18&63]+Gt[t>>12&63]+Gt[t>>6&63]+Gt[t&63]}function Pk(t,e,r){for(var n,i=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(Tk(n));return i.join("")}function Ok(t){for(var e,r=t.length,n=r%3,i=[],s=16383,a=0,o=r-n;a<o;a+=s)i.push(Pk(t,a,a+s>o?o:a+s));return n===1?(e=t[r-1],i.push(Gt[e>>2]+Gt[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(Gt[e>>10]+Gt[e>>4&63]+Gt[e<<2&63]+"=")),i.join("")}function Ak(t,e){let r=Array.from({length:t.length},(n,i)=>({start:i,end:i+1}));for(;r.length>1;){let n=null;for(let i=0;i<r.length-1;i++){const s=t.slice(r[i].start,r[i+1].end),a=e.get(s.join(","));a!=null&&(n==null||a<n[0])&&(n=[a,i])}if(n!=null){const i=n[1];r[i]={start:r[i].start,end:r[i+1].end},r.splice(i+1,1)}else break}return r}function Ck(t,e){return t.length===1?[e.get(t.join(","))]:Ak(t,e).map(r=>e.get(t.slice(r.start,r.end).join(","))).filter(r=>r!=null)}function Ik(t){return t.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var Lc=class{constructor(t,e){wr(this,"specialTokens");wr(this,"inverseSpecialTokens");wr(this,"patStr");wr(this,"textEncoder",new TextEncoder);wr(this,"textDecoder",new TextDecoder("utf-8"));wr(this,"rankMap",new Map);wr(this,"textMap",new Map);this.patStr=t.pat_str;const r=t.bpe_ranks.split(`
`).filter(Boolean).reduce((n,i)=>{const[s,a,...o]=i.split(" "),l=Number.parseInt(a,10);return o.forEach((u,c)=>n[u]=l+c),n},{});for(const[n,i]of Object.entries(r)){const s=Sl.toByteArray(n);this.rankMap.set(s.join(","),i),this.textMap.set(i,s)}this.specialTokens={...t.special_tokens,...e},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((n,[i,s])=>(n[s]=this.textEncoder.encode(i),n),{})}encode(t,e=[],r="all"){const n=new RegExp(this.patStr,"ug"),i=Lc.specialTokenRegex(Object.keys(this.specialTokens)),s=[],a=new Set(e==="all"?Object.keys(this.specialTokens):e),o=new Set(r==="all"?Object.keys(this.specialTokens).filter(u=>!a.has(u)):r);if(o.size>0){const u=Lc.specialTokenRegex([...o]),c=t.match(u);if(c!=null)throw new Error(`The text contains a special token that is not allowed: ${c[0]}`)}let l=0;for(;;){let u=null,c=l;for(;i.lastIndex=c,u=i.exec(t),!(u==null||a.has(u[0]));)c=u.index+1;const d=(u==null?void 0:u.index)??t.length;for(const w of t.substring(l,d).matchAll(n)){const v=this.textEncoder.encode(w[0]),T=this.rankMap.get(v.join(","));if(T!=null){s.push(T);continue}s.push(...Ck(v,this.rankMap))}if(u==null)break;let h=this.specialTokens[u[0]];s.push(h),l=u.index+u[0].length}return s}decode(t){const e=[];let r=0;for(let s=0;s<t.length;++s){const a=t[s],o=this.textMap.get(a)??this.inverseSpecialTokens[a];o!=null&&(e.push(o),r+=o.length)}const n=new Uint8Array(r);let i=0;for(const s of e)n.set(s,i),i+=s.length;return this.textDecoder.decode(n)}},Py=Lc;wk(Py,"specialTokenRegex",t=>new RegExp(t.map(e=>Ik(e)).join("|"),"g"));function jk(t){switch(t){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"text-embedding-ada-002":return"cl100k_base";default:throw new Error("Unknown model")}}var xl={exports:{}},Oy={};function jt(t,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var Rk=jt;jt.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};jt.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};jt.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=new Date().getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var r=this._timeouts.shift();if(r===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1);else return!1;var n=this;return this._timer=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},r),this._options.unref&&this._timer.unref(),!0};jt.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};jt.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)};jt.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)};jt.prototype.start=jt.prototype.try;jt.prototype.errors=function(){return this._errors};jt.prototype.attempts=function(){return this._attempts};jt.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},e=null,r=0,n=0;n<this._errors.length;n++){var i=this._errors[n],s=i.message,a=(t[s]||0)+1;t[s]=a,a>=r&&(e=i,r=a)}return e};(function(t){var e=Rk;t.operation=function(r){var n=t.timeouts(r);return new e(n,{forever:r&&(r.forever||r.retries===1/0),unref:r&&r.unref,maxRetryTime:r&&r.maxRetryTime})},t.timeouts=function(r){if(r instanceof Array)return[].concat(r);var n={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var i in r)n[i]=r[i];if(n.minTimeout>n.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var s=[],a=0;a<n.retries;a++)s.push(this.createTimeout(a,n));return r&&r.forever&&!s.length&&s.push(this.createTimeout(a,n)),s.sort(function(o,l){return o-l}),s},t.createTimeout=function(r,n){var i=n.randomize?Math.random()+1:1,s=Math.round(i*Math.max(n.minTimeout,1)*Math.pow(n.factor,r));return s=Math.min(s,n.maxTimeout),s},t.wrap=function(r,n,i){if(n instanceof Array&&(i=n,n=null),!i){i=[];for(var s in r)typeof r[s]=="function"&&i.push(s)}for(var a=0;a<i.length;a++){var o=i[a],l=r[o];r[o]=(function(c){var d=t.operation(n),h=Array.prototype.slice.call(arguments,1),w=h.pop();h.push(function(v){d.retry(v)||(v&&(arguments[0]=d.mainError()),w.apply(this,arguments))}),d.attempt(function(){c.apply(r,h)})}).bind(r,l),r[o].options=n}}})(Oy);var Nk=Oy;const Lk=Nk,$k=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class Ay extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}const Dk=(t,e,r)=>{const n=r.retries-(e-1);return t.attemptNumber=e,t.retriesLeft=n,t},Mk=t=>$k.includes(t),Cy=(t,e)=>new Promise((r,n)=>{e={onFailedAttempt:()=>{},retries:10,...e};const i=Lk.operation(e);i.attempt(async s=>{try{r(await t(s))}catch(a){if(!(a instanceof Error)){n(new TypeError(`Non-error was thrown: "${a}". You should only throw errors.`));return}if(a instanceof Ay)i.stop(),n(a.originalError);else if(a instanceof TypeError&&!Mk(a.message))i.stop(),n(a);else{Dk(a,s,e);try{await e.onFailedAttempt(a)}catch(o){n(o);return}i.retry(a)||n(i.mainError())}}})});xl.exports=Cy;xl.exports.default=Cy;xl.exports.AbortError=Ay;var Uk=xl.exports;const Ko=ia(Uk);var Iy={},jy={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function s(l,u,c,d,h){if(typeof c!="function")throw new TypeError("The listener must be a function");var w=new i(c,d||l,h),v=r?r+u:u;return l._events[v]?l._events[v].fn?l._events[v]=[l._events[v],w]:l._events[v].push(w):(l._events[v]=w,l._eventsCount++),l}function a(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],c,d;if(this._eventsCount===0)return u;for(d in c=this._events)e.call(c,d)&&u.push(r?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},o.prototype.listeners=function(u){var c=r?r+u:u,d=this._events[c];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,w=d.length,v=new Array(w);h<w;h++)v[h]=d[h].fn;return v},o.prototype.listenerCount=function(u){var c=r?r+u:u,d=this._events[c];return d?d.fn?1:d.length:0},o.prototype.emit=function(u,c,d,h,w,v){var T=r?r+u:u;if(!this._events[T])return!1;var b=this._events[T],y=arguments.length,p,_;if(b.fn){switch(b.once&&this.removeListener(u,b.fn,void 0,!0),y){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,c),!0;case 3:return b.fn.call(b.context,c,d),!0;case 4:return b.fn.call(b.context,c,d,h),!0;case 5:return b.fn.call(b.context,c,d,h,w),!0;case 6:return b.fn.call(b.context,c,d,h,w,v),!0}for(_=1,p=new Array(y-1);_<y;_++)p[_-1]=arguments[_];b.fn.apply(b.context,p)}else{var x=b.length,I;for(_=0;_<x;_++)switch(b[_].once&&this.removeListener(u,b[_].fn,void 0,!0),y){case 1:b[_].fn.call(b[_].context);break;case 2:b[_].fn.call(b[_].context,c);break;case 3:b[_].fn.call(b[_].context,c,d);break;case 4:b[_].fn.call(b[_].context,c,d,h);break;default:if(!p)for(I=1,p=new Array(y-1);I<y;I++)p[I-1]=arguments[I];b[_].fn.apply(b[_].context,p)}}return!0},o.prototype.on=function(u,c,d){return s(this,u,c,d,!1)},o.prototype.once=function(u,c,d){return s(this,u,c,d,!0)},o.prototype.removeListener=function(u,c,d,h){var w=r?r+u:u;if(!this._events[w])return this;if(!c)return a(this,w),this;var v=this._events[w];if(v.fn)v.fn===c&&(!h||v.once)&&(!d||v.context===d)&&a(this,w);else{for(var T=0,b=[],y=v.length;T<y;T++)(v[T].fn!==c||h&&!v[T].once||d&&v[T].context!==d)&&b.push(v[T]);b.length?this._events[w]=b.length===1?b[0]:b:a(this,w)}return this},o.prototype.removeAllListeners=function(u){var c;return u?(c=r?r+u:u,this._events[c]&&a(this,c)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,t.exports=o})(jy);var Fk=jy.exports,Tl={exports:{}},zk=(t,e)=>(e=e||(()=>{}),t.then(r=>new Promise(n=>{n(e())}).then(()=>r),r=>new Promise(n=>{n(e())}).then(()=>{throw r})));const Bk=zk;class Ry extends Error{constructor(e){super(e),this.name="TimeoutError"}}const Ny=(t,e,r)=>new Promise((n,i)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){n(t);return}const s=setTimeout(()=>{if(typeof r=="function"){try{n(r())}catch(l){i(l)}return}const a=typeof r=="string"?r:`Promise timed out after ${e} milliseconds`,o=r instanceof Error?r:new Ry(a);typeof t.cancel=="function"&&t.cancel(),i(o)},e);Bk(t.then(n,i),()=>{clearTimeout(s)})});Tl.exports=Ny;Tl.exports.default=Ny;Tl.exports.TimeoutError=Ry;var Vk=Tl.exports,th={},rh={};Object.defineProperty(rh,"__esModule",{value:!0});function Hk(t,e,r){let n=0,i=t.length;for(;i>0;){const s=i/2|0;let a=n+s;r(t[a],e)<=0?(n=++a,i-=s+1):i=s}return n}rh.default=Hk;Object.defineProperty(th,"__esModule",{value:!0});const Zk=rh;class Kk{constructor(){this._queue=[]}enqueue(e,r){r=Object.assign({priority:0},r);const n={priority:r.priority,run:e};if(this.size&&this._queue[this.size-1].priority>=r.priority){this._queue.push(n);return}const i=Zk.default(this._queue,n,(s,a)=>a.priority-s.priority);this._queue.splice(i,0,n)}dequeue(){const e=this._queue.shift();return e==null?void 0:e.run}filter(e){return this._queue.filter(r=>r.priority===e.priority).map(r=>r.run)}get size(){return this._queue.length}}th.default=Kk;Object.defineProperty(Iy,"__esModule",{value:!0});const qk=Fk,Ly=Vk,Wk=th,Da=()=>{},Jk=new Ly.TimeoutError;class Gk extends qk{constructor(e){var r,n,i,s;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=Da,this._resolveIdle=Da,e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:Wk.default},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(r=e.intervalCap)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(s=(i=e.interval)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||e.interval===0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout===!0,this._isPaused=e.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=Da,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=Da,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(this._intervalId===void 0){const r=this._intervalEnd-e;if(r<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},r)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const r=this._queue.dequeue();return r?(this.emit("active"),r(),e&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,r={}){return new Promise((n,i)=>{const s=async()=>{this._pendingCount++,this._intervalCount++;try{const a=this._timeout===void 0&&r.timeout===void 0?e():Ly.default(Promise.resolve(e()),r.timeout===void 0?this._timeout:r.timeout,()=>{(r.throwOnTimeout===void 0?this._throwOnTimeout:r.throwOnTimeout)&&i(Jk)});n(await a)}catch(a){i(a)}this._next()};this._queue.enqueue(s,r),this._tryToStartAnother(),this.emit("add")})}async addAll(e,r){return Promise.all(e.map(async n=>this.add(n,r)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(e=>{const r=this._resolveEmpty;this._resolveEmpty=()=>{r(),e()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(e=>{const r=this._resolveIdle;this._resolveIdle=()=>{r(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}var dr=Iy.default=Gk;const Yk=[400,401,402,403,404,405,406,407,408,409],Qk=t=>{var r,n;if(t.message.startsWith("Cancel")||t.message.startsWith("TimeoutError")||t.name==="TimeoutError"||t.message.startsWith("AbortError")||t.name==="AbortError"||(t==null?void 0:t.code)==="ECONNABORTED")throw t;const e=((r=t==null?void 0:t.response)==null?void 0:r.status)??(t==null?void 0:t.status);if(e&&Yk.includes(+e))throw t;if(((n=t==null?void 0:t.error)==null?void 0:n.code)==="insufficient_quota"){const i=new Error(t==null?void 0:t.message);throw i.name="InsufficientQuotaError",i}};let nh=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.onFailedAttempt=e.onFailedAttempt??Qk;const r="default"in dr?dr.default:dr;this.queue=new r({concurrency:this.maxConcurrency})}call(e,...r){return this.queue.add(()=>Ko(()=>e(...r).catch(n=>{throw n instanceof Error?n:new Error(n)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,r,...n){return e.signal?Promise.race([this.call(r,...n),new Promise((i,s)=>{var a;(a=e.signal)==null||a.addEventListener("abort",()=>{s(new Error("AbortError"))})})]):this.call(r,...n)}fetch(...e){return this.call(()=>fetch(...e).then(r=>r.ok?r:Promise.reject(r)))}};const Ma={},Xk=new nh({});async function eE(t,e){return t in Ma||(Ma[t]=Xk.fetch(`https://tiktoken.pages.dev/js/${t}.json`,{signal:e==null?void 0:e.signal}).then(r=>r.json()).catch(r=>{throw delete Ma[t],r})),new Py(await Ma[t],e==null?void 0:e.extendedSpecialTokens)}async function tE(t,e){return eE(jk(t),e)}const $c=t=>t.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":t.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":t.startsWith("gpt-4-32k")?"gpt-4-32k":t.startsWith("gpt-4-")?"gpt-4":t;var rE=function(t,e){if(typeof t!="string")throw new TypeError("Expected a string");return e=typeof e>"u"?"_":e,t.replace(/([a-z\d])([A-Z])/g,"$1"+e+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+e+"$2").toLowerCase()};const nE=ia(rE);var $y={exports:{}};const iE=/[\p{Lu}]/u,sE=/[\p{Ll}]/u,sp=/^[\p{Lu}](?![\p{Lu}])/gu,Dy=/([\p{Alpha}\p{N}_]|$)/u,My=/[_.\- ]+/,aE=new RegExp("^"+My.source),ap=new RegExp(My.source+Dy.source,"gu"),op=new RegExp("\\d+"+Dy.source,"gu"),oE=(t,e,r)=>{let n=!1,i=!1,s=!1;for(let a=0;a<t.length;a++){const o=t[a];n&&iE.test(o)?(t=t.slice(0,a)+"-"+t.slice(a),n=!1,s=i,i=!0,a++):i&&s&&sE.test(o)?(t=t.slice(0,a-1)+"-"+t.slice(a-1),s=i,i=!1,n=!0):(n=e(o)===o&&r(o)!==o,s=i,i=r(o)===o&&e(o)!==o)}return t},lE=(t,e)=>(sp.lastIndex=0,t.replace(sp,r=>e(r))),uE=(t,e)=>(ap.lastIndex=0,op.lastIndex=0,t.replace(ap,(r,n)=>e(n)).replace(op,r=>e(r))),Uy=(t,e)=>{if(!(typeof t=="string"||Array.isArray(t)))throw new TypeError("Expected the input to be `string | string[]`");if(e={pascalCase:!1,preserveConsecutiveUppercase:!1,...e},Array.isArray(t)?t=t.map(s=>s.trim()).filter(s=>s.length).join("-"):t=t.trim(),t.length===0)return"";const r=e.locale===!1?s=>s.toLowerCase():s=>s.toLocaleLowerCase(e.locale),n=e.locale===!1?s=>s.toUpperCase():s=>s.toLocaleUpperCase(e.locale);return t.length===1?e.pascalCase?n(t):r(t):(t!==r(t)&&(t=oE(t,r,n)),t=t.replace(aE,""),e.preserveConsecutiveUppercase?t=lE(t,r):t=r(t),e.pascalCase&&(t=n(t.charAt(0))+t.slice(1)),uE(t,n))};$y.exports=Uy;$y.exports.default=Uy;function cE(t,e){return(e==null?void 0:e[t])||nE(t)}function dE(t,e,r){const n={};for(const i in t)Object.hasOwn(t,i)&&(n[e(i,r)]=t[i]);return n}function lp(t){return Array.isArray(t)?[...t]:{...t}}function hE(t,e){const r=lp(t);for(const[n,i]of Object.entries(e)){const[s,...a]=n.split(".").reverse();let o=r;for(const l of a.reverse()){if(o[l]===void 0)break;o[l]=lp(o[l]),o=o[l]}o[s]!==void 0&&(o[s]={lc:1,type:"secret",id:[i]})}return r}function Fy(t){const e=Object.getPrototypeOf(t);return typeof t.lc_name=="function"&&(typeof e.lc_name!="function"||t.lc_name()!==e.lc_name())?t.lc_name():t.name}class Zr{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,Fy(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}constructor(e,...r){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_kwargs=e||{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof Zr||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},r={},n=Object.keys(this.lc_kwargs).reduce((i,s)=>(i[s]=s in this?this[s]:this.lc_kwargs[s],i),{});for(let i=Object.getPrototypeOf(this);i;i=Object.getPrototypeOf(i))Object.assign(e,Reflect.get(i,"lc_aliases",this)),Object.assign(r,Reflect.get(i,"lc_secrets",this)),Object.assign(n,Reflect.get(i,"lc_attributes",this));return Object.keys(r).forEach(i=>{let s=this,a=n;const[o,...l]=i.split(".").reverse();for(const u of l.reverse()){if(!(u in s)||s[u]===void 0)return;(!(u in a)||a[u]===void 0)&&(typeof s[u]=="object"&&s[u]!=null?a[u]={}:Array.isArray(s[u])&&(a[u]=[])),s=s[u],a=a[u]}o in s&&s[o]!==void 0&&(a[o]=a[o]||s[o])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:dE(Object.keys(r).length?hE(n,r):n,cE,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}const zy="__run";class ih{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new ih({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}}class zr extends Zr{get text(){return this.content}constructor(e,r){typeof e=="string"&&(e={content:e,additional_kwargs:r}),e.additional_kwargs||(e.additional_kwargs={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","schema"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}}class ha extends zr{static _mergeAdditionalKwargs(e,r){const n={...e};for(const[i,s]of Object.entries(r))if(n[i]===void 0)n[i]=s;else{if(typeof n[i]!=typeof s)throw new Error(`additional_kwargs[${i}] already exists in the message chunk, but with a different type.`);if(typeof n[i]=="string")n[i]=n[i]+s;else if(!Array.isArray(n[i])&&typeof n[i]=="object")n[i]=this._mergeAdditionalKwargs(n[i],s);else throw new Error(`additional_kwargs[${i}] already exists in this message chunk.`)}return n}}class En extends zr{static lc_name(){return"HumanMessage"}_getType(){return"human"}}class qo extends ha{static lc_name(){return"HumanMessageChunk"}_getType(){return"human"}concat(e){return new qo({content:this.content+e.content,additional_kwargs:qo._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs)})}}class Pl extends zr{static lc_name(){return"AIMessage"}_getType(){return"ai"}}class Wo extends ha{static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}concat(e){return new Wo({content:this.content+e.content,additional_kwargs:Wo._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs)})}}class sh extends zr{static lc_name(){return"SystemMessage"}_getType(){return"system"}}class Jo extends ha{static lc_name(){return"SystemMessageChunk"}_getType(){return"system"}concat(e){return new Jo({content:this.content+e.content,additional_kwargs:Jo._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs)})}}class Go extends ha{static lc_name(){return"FunctionMessageChunk"}_getType(){return"function"}concat(e){return new Go({content:this.content+e.content,additional_kwargs:Go._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs),name:this.name??""})}}class Ol extends zr{static lc_name(){return"ChatMessage"}constructor(e,r){typeof e=="string"&&(e={content:e,role:r}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}static isInstance(e){return e._getType()==="generic"}}function By(t){return typeof t._getType=="function"}function xs(t){if(typeof t=="string")return new En(t);if(By(t))return t;const[e,r]=t;if(e==="human"||e==="user")return new En({content:r});if(e==="ai"||e==="assistant")return new Pl({content:r});if(e==="system")return new sh({content:r});throw new Error("Unable to coerce message from array: only human, AI, or system message coercion is currently supported.")}class Yo extends ha{static lc_name(){return"ChatMessageChunk"}constructor(e,r){typeof e=="string"&&(e={content:e,role:r}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}concat(e){return new Yo({content:this.content+e.content,additional_kwargs:Yo._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs),role:this.role})}}class ah extends ih{constructor(e){super(e),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.message=e.message}concat(e){return new ah({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo},message:this.message.concat(e.message)})}}class Vy extends Zr{}class fE extends Zr{addUserMessage(e){return this.addMessage(new En(e))}addAIChatMessage(e){return this.addMessage(new Pl(e))}}class pE{}var Hy={},Al={},Ki={},ne;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{const s={};for(const a of i)s[a]=a;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(o=>typeof i[i[o]]!="number"),a={};for(const o of s)a[o]=i[o];return t.objectValues(a)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const a in i)Object.prototype.hasOwnProperty.call(i,a)&&s.push(a);return s},t.find=(i,s)=>{for(const a of i)if(s(a))return a},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,s=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(s)}t.joinValues=n,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(ne||(ne={}));var Qo;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(Qo||(Qo={}));const B=ne.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),or=t=>{switch(typeof t){case"undefined":return B.undefined;case"string":return B.string;case"number":return isNaN(t)?B.nan:B.number;case"boolean":return B.boolean;case"function":return B.function;case"bigint":return B.bigint;case"symbol":return B.symbol;case"object":return Array.isArray(t)?B.array:t===null?B.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?B.promise:typeof Map<"u"&&t instanceof Map?B.map:typeof Set<"u"&&t instanceof Set?B.set:typeof Date<"u"&&t instanceof Date?B.date:B.object;default:return B.unknown}},D=ne.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Zy=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Ot extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const r=e||function(s){return s.message},n={_errors:[]},i=s=>{for(const a of s.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let o=n,l=0;for(;l<a.path.length;){const u=a.path[l];l===a.path.length-1?(o[u]=o[u]||{_errors:[]},o[u]._errors.push(r(a))):o[u]=o[u]||{_errors:[]},o=o[u],l++}}};return i(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,ne.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}Ot.create=t=>new Ot(t);const mi=(t,e)=>{let r;switch(t.code){case D.invalid_type:t.received===B.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case D.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,ne.jsonStringifyReplacer)}`;break;case D.unrecognized_keys:r=`Unrecognized key(s) in object: ${ne.joinValues(t.keys,", ")}`;break;case D.invalid_union:r="Invalid input";break;case D.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${ne.joinValues(t.options)}`;break;case D.invalid_enum_value:r=`Invalid enum value. Expected ${ne.joinValues(t.options)}, received '${t.received}'`;break;case D.invalid_arguments:r="Invalid function arguments";break;case D.invalid_return_type:r="Invalid function return type";break;case D.invalid_date:r="Invalid date";break;case D.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:ne.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case D.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case D.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case D.custom:r="Invalid input";break;case D.invalid_intersection_types:r="Intersection results could not be merged";break;case D.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case D.not_finite:r="Number must be finite";break;default:r=e.defaultError,ne.assertNever(t)}return{message:r}};let Ky=mi;function qy(t){Ky=t}function qs(){return Ky}const Ws=t=>{const{data:e,path:r,errorMaps:n,issueData:i}=t,s=[...r,...i.path||[]],a={...i,path:s};let o="";const l=n.filter(u=>!!u).slice().reverse();for(const u of l)o=u(a,{data:e,defaultError:o}).message;return{...i,path:s,message:i.message||o}},Wy=[];function V(t,e){const r=Ws({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,qs(),mi].filter(n=>!!n)});t.common.issues.push(r)}class De{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const i of r){if(i.status==="aborted")return Y;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const i of r)n.push({key:await i.key,value:await i.value});return De.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const i of r){const{key:s,value:a}=i;if(s.status==="aborted"||a.status==="aborted")return Y;s.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(n[s.value]=a.value)}return{status:e.value,value:n}}}const Y=Object.freeze({status:"aborted"}),oh=t=>({status:"dirty",value:t}),We=t=>({status:"valid",value:t}),Xo=t=>t.status==="aborted",el=t=>t.status==="dirty",gi=t=>t.status==="valid",Js=t=>typeof Promise<"u"&&t instanceof Promise;var K;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(K||(K={}));class tr{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const up=(t,e)=>{if(gi(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new Ot(t.common.issues);return this._error=r,this._error}}};function X(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(a,o)=>a.code!=="invalid_type"?{message:o.defaultError}:typeof o.data>"u"?{message:n??o.defaultError}:{message:r??o.defaultError},description:i}}class Q{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return or(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:or(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new De,ctx:{common:e.parent.common,data:e.data,parsedType:or(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(Js(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;const i={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:or(e)},s=this._parseSync({data:e,path:i.path,parent:i});return up(i,s)}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:or(e)},i=this._parse({data:e,path:n.path,parent:n}),s=await(Js(i)?i:Promise.resolve(i));return up(n,s)}refine(e,r){const n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,s)=>{const a=e(i),o=()=>s.addIssue({code:D.custom,...n(i)});return typeof Promise<"u"&&a instanceof Promise?a.then(l=>l?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new gt({schema:this,typeName:J.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return er.create(this,this._def)}nullable(){return Wr.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return At.create(this,this._def)}promise(){return xn.create(this,this._def)}or(e){return wi.create([this,e],this._def)}and(e){return bi.create(this,e,this._def)}transform(e){return new gt({...X(this._def),schema:this,typeName:J.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new Ti({...X(this._def),innerType:this,defaultValue:r,typeName:J.ZodDefault})}brand(){return new lh({typeName:J.ZodBranded,type:this,...X(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new Xs({...X(this._def),innerType:this,catchValue:r,typeName:J.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Ni.create(this,e)}readonly(){return ta.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const mE=/^c[^\s-]{8,}$/i,gE=/^[a-z][a-z0-9]*$/,yE=/[0-9A-HJKMNP-TV-Z]{26}/,vE=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,_E=/^([A-Z0-9_+-]+\.?)*[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,wE=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,bE=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,kE=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,EE=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function SE(t,e){return!!((e==="v4"||!e)&&bE.test(t)||(e==="v6"||!e)&&kE.test(t))}class Tt extends Q{constructor(){super(...arguments),this._regex=(e,r,n)=>this.refinement(i=>e.test(i),{validation:r,code:D.invalid_string,...K.errToObj(n)}),this.nonempty=e=>this.min(1,K.errToObj(e)),this.trim=()=>new Tt({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new Tt({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new Tt({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==B.string){const s=this._getOrReturnCtx(e);return V(s,{code:D.invalid_type,expected:B.string,received:s.parsedType}),Y}const n=new De;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),V(i,{code:D.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),V(i,{code:D.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="length"){const a=e.data.length>s.value,o=e.data.length<s.value;(a||o)&&(i=this._getOrReturnCtx(e,i),a?V(i,{code:D.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):o&&V(i,{code:D.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if(s.kind==="email")_E.test(e.data)||(i=this._getOrReturnCtx(e,i),V(i,{validation:"email",code:D.invalid_string,message:s.message}),n.dirty());else if(s.kind==="emoji")wE.test(e.data)||(i=this._getOrReturnCtx(e,i),V(i,{validation:"emoji",code:D.invalid_string,message:s.message}),n.dirty());else if(s.kind==="uuid")vE.test(e.data)||(i=this._getOrReturnCtx(e,i),V(i,{validation:"uuid",code:D.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid")mE.test(e.data)||(i=this._getOrReturnCtx(e,i),V(i,{validation:"cuid",code:D.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid2")gE.test(e.data)||(i=this._getOrReturnCtx(e,i),V(i,{validation:"cuid2",code:D.invalid_string,message:s.message}),n.dirty());else if(s.kind==="ulid")yE.test(e.data)||(i=this._getOrReturnCtx(e,i),V(i,{validation:"ulid",code:D.invalid_string,message:s.message}),n.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),V(i,{validation:"url",code:D.invalid_string,message:s.message}),n.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),V(i,{validation:"regex",code:D.invalid_string,message:s.message}),n.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),V(i,{code:D.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),V(i,{code:D.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),V(i,{code:D.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty()):s.kind==="datetime"?EE(s).test(e.data)||(i=this._getOrReturnCtx(e,i),V(i,{code:D.invalid_string,validation:"datetime",message:s.message}),n.dirty()):s.kind==="ip"?SE(e.data,s.version)||(i=this._getOrReturnCtx(e,i),V(i,{validation:"ip",code:D.invalid_string,message:s.message}),n.dirty()):ne.assertNever(s);return{status:n.value,value:e.data}}_addCheck(e){return new Tt({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...K.errToObj(e)})}url(e){return this._addCheck({kind:"url",...K.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...K.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...K.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...K.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...K.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...K.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...K.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(r=e==null?void 0:e.offset)!==null&&r!==void 0?r:!1,...K.errToObj(e==null?void 0:e.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...K.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...K.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...K.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...K.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...K.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...K.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...K.errToObj(r)})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Tt.create=t=>{var e;return new Tt({checks:[],typeName:J.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...X(t)})};function xE(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,s=parseInt(t.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return s%a/Math.pow(10,i)}class gr extends Q{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==B.number){const s=this._getOrReturnCtx(e);return V(s,{code:D.invalid_type,expected:B.number,received:s.parsedType}),Y}let n;const i=new De;for(const s of this._def.checks)s.kind==="int"?ne.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),V(n,{code:D.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),V(n,{code:D.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),V(n,{code:D.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?xE(e.data,s.value)!==0&&(n=this._getOrReturnCtx(e,n),V(n,{code:D.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),V(n,{code:D.not_finite,message:s.message}),i.dirty()):ne.assertNever(s);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,K.toString(r))}gt(e,r){return this.setLimit("min",e,!1,K.toString(r))}lte(e,r){return this.setLimit("max",e,!0,K.toString(r))}lt(e,r){return this.setLimit("max",e,!1,K.toString(r))}setLimit(e,r,n,i){return new gr({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:K.toString(i)}]})}_addCheck(e){return new gr({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:K.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:K.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:K.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:K.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:K.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:K.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:K.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:K.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:K.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ne.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}gr.create=t=>new gr({checks:[],typeName:J.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...X(t)});class yr extends Q{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==B.bigint){const s=this._getOrReturnCtx(e);return V(s,{code:D.invalid_type,expected:B.bigint,received:s.parsedType}),Y}let n;const i=new De;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),V(n,{code:D.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),V(n,{code:D.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),V(n,{code:D.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):ne.assertNever(s);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,K.toString(r))}gt(e,r){return this.setLimit("min",e,!1,K.toString(r))}lte(e,r){return this.setLimit("max",e,!0,K.toString(r))}lt(e,r){return this.setLimit("max",e,!1,K.toString(r))}setLimit(e,r,n,i){return new yr({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:K.toString(i)}]})}_addCheck(e){return new yr({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:K.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:K.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:K.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:K.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:K.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}yr.create=t=>{var e;return new yr({checks:[],typeName:J.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...X(t)})};class yi extends Q{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==B.boolean){const n=this._getOrReturnCtx(e);return V(n,{code:D.invalid_type,expected:B.boolean,received:n.parsedType}),Y}return We(e.data)}}yi.create=t=>new yi({typeName:J.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...X(t)});class Kr extends Q{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==B.date){const s=this._getOrReturnCtx(e);return V(s,{code:D.invalid_type,expected:B.date,received:s.parsedType}),Y}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return V(s,{code:D.invalid_date}),Y}const n=new De;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),V(i,{code:D.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),n.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),V(i,{code:D.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),n.dirty()):ne.assertNever(s);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Kr({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:K.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:K.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}Kr.create=t=>new Kr({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:J.ZodDate,...X(t)});class Gs extends Q{_parse(e){if(this._getType(e)!==B.symbol){const n=this._getOrReturnCtx(e);return V(n,{code:D.invalid_type,expected:B.symbol,received:n.parsedType}),Y}return We(e.data)}}Gs.create=t=>new Gs({typeName:J.ZodSymbol,...X(t)});class vi extends Q{_parse(e){if(this._getType(e)!==B.undefined){const n=this._getOrReturnCtx(e);return V(n,{code:D.invalid_type,expected:B.undefined,received:n.parsedType}),Y}return We(e.data)}}vi.create=t=>new vi({typeName:J.ZodUndefined,...X(t)});class _i extends Q{_parse(e){if(this._getType(e)!==B.null){const n=this._getOrReturnCtx(e);return V(n,{code:D.invalid_type,expected:B.null,received:n.parsedType}),Y}return We(e.data)}}_i.create=t=>new _i({typeName:J.ZodNull,...X(t)});class Sn extends Q{constructor(){super(...arguments),this._any=!0}_parse(e){return We(e.data)}}Sn.create=t=>new Sn({typeName:J.ZodAny,...X(t)});class Br extends Q{constructor(){super(...arguments),this._unknown=!0}_parse(e){return We(e.data)}}Br.create=t=>new Br({typeName:J.ZodUnknown,...X(t)});class rr extends Q{_parse(e){const r=this._getOrReturnCtx(e);return V(r,{code:D.invalid_type,expected:B.never,received:r.parsedType}),Y}}rr.create=t=>new rr({typeName:J.ZodNever,...X(t)});class Ys extends Q{_parse(e){if(this._getType(e)!==B.undefined){const n=this._getOrReturnCtx(e);return V(n,{code:D.invalid_type,expected:B.void,received:n.parsedType}),Y}return We(e.data)}}Ys.create=t=>new Ys({typeName:J.ZodVoid,...X(t)});class At extends Q{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==B.array)return V(r,{code:D.invalid_type,expected:B.array,received:r.parsedType}),Y;if(i.exactLength!==null){const a=r.data.length>i.exactLength.value,o=r.data.length<i.exactLength.value;(a||o)&&(V(r,{code:a?D.too_big:D.too_small,minimum:o?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(V(r,{code:D.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(V(r,{code:D.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,o)=>i.type._parseAsync(new tr(r,a,r.path,o)))).then(a=>De.mergeArray(n,a));const s=[...r.data].map((a,o)=>i.type._parseSync(new tr(r,a,r.path,o)));return De.mergeArray(n,s)}get element(){return this._def.type}min(e,r){return new At({...this._def,minLength:{value:e,message:K.toString(r)}})}max(e,r){return new At({...this._def,maxLength:{value:e,message:K.toString(r)}})}length(e,r){return new At({...this._def,exactLength:{value:e,message:K.toString(r)}})}nonempty(e){return this.min(1,e)}}At.create=(t,e)=>new At({type:t,minLength:null,maxLength:null,exactLength:null,typeName:J.ZodArray,...X(e)});function Mn(t){if(t instanceof fe){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=er.create(Mn(n))}return new fe({...t._def,shape:()=>e})}else return t instanceof At?new At({...t._def,type:Mn(t.element)}):t instanceof er?er.create(Mn(t.unwrap())):t instanceof Wr?Wr.create(Mn(t.unwrap())):t instanceof Ht?Ht.create(t.items.map(e=>Mn(e))):t}class fe extends Q{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=ne.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==B.object){const u=this._getOrReturnCtx(e);return V(u,{code:D.invalid_type,expected:B.object,received:u.parsedType}),Y}const{status:n,ctx:i}=this._processInputParams(e),{shape:s,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof rr&&this._def.unknownKeys==="strip"))for(const u in i.data)a.includes(u)||o.push(u);const l=[];for(const u of a){const c=s[u],d=i.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new tr(i,d,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof rr){const u=this._def.unknownKeys;if(u==="passthrough")for(const c of o)l.push({key:{status:"valid",value:c},value:{status:"valid",value:i.data[c]}});else if(u==="strict")o.length>0&&(V(i,{code:D.unrecognized_keys,keys:o}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const c of o){const d=i.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new tr(i,d,i.path,c)),alwaysSet:c in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const c of l){const d=await c.key;u.push({key:d,value:await c.value,alwaysSet:c.alwaysSet})}return u}).then(u=>De.mergeObjectSync(n,u)):De.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(e){return K.errToObj,new fe({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,s,a,o;const l=(a=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,r,n).message)!==null&&a!==void 0?a:n.defaultError;return r.code==="unrecognized_keys"?{message:(o=K.errToObj(e).message)!==null&&o!==void 0?o:l}:{message:l}}}:{}})}strip(){return new fe({...this._def,unknownKeys:"strip"})}passthrough(){return new fe({...this._def,unknownKeys:"passthrough"})}extend(e){return new fe({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new fe({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:J.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new fe({...this._def,catchall:e})}pick(e){const r={};return ne.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new fe({...this._def,shape:()=>r})}omit(e){const r={};return ne.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new fe({...this._def,shape:()=>r})}deepPartial(){return Mn(this)}partial(e){const r={};return ne.objectKeys(this.shape).forEach(n=>{const i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new fe({...this._def,shape:()=>r})}required(e){const r={};return ne.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let s=this.shape[n];for(;s instanceof er;)s=s._def.innerType;r[n]=s}}),new fe({...this._def,shape:()=>r})}keyof(){return Jy(ne.objectKeys(this.shape))}}fe.create=(t,e)=>new fe({shape:()=>t,unknownKeys:"strip",catchall:rr.create(),typeName:J.ZodObject,...X(e)});fe.strictCreate=(t,e)=>new fe({shape:()=>t,unknownKeys:"strict",catchall:rr.create(),typeName:J.ZodObject,...X(e)});fe.lazycreate=(t,e)=>new fe({shape:t,unknownKeys:"strip",catchall:rr.create(),typeName:J.ZodObject,...X(e)});class wi extends Q{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function i(s){for(const o of s)if(o.result.status==="valid")return o.result;for(const o of s)if(o.result.status==="dirty")return r.common.issues.push(...o.ctx.common.issues),o.result;const a=s.map(o=>new Ot(o.ctx.common.issues));return V(r,{code:D.invalid_union,unionErrors:a}),Y}if(r.common.async)return Promise.all(n.map(async s=>{const a={...r,common:{...r.common,issues:[]},parent:null};return{result:await s._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(i);{let s;const a=[];for(const l of n){const u={...r,common:{...r.common,issues:[]},parent:null},c=l._parseSync({data:r.data,path:r.path,parent:u});if(c.status==="valid")return c;c.status==="dirty"&&!s&&(s={result:c,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(s)return r.common.issues.push(...s.ctx.common.issues),s.result;const o=a.map(l=>new Ot(l));return V(r,{code:D.invalid_union,unionErrors:o}),Y}}get options(){return this._def.options}}wi.create=(t,e)=>new wi({options:t,typeName:J.ZodUnion,...X(e)});const eo=t=>t instanceof Ei?eo(t.schema):t instanceof gt?eo(t.innerType()):t instanceof Si?[t.value]:t instanceof vr?t.options:t instanceof xi?Object.keys(t.enum):t instanceof Ti?eo(t._def.innerType):t instanceof vi?[void 0]:t instanceof _i?[null]:null;class fa extends Q{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==B.object)return V(r,{code:D.invalid_type,expected:B.object,received:r.parsedType}),Y;const n=this.discriminator,i=r.data[n],s=this.optionsMap.get(i);return s?r.common.async?s._parseAsync({data:r.data,path:r.path,parent:r}):s._parseSync({data:r.data,path:r.path,parent:r}):(V(r,{code:D.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Y)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){const i=new Map;for(const s of r){const a=eo(s.shape[e]);if(!a)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of a){if(i.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);i.set(o,s)}}return new fa({typeName:J.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...X(n)})}}function Dc(t,e){const r=or(t),n=or(e);if(t===e)return{valid:!0,data:t};if(r===B.object&&n===B.object){const i=ne.objectKeys(e),s=ne.objectKeys(t).filter(o=>i.indexOf(o)!==-1),a={...t,...e};for(const o of s){const l=Dc(t[o],e[o]);if(!l.valid)return{valid:!1};a[o]=l.data}return{valid:!0,data:a}}else if(r===B.array&&n===B.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const a=t[s],o=e[s],l=Dc(a,o);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return r===B.date&&n===B.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class bi extends Q{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=(s,a)=>{if(Xo(s)||Xo(a))return Y;const o=Dc(s.value,a.value);return o.valid?((el(s)||el(a))&&r.dirty(),{status:r.value,value:o.data}):(V(n,{code:D.invalid_intersection_types}),Y)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([s,a])=>i(s,a)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}bi.create=(t,e,r)=>new bi({left:t,right:e,typeName:J.ZodIntersection,...X(r)});class Ht extends Q{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==B.array)return V(n,{code:D.invalid_type,expected:B.array,received:n.parsedType}),Y;if(n.data.length<this._def.items.length)return V(n,{code:D.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Y;!this._def.rest&&n.data.length>this._def.items.length&&(V(n,{code:D.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const s=[...n.data].map((a,o)=>{const l=this._def.items[o]||this._def.rest;return l?l._parse(new tr(n,a,n.path,o)):null}).filter(a=>!!a);return n.common.async?Promise.all(s).then(a=>De.mergeArray(r,a)):De.mergeArray(r,s)}get items(){return this._def.items}rest(e){return new Ht({...this._def,rest:e})}}Ht.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ht({items:t,typeName:J.ZodTuple,rest:null,...X(e)})};class ki extends Q{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==B.object)return V(n,{code:D.invalid_type,expected:B.object,received:n.parsedType}),Y;const i=[],s=this._def.keyType,a=this._def.valueType;for(const o in n.data)i.push({key:s._parse(new tr(n,o,n.path,o)),value:a._parse(new tr(n,n.data[o],n.path,o))});return n.common.async?De.mergeObjectAsync(r,i):De.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof Q?new ki({keyType:e,valueType:r,typeName:J.ZodRecord,...X(n)}):new ki({keyType:Tt.create(),valueType:e,typeName:J.ZodRecord,...X(r)})}}class Qs extends Q{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==B.map)return V(n,{code:D.invalid_type,expected:B.map,received:n.parsedType}),Y;const i=this._def.keyType,s=this._def.valueType,a=[...n.data.entries()].map(([o,l],u)=>({key:i._parse(new tr(n,o,n.path,[u,"key"])),value:s._parse(new tr(n,l,n.path,[u,"value"]))}));if(n.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const l of a){const u=await l.key,c=await l.value;if(u.status==="aborted"||c.status==="aborted")return Y;(u.status==="dirty"||c.status==="dirty")&&r.dirty(),o.set(u.value,c.value)}return{status:r.value,value:o}})}else{const o=new Map;for(const l of a){const u=l.key,c=l.value;if(u.status==="aborted"||c.status==="aborted")return Y;(u.status==="dirty"||c.status==="dirty")&&r.dirty(),o.set(u.value,c.value)}return{status:r.value,value:o}}}}Qs.create=(t,e,r)=>new Qs({valueType:e,keyType:t,typeName:J.ZodMap,...X(r)});class qr extends Q{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==B.set)return V(n,{code:D.invalid_type,expected:B.set,received:n.parsedType}),Y;const i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(V(n,{code:D.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(V(n,{code:D.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());const s=this._def.valueType;function a(l){const u=new Set;for(const c of l){if(c.status==="aborted")return Y;c.status==="dirty"&&r.dirty(),u.add(c.value)}return{status:r.value,value:u}}const o=[...n.data.values()].map((l,u)=>s._parse(new tr(n,l,n.path,u)));return n.common.async?Promise.all(o).then(l=>a(l)):a(o)}min(e,r){return new qr({...this._def,minSize:{value:e,message:K.toString(r)}})}max(e,r){return new qr({...this._def,maxSize:{value:e,message:K.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}qr.create=(t,e)=>new qr({valueType:t,minSize:null,maxSize:null,typeName:J.ZodSet,...X(e)});class gn extends Q{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==B.function)return V(r,{code:D.invalid_type,expected:B.function,received:r.parsedType}),Y;function n(o,l){return Ws({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,qs(),mi].filter(u=>!!u),issueData:{code:D.invalid_arguments,argumentsError:l}})}function i(o,l){return Ws({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,qs(),mi].filter(u=>!!u),issueData:{code:D.invalid_return_type,returnTypeError:l}})}const s={errorMap:r.common.contextualErrorMap},a=r.data;if(this._def.returns instanceof xn){const o=this;return We(async function(...l){const u=new Ot([]),c=await o._def.args.parseAsync(l,s).catch(w=>{throw u.addIssue(n(l,w)),u}),d=await Reflect.apply(a,this,c);return await o._def.returns._def.type.parseAsync(d,s).catch(w=>{throw u.addIssue(i(d,w)),u})})}else{const o=this;return We(function(...l){const u=o._def.args.safeParse(l,s);if(!u.success)throw new Ot([n(l,u.error)]);const c=Reflect.apply(a,this,u.data),d=o._def.returns.safeParse(c,s);if(!d.success)throw new Ot([i(c,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new gn({...this._def,args:Ht.create(e).rest(Br.create())})}returns(e){return new gn({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new gn({args:e||Ht.create([]).rest(Br.create()),returns:r||Br.create(),typeName:J.ZodFunction,...X(n)})}}class Ei extends Q{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}Ei.create=(t,e)=>new Ei({getter:t,typeName:J.ZodLazy,...X(e)});class Si extends Q{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return V(r,{received:r.data,code:D.invalid_literal,expected:this._def.value}),Y}return{status:"valid",value:e.data}}get value(){return this._def.value}}Si.create=(t,e)=>new Si({value:t,typeName:J.ZodLiteral,...X(e)});function Jy(t,e){return new vr({values:t,typeName:J.ZodEnum,...X(e)})}class vr extends Q{_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return V(r,{expected:ne.joinValues(n),received:r.parsedType,code:D.invalid_type}),Y}if(this._def.values.indexOf(e.data)===-1){const r=this._getOrReturnCtx(e),n=this._def.values;return V(r,{received:r.data,code:D.invalid_enum_value,options:n}),Y}return We(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e){return vr.create(e)}exclude(e){return vr.create(this.options.filter(r=>!e.includes(r)))}}vr.create=Jy;class xi extends Q{_parse(e){const r=ne.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==B.string&&n.parsedType!==B.number){const i=ne.objectValues(r);return V(n,{expected:ne.joinValues(i),received:n.parsedType,code:D.invalid_type}),Y}if(r.indexOf(e.data)===-1){const i=ne.objectValues(r);return V(n,{received:n.data,code:D.invalid_enum_value,options:i}),Y}return We(e.data)}get enum(){return this._def.values}}xi.create=(t,e)=>new xi({values:t,typeName:J.ZodNativeEnum,...X(e)});class xn extends Q{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==B.promise&&r.common.async===!1)return V(r,{code:D.invalid_type,expected:B.promise,received:r.parsedType}),Y;const n=r.parsedType===B.promise?r.data:Promise.resolve(r.data);return We(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}}xn.create=(t,e)=>new xn({type:t,typeName:J.ZodPromise,...X(e)});class gt extends Q{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===J.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:a=>{V(n,a),a.fatal?r.abort():r.dirty()},get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const a=i.transform(n.data,s);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(a).then(o=>this._def.schema._parseAsync({data:o,path:n.path,parent:n})):this._def.schema._parseSync({data:a,path:n.path,parent:n})}if(i.type==="refinement"){const a=o=>{const l=i.refinement(o,s);if(n.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?Y:(o.status==="dirty"&&r.dirty(),a(o.value),{status:r.value,value:o.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>o.status==="aborted"?Y:(o.status==="dirty"&&r.dirty(),a(o.value).then(()=>({status:r.value,value:o.value}))))}if(i.type==="transform")if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!gi(a))return a;const o=i.transform(a.value,s);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:o}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>gi(a)?Promise.resolve(i.transform(a.value,s)).then(o=>({status:r.value,value:o})):a);ne.assertNever(i)}}gt.create=(t,e,r)=>new gt({schema:t,typeName:J.ZodEffects,effect:e,...X(r)});gt.createWithPreprocess=(t,e,r)=>new gt({schema:e,effect:{type:"preprocess",transform:t},typeName:J.ZodEffects,...X(r)});class er extends Q{_parse(e){return this._getType(e)===B.undefined?We(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}er.create=(t,e)=>new er({innerType:t,typeName:J.ZodOptional,...X(e)});class Wr extends Q{_parse(e){return this._getType(e)===B.null?We(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Wr.create=(t,e)=>new Wr({innerType:t,typeName:J.ZodNullable,...X(e)});class Ti extends Q{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===B.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}Ti.create=(t,e)=>new Ti({innerType:t,typeName:J.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...X(e)});class Xs extends Q{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Js(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ot(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ot(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Xs.create=(t,e)=>new Xs({innerType:t,typeName:J.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...X(e)});class ea extends Q{_parse(e){if(this._getType(e)!==B.nan){const n=this._getOrReturnCtx(e);return V(n,{code:D.invalid_type,expected:B.nan,received:n.parsedType}),Y}return{status:"valid",value:e.data}}}ea.create=t=>new ea({typeName:J.ZodNaN,...X(t)});const Gy=Symbol("zod_brand");class lh extends Q{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class Ni extends Q{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?Y:s.status==="dirty"?(r.dirty(),oh(s.value)):this._def.out._parseAsync({data:s.value,path:n.path,parent:n})})();{const i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Y:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new Ni({in:e,out:r,typeName:J.ZodPipeline})}}class ta extends Q{_parse(e){const r=this._def.innerType._parse(e);return gi(r)&&(r.value=Object.freeze(r.value)),r}}ta.create=(t,e)=>new ta({innerType:t,typeName:J.ZodReadonly,...X(e)});const uh=(t,e={},r)=>t?Sn.create().superRefine((n,i)=>{var s,a;if(!t(n)){const o=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,l=(a=(s=o.fatal)!==null&&s!==void 0?s:r)!==null&&a!==void 0?a:!0,u=typeof o=="string"?{message:o}:o;i.addIssue({code:"custom",...u,fatal:l})}}):Sn.create(),Yy={object:fe.lazycreate};var J;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(J||(J={}));const Qy=(t,e={message:`Input not instance of ${t.name}`})=>uh(r=>r instanceof t,e),ch=Tt.create,dh=gr.create,Xy=ea.create,ev=yr.create,hh=yi.create,tv=Kr.create,rv=Gs.create,nv=vi.create,iv=_i.create,sv=Sn.create,av=Br.create,ov=rr.create,lv=Ys.create,uv=At.create,cv=fe.create,dv=fe.strictCreate,hv=wi.create,fv=fa.create,pv=bi.create,mv=Ht.create,gv=ki.create,yv=Qs.create,vv=qr.create,_v=gn.create,wv=Ei.create,bv=Si.create,kv=vr.create,Ev=xi.create,Sv=xn.create,tl=gt.create,xv=er.create,Tv=Wr.create,Pv=gt.createWithPreprocess,Ov=Ni.create,Av=()=>ch().optional(),Cv=()=>dh().optional(),Iv=()=>hh().optional(),jv={string:t=>Tt.create({...t,coerce:!0}),number:t=>gr.create({...t,coerce:!0}),boolean:t=>yi.create({...t,coerce:!0}),bigint:t=>yr.create({...t,coerce:!0}),date:t=>Kr.create({...t,coerce:!0})},Rv=Y;var cp=Object.freeze({__proto__:null,defaultErrorMap:mi,setErrorMap:qy,getErrorMap:qs,makeIssue:Ws,EMPTY_PATH:Wy,addIssueToContext:V,ParseStatus:De,INVALID:Y,DIRTY:oh,OK:We,isAborted:Xo,isDirty:el,isValid:gi,isAsync:Js,get util(){return ne},get objectUtil(){return Qo},ZodParsedType:B,getParsedType:or,ZodType:Q,ZodString:Tt,ZodNumber:gr,ZodBigInt:yr,ZodBoolean:yi,ZodDate:Kr,ZodSymbol:Gs,ZodUndefined:vi,ZodNull:_i,ZodAny:Sn,ZodUnknown:Br,ZodNever:rr,ZodVoid:Ys,ZodArray:At,ZodObject:fe,ZodUnion:wi,ZodDiscriminatedUnion:fa,ZodIntersection:bi,ZodTuple:Ht,ZodRecord:ki,ZodMap:Qs,ZodSet:qr,ZodFunction:gn,ZodLazy:Ei,ZodLiteral:Si,ZodEnum:vr,ZodNativeEnum:xi,ZodPromise:xn,ZodEffects:gt,ZodTransformer:gt,ZodOptional:er,ZodNullable:Wr,ZodDefault:Ti,ZodCatch:Xs,ZodNaN:ea,BRAND:Gy,ZodBranded:lh,ZodPipeline:Ni,ZodReadonly:ta,custom:uh,Schema:Q,ZodSchema:Q,late:Yy,get ZodFirstPartyTypeKind(){return J},coerce:jv,any:sv,array:uv,bigint:ev,boolean:hh,date:tv,discriminatedUnion:fv,effect:tl,enum:kv,function:_v,instanceof:Qy,intersection:pv,lazy:wv,literal:bv,map:yv,nan:Xy,nativeEnum:Ev,never:ov,null:iv,nullable:Tv,number:dh,object:cv,oboolean:Iv,onumber:Cv,optional:xv,ostring:Av,pipeline:Ov,preprocess:Pv,promise:Sv,record:gv,set:vv,strictObject:dv,string:ch,symbol:rv,transformer:tl,tuple:mv,undefined:nv,union:hv,unknown:av,void:lv,NEVER:Rv,ZodIssueCode:D,quotelessJson:Zy,ZodError:Ot});const TE=Object.freeze(Object.defineProperty({__proto__:null,BRAND:Gy,DIRTY:oh,EMPTY_PATH:Wy,INVALID:Y,NEVER:Rv,OK:We,ParseStatus:De,Schema:Q,ZodAny:Sn,ZodArray:At,ZodBigInt:yr,ZodBoolean:yi,ZodBranded:lh,ZodCatch:Xs,ZodDate:Kr,ZodDefault:Ti,ZodDiscriminatedUnion:fa,ZodEffects:gt,ZodEnum:vr,ZodError:Ot,get ZodFirstPartyTypeKind(){return J},ZodFunction:gn,ZodIntersection:bi,ZodIssueCode:D,ZodLazy:Ei,ZodLiteral:Si,ZodMap:Qs,ZodNaN:ea,ZodNativeEnum:xi,ZodNever:rr,ZodNull:_i,ZodNullable:Wr,ZodNumber:gr,ZodObject:fe,ZodOptional:er,ZodParsedType:B,ZodPipeline:Ni,ZodPromise:xn,ZodReadonly:ta,ZodRecord:ki,ZodSchema:Q,ZodSet:qr,ZodString:Tt,ZodSymbol:Gs,ZodTransformer:gt,ZodTuple:Ht,ZodType:Q,ZodUndefined:vi,ZodUnion:wi,ZodUnknown:Br,ZodVoid:Ys,addIssueToContext:V,any:sv,array:uv,bigint:ev,boolean:hh,coerce:jv,custom:uh,date:tv,default:cp,defaultErrorMap:mi,discriminatedUnion:fv,effect:tl,enum:kv,function:_v,getErrorMap:qs,getParsedType:or,instanceof:Qy,intersection:pv,isAborted:Xo,isAsync:Js,isDirty:el,isValid:gi,late:Yy,lazy:wv,literal:bv,makeIssue:Ws,map:yv,nan:Xy,nativeEnum:Ev,never:ov,null:iv,nullable:Tv,number:dh,object:cv,get objectUtil(){return Qo},oboolean:Iv,onumber:Cv,optional:xv,ostring:Av,pipeline:Ov,preprocess:Pv,promise:Sv,quotelessJson:Zy,record:gv,set:vv,setErrorMap:qy,strictObject:dv,string:ch,symbol:rv,transformer:tl,tuple:mv,undefined:nv,union:hv,unknown:av,get util(){return ne},void:lv,z:cp},Symbol.toStringTag,{value:"Module"})),fh=r_(TE);var Cl={};Object.defineProperty(Cl,"__esModule",{value:!0});Cl.parseAnyDef=void 0;function PE(){return{}}Cl.parseAnyDef=PE;var qi={},Zt={};Object.defineProperty(Zt,"__esModule",{value:!0});Zt.setResponseValueAndErrors=Zt.addErrorMessage=void 0;function Nv(t,e,r,n){n!=null&&n.errorMessages&&r&&(t.errorMessage=Object.assign(Object.assign({},t.errorMessage),{[e]:r}))}Zt.addErrorMessage=Nv;function OE(t,e,r,n,i){t[e]=r,Nv(t,e,n,i)}Zt.setResponseValueAndErrors=OE;var dp;function AE(){if(dp)return qi;dp=1,Object.defineProperty(qi,"__esModule",{value:!0}),qi.parseArrayDef=void 0;const t=fh,e=Zt,r=Me();function n(i,s){var a,o;const l={type:"array"};return((o=(a=i.type)===null||a===void 0?void 0:a._def)===null||o===void 0?void 0:o.typeName)!==t.ZodFirstPartyTypeKind.ZodAny&&(l.items=(0,r.parseDef)(i.type._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"items"]}))),i.minLength&&(0,e.setResponseValueAndErrors)(l,"minItems",i.minLength.value,i.minLength.message,s),i.maxLength&&(0,e.setResponseValueAndErrors)(l,"maxItems",i.maxLength.value,i.maxLength.message,s),i.exactLength&&((0,e.setResponseValueAndErrors)(l,"minItems",i.exactLength.value,i.exactLength.message,s),(0,e.setResponseValueAndErrors)(l,"maxItems",i.exactLength.value,i.exactLength.message,s)),l}return qi.parseArrayDef=n,qi}var Il={};Object.defineProperty(Il,"__esModule",{value:!0});Il.parseBigintDef=void 0;const en=Zt;function CE(t,e){const r={type:"integer",format:"int64"};if(!t.checks)return r;for(const n of t.checks)switch(n.kind){case"min":e.target==="jsonSchema7"?n.inclusive?(0,en.setResponseValueAndErrors)(r,"minimum",n.value,n.message,e):(0,en.setResponseValueAndErrors)(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),(0,en.setResponseValueAndErrors)(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?(0,en.setResponseValueAndErrors)(r,"maximum",n.value,n.message,e):(0,en.setResponseValueAndErrors)(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),(0,en.setResponseValueAndErrors)(r,"maximum",n.value,n.message,e));break;case"multipleOf":(0,en.setResponseValueAndErrors)(r,"multipleOf",n.value,n.message,e);break}return r}Il.parseBigintDef=CE;var jl={};Object.defineProperty(jl,"__esModule",{value:!0});jl.parseBooleanDef=void 0;function IE(){return{type:"boolean"}}jl.parseBooleanDef=IE;var Wi={},hp;function jE(){if(hp)return Wi;hp=1,Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.parseBrandedDef=void 0;const t=Me();function e(r,n){return(0,t.parseDef)(r.type._def,n)}return Wi.parseBrandedDef=e,Wi}var Ji={},fp;function RE(){if(fp)return Ji;fp=1,Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.parseCatchDef=void 0;const t=Me(),e=(r,n)=>(0,t.parseDef)(r.innerType._def,n);return Ji.parseCatchDef=e,Ji}var Rl={};Object.defineProperty(Rl,"__esModule",{value:!0});Rl.parseDateDef=void 0;const pp=Zt;function NE(t,e){return e.dateStrategy=="integer"?LE(t,e):{type:"string",format:"date-time"}}Rl.parseDateDef=NE;const LE=(t,e)=>{const r={type:"integer",format:"unix-time"};for(const n of t.checks)switch(n.kind){case"min":e.target==="jsonSchema7"&&(0,pp.setResponseValueAndErrors)(r,"minimum",n.value,n.message,e);break;case"max":e.target==="jsonSchema7"&&(0,pp.setResponseValueAndErrors)(r,"maximum",n.value,n.message,e);break}return r};var Gi={},mp;function $E(){if(mp)return Gi;mp=1,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.parseDefaultDef=void 0;const t=Me();function e(r,n){return Object.assign(Object.assign({},(0,t.parseDef)(r.innerType._def,n)),{default:r.defaultValue()})}return Gi.parseDefaultDef=e,Gi}var Yi={},gp;function DE(){if(gp)return Yi;gp=1,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.parseEffectsDef=void 0;const t=Me();function e(r,n){return n.effectStrategy==="input"?(0,t.parseDef)(r.schema._def,n):{}}return Yi.parseEffectsDef=e,Yi}var Nl={};Object.defineProperty(Nl,"__esModule",{value:!0});Nl.parseEnumDef=void 0;function ME(t){return{type:"string",enum:t.values}}Nl.parseEnumDef=ME;var Qi={},yp;function UE(){if(yp)return Qi;yp=1;var t=ro&&ro.__rest||function(i,s){var a={};for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.indexOf(o)<0&&(a[o]=i[o]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(i);l<o.length;l++)s.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(i,o[l])&&(a[o[l]]=i[o[l]]);return a};Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.parseIntersectionDef=void 0;const e=Me(),r=i=>"type"in i&&i.type==="string"?!1:"allOf"in i;function n(i,s){const a=[(0,e.parseDef)(i.left._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"allOf","0"]})),(0,e.parseDef)(i.right._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"allOf","1"]}))].filter(u=>!!u);let o=s.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const l=[];return a.forEach(u=>{if(r(u))l.push(...u.allOf),u.unevaluatedProperties===void 0&&(o=void 0);else{let c=u;"additionalProperties"in u&&u.additionalProperties===!1?c=t(u,["additionalProperties"]):o=void 0,l.push(c)}}),l.length?Object.assign({allOf:l},o):void 0}return Qi.parseIntersectionDef=n,Qi}var Ll={};Object.defineProperty(Ll,"__esModule",{value:!0});Ll.parseLiteralDef=void 0;function FE(t,e){const r=typeof t.value;return r!=="bigint"&&r!=="number"&&r!=="boolean"&&r!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:r==="bigint"?"integer":r,enum:[t.value]}:{type:r==="bigint"?"integer":r,const:t.value}}Ll.parseLiteralDef=FE;var Xi={},vp;function zE(){if(vp)return Xi;vp=1,Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.parseMapDef=void 0;const t=Me();function e(r,n){const i=(0,t.parseDef)(r.keyType._def,Object.assign(Object.assign({},n),{currentPath:[...n.currentPath,"items","items","0"]}))||{},s=(0,t.parseDef)(r.valueType._def,Object.assign(Object.assign({},n),{currentPath:[...n.currentPath,"items","items","1"]}))||{};return{type:"array",maxItems:125,items:{type:"array",items:[i,s],minItems:2,maxItems:2}}}return Xi.parseMapDef=e,Xi}var $l={};Object.defineProperty($l,"__esModule",{value:!0});$l.parseNativeEnumDef=void 0;function BE(t){const e=t.values,n=Object.keys(t.values).filter(s=>typeof e[e[s]]!="number").map(s=>e[s]),i=Array.from(new Set(n.map(s=>typeof s)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:n}}$l.parseNativeEnumDef=BE;var Dl={};Object.defineProperty(Dl,"__esModule",{value:!0});Dl.parseNeverDef=void 0;function VE(){return{not:{}}}Dl.parseNeverDef=VE;var Ml={};Object.defineProperty(Ml,"__esModule",{value:!0});Ml.parseNullDef=void 0;function HE(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}Ml.parseNullDef=HE;var es={},Ou={},_p;function Lv(){return _p||(_p=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.parseUnionDef=t.primitiveMappings=void 0;const e=Me();t.primitiveMappings={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function r(i,s){if(s.target==="openApi3")return n(i,s);const a=i.options instanceof Map?Array.from(i.options.values()):i.options;if(a.every(o=>o._def.typeName in t.primitiveMappings&&(!o._def.checks||!o._def.checks.length))){const o=a.reduce((l,u)=>{const c=t.primitiveMappings[u._def.typeName];return c&&!l.includes(c)?[...l,c]:l},[]);return{type:o.length>1?o:o[0]}}else if(a.every(o=>o._def.typeName==="ZodLiteral"&&!o.description)){const o=a.reduce((l,u)=>{const c=typeof u._def.value;switch(c){case"string":case"number":case"boolean":return[...l,c];case"bigint":return[...l,"integer"];case"object":if(u._def.value===null)return[...l,"null"];case"symbol":case"undefined":case"function":default:return l}},[]);if(o.length===a.length){const l=o.filter((u,c,d)=>d.indexOf(u)===c);return{type:l.length>1?l:l[0],enum:a.reduce((u,c)=>u.includes(c._def.value)?u:[...u,c._def.value],[])}}}else if(a.every(o=>o._def.typeName==="ZodEnum"))return{type:"string",enum:a.reduce((o,l)=>[...o,...l._def.values.filter(u=>!o.includes(u))],[])};return n(i,s)}t.parseUnionDef=r;const n=(i,s)=>{const a=(i.options instanceof Map?Array.from(i.options.values()):i.options).map((o,l)=>(0,e.parseDef)(o._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"anyOf",`${l}`]}))).filter(o=>!!o&&(!s.strictUnions||typeof o=="object"&&Object.keys(o).length>0));return a.length?{anyOf:a}:void 0}}(Ou)),Ou}var wp;function ZE(){if(wp)return es;wp=1,Object.defineProperty(es,"__esModule",{value:!0}),es.parseNullableDef=void 0;const t=Me(),e=Lv();function r(n,i){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(n.innerType._def.typeName)&&(!n.innerType._def.checks||!n.innerType._def.checks.length))return i.target==="openApi3"?{type:e.primitiveMappings[n.innerType._def.typeName],nullable:!0}:{type:[e.primitiveMappings[n.innerType._def.typeName],"null"]};if(i.target==="openApi3"){const a=(0,t.parseDef)(n.innerType._def,Object.assign(Object.assign({},i),{currentPath:[...i.currentPath]}));return a&&Object.assign(Object.assign({},a),{nullable:!0})}const s=(0,t.parseDef)(n.innerType._def,Object.assign(Object.assign({},i),{currentPath:[...i.currentPath,"anyOf","0"]}));return s&&{anyOf:[s,{type:"null"}]}}return es.parseNullableDef=r,es}var Ul={};Object.defineProperty(Ul,"__esModule",{value:!0});Ul.parseNumberDef=void 0;const Er=Zt;function KE(t,e){const r={type:"number"};if(!t.checks)return r;for(const n of t.checks)switch(n.kind){case"int":r.type="integer",(0,Er.addErrorMessage)(r,"type",n.message,e);break;case"min":e.target==="jsonSchema7"?n.inclusive?(0,Er.setResponseValueAndErrors)(r,"minimum",n.value,n.message,e):(0,Er.setResponseValueAndErrors)(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),(0,Er.setResponseValueAndErrors)(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?(0,Er.setResponseValueAndErrors)(r,"maximum",n.value,n.message,e):(0,Er.setResponseValueAndErrors)(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),(0,Er.setResponseValueAndErrors)(r,"maximum",n.value,n.message,e));break;case"multipleOf":(0,Er.setResponseValueAndErrors)(r,"multipleOf",n.value,n.message,e);break}return r}Ul.parseNumberDef=KE;var tn={},bp;function qE(){if(bp)return tn;bp=1,Object.defineProperty(tn,"__esModule",{value:!0}),tn.parseObjectDef=tn.parseObjectDefX=void 0;const t=Me();function e(n,i){var s,a;Object.keys(n.shape()).reduce((l,u)=>{let c=n.shape()[u];const d=c.isOptional();d||(c=Object.assign({},c._def.innerSchema));const h=(0,t.parseDef)(c._def,Object.assign(Object.assign({},i),{currentPath:[...i.currentPath,"properties",u],propertyPath:[...i.currentPath,"properties",u]}));return h!==void 0&&(l.properties[u]=h,d||(l.required||(l.required=[]),l.required.push(u))),l},{type:"object",properties:{},additionalProperties:n.catchall._def.typeName==="ZodNever"?n.unknownKeys==="passthrough":(s=(0,t.parseDef)(n.catchall._def,Object.assign(Object.assign({},i),{currentPath:[...i.currentPath,"additionalProperties"]})))!==null&&s!==void 0?s:!0});const o=Object.assign(Object.assign({type:"object"},Object.entries(n.shape()).reduce((l,[u,c])=>{if(c===void 0||c._def===void 0)return l;const d=(0,t.parseDef)(c._def,Object.assign(Object.assign({},i),{currentPath:[...i.currentPath,"properties",u],propertyPath:[...i.currentPath,"properties",u]}));return d===void 0?l:{properties:Object.assign(Object.assign({},l.properties),{[u]:d}),required:c.isOptional()?l.required:[...l.required,u]}},{properties:{},required:[]})),{additionalProperties:n.catchall._def.typeName==="ZodNever"?n.unknownKeys==="passthrough":(a=(0,t.parseDef)(n.catchall._def,Object.assign(Object.assign({},i),{currentPath:[...i.currentPath,"additionalProperties"]})))!==null&&a!==void 0?a:!0});return o.required.length||delete o.required,o}tn.parseObjectDefX=e;function r(n,i){var s;const a=Object.assign(Object.assign({type:"object"},Object.entries(n.shape()).reduce((o,[l,u])=>{if(u===void 0||u._def===void 0)return o;const c=(0,t.parseDef)(u._def,Object.assign(Object.assign({},i),{currentPath:[...i.currentPath,"properties",l],propertyPath:[...i.currentPath,"properties",l]}));return c===void 0?o:{properties:Object.assign(Object.assign({},o.properties),{[l]:c}),required:u.isOptional()?o.required:[...o.required,l]}},{properties:{},required:[]})),{additionalProperties:n.catchall._def.typeName==="ZodNever"?n.unknownKeys==="passthrough":(s=(0,t.parseDef)(n.catchall._def,Object.assign(Object.assign({},i),{currentPath:[...i.currentPath,"additionalProperties"]})))!==null&&s!==void 0?s:!0});return a.required.length||delete a.required,a}return tn.parseObjectDef=r,tn}var ts={},kp;function WE(){if(kp)return ts;kp=1,Object.defineProperty(ts,"__esModule",{value:!0}),ts.parseOptionalDef=void 0;const t=Me(),e=(r,n)=>{var i;if(n.currentPath.toString()===((i=n.propertyPath)===null||i===void 0?void 0:i.toString()))return(0,t.parseDef)(r.innerType._def,n);const s=(0,t.parseDef)(r.innerType._def,Object.assign(Object.assign({},n),{currentPath:[...n.currentPath,"anyOf","1"]}));return s?{anyOf:[{not:{}},s]}:{}};return ts.parseOptionalDef=e,ts}var rs={},Ep;function JE(){if(Ep)return rs;Ep=1,Object.defineProperty(rs,"__esModule",{value:!0}),rs.parsePipelineDef=void 0;const t=Me(),e=(r,n)=>{if(n.pipeStrategy==="input")return(0,t.parseDef)(r.in._def,n);const i=(0,t.parseDef)(r.in._def,Object.assign(Object.assign({},n),{currentPath:[...n.currentPath,"allOf","0"]})),s=(0,t.parseDef)(r.out._def,Object.assign(Object.assign({},n),{currentPath:[...n.currentPath,"allOf",i?"1":"0"]}));return{allOf:[i,s].filter(a=>a!==void 0)}};return rs.parsePipelineDef=e,rs}var ns={},Sp;function GE(){if(Sp)return ns;Sp=1,Object.defineProperty(ns,"__esModule",{value:!0}),ns.parsePromiseDef=void 0;const t=Me();function e(r,n){return(0,t.parseDef)(r.type._def,n)}return ns.parsePromiseDef=e,ns}var is={},ph={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.parseStringDef=t.emojiPattern=t.ulidPattern=t.cuid2Pattern=t.cuidPattern=t.emailPattern=void 0;const e=Zt;t.emailPattern='^(([^<>()[\\]\\\\.,;:\\s@\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\"]+)*)|(\\".+\\"))@((\\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\])|(\\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\\.[A-Za-z]{2,})+))$',t.cuidPattern="^c[^\\s-]{8,}$",t.cuid2Pattern="^[a-z][a-z0-9]*$",t.ulidPattern="/[0-9A-HJKMNP-TV-Z]{26}/",t.emojiPattern="/^(p{Extended_Pictographic}|p{Emoji_Component})+$/u";function r(a,o){const l={type:"string"};if(a.checks)for(const u of a.checks)switch(u.kind){case"min":(0,e.setResponseValueAndErrors)(l,"minLength",typeof l.minLength=="number"?Math.max(l.minLength,u.value):u.value,u.message,o);break;case"max":(0,e.setResponseValueAndErrors)(l,"maxLength",typeof l.maxLength=="number"?Math.min(l.maxLength,u.value):u.value,u.message,o);break;case"email":switch(o.emailStrategy){case"format:email":i(l,"email",u.message,o);break;case"format:idn-email":i(l,"idn-email",u.message,o);break;case"pattern:zod":s(l,t.emailPattern,u.message,o);break}break;case"url":i(l,"uri",u.message,o);break;case"uuid":i(l,"uuid",u.message,o);break;case"regex":s(l,u.regex.source,u.message,o);break;case"cuid":s(l,t.cuidPattern,u.message,o);break;case"cuid2":s(l,t.cuid2Pattern,u.message,o);break;case"startsWith":s(l,"^"+n(u.value),u.message,o);break;case"endsWith":s(l,n(u.value)+"$",u.message,o);break;case"datetime":i(l,"date-time",u.message,o);break;case"length":(0,e.setResponseValueAndErrors)(l,"minLength",typeof l.minLength=="number"?Math.max(l.minLength,u.value):u.value,u.message,o),(0,e.setResponseValueAndErrors)(l,"maxLength",typeof l.maxLength=="number"?Math.min(l.maxLength,u.value):u.value,u.message,o);break;case"includes":{s(l,n(u.value),u.message,o);break}case"ip":{u.version!=="v6"&&i(l,"ipv4",u.message,o),u.version!=="v4"&&i(l,"ipv6",u.message,o);break}case"emoji":s(l,t.emojiPattern,u.message,o);break;case"ulid":{s(l,t.ulidPattern,u.message,o);break}}return l}t.parseStringDef=r;const n=a=>Array.from(a).map(o=>/[a-zA-Z0-9]/.test(o)?o:`\\${o}`).join(""),i=(a,o,l,u)=>{var c;a.format||!((c=a.anyOf)===null||c===void 0)&&c.some(d=>d.format)?(a.anyOf||(a.anyOf=[]),a.format&&(a.anyOf.push(Object.assign({format:a.format},a.errorMessage&&u.errorMessages&&{errorMessage:{format:a.errorMessage.format}})),delete a.format,a.errorMessage&&(delete a.errorMessage.format,Object.keys(a.errorMessage).length===0&&delete a.errorMessage)),a.anyOf.push(Object.assign({format:o},l&&u.errorMessages&&{errorMessage:{format:l}}))):(0,e.setResponseValueAndErrors)(a,"format",o,l,u)},s=(a,o,l,u)=>{var c;a.pattern||!((c=a.allOf)===null||c===void 0)&&c.some(d=>d.pattern)?(a.allOf||(a.allOf=[]),a.pattern&&(a.allOf.push(Object.assign({pattern:a.pattern},a.errorMessage&&u.errorMessages&&{errorMessage:{pattern:a.errorMessage.pattern}})),delete a.pattern,a.errorMessage&&(delete a.errorMessage.pattern,Object.keys(a.errorMessage).length===0&&delete a.errorMessage)),a.allOf.push(Object.assign({pattern:o},l&&u.errorMessages&&{errorMessage:{pattern:l}}))):(0,e.setResponseValueAndErrors)(a,"pattern",o,l,u)}})(ph);var xp;function YE(){if(xp)return is;xp=1,Object.defineProperty(is,"__esModule",{value:!0}),is.parseRecordDef=void 0;const t=fh,e=Me(),r=ph;function n(i,s){var a,o,l,u,c;if(s.target==="openApi3"&&((a=i.keyType)===null||a===void 0?void 0:a._def.typeName)===t.ZodFirstPartyTypeKind.ZodEnum)return{type:"object",required:i.keyType._def.values,properties:i.keyType._def.values.reduce((h,w)=>{var v;return Object.assign(Object.assign({},h),{[w]:(v=(0,e.parseDef)(i.valueType._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"properties",w]})))!==null&&v!==void 0?v:{}})},{}),additionalProperties:!1};const d={type:"object",additionalProperties:(o=(0,e.parseDef)(i.valueType._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"additionalProperties"]})))!==null&&o!==void 0?o:{}};if(s.target==="openApi3")return d;if(((l=i.keyType)===null||l===void 0?void 0:l._def.typeName)===t.ZodFirstPartyTypeKind.ZodString&&(!((u=i.keyType._def.checks)===null||u===void 0)&&u.length)){const h=Object.entries((0,r.parseStringDef)(i.keyType._def,s)).reduce((w,[v,T])=>v==="type"?w:Object.assign(Object.assign({},w),{[v]:T}),{});return Object.assign(Object.assign({},d),{propertyNames:h})}else if(((c=i.keyType)===null||c===void 0?void 0:c._def.typeName)===t.ZodFirstPartyTypeKind.ZodEnum)return Object.assign(Object.assign({},d),{propertyNames:{enum:i.keyType._def.values}});return d}return is.parseRecordDef=n,is}var ss={},Tp;function QE(){if(Tp)return ss;Tp=1,Object.defineProperty(ss,"__esModule",{value:!0}),ss.parseSetDef=void 0;const t=Zt,e=Me();function r(n,i){const a={type:"array",uniqueItems:!0,items:(0,e.parseDef)(n.valueType._def,Object.assign(Object.assign({},i),{currentPath:[...i.currentPath,"items"]}))};return n.minSize&&(0,t.setResponseValueAndErrors)(a,"minItems",n.minSize.value,n.minSize.message,i),n.maxSize&&(0,t.setResponseValueAndErrors)(a,"maxItems",n.maxSize.value,n.maxSize.message,i),a}return ss.parseSetDef=r,ss}var as={},Pp;function XE(){if(Pp)return as;Pp=1,Object.defineProperty(as,"__esModule",{value:!0}),as.parseTupleDef=void 0;const t=Me();function e(r,n){return r.rest?{type:"array",minItems:r.items.length,items:r.items.map((i,s)=>(0,t.parseDef)(i._def,Object.assign(Object.assign({},n),{currentPath:[...n.currentPath,"items",`${s}`]}))).reduce((i,s)=>s===void 0?i:[...i,s],[]),additionalItems:(0,t.parseDef)(r.rest._def,Object.assign(Object.assign({},n),{currentPath:[...n.currentPath,"additionalItems"]}))}:{type:"array",minItems:r.items.length,maxItems:r.items.length,items:r.items.map((i,s)=>(0,t.parseDef)(i._def,Object.assign(Object.assign({},n),{currentPath:[...n.currentPath,"items",`${s}`]}))).reduce((i,s)=>s===void 0?i:[...i,s],[])}}return as.parseTupleDef=e,as}var Fl={};Object.defineProperty(Fl,"__esModule",{value:!0});Fl.parseUndefinedDef=void 0;function eS(){return{not:{}}}Fl.parseUndefinedDef=eS;var zl={};Object.defineProperty(zl,"__esModule",{value:!0});zl.parseUnknownDef=void 0;function tS(){return{}}zl.parseUnknownDef=tS;var Op;function Me(){if(Op)return Ki;Op=1,Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.parseDef=void 0;const t=fh,e=Cl,r=AE(),n=Il,i=jl,s=jE(),a=RE(),o=Rl,l=$E(),u=DE(),c=Nl,d=UE(),h=Ll,w=zE(),v=$l,T=Dl,b=Ml,y=ZE(),p=Ul,_=qE(),x=WE(),I=JE(),S=GE(),P=YE(),m=QE(),E=ph,g=XE(),A=Fl,C=Lv(),W=zl;function q(j,$,U=!1){const oe=$.seen.get(j);if(oe&&!U){const Kt=G(oe,$);if(Kt!==void 0)return Kt}const wt={def:j,path:$.currentPath,jsonSchema:void 0};$.seen.set(j,wt);const Je=ae(j,j.typeName,$);return Je&&M(j,$,Je),wt.jsonSchema=Je,Je}Ki.parseDef=q;const G=(j,$)=>{switch($.$refStrategy){case"root":return{$ref:j.path.length===0?"":j.path.length===1?`${j.path[0]}/`:j.path.join("/")};case"relative":return{$ref:H($.currentPath,j.path)};case"none":return j.path.length<$.currentPath.length&&j.path.every((U,oe)=>$.currentPath[oe]===U)?(console.warn(`Recursive reference detected at ${$.currentPath.join("/")}! Defaulting to any`),{}):void 0;case"seen":return j.path.length<$.currentPath.length&&j.path.every((U,oe)=>$.currentPath[oe]===U)?(console.warn(`Recursive reference detected at ${$.currentPath.join("/")}! Defaulting to any`),{}):j.jsonSchema}},H=(j,$)=>{let U=0;for(;U<j.length&&U<$.length&&j[U]===$[U];U++);return[(j.length-U).toString(),...$.slice(U)].join("/")},ae=(j,$,U)=>{switch($){case t.ZodFirstPartyTypeKind.ZodString:return(0,E.parseStringDef)(j,U);case t.ZodFirstPartyTypeKind.ZodNumber:return(0,p.parseNumberDef)(j,U);case t.ZodFirstPartyTypeKind.ZodObject:return(0,_.parseObjectDef)(j,U);case t.ZodFirstPartyTypeKind.ZodBigInt:return(0,n.parseBigintDef)(j,U);case t.ZodFirstPartyTypeKind.ZodBoolean:return(0,i.parseBooleanDef)();case t.ZodFirstPartyTypeKind.ZodDate:return(0,o.parseDateDef)(j,U);case t.ZodFirstPartyTypeKind.ZodUndefined:return(0,A.parseUndefinedDef)();case t.ZodFirstPartyTypeKind.ZodNull:return(0,b.parseNullDef)(U);case t.ZodFirstPartyTypeKind.ZodArray:return(0,r.parseArrayDef)(j,U);case t.ZodFirstPartyTypeKind.ZodUnion:case t.ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return(0,C.parseUnionDef)(j,U);case t.ZodFirstPartyTypeKind.ZodIntersection:return(0,d.parseIntersectionDef)(j,U);case t.ZodFirstPartyTypeKind.ZodTuple:return(0,g.parseTupleDef)(j,U);case t.ZodFirstPartyTypeKind.ZodRecord:return(0,P.parseRecordDef)(j,U);case t.ZodFirstPartyTypeKind.ZodLiteral:return(0,h.parseLiteralDef)(j,U);case t.ZodFirstPartyTypeKind.ZodEnum:return(0,c.parseEnumDef)(j);case t.ZodFirstPartyTypeKind.ZodNativeEnum:return(0,v.parseNativeEnumDef)(j);case t.ZodFirstPartyTypeKind.ZodNullable:return(0,y.parseNullableDef)(j,U);case t.ZodFirstPartyTypeKind.ZodOptional:return(0,x.parseOptionalDef)(j,U);case t.ZodFirstPartyTypeKind.ZodMap:return(0,w.parseMapDef)(j,U);case t.ZodFirstPartyTypeKind.ZodSet:return(0,m.parseSetDef)(j,U);case t.ZodFirstPartyTypeKind.ZodLazy:return q(j.getter()._def,U);case t.ZodFirstPartyTypeKind.ZodPromise:return(0,S.parsePromiseDef)(j,U);case t.ZodFirstPartyTypeKind.ZodNaN:case t.ZodFirstPartyTypeKind.ZodNever:return(0,T.parseNeverDef)();case t.ZodFirstPartyTypeKind.ZodEffects:return(0,u.parseEffectsDef)(j,U);case t.ZodFirstPartyTypeKind.ZodAny:return(0,e.parseAnyDef)();case t.ZodFirstPartyTypeKind.ZodUnknown:return(0,W.parseUnknownDef)();case t.ZodFirstPartyTypeKind.ZodDefault:return(0,l.parseDefaultDef)(j,U);case t.ZodFirstPartyTypeKind.ZodBranded:return(0,s.parseBrandedDef)(j,U);case t.ZodFirstPartyTypeKind.ZodCatch:return(0,a.parseCatchDef)(j,U);case t.ZodFirstPartyTypeKind.ZodPipeline:return(0,I.parsePipelineDef)(j,U);case t.ZodFirstPartyTypeKind.ZodFunction:case t.ZodFirstPartyTypeKind.ZodVoid:case t.ZodFirstPartyTypeKind.ZodSymbol:return;default:return(oe=>{})()}},M=(j,$,U)=>(j.description&&(U.description=j.description,$.markdownDescription&&(U.markdownDescription=j.description)),U);return Ki}var Bl={},$v={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultOptions=t.defaultOptions=void 0,t.defaultOptions={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"string",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,emailStrategy:"format:email"};const e=r=>typeof r=="string"?Object.assign(Object.assign({},t.defaultOptions),{name:r}):Object.assign(Object.assign({},t.defaultOptions),r);t.getDefaultOptions=e})($v);Object.defineProperty(Bl,"__esModule",{value:!0});Bl.getRefs=void 0;const rS=$v,nS=t=>{const e=(0,rS.getDefaultOptions)(t),r=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return Object.assign(Object.assign({},e),{currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([n,i])=>[i._def,{def:i._def,path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))})};Bl.getRefs=nS;Object.defineProperty(Al,"__esModule",{value:!0});Al.zodToJsonSchema=void 0;const Ap=Me(),iS=Bl,sS=(t,e)=>{var r;const n=(0,iS.getRefs)(e),i=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((l,[u,c])=>{var d;return Object.assign(Object.assign({},l),{[u]:(d=(0,Ap.parseDef)(c._def,Object.assign(Object.assign({},n),{currentPath:[...n.basePath,n.definitionPath,u]}),!0))!==null&&d!==void 0?d:{}})},{}):void 0,s=typeof e=="string"?e:e==null?void 0:e.name,a=(r=(0,Ap.parseDef)(t._def,s===void 0?n:Object.assign(Object.assign({},n),{currentPath:[...n.basePath,n.definitionPath,s]}),!1))!==null&&r!==void 0?r:{},o=s===void 0?i?Object.assign(Object.assign({},a),{[n.definitionPath]:i}):a:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,s].join("/"),[n.definitionPath]:Object.assign(Object.assign({},i),{[s]:a})};return n.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":n.target==="jsonSchema2019-09"&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),o};Al.zodToJsonSchema=sS;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.zodToJsonSchema=void 0;const e=Al;Object.defineProperty(t,"zodToJsonSchema",{enumerable:!0,get:function(){return e.zodToJsonSchema}}),t.default=e.zodToJsonSchema})(Hy);function aS(t){return{name:t.name,description:t.description,parameters:Hy.zodToJsonSchema(t.schema)}}function oS(t){const{azureOpenAIApiDeploymentName:e,azureOpenAIApiInstanceName:r,azureOpenAIApiKey:n,azureOpenAIBasePath:i,baseURL:s}=t;if(n&&i&&e)return`${i}/${e}`;if(n){if(!r)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!e)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${r}.openai.azure.com/openai/deployments/${e}`}return s}const lS=()=>typeof window<"u"&&typeof window.document<"u",uS=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",cS=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),Dv=()=>typeof Deno<"u",dS=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!Dv(),hS=()=>{let t;return lS()?t="browser":dS()?t="node":uS()?t="webworker":cS()?t="jsdom":Dv()?t="deno":t="other",t};let Au;async function fS(){return Au===void 0&&(Au={library:"langchain-js",runtime:hS()}),Au}function Be(t){var e;try{return typeof process<"u"?(e=process.env)==null?void 0:e[t]:void 0}catch{return}}const pS=async(t,e,r,n,i,s,a,o)=>(await t.call(fetch,"https://api.promptlayer.com/track-request",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({function_name:e,provider:"langchain",kwargs:r,tags:n,request_response:i,request_start_time:Math.floor(s/1e3),request_end_time:Math.floor(a/1e3),api_key:o})})).json();let Ua;const mS=new Uint8Array(16);function gS(){if(!Ua&&(Ua=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ua))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ua(mS)}const Ce=[];for(let t=0;t<256;++t)Ce.push((t+256).toString(16).slice(1));function yS(t,e=0){return Ce[t[e+0]]+Ce[t[e+1]]+Ce[t[e+2]]+Ce[t[e+3]]+"-"+Ce[t[e+4]]+Ce[t[e+5]]+"-"+Ce[t[e+6]]+Ce[t[e+7]]+"-"+Ce[t[e+8]]+Ce[t[e+9]]+"-"+Ce[t[e+10]]+Ce[t[e+11]]+Ce[t[e+12]]+Ce[t[e+13]]+Ce[t[e+14]]+Ce[t[e+15]]}const vS=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Cp={randomUUID:vS};function ar(t,e,r){if(Cp.randomUUID&&!e&&!t)return Cp.randomUUID();t=t||{};const n=t.random||(t.rng||gS)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return yS(n)}class _S{}class pa extends _S{get lc_namespace(){return["langchain","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,Fy(this.constructor)]}constructor(e){var r;super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:typeof process<"u"?((r=process.env)==null?void 0:r.LANGCHAIN_CALLBACKS_BACKGROUND)!=="true":!0}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever)}copy(){return new this.constructor(this)}toJSON(){return Zr.prototype.toJSON.call(this)}toJSONNotImplemented(){return Zr.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class r extends pa{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:ar()}),Object.assign(this,e)}}return new r}}var mh={exports:{}};mh.exports;(function(t){const r=(s=0)=>a=>`\x1B[${38+s};5;${a}m`,n=(s=0)=>(a,o,l)=>`\x1B[${38+s};2;${a};${o};${l}m`;function i(){const s=new Map,a={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};a.color.gray=a.color.blackBright,a.bgColor.bgGray=a.bgColor.bgBlackBright,a.color.grey=a.color.blackBright,a.bgColor.bgGrey=a.bgColor.bgBlackBright;for(const[o,l]of Object.entries(a)){for(const[u,c]of Object.entries(l))a[u]={open:`\x1B[${c[0]}m`,close:`\x1B[${c[1]}m`},l[u]=a[u],s.set(c[0],c[1]);Object.defineProperty(a,o,{value:l,enumerable:!1})}return Object.defineProperty(a,"codes",{value:s,enumerable:!1}),a.color.close="\x1B[39m",a.bgColor.close="\x1B[49m",a.color.ansi256=r(),a.color.ansi16m=n(),a.bgColor.ansi256=r(10),a.bgColor.ansi16m=n(10),Object.defineProperties(a,{rgbToAnsi256:{value:(o,l,u)=>o===l&&l===u?o<8?16:o>248?231:Math.round((o-8)/247*24)+232:16+36*Math.round(o/255*5)+6*Math.round(l/255*5)+Math.round(u/255*5),enumerable:!1},hexToRgb:{value:o=>{const l=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(o.toString(16));if(!l)return[0,0,0];let{colorString:u}=l.groups;u.length===3&&(u=u.split("").map(d=>d+d).join(""));const c=Number.parseInt(u,16);return[c>>16&255,c>>8&255,c&255]},enumerable:!1},hexToAnsi256:{value:o=>a.rgbToAnsi256(...a.hexToRgb(o)),enumerable:!1}}),a}Object.defineProperty(t,"exports",{enumerable:!0,get:i})})(mh);var wS=mh.exports;const Mv=ia(wS);function Cu(t,e){return t&&!Array.isArray(t)&&typeof t=="object"?t:{[e]:t}}class Vl extends pa{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}_addChildRun(e,r){e.child_runs.push(r)}async _startTrace(e){var r;if(e.parent_run_id!==void 0){const n=this.runMap.get(e.parent_run_id);n&&(this._addChildRun(n,e),n.child_execution_order=Math.max(n.child_execution_order,e.child_execution_order))}this.runMap.set(e.id,e),await((r=this.onRunCreate)==null?void 0:r.call(this,e))}async _endTrace(e){var n;const r=e.parent_run_id!==void 0&&this.runMap.get(e.parent_run_id);r?r.child_execution_order=Math.max(r.child_execution_order,e.child_execution_order):await this.persistRun(e),this.runMap.delete(e.id),await((n=this.onRunUpdate)==null?void 0:n.call(this,e))}_getExecutionOrder(e){const r=e!==void 0&&this.runMap.get(e);return r?r.child_execution_order+1:1}async handleLLMStart(e,r,n,i,s,a,o,l){var w;const u=this._getExecutionOrder(i),c=Date.now(),d=o?{...s,metadata:o}:s,h={id:n,name:l??e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{prompts:r},execution_order:u,child_runs:[],child_execution_order:u,run_type:"llm",extra:d??{},tags:a||[]};return await this._startTrace(h),await((w=this.onLLMStart)==null?void 0:w.call(this,h)),h}async handleChatModelStart(e,r,n,i,s,a,o,l){var w;const u=this._getExecutionOrder(i),c=Date.now(),d=o?{...s,metadata:o}:s,h={id:n,name:l??e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{messages:r},execution_order:u,child_runs:[],child_execution_order:u,run_type:"llm",extra:d??{},tags:a||[]};return await this._startTrace(h),await((w=this.onLLMStart)==null?void 0:w.call(this,h)),h}async handleLLMEnd(e,r){var i;const n=this.runMap.get(r);if(!n||(n==null?void 0:n.run_type)!=="llm")throw new Error("No LLM run to end.");return n.end_time=Date.now(),n.outputs=e,n.events.push({name:"end",time:new Date(n.end_time).toISOString()}),await((i=this.onLLMEnd)==null?void 0:i.call(this,n)),await this._endTrace(n),n}async handleLLMError(e,r){var i;const n=this.runMap.get(r);if(!n||(n==null?void 0:n.run_type)!=="llm")throw new Error("No LLM run to end.");return n.end_time=Date.now(),n.error=e.message,n.events.push({name:"error",time:new Date(n.end_time).toISOString()}),await((i=this.onLLMError)==null?void 0:i.call(this,n)),await this._endTrace(n),n}async handleChainStart(e,r,n,i,s,a,o,l){var h;const u=this._getExecutionOrder(i),c=Date.now(),d={id:n,name:l??e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:r,execution_order:u,child_execution_order:u,run_type:o??"chain",child_runs:[],extra:a?{metadata:a}:{},tags:s||[]};return await this._startTrace(d),await((h=this.onChainStart)==null?void 0:h.call(this,d)),d}async handleChainEnd(e,r,n,i,s){var o;const a=this.runMap.get(r);if(!a)throw new Error("No chain run to end.");return a.end_time=Date.now(),a.outputs=Cu(e,"output"),a.events.push({name:"end",time:new Date(a.end_time).toISOString()}),(s==null?void 0:s.inputs)!==void 0&&(a.inputs=Cu(s.inputs,"input")),await((o=this.onChainEnd)==null?void 0:o.call(this,a)),await this._endTrace(a),a}async handleChainError(e,r,n,i,s){var o;const a=this.runMap.get(r);if(!a)throw new Error("No chain run to end.");return a.end_time=Date.now(),a.error=e.message,a.events.push({name:"error",time:new Date(a.end_time).toISOString()}),(s==null?void 0:s.inputs)!==void 0&&(a.inputs=Cu(s.inputs,"input")),await((o=this.onChainError)==null?void 0:o.call(this,a)),await this._endTrace(a),a}async handleToolStart(e,r,n,i,s,a,o){var d;const l=this._getExecutionOrder(i),u=Date.now(),c={id:n,name:o??e.id[e.id.length-1],parent_run_id:i,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{input:r},execution_order:l,child_execution_order:l,run_type:"tool",child_runs:[],extra:a?{metadata:a}:{},tags:s||[]};return await this._startTrace(c),await((d=this.onToolStart)==null?void 0:d.call(this,c)),c}async handleToolEnd(e,r){var i;const n=this.runMap.get(r);if(!n||(n==null?void 0:n.run_type)!=="tool")throw new Error("No tool run to end");return n.end_time=Date.now(),n.outputs={output:e},n.events.push({name:"end",time:new Date(n.end_time).toISOString()}),await((i=this.onToolEnd)==null?void 0:i.call(this,n)),await this._endTrace(n),n}async handleToolError(e,r){var i;const n=this.runMap.get(r);if(!n||(n==null?void 0:n.run_type)!=="tool")throw new Error("No tool run to end");return n.end_time=Date.now(),n.error=e.message,n.events.push({name:"error",time:new Date(n.end_time).toISOString()}),await((i=this.onToolError)==null?void 0:i.call(this,n)),await this._endTrace(n),n}async handleAgentAction(e,r){var s;const n=this.runMap.get(r);if(!n||(n==null?void 0:n.run_type)!=="chain")return;const i=n;i.actions=i.actions||[],i.actions.push(e),i.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:e}}),await((s=this.onAgentAction)==null?void 0:s.call(this,n))}async handleAgentEnd(e,r){var i;const n=this.runMap.get(r);!n||(n==null?void 0:n.run_type)!=="chain"||(n.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:e}}),await((i=this.onAgentEnd)==null?void 0:i.call(this,n)))}async handleRetrieverStart(e,r,n,i,s,a,o){var d;const l=this._getExecutionOrder(i),u=Date.now(),c={id:n,name:o??e.id[e.id.length-1],parent_run_id:i,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{query:r},execution_order:l,child_execution_order:l,run_type:"retriever",child_runs:[],extra:a?{metadata:a}:{},tags:s||[]};return await this._startTrace(c),await((d=this.onRetrieverStart)==null?void 0:d.call(this,c)),c}async handleRetrieverEnd(e,r){var i;const n=this.runMap.get(r);if(!n||(n==null?void 0:n.run_type)!=="retriever")throw new Error("No retriever run to end");return n.end_time=Date.now(),n.outputs={documents:e},n.events.push({name:"end",time:new Date(n.end_time).toISOString()}),await((i=this.onRetrieverEnd)==null?void 0:i.call(this,n)),await this._endTrace(n),n}async handleRetrieverError(e,r){var i;const n=this.runMap.get(r);if(!n||(n==null?void 0:n.run_type)!=="retriever")throw new Error("No retriever run to end");return n.end_time=Date.now(),n.error=e.message,n.events.push({name:"error",time:new Date(n.end_time).toISOString()}),await((i=this.onRetrieverError)==null?void 0:i.call(this,n)),await this._endTrace(n),n}async handleText(e,r){var i;const n=this.runMap.get(r);!n||(n==null?void 0:n.run_type)!=="chain"||(n.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:e}}),await((i=this.onText)==null?void 0:i.call(this,n)))}async handleLLMNewToken(e,r,n,i,s,a){var l;const o=this.runMap.get(n);if(!o||(o==null?void 0:o.run_type)!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return o.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:e,idx:r,chunk:a==null?void 0:a.chunk}}),await((l=this.onLLMNewToken)==null?void 0:l.call(this,o,e)),o}}function Ge(t,e){return`${t.open}${e}${t.close}`}function $t(t,e){try{return JSON.stringify(t,null,2)}catch{return e}}function Sr(t){if(!t.end_time)return"";const e=t.end_time-t.start_time;return e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`}const{color:it}=Mv;class Ip extends Vl{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){const r=[];let n=e;for(;n.parent_run_id;){const i=this.runMap.get(n.parent_run_id);if(i)r.push(i),n=i;else break}return r}getBreadcrumbs(e){const n=[...this.getParents(e).reverse(),e].map((i,s,a)=>{const o=`${i.execution_order}:${i.run_type}:${i.name}`;return s===a.length-1?Ge(Mv.bold,o):o}).join(" > ");return Ge(it.grey,n)}onChainStart(e){const r=this.getBreadcrumbs(e);console.log(`${Ge(it.green,"[chain/start]")} [${r}] Entering Chain run with input: ${$t(e.inputs,"[inputs]")}`)}onChainEnd(e){const r=this.getBreadcrumbs(e);console.log(`${Ge(it.cyan,"[chain/end]")} [${r}] [${Sr(e)}] Exiting Chain run with output: ${$t(e.outputs,"[outputs]")}`)}onChainError(e){const r=this.getBreadcrumbs(e);console.log(`${Ge(it.red,"[chain/error]")} [${r}] [${Sr(e)}] Chain run errored with error: ${$t(e.error,"[error]")}`)}onLLMStart(e){const r=this.getBreadcrumbs(e),n="prompts"in e.inputs?{prompts:e.inputs.prompts.map(i=>i.trim())}:e.inputs;console.log(`${Ge(it.green,"[llm/start]")} [${r}] Entering LLM run with input: ${$t(n,"[inputs]")}`)}onLLMEnd(e){const r=this.getBreadcrumbs(e);console.log(`${Ge(it.cyan,"[llm/end]")} [${r}] [${Sr(e)}] Exiting LLM run with output: ${$t(e.outputs,"[response]")}`)}onLLMError(e){const r=this.getBreadcrumbs(e);console.log(`${Ge(it.red,"[llm/error]")} [${r}] [${Sr(e)}] LLM run errored with error: ${$t(e.error,"[error]")}`)}onToolStart(e){var n;const r=this.getBreadcrumbs(e);console.log(`${Ge(it.green,"[tool/start]")} [${r}] Entering Tool run with input: "${(n=e.inputs.input)==null?void 0:n.trim()}"`)}onToolEnd(e){var n,i;const r=this.getBreadcrumbs(e);console.log(`${Ge(it.cyan,"[tool/end]")} [${r}] [${Sr(e)}] Exiting Tool run with output: "${(i=(n=e.outputs)==null?void 0:n.output)==null?void 0:i.trim()}"`)}onToolError(e){const r=this.getBreadcrumbs(e);console.log(`${Ge(it.red,"[tool/error]")} [${r}] [${Sr(e)}] Tool run errored with error: ${$t(e.error,"[error]")}`)}onRetrieverStart(e){const r=this.getBreadcrumbs(e);console.log(`${Ge(it.green,"[retriever/start]")} [${r}] Entering Retriever run with input: ${$t(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){const r=this.getBreadcrumbs(e);console.log(`${Ge(it.cyan,"[retriever/end]")} [${r}] [${Sr(e)}] Exiting Retriever run with output: ${$t(e.outputs,"[outputs]")}`)}onRetrieverError(e){const r=this.getBreadcrumbs(e);console.log(`${Ge(it.red,"[retriever/error]")} [${r}] [${Sr(e)}] Retriever run errored with error: ${$t(e.error,"[error]")}`)}onAgentAction(e){const r=e,n=this.getBreadcrumbs(e);console.log(`${Ge(it.blue,"[agent/action]")} [${n}] Agent selected action: ${$t(r.actions[r.actions.length-1],"[action]")}`)}}const bS=[400,401,403,404,405,406,407,408,409];class kS{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6;const r="default"in dr?dr.default:dr;this.queue=new r({concurrency:this.maxConcurrency})}call(e,...r){return this.queue.add(()=>Ko(()=>e(...r).catch(n=>{throw n instanceof Error?n:new Error(n)}),{onFailedAttempt(n){var s;if(n.message.startsWith("Cancel")||n.message.startsWith("TimeoutError")||n.message.startsWith("AbortError")||(n==null?void 0:n.code)==="ECONNABORTED")throw n;const i=(s=n==null?void 0:n.response)==null?void 0:s.status;if(i&&bS.includes(+i))throw n},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,r,...n){return e.signal?Promise.race([this.call(r,...n),new Promise((i,s)=>{var a;(a=e.signal)==null||a.addEventListener("abort",()=>{s(new Error("AbortError"))})})]):this.call(r,...n)}fetch(...e){return this.call(()=>fetch(...e).then(r=>r.ok?r:Promise.reject(r)))}}function jp(t){return typeof(t==null?void 0:t._getType)=="function"}function Rp(t){const e={type:t._getType(),data:{content:t.content}};return t!=null&&t.additional_kwargs&&Object.keys(t.additional_kwargs).length>0&&(e.data.additional_kwargs={...t.additional_kwargs}),e}const ES=()=>typeof window<"u"&&typeof window.document<"u",SS=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",xS=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),Uv=()=>typeof Deno<"u",TS=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!Uv(),PS=()=>{let t;return ES()?t="browser":TS()?t="node":SS()?t="webworker":xS()?t="jsdom":Uv()?t="deno":t="other",t};let Iu;async function OS(){if(Iu===void 0){const t=PS(),e=AS();Iu={library:"langsmith",runtime:t,...e}}return Iu}function ai(t){var e;try{return typeof process<"u"?(e=process.env)==null?void 0:e[t]:void 0}catch{return}}let ju;function AS(){if(ju!==void 0)return ju;const t=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],e={};for(const r of t){const n=ai(r);n!==void 0&&(e[r]=n)}return ju=e,e}const Np=t=>{const r=t.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return r==="localhost"||r==="127.0.0.1"||r==="::1"},Nn=async(t,e)=>{const r=await t.text();if(!t.ok)throw new Error(`Failed to ${e}: ${t.status} ${t.statusText} ${r}`)};async function CS(t){const e=[];for await(const r of t)e.push(r);return e}function Ru(t){if(t!==void 0)return t.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}function Lp(t){return ai("LANGCHAIN_HIDE_INPUTS")==="true"?{}:t}function $p(t){return ai("LANGCHAIN_HIDE_OUTPUTS")==="true"?{}:t}class gh{constructor(e={}){Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null});const r=gh.getDefaultClientConfig();this.apiUrl=Ru(e.apiUrl??r.apiUrl)??"",this.apiKey=Ru(e.apiKey??r.apiKey),this.webUrl=Ru(e.webUrl??r.webUrl),this.validateApiKeyIfHosted(),this.timeout_ms=e.timeout_ms??4e3,this.caller=new kS(e.callerOptions??{})}static getDefaultClientConfig(){const e=ai("LANGCHAIN_API_KEY");return{apiUrl:ai("LANGCHAIN_ENDPOINT")??(e?"https://api.smith.langchain.com":"http://localhost:1984"),apiKey:e,webUrl:void 0}}validateApiKeyIfHosted(){if(!Np(this.apiUrl)&&!this.apiKey)throw new Error("API key must be provided when using hosted LangSmith API")}getHostUrl(){return this.webUrl?this.webUrl:Np(this.apiUrl)?(this.webUrl="http://localhost","http://localhost"):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com","https://dev.smith.langchain.com"):(this.webUrl="https://smith.langchain.com","https://smith.langchain.com")}get headers(){const e={};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),e}async _get(e,r){const n=(r==null?void 0:r.toString())??"",i=`${this.apiUrl}${e}?${n}`,s=await this.caller.call(fetch,i,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!s.ok)throw new Error(`Failed to fetch ${e}: ${s.status} ${s.statusText}`);return s.json()}async*_getPaginated(e,r=new URLSearchParams){let n=Number(r.get("offset"))||0;const i=Number(r.get("limit"))||100;for(;;){r.set("offset",String(n)),r.set("limit",String(i));const s=`${this.apiUrl}${e}?${r}`,a=await this.caller.call(fetch,s,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!a.ok)throw new Error(`Failed to fetch ${e}: ${a.status} ${a.statusText}`);const o=await a.json();if(o.length===0||(yield o,o.length<i))break;n+=o.length}}async createRun(e){const r={...this.headers,"Content-Type":"application/json"},n=e.extra??{},i=await OS(),s=e.project_name;delete e.project_name;const a={session_name:s,...e,extra:{...e.extra,runtime:{...i,...n.runtime}}};a.inputs=Lp(a.inputs),a.outputs&&(a.outputs=$p(a.outputs));const o=await this.caller.call(fetch,`${this.apiUrl}/runs`,{method:"POST",headers:r,body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms)});await Nn(o,"create run")}async updateRun(e,r){r.inputs&&(r.inputs=Lp(r.inputs)),r.outputs&&(r.outputs=$p(r.outputs));const n={...this.headers,"Content-Type":"application/json"},i=await this.caller.call(fetch,`${this.apiUrl}/runs/${e}`,{method:"PATCH",headers:n,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms)});await Nn(i,"update run")}async readRun(e,{loadChildRuns:r}={loadChildRuns:!1}){let n=await this._get(`/runs/${e}`);return r&&n.child_run_ids&&(n=await this._loadChildRuns(n)),n}async getRunUrl({runId:e,run:r,projectOpts:n}){if(r!==void 0){let i;r.session_id?i=r.session_id:n!=null&&n.projectName?i=(await this.readProject({projectName:n==null?void 0:n.projectName})).id:n!=null&&n.projectId?i=n==null?void 0:n.projectId:i=(await this.readProject({projectName:ai("LANGCHAIN_PROJECT")||"default"})).id;const s=await this._getTenantId();return`${this.getHostUrl()}/o/${s}/projects/p/${i}/r/${r.id}?poll=true`}else if(e!==void 0){const i=await this.readRun(e);if(!i.app_path)throw new Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${i.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(e){const r=await CS(this.listRuns({id:e.child_run_ids})),n={},i={};r.sort((s,a)=>((s==null?void 0:s.dotted_order)??"").localeCompare((a==null?void 0:a.dotted_order)??""));for(const s of r){if(s.parent_run_id===null||s.parent_run_id===void 0)throw new Error(`Child run ${s.id} has no parent`);s.parent_run_id in n||(n[s.parent_run_id]=[]),n[s.parent_run_id].push(s),i[s.id]=s}e.child_runs=n[e.id]||[];for(const s in n)s!==e.id&&(i[s].child_runs=n[s]);return e}async*listRuns({projectId:e,projectName:r,parentRunId:n,referenceExampleId:i,startTime:s,executionOrder:a,runType:o,error:l,id:u,limit:c,offset:d,query:h,filter:w}){const v=new URLSearchParams;let T=e;if(r){if(e)throw new Error("Only one of projectId or projectName may be given");T=(await this.readProject({projectName:r})).id}if(T&&v.append("session",T),n&&v.append("parent_run",n),i&&v.append("reference_example",i),s&&v.append("start_time",s.toISOString()),a&&v.append("execution_order",a.toString()),o&&v.append("run_type",o),l!==void 0&&v.append("error",l.toString()),u!==void 0)for(const b of u)v.append("id",b);c!==void 0&&v.append("limit",c.toString()),d!==void 0&&v.append("offset",d.toString()),h!==void 0&&v.append("query",h),w!==void 0&&v.append("filter",w);for await(const b of this._getPaginated("/runs",v))yield*b}async shareRun(e,{shareId:r}={}){const n={run_id:e,share_token:r||ar()},s=await(await this.caller.call(fetch,`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(n),signal:AbortSignal.timeout(this.timeout_ms)})).json();if(s===null||!("share_token"in s))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${s.share_token}/r`}async unshareRun(e){const r=await this.caller.call(fetch,`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});await Nn(r,"unshare run")}async readRunSharedLink(e){const n=await(await this.caller.call(fetch,`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)})).json();if(!(n===null||!("share_token"in n)))return`${this.getHostUrl()}/public/${n.share_token}/r`}async createProject({projectName:e,projectExtra:r,upsert:n,referenceDatasetId:i}){const s=n?"?upsert=true":"",a=`${this.apiUrl}/sessions${s}`,o={name:e};r!==void 0&&(o.extra=r),i!==void 0&&(o.reference_dataset_id=i);const l=await this.caller.call(fetch,a,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms)}),u=await l.json();if(!l.ok)throw new Error(`Failed to create session ${e}: ${l.status} ${l.statusText}`);return u}async readProject({projectId:e,projectName:r}){let n="/sessions";const i=new URLSearchParams;if(e!==void 0&&r!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)n+=`/${e}`;else if(r!==void 0)i.append("name",r);else throw new Error("Must provide projectName or projectId");const s=await this._get(n,i);let a;if(Array.isArray(s)){if(s.length===0)throw new Error(`Project[id=${e}, name=${r}] not found`);a=s[0]}else a=s;return a}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;const e=new URLSearchParams({limit:"1"});for await(const r of this._getPaginated("/sessions",e))return this._tenantId=r[0].tenant_id,r[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:e,name:r,nameContains:n,referenceDatasetId:i,referenceDatasetName:s,referenceFree:a}={}){const o=new URLSearchParams;if(e!==void 0)for(const l of e)o.append("id",l);if(r!==void 0&&o.append("name",r),n!==void 0&&o.append("name_contains",n),i!==void 0)o.append("reference_dataset",i);else if(s!==void 0){const l=await this.readDataset({datasetName:s});o.append("reference_dataset",l.id)}a!==void 0&&o.append("reference_free",a.toString());for await(const l of this._getPaginated("/sessions",o))yield*l}async deleteProject({projectId:e,projectName:r}){let n;if(e===void 0&&r===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&r!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?n=(await this.readProject({projectName:r})).id:n=e;const i=await this.caller.call(fetch,`${this.apiUrl}/sessions/${n}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});await Nn(i,`delete session ${n} (${r})`)}async uploadCsv({csvFile:e,fileName:r,inputKeys:n,outputKeys:i,description:s,dataType:a,name:o}){const l=`${this.apiUrl}/datasets/upload`,u=new FormData;u.append("file",e,r),n.forEach(h=>{u.append("input_keys",h)}),i.forEach(h=>{u.append("output_keys",h)}),s&&u.append("description",s),a&&u.append("data_type",a),o&&u.append("name",o);const c=await this.caller.call(fetch,l,{method:"POST",headers:this.headers,body:u,signal:AbortSignal.timeout(this.timeout_ms)});if(!c.ok){const h=await c.json();throw h.detail&&h.detail.includes("already exists")?new Error(`Dataset ${r} already exists`):new Error(`Failed to upload CSV: ${c.status} ${c.statusText}`)}return await c.json()}async createDataset(e,{description:r,dataType:n}={}){const i={name:e,description:r};n&&(i.data_type=n);const s=await this.caller.call(fetch,`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(i),signal:AbortSignal.timeout(this.timeout_ms)});if(!s.ok){const o=await s.json();throw o.detail&&o.detail.includes("already exists")?new Error(`Dataset ${e} already exists`):new Error(`Failed to create dataset ${s.status} ${s.statusText}`)}return await s.json()}async readDataset({datasetId:e,datasetName:r}){let n="/datasets";const i=new URLSearchParams({limit:"1"});if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)n+=`/${e}`;else if(r!==void 0)i.append("name",r);else throw new Error("Must provide datasetName or datasetId");const s=await this._get(n,i);let a;if(Array.isArray(s)){if(s.length===0)throw new Error(`Dataset[id=${e}, name=${r}] not found`);a=s[0]}else a=s;return a}async*listDatasets({limit:e=100,offset:r=0,datasetIds:n,datasetName:i,datasetNameContains:s}={}){const a="/datasets",o=new URLSearchParams({limit:e.toString(),offset:r.toString()});if(n!==void 0)for(const l of n)o.append("id",l);i!==void 0&&o.append("name",i),s!==void 0&&o.append("name_contains",s);for await(const l of this._getPaginated(a,o))yield*l}async deleteDataset({datasetId:e,datasetName:r}){let n="/datasets",i=e;if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(r!==void 0&&(i=(await this.readDataset({datasetName:r})).id),i!==void 0)n+=`/${i}`;else throw new Error("Must provide datasetName or datasetId");const s=await this.caller.call(fetch,this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!s.ok)throw new Error(`Failed to delete ${n}: ${s.status} ${s.statusText}`);await s.json()}async createExample(e,r,{datasetId:n,datasetName:i,createdAt:s,exampleId:a}){let o=n;if(o===void 0&&i===void 0)throw new Error("Must provide either datasetName or datasetId");if(o!==void 0&&i!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");o===void 0&&(o=(await this.readDataset({datasetName:i})).id);const u={dataset_id:o,inputs:e,outputs:r,created_at:(s||new Date).toISOString(),id:a},c=await this.caller.call(fetch,`${this.apiUrl}/examples`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms)});if(!c.ok)throw new Error(`Failed to create example: ${c.status} ${c.statusText}`);return await c.json()}async createLLMExample(e,r,n){return this.createExample({input:e},{output:r},n)}async createChatExample(e,r,n){const i=e.map(a=>jp(a)?Rp(a):a),s=jp(r)?Rp(r):r;return this.createExample({input:i},{output:s},n)}async readExample(e){const r=`/examples/${e}`;return await this._get(r)}async*listExamples({datasetId:e,datasetName:r,exampleIds:n}={}){let i;if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)i=e;else if(r!==void 0)i=(await this.readDataset({datasetName:r})).id;else throw new Error("Must provide a datasetName or datasetId");const s=new URLSearchParams({dataset:i});if(n!==void 0)for(const a of n)s.append("id",a);for await(const a of this._getPaginated("/examples",s))yield*a}async deleteExample(e){const r=`/examples/${e}`,n=await this.caller.call(fetch,this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!n.ok)throw new Error(`Failed to delete ${r}: ${n.status} ${n.statusText}`);await n.json()}async updateExample(e,r){const n=await this.caller.call(fetch,`${this.apiUrl}/examples/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms)});if(!n.ok)throw new Error(`Failed to update example ${e}: ${n.status} ${n.statusText}`);return await n.json()}async evaluateRun(e,r,{sourceInfo:n,loadChildRuns:i}={loadChildRuns:!1}){let s;if(typeof e=="string")s=await this.readRun(e,{loadChildRuns:i});else if(typeof e=="object"&&"id"in e)s=e;else throw new Error(`Invalid run type: ${typeof e}`);let a;s.reference_example_id!==null&&s.reference_example_id!==void 0&&(a=await this.readExample(s.reference_example_id));const o=await r.evaluateRun(s,a);let l=n??{};return o.evaluatorInfo&&(l={...l,...o.evaluatorInfo}),await this.createFeedback(s.id,o.key,{score:o.score,value:o.value,comment:o.comment,correction:o.correction,sourceInfo:l,feedbackSourceType:"model"})}async createFeedback(e,r,{score:n,value:i,correction:s,comment:a,sourceInfo:o,feedbackSourceType:l="api",sourceRunId:u,feedbackId:c}){const d={type:l??"api",metadata:o??{}};u!==void 0&&(d==null?void 0:d.metadata)!==void 0&&!d.metadata.__run&&(d.metadata.__run={run_id:u});const h={id:c??ar(),run_id:e,key:r,score:n,value:i,correction:s,comment:a,feedback_source:d},w=await this.caller.call(fetch,`${this.apiUrl}/feedback`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(h),signal:AbortSignal.timeout(this.timeout_ms)});return await Nn(w,"create feedback"),h}async updateFeedback(e,{score:r,value:n,correction:i,comment:s}){const a={};r!=null&&(a.score=r),n!=null&&(a.value=n),i!=null&&(a.correction=i),s!=null&&(a.comment=s);const o=await this.caller.call(fetch,`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms)});await Nn(o,"update feedback")}async readFeedback(e){const r=`/feedback/${e}`;return await this._get(r)}async deleteFeedback(e){const r=`/feedback/${e}`,n=await this.caller.call(fetch,this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!n.ok)throw new Error(`Failed to delete ${r}: ${n.status} ${n.statusText}`);await n.json()}async*listFeedback({runIds:e,feedbackKeys:r,feedbackSourceTypes:n}={}){const i=new URLSearchParams;if(e&&i.append("run",e.join(",")),r)for(const s of r)i.append("key",s);if(n)for(const s of n)i.append("source",s);for await(const s of this._getPaginated("/feedback",i))yield*s}}class IS extends Vl{constructor(e={}){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{exampleId:r,projectName:n,client:i}=e;this.projectName=n??Be("LANGCHAIN_PROJECT")??Be("LANGCHAIN_SESSION"),this.exampleId=r,this.client=i??new gh({})}async _convertToCreate(e,r=void 0){return{...e,extra:{...e.extra,runtime:await fS()},child_runs:void 0,session_name:this.projectName,reference_example_id:e.parent_run_id?void 0:r}}async persistRun(e){}async _persistRunSingle(e){const r=await this._convertToCreate(e,this.exampleId);await this.client.createRun(r)}async _updateRunSingle(e){const r={end_time:e.end_time,error:e.error,outputs:e.outputs,events:e.events,inputs:e.inputs};await this.client.updateRun(e.id,r)}async onRetrieverStart(e){await this._persistRunSingle(e)}async onRetrieverEnd(e){await this._updateRunSingle(e)}async onRetrieverError(e){await this._updateRunSingle(e)}async onLLMStart(e){await this._persistRunSingle(e)}async onLLMEnd(e){await this._updateRunSingle(e)}async onLLMError(e){await this._updateRunSingle(e)}async onChainStart(e){await this._persistRunSingle(e)}async onChainEnd(e){await this._updateRunSingle(e)}async onChainError(e){await this._updateRunSingle(e)}async onToolStart(e){await this._persistRunSingle(e)}async onToolEnd(e){await this._updateRunSingle(e)}async onToolError(e){await this._updateRunSingle(e)}}class jS{}const Fv=(t,e)=>{if(e!==void 0)return t[e];const r=Object.keys(t);if(r.length===1)return t[r[0]]},RS=(t,e)=>{const r=Fv(t,e);if(!r){const n=Object.keys(t);throw new Error(`input values have ${n.length} keys, you must specify an input key or pass only 1 key as input`)}return r},NS=(t,e)=>{const r=Fv(t,e);if(!r){const n=Object.keys(t);throw new Error(`output values have ${n.length} keys, you must specify an output key or pass only 1 key as output`)}return r};function yh(t,e="Human",r="AI"){const n=[];for(const i of t){let s;if(i._getType()==="human")s=e;else if(i._getType()==="ai")s=r;else if(i._getType()==="system")s="System";else if(i._getType()==="function")s="Function";else if(i._getType()==="generic")s=i.role;else throw new Error(`Got unsupported message type: ${i}`);const a=i.name?`${i.name}, `:"";n.push(`${s}: ${a}${i.content}`)}return n.join(`
`)}class LS extends Vl{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"endpoint",{enumerable:!0,configurable:!0,writable:!0,value:Be("LANGCHAIN_ENDPOINT")||"http://localhost:1984"}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:{"Content-Type":"application/json"}}),Object.defineProperty(this,"session",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const e=Be("LANGCHAIN_API_KEY");e&&(this.headers["x-api-key"]=e)}async newSession(e){const r={start_time:Date.now(),name:e},n=await this.persistSession(r);return this.session=n,n}async loadSession(e){const r=`${this.endpoint}/sessions?name=${e}`;return this._handleSessionResponse(r)}async loadDefaultSession(){const e=`${this.endpoint}/sessions?name=default`;return this._handleSessionResponse(e)}async convertV2RunToRun(e){var s;const r=this.session??await this.loadDefaultSession(),n=e.serialized;let i;if(e.run_type==="llm"){const a=e.inputs.prompts?e.inputs.prompts:e.inputs.messages.map(l=>yh(l));i={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:n,type:e.run_type,session_id:r.id,prompts:a,response:e.outputs}}else if(e.run_type==="chain"){const a=await Promise.all(e.child_runs.map(l=>this.convertV2RunToRun(l)));i={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:n,type:e.run_type,session_id:r.id,inputs:e.inputs,outputs:e.outputs,child_llm_runs:a.filter(l=>l.type==="llm"),child_chain_runs:a.filter(l=>l.type==="chain"),child_tool_runs:a.filter(l=>l.type==="tool")}}else if(e.run_type==="tool"){const a=await Promise.all(e.child_runs.map(l=>this.convertV2RunToRun(l)));i={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:n,type:e.run_type,session_id:r.id,tool_input:e.inputs.input,output:(s=e.outputs)==null?void 0:s.output,action:JSON.stringify(n),child_llm_runs:a.filter(l=>l.type==="llm"),child_chain_runs:a.filter(l=>l.type==="chain"),child_tool_runs:a.filter(l=>l.type==="tool")}}else throw new Error(`Unknown run type: ${e.run_type}`);return i}async persistRun(e){let r,n;e.run_type!==void 0?n=await this.convertV2RunToRun(e):n=e,n.type==="llm"?r=`${this.endpoint}/llm-runs`:n.type==="chain"?r=`${this.endpoint}/chain-runs`:r=`${this.endpoint}/tool-runs`;const i=await fetch(r,{method:"POST",headers:this.headers,body:JSON.stringify(n)});i.ok||console.error(`Failed to persist run: ${i.status} ${i.statusText}`)}async persistSession(e){const r=`${this.endpoint}/sessions`,n=await fetch(r,{method:"POST",headers:this.headers,body:JSON.stringify(e)});return n.ok?{id:(await n.json()).id,...e}:(console.error(`Failed to persist session: ${n.status} ${n.statusText}, using default session.`),{id:1,...e})}async _handleSessionResponse(e){const r=await fetch(e,{method:"GET",headers:this.headers});let n;if(!r.ok)return console.error(`Failed to load session: ${r.status} ${r.statusText}`),n={id:1,start_time:Date.now()},this.session=n,n;const i=await r.json();return i.length===0?(n={id:1,start_time:Date.now()},this.session=n,n):([n]=i,this.session=n,n)}}async function $S(t){const e=new LS;return t?await e.loadSession(t):await e.loadDefaultSession(),e}async function DS(){return new IS}let Nu;function MS(){const t="default"in dr?dr.default:dr;return new t({autoStart:!0,concurrency:1})}async function Re(t,e){e===!0?await t():(typeof Nu>"u"&&(Nu=MS()),Nu.add(t))}function US(t){return t?Array.isArray(t)||"name"in t?{callbacks:t}:t:{}}class FS{setHandler(e){return this.setHandlers([e])}}class Hl{constructor(e,r,n,i,s,a,o,l){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:l})}async handleText(e){await Promise.all(this.handlers.map(r=>Re(async()=>{var n;try{await((n=r.handleText)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch(i){console.error(`Error in handler ${r.constructor.name}, handleText: ${i}`)}},r.awaitHandlers)))}}class zS extends Hl{getChild(e){const r=new pt(this.runId);return r.setHandlers(this.inheritableHandlers),r.addTags(this.inheritableTags),r.addMetadata(this.inheritableMetadata),e&&r.addTags([e],!1),r}async handleRetrieverEnd(e){await Promise.all(this.handlers.map(r=>Re(async()=>{var n;if(!r.ignoreRetriever)try{await((n=r.handleRetrieverEnd)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch{console.error(`Error in handler ${r.constructor.name}, handleRetriever`)}},r.awaitHandlers)))}async handleRetrieverError(e){await Promise.all(this.handlers.map(r=>Re(async()=>{var n;if(!r.ignoreRetriever)try{await((n=r.handleRetrieverError)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch(i){console.error(`Error in handler ${r.constructor.name}, handleRetrieverError: ${i}`)}},r.awaitHandlers)))}}class Dp extends Hl{async handleLLMNewToken(e,r,n,i,s,a){await Promise.all(this.handlers.map(o=>Re(async()=>{var l;if(!o.ignoreLLM)try{await((l=o.handleLLMNewToken)==null?void 0:l.call(o,e,r??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,a))}catch(u){console.error(`Error in handler ${o.constructor.name}, handleLLMNewToken: ${u}`)}},o.awaitHandlers)))}async handleLLMError(e){await Promise.all(this.handlers.map(r=>Re(async()=>{var n;if(!r.ignoreLLM)try{await((n=r.handleLLMError)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch(i){console.error(`Error in handler ${r.constructor.name}, handleLLMError: ${i}`)}},r.awaitHandlers)))}async handleLLMEnd(e){await Promise.all(this.handlers.map(r=>Re(async()=>{var n;if(!r.ignoreLLM)try{await((n=r.handleLLMEnd)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch(i){console.error(`Error in handler ${r.constructor.name}, handleLLMEnd: ${i}`)}},r.awaitHandlers)))}}class BS extends Hl{getChild(e){const r=new pt(this.runId);return r.setHandlers(this.inheritableHandlers),r.addTags(this.inheritableTags),r.addMetadata(this.inheritableMetadata),e&&r.addTags([e],!1),r}async handleChainError(e,r,n,i,s){await Promise.all(this.handlers.map(a=>Re(async()=>{var o;if(!a.ignoreChain)try{await((o=a.handleChainError)==null?void 0:o.call(a,e,this.runId,this._parentRunId,this.tags,s))}catch(l){console.error(`Error in handler ${a.constructor.name}, handleChainError: ${l}`)}},a.awaitHandlers)))}async handleChainEnd(e,r,n,i,s){await Promise.all(this.handlers.map(a=>Re(async()=>{var o;if(!a.ignoreChain)try{await((o=a.handleChainEnd)==null?void 0:o.call(a,e,this.runId,this._parentRunId,this.tags,s))}catch(l){console.error(`Error in handler ${a.constructor.name}, handleChainEnd: ${l}`)}},a.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(r=>Re(async()=>{var n;if(!r.ignoreAgent)try{await((n=r.handleAgentAction)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch(i){console.error(`Error in handler ${r.constructor.name}, handleAgentAction: ${i}`)}},r.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(r=>Re(async()=>{var n;if(!r.ignoreAgent)try{await((n=r.handleAgentEnd)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch(i){console.error(`Error in handler ${r.constructor.name}, handleAgentEnd: ${i}`)}},r.awaitHandlers)))}}class VS extends Hl{getChild(e){const r=new pt(this.runId);return r.setHandlers(this.inheritableHandlers),r.addTags(this.inheritableTags),r.addMetadata(this.inheritableMetadata),e&&r.addTags([e],!1),r}async handleToolError(e){await Promise.all(this.handlers.map(r=>Re(async()=>{var n;if(!r.ignoreAgent)try{await((n=r.handleToolError)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch(i){console.error(`Error in handler ${r.constructor.name}, handleToolError: ${i}`)}},r.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(r=>Re(async()=>{var n;if(!r.ignoreAgent)try{await((n=r.handleToolEnd)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch(i){console.error(`Error in handler ${r.constructor.name}, handleToolEnd: ${i}`)}},r.awaitHandlers)))}}class pt extends FS{constructor(e){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=[],this.inheritableHandlers=[],this._parentRunId=e}async handleLLMStart(e,r,n=void 0,i=void 0,s=void 0){return Promise.all(r.map(async a=>{const o=ar();return await Promise.all(this.handlers.map(l=>Re(async()=>{var u;if(!l.ignoreLLM)try{await((u=l.handleLLMStart)==null?void 0:u.call(l,e,[a],o,this._parentRunId,s,this.tags,this.metadata))}catch(c){console.error(`Error in handler ${l.constructor.name}, handleLLMStart: ${c}`)}},l.awaitHandlers))),new Dp(o,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(e,r,n=void 0,i=void 0,s=void 0){return Promise.all(r.map(async a=>{const o=ar();return await Promise.all(this.handlers.map(l=>Re(async()=>{var u,c;if(!l.ignoreLLM)try{if(l.handleChatModelStart)await((u=l.handleChatModelStart)==null?void 0:u.call(l,e,[a],o,this._parentRunId,s,this.tags,this.metadata));else if(l.handleLLMStart){const d=yh(a);await((c=l.handleLLMStart)==null?void 0:c.call(l,e,[d],o,this._parentRunId,s,this.tags,this.metadata))}}catch(d){console.error(`Error in handler ${l.constructor.name}, handleLLMStart: ${d}`)}},l.awaitHandlers))),new Dp(o,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(e,r,n=ar(),i=void 0){return await Promise.all(this.handlers.map(s=>Re(async()=>{var a;if(!s.ignoreChain)try{await((a=s.handleChainStart)==null?void 0:a.call(s,e,r,n,this._parentRunId,this.tags,this.metadata,i))}catch(o){console.error(`Error in handler ${s.constructor.name}, handleChainStart: ${o}`)}},s.awaitHandlers))),new BS(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,r,n=ar()){return await Promise.all(this.handlers.map(i=>Re(async()=>{var s;if(!i.ignoreAgent)try{await((s=i.handleToolStart)==null?void 0:s.call(i,e,r,n,this._parentRunId,this.tags,this.metadata))}catch(a){console.error(`Error in handler ${i.constructor.name}, handleToolStart: ${a}`)}},i.awaitHandlers))),new VS(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,r,n=ar(),i=void 0){return await Promise.all(this.handlers.map(s=>Re(async()=>{var a;if(!s.ignoreRetriever)try{await((a=s.handleRetrieverStart)==null?void 0:a.call(s,e,r,n,this._parentRunId,this.tags,this.metadata))}catch(o){console.error(`Error in handler ${s.constructor.name}, handleRetrieverStart: ${o}`)}},s.awaitHandlers))),new zS(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}addHandler(e,r=!0){this.handlers.push(e),r&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(r=>r!==e),this.inheritableHandlers=this.inheritableHandlers.filter(r=>r!==e)}setHandlers(e,r=!0){this.handlers=[],this.inheritableHandlers=[];for(const n of e)this.addHandler(n,r)}addTags(e,r=!0){this.removeTags(e),this.tags.push(...e),r&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(r=>!e.includes(r)),this.inheritableTags=this.inheritableTags.filter(r=>!e.includes(r))}addMetadata(e,r=!0){this.metadata={...this.metadata,...e},r&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(const r of Object.keys(e))delete this.metadata[r],delete this.inheritableMetadata[r]}copy(e=[],r=!0){const n=new pt(this._parentRunId);for(const i of this.handlers){const s=this.inheritableHandlers.includes(i);n.addHandler(i,s)}for(const i of this.tags){const s=this.inheritableTags.includes(i);n.addTags([i],s)}for(const i of Object.keys(this.metadata)){const s=Object.keys(this.inheritableMetadata).includes(i);n.addMetadata({[i]:this.metadata[i]},s)}for(const i of e)n.handlers.filter(s=>s.name==="console_callback_handler").some(s=>s.name===i.name)||n.addHandler(i,r);return n}static fromHandlers(e){class r extends pa{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:ar()}),Object.assign(this,e)}}const n=new this;return n.addHandler(new r),n}static async configure(e,r,n,i,s,a,o){let l;(e||r)&&(Array.isArray(e)||!e?(l=new pt,l.setHandlers((e==null?void 0:e.map(Mp))??[],!0)):l=e,l=l.copy(Array.isArray(r)?r.map(Mp):r==null?void 0:r.handlers,!1));const u=Be("LANGCHAIN_VERBOSE")||(o==null?void 0:o.verbose),c=Be("LANGCHAIN_TRACING_V2")==="true",d=c||(Be("LANGCHAIN_TRACING")??!1);if(u||d){if(l||(l=new pt),u&&!l.handlers.some(h=>h.name===Ip.prototype.name)){const h=new Ip;l.addHandler(h,!0)}if(d&&!l.handlers.some(h=>h.name==="langchain_tracer"))if(c)l.addHandler(await DS(),!0);else{const h=Be("LANGCHAIN_PROJECT")&&Be("LANGCHAIN_SESSION");l.addHandler(await $S(h),!0)}}return(n||i)&&l&&(l.addTags(n??[]),l.addTags(i??[],!1)),(s||a)&&l&&(l.addMetadata(s??{}),l.addMetadata(a??{},!1)),l}}function Mp(t){return"name"in t?t:pa.fromMethods(t)}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */const HS=Object.prototype.hasOwnProperty;function ZS(t,e){return HS.call(t,e)}function KS(t){if(Array.isArray(t)){const r=new Array(t.length);for(let n=0;n<r.length;n++)r[n]=""+n;return r}if(Object.keys)return Object.keys(t);let e=[];for(let r in t)ZS(t,r)&&e.push(r);return e}function Pi(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function Mc(t){let e=0;const r=t.length;let n;for(;e<r;){if(n=t.charCodeAt(e),n>=48&&n<=57){e++;continue}return!1}return!0}function qS(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function Uc(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(let r=0,n=t.length;r<n;r++)if(Uc(t[r]))return!0}else if(typeof t=="object"){const r=KS(t),n=r.length;for(var e=0;e<n;e++)if(Uc(t[r[e]]))return!0}}return!1}function Up(t,e){const r=[t];for(const n in e){const i=typeof e[n]=="object"?JSON.stringify(e[n],null,2):e[n];typeof i<"u"&&r.push(`${n}: ${i}`)}return r.join(`
`)}class WS extends Error{constructor(e,r,n,i,s){super(Up(e,{name:r,index:n,operation:i,tree:s})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.setPrototypeOf(this,new.target.prototype),this.message=Up(e,{name:r,index:n,operation:i,tree:s})}}const ke=WS,Yn={add:function(t,e,r){return t[e]=this.value,{newDocument:r}},remove:function(t,e,r){var n=t[e];return delete t[e],{newDocument:r,removed:n}},replace:function(t,e,r){var n=t[e];return t[e]=this.value,{newDocument:r,removed:n}},move:function(t,e,r){let n=Fc(r,this.path);n&&(n=Pi(n));const i=Ts(r,{op:"remove",path:this.from}).removed;return Ts(r,{op:"add",path:this.path,value:i}),{newDocument:r,removed:n}},copy:function(t,e,r){const n=Fc(r,this.from);return Ts(r,{op:"add",path:this.path,value:Pi(n)}),{newDocument:r}},test:function(t,e,r){return{newDocument:r,test:rl(t[e],this.value)}},_get:function(t,e,r){return this.value=t[e],{newDocument:r}}};var JS={add:function(t,e,r){return Mc(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:r,index:e}},remove:function(t,e,r){var n=t.splice(e,1);return{newDocument:r,removed:n[0]}},replace:function(t,e,r){var n=t[e];return t[e]=this.value,{newDocument:r,removed:n}},move:Yn.move,copy:Yn.copy,test:Yn.test,_get:Yn._get};function Fc(t,e){if(e=="")return t;var r={op:"_get",path:e};return Ts(t,r),r.value}function Ts(t,e,r=!1,n=!0,i=!0,s=0){if(r&&(typeof r=="function"?r(e,0,t,e.path):zc(e,0)),e.path===""){let a={newDocument:t};if(e.op==="add")return a.newDocument=e.value,a;if(e.op==="replace")return a.newDocument=e.value,a.removed=t,a;if(e.op==="move"||e.op==="copy")return a.newDocument=Fc(t,e.from),e.op==="move"&&(a.removed=t),a;if(e.op==="test"){if(a.test=rl(t,e.value),a.test===!1)throw new ke("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return a.newDocument=t,a}else{if(e.op==="remove")return a.removed=t,a.newDocument=null,a;if(e.op==="_get")return e.value=t,a;if(r)throw new ke("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,e,t);return a}}else{n||(t=Pi(t));const o=(e.path||"").split("/");let l=t,u=1,c=o.length,d,h,w;for(typeof r=="function"?w=r:w=zc;;){if(h=o[u],h&&h.indexOf("~")!=-1&&(h=qS(h)),i&&(h=="__proto__"||h=="prototype"&&u>0&&o[u-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(r&&d===void 0&&(l[h]===void 0?d=o.slice(0,u).join("/"):u==c-1&&(d=e.path),d!==void 0&&w(e,0,t,d)),u++,Array.isArray(l)){if(h==="-")h=l.length;else{if(r&&!Mc(h))throw new ke("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,e,t);Mc(h)&&(h=~~h)}if(u>=c){if(r&&e.op==="add"&&h>l.length)throw new ke("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,e,t);const v=JS[e.op].call(e,l,h,t);if(v.test===!1)throw new ke("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return v}}else if(u>=c){const v=Yn[e.op].call(e,l,h,t);if(v.test===!1)throw new ke("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return v}if(l=l[h],r&&u<c&&(!l||typeof l!="object"))throw new ke("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,e,t)}}}function vh(t,e,r,n=!0,i=!0){if(r&&!Array.isArray(e))throw new ke("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");n||(t=Pi(t));const s=new Array(e.length);for(let a=0,o=e.length;a<o;a++)s[a]=Ts(t,e[a],r,!0,i,a),t=s[a].newDocument;return s.newDocument=t,s}function zc(t,e,r,n){if(typeof t!="object"||t===null||Array.isArray(t))throw new ke("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,r);if(Yn[t.op]){if(typeof t.path!="string")throw new ke("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,r);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new ke('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,r);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new ke("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,r);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new ke("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,r);if((t.op==="add"||t.op==="replace"||t.op==="test")&&Uc(t.value))throw new ke("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,r);if(r){if(t.op=="add"){var i=t.path.split("/").length,s=n.split("/").length;if(i!==s+1&&i!==s)throw new ke("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,r)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==n)throw new ke("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,r)}else if(t.op==="move"||t.op==="copy"){var a={op:"_get",path:t.from,value:void 0},o=GS([a],r);if(o&&o.name==="OPERATION_PATH_UNRESOLVABLE")throw new ke("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,r)}}}else throw new ke("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,r)}function GS(t,e,r){try{if(!Array.isArray(t))throw new ke("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)vh(Pi(e),Pi(t),r||!0);else{r=r||zc;for(var n=0;n<t.length;n++)r(t[n],n,e,void 0)}}catch(i){if(i instanceof ke)return i;throw i}}function rl(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var r=Array.isArray(t),n=Array.isArray(e),i,s,a;if(r&&n){if(s=t.length,s!=e.length)return!1;for(i=s;i--!==0;)if(!rl(t[i],e[i]))return!1;return!0}if(r!=n)return!1;var o=Object.keys(t);if(s=o.length,s!==Object.keys(e).length)return!1;for(i=s;i--!==0;)if(!e.hasOwnProperty(o[i]))return!1;for(i=s;i--!==0;)if(a=o[i],!rl(t[a],e[a]))return!1;return!0}return t!==t&&e!==e}class ra extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const e=await this.reader.read();return e.done&&this.reader.releaseLock(),e}catch(e){throw this.reader.releaseLock(),e}}async return(){this.ensureReader();const e=this.reader.cancel();return this.reader.releaseLock(),await e,{done:!0,value:void 0}}[Symbol.asyncIterator](){return this}static fromReadableStream(e){const r=e.getReader();return new ra({start(n){return i();function i(){return r.read().then(({done:s,value:a})=>{if(s){n.close();return}return n.enqueue(a),i()})}}})}static fromAsyncGenerator(e){return new ra({async pull(r){const{value:n,done:i}=await e.next();i?r.close():n&&r.enqueue(n)}})}}class on{constructor(e){Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=e.ops}concat(e){const r=this.ops.concat(e.ops),n=vh({},r);return new _h({ops:r,state:n[n.length-1].newDocument})}}class _h extends on{constructor(e){super(e),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=e.state}concat(e){const r=this.ops.concat(e.ops),n=vh(this.state,e.ops);return new _h({ops:r,state:n[n.length-1].newDocument})}}class YS extends Vl{constructor(e){super(e),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"indexMap",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=ra.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.parent_run_id===void 0)return!1;const r=e.tags??[];let n=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(n=n||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(n=n||this.includeTypes.includes(e.run_type)),this.includeTags!==void 0&&(n=n||r.find(i=>{var s;return(s=this.includeTags)==null?void 0:s.includes(i)})!==void 0),this.excludeNames!==void 0&&(n=n&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(n=n&&!this.excludeTypes.includes(e.run_type)),this.excludeTags!==void 0&&(n=n&&r.every(i=>{var s;return!((s=this.excludeTags)!=null&&s.includes(i))})),n}async onRunCreate(e){var n;if(e.parent_run_id===void 0&&await this.writer.write(new on({ops:[{op:"replace",path:"",value:{id:e.id,streamed_output:[],final_output:void 0,logs:[]}}]})),!this._includeRun(e))return;this.indexMap[e.id]=Math.max(...Object.values(this.indexMap),-1)+1;const r={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:((n=e.extra)==null?void 0:n.metadata)??{},start_time:new Date(e.start_time).toISOString(),streamed_output_str:[],final_output:void 0,end_time:void 0};await this.writer.write(new on({ops:[{op:"add",path:`/logs/${this.indexMap[e.id]}`,value:r}]}))}async onRunUpdate(e){try{const r=this.indexMap[e.id];if(r===void 0)return;const n=[{op:"add",path:`/logs/${r}/final_output`,value:e.outputs}];e.end_time!==void 0&&n.push({op:"add",path:`/logs/${r}/end_time`,value:new Date(e.end_time).toISOString()});const i=new on({ops:n});await this.writer.write(i)}finally{if(e.parent_run_id===void 0){const r=new on({ops:[{op:"replace",path:"/final_output",value:e.outputs}]});await this.writer.write(r),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,r){const n=this.indexMap[e.id];if(n===void 0)return;const i=new on({ops:[{op:"add",path:`/logs/${n}/streamed_output_str/-`,value:r}]});await this.writer.write(i)}}async function yn(t){return pt.configure(t==null?void 0:t.callbacks,void 0,t==null?void 0:t.tags,void 0,t==null?void 0:t.metadata)}function He(t,e){return t&&!Array.isArray(t)&&typeof t=="object"?t:{[e]:t}}class Ze extends Zr{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}bind(e){return new nl({bound:this,kwargs:e,config:{}})}map(){return new wh({bound:this})}withRetry(e){return new QS({bound:this,kwargs:{},config:{},maxAttemptNumber:e==null?void 0:e.stopAfterAttempt,...e})}withConfig(e){return new nl({bound:this,config:e,kwargs:{}})}withFallbacks(e){return new tx({runnable:this,fallbacks:e.fallbacks})}_getOptionsList(e,r=0){if(Array.isArray(e)){if(e.length!==r)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${r} inputs`);return e}return Array.from({length:r},()=>e)}async batch(e,r,n){const i=this._getOptionsList(r??{},e.length),s=new nh({maxConcurrency:n==null?void 0:n.maxConcurrency,onFailedAttempt:o=>{throw o}}),a=e.map((o,l)=>s.call(async()=>{try{return await this.invoke(o,i[l])}catch(u){if(n!=null&&n.returnExceptions)return u;throw u}}));return Promise.all(a)}async*_streamIterator(e,r){yield this.invoke(e,r)}async stream(e,r){return ra.fromAsyncGenerator(this._streamIterator(e,r))}_separateRunnableConfigFromCallOptions(e={}){const r={callbacks:e.callbacks,tags:e.tags,metadata:e.metadata},n={...e};return delete n.callbacks,delete n.tags,delete n.metadata,[r,n]}async _callWithConfig(e,r,n){const i=await yn(n),s=await(i==null?void 0:i.handleChainStart(this.toJSON(),He(r,"input"),void 0,n==null?void 0:n.runType));let a;try{a=await e.bind(this)(r,n,s)}catch(o){throw await(s==null?void 0:s.handleChainError(o)),o}return await(s==null?void 0:s.handleChainEnd(He(a,"output"))),a}async _batchWithConfig(e,r,n,i){const s=this._getOptionsList(n??{},r.length),a=await Promise.all(s.map(yn)),o=await Promise.all(a.map((u,c)=>u==null?void 0:u.handleChainStart(this.toJSON(),He(r[c],"input"))));let l;try{l=await e(r,s,o,i)}catch(u){throw await Promise.all(o.map(c=>c==null?void 0:c.handleChainError(u))),u}return await Promise.all(o.map(u=>u==null?void 0:u.handleChainEnd(He(l,"output")))),l}async*_transformStreamWithConfig(e,r,n){let i,s=!0,a,o=!0;const l=await yn(n);let u;const c=this.toJSON();async function*d(){for await(const w of e){if(u||(u=await(l==null?void 0:l.handleChainStart(c,{input:""},void 0,n==null?void 0:n.runType))),s)if(i===void 0)i=w;else try{i=i.concat(w)}catch{i=void 0,s=!1}yield w}}const h=d();try{const w=r(h,u,n);for await(const v of w)if(yield v,o)if(a===void 0)a=v;else try{a=a.concat(v)}catch{a=void 0,o=!1}}catch(w){throw await(u==null?void 0:u.handleChainError(w,void 0,void 0,void 0,{inputs:He(i,"input")})),w}await(u==null?void 0:u.handleChainEnd(a??{},void 0,void 0,void 0,{inputs:He(i,"input")}))}_patchConfig(e={},r=void 0){return{...e,callbacks:r}}pipe(e){return new Qn({first:this,last:fn(e)})}async*transform(e,r){let n;for await(const i of e)n===void 0?n=i:n=n.concat(i);yield*this._streamIterator(n,r)}async*streamLog(e,r,n){const i=new YS({...n,autoClose:!1}),s=r??{},{callbacks:a}=s;if(a===void 0)s.callbacks=[i];else if(Array.isArray(a))s.callbacks=a.concat([i]);else{const c=a.copy();c.inheritableHandlers.push(i),s.callbacks=c}const o=await this.stream(e,s);async function l(){try{for await(const c of o){const d=new on({ops:[{op:"add",path:"/streamed_output/-",value:c}]});await i.writer.write(d)}}finally{await i.writer.close()}}const u=l();try{for await(const c of i)yield c}finally{await u}}static isRunnable(e){return e.lc_runnable}}class nl extends Ze{static lc_name(){return"RunnableBinding"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","schema","runnable"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound,this.kwargs=e.kwargs,this.config=e.config}_mergeConfig(e){const r={...this.config};if(e)for(const n of Object.keys(e))n==="metadata"?r[n]={...r[n],...e[n]}:n==="tags"?r[n]=(r[n]??[]).concat(e[n]??[]):r[n]=e[n]??r[n];return r}bind(e){return this.constructor({bound:this.bound,kwargs:{...this.kwargs,...e},config:this.config})}withConfig(e){return this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...e}})}withRetry(e){return this.constructor({bound:this.bound.withRetry(e),kwargs:this.kwargs,config:this.config})}async invoke(e,r){return this.bound.invoke(e,this._mergeConfig({...r,...this.kwargs}))}async batch(e,r,n){const i=Array.isArray(r)?r.map(s=>this._mergeConfig({...s,...this.kwargs})):this._mergeConfig({...r,...this.kwargs});return this.bound.batch(e,i,n)}async*_streamIterator(e,r){yield*this.bound._streamIterator(e,this._mergeConfig({...r,...this.kwargs}))}async stream(e,r){return this.bound.stream(e,this._mergeConfig({...r,...this.kwargs}))}async*transform(e,r){yield*this.bound.transform(e,this._mergeConfig({...r,...this.kwargs}))}static isRunnableBinding(e){return e.bound&&Ze.isRunnable(e.bound)}}class wh extends Ze{static lc_name(){return"RunnableEach"}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","schema","runnable"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound}bind(e){return new wh({bound:this.bound.bind(e)})}async invoke(e,r){return this._callWithConfig(this._invoke,e,r)}async _invoke(e,r,n){return this.bound.batch(e,this._patchConfig(r,n==null?void 0:n.getChild()))}}class QS extends nl{static lc_name(){return"RunnableRetry"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","schema","runnable"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(e,r,n){const i=e>1?`retry:attempt:${e}`:void 0;return this._patchConfig(r,n==null?void 0:n.getChild(i))}async _invoke(e,r,n){return Ko(i=>super.invoke(e,this._patchConfigForRetry(i,r,n)),{onFailedAttempt:this.onFailedAttempt,retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,r){return this._callWithConfig(this._invoke,e,r)}async _batch(e,r,n,i){const s={};try{await Ko(async a=>{const o=e.map((h,w)=>w).filter(h=>s[h.toString()]===void 0||s[h.toString()]instanceof Error),l=o.map(h=>e[h]),u=o.map(h=>this._patchConfigForRetry(a,r==null?void 0:r[h],n==null?void 0:n[h])),c=await super.batch(l,u,{...i,returnExceptions:!0});let d;for(let h=0;h<c.length;h+=1){const w=c[h],v=o[h];w instanceof Error&&d===void 0&&(d=w),s[v.toString()]=w}if(d)throw d;return c},{onFailedAttempt:this.onFailedAttempt,retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(a){if((i==null?void 0:i.returnExceptions)!==!0)throw a}return Object.keys(s).sort((a,o)=>parseInt(a,10)-parseInt(o,10)).map(a=>s[parseInt(a,10)])}async batch(e,r,n){return this._batchWithConfig(this._batch.bind(this),e,r,n)}}class Qn extends Ze{static lc_name(){return"RunnableSequence"}constructor(e){super(e),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","schema","runnable"]}),this.first=e.first,this.middle=e.middle??this.middle,this.last=e.last}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,r){const n=await yn(r),i=await(n==null?void 0:n.handleChainStart(this.toJSON(),He(e,"input")));let s=e,a;try{const o=[this.first,...this.middle];for(let l=0;l<o.length;l+=1)s=await o[l].invoke(s,this._patchConfig(r,i==null?void 0:i.getChild(`seq:step:${l+1}`)));a=await this.last.invoke(s,this._patchConfig(r,i==null?void 0:i.getChild(`seq:step:${this.steps.length}`)))}catch(o){throw await(i==null?void 0:i.handleChainError(o)),o}return await(i==null?void 0:i.handleChainEnd(He(a,"output"))),a}async batch(e,r,n){const i=this._getOptionsList(r??{},e.length),s=await Promise.all(i.map(yn)),a=await Promise.all(s.map((u,c)=>u==null?void 0:u.handleChainStart(this.toJSON(),He(e[c],"input"))));let o=e,l;try{const u=[this.first,...this.middle];for(let c=0;c<u.length;c+=1)o=await u[c].batch(o,a.map((h,w)=>this._patchConfig(i[w],h==null?void 0:h.getChild(`seq:step:${c+1}`))),n);l=await this.last.batch(o,a.map(c=>this._patchConfig(i[this.steps.length-1],c==null?void 0:c.getChild(`seq:step:${this.steps.length}`))),n)}catch(u){throw await Promise.all(a.map(c=>c==null?void 0:c.handleChainError(u))),u}return await Promise.all(a.map((u,c)=>u==null?void 0:u.handleChainEnd(He(l[c],"output")))),l}async*_streamIterator(e,r){const n=await yn(r),i=await(n==null?void 0:n.handleChainStart(this.toJSON(),He(e,"input")));let s=e;const a=[this.first,...this.middle,this.last],o=Math.min(a.length-1,a.length-[...a].reverse().findIndex(c=>{var w;const d=c.transform===Ze.prototype.transform,h=nl.isRunnableBinding(c)&&((w=c.bound)==null?void 0:w.transform)===Ze.prototype.transform;return d||h})-1);try{const c=a.slice(0,o);for(let d=0;d<c.length;d+=1)s=await c[d].invoke(s,this._patchConfig(r,i==null?void 0:i.getChild(`seq:step:${d+1}`)))}catch(c){throw await(i==null?void 0:i.handleChainError(c)),c}let l=!0,u;try{let c=await a[o]._streamIterator(s,this._patchConfig(r,i==null?void 0:i.getChild(`seq:step:${o+1}`)));const d=a.slice(o+1);for(let h=0;h<d.length;h+=1)c=await d[h].transform(c,this._patchConfig(r,i==null?void 0:i.getChild(`seq:step:${o+h+2}`)));for await(const h of c)if(yield h,l)if(u===void 0)u=h;else try{u=u.concat(h)}catch{u=void 0,l=!1}}catch(c){throw await(i==null?void 0:i.handleChainError(c)),c}await(i==null?void 0:i.handleChainEnd(He(u,"output")))}pipe(e){return Qn.isRunnableSequence(e)?new Qn({first:this.first,middle:this.middle.concat([this.last,e.first,...e.middle]),last:e.last}):new Qn({first:this.first,middle:[...this.middle,this.last],last:fn(e)})}static isRunnableSequence(e){return Array.isArray(e.middle)&&Ze.isRunnable(e)}static from([e,...r]){return new Qn({first:fn(e),middle:r.slice(0,-1).map(fn),last:fn(r[r.length-1])})}}class XS extends Ze{static lc_name(){return"RunnableMap"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","schema","runnable"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(const[r,n]of Object.entries(e.steps))this.steps[r]=fn(n)}async invoke(e,r){const n=await yn(r),i=await(n==null?void 0:n.handleChainStart(this.toJSON(),{input:e})),s={};try{await Promise.all(Object.entries(this.steps).map(async([a,o])=>{s[a]=await o.invoke(e,this._patchConfig(r,i==null?void 0:i.getChild(a)))}))}catch(a){throw await(i==null?void 0:i.handleChainError(a)),a}return await(i==null?void 0:i.handleChainEnd(s)),s}}class ex extends Ze{static lc_name(){return"RunnableLambda"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","schema","runnable"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.func=e.func}async _invoke(e,r,n){let i=await this.func(e);return i&&Ze.isRunnable(i)&&(i=await i.invoke(e,this._patchConfig(r,n==null?void 0:n.getChild()))),i}async invoke(e,r){return this._callWithConfig(this._invoke,e,r)}}class tx extends Ze{static lc_name(){return"RunnableWithFallbacks"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","schema","runnable"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){yield this.runnable;for(const e of this.fallbacks)yield e}async invoke(e,r){const n=await pt.configure(r==null?void 0:r.callbacks,void 0,r==null?void 0:r.tags,void 0,r==null?void 0:r.metadata),i=await(n==null?void 0:n.handleChainStart(this.toJSON(),He(e,"input")));let s;for(const a of this.runnables())try{const o=await a.invoke(e,this._patchConfig(r,i==null?void 0:i.getChild()));return await(i==null?void 0:i.handleChainEnd(He(o,"output"))),o}catch(o){s===void 0&&(s=o)}throw s===void 0?new Error("No error stored at end of fallback."):(await(i==null?void 0:i.handleChainError(s)),s)}async batch(e,r,n){if(n!=null&&n.returnExceptions)throw new Error("Not implemented.");const i=this._getOptionsList(r??{},e.length),s=await Promise.all(i.map(l=>pt.configure(l==null?void 0:l.callbacks,void 0,l==null?void 0:l.tags,void 0,l==null?void 0:l.metadata))),a=await Promise.all(s.map((l,u)=>l==null?void 0:l.handleChainStart(this.toJSON(),He(e[u],"input"))));let o;for(const l of this.runnables())try{const u=await l.batch(e,a.map((c,d)=>this._patchConfig(i[d],c==null?void 0:c.getChild())),n);return await Promise.all(a.map((c,d)=>c==null?void 0:c.handleChainEnd(He(u[d],"output")))),u}catch(u){o===void 0&&(o=u)}throw o?(await Promise.all(a.map(l=>l==null?void 0:l.handleChainError(o))),o):new Error("No error stored at end of fallbacks.")}}function fn(t){if(typeof t=="function")return new ex({func:t});if(Ze.isRunnable(t))return t;if(!Array.isArray(t)&&typeof t=="object"){const e={};for(const[r,n]of Object.entries(t))e[r]=fn(n);return new XS({steps:e})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}class zv extends Vy{constructor(e){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts","base"]}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new En(this.value)]}}class bh extends Ze{get lc_attributes(){return{partialVariables:void 0}}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts",this._getPromptType()]}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"partialVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{inputVariables:r}=e;if(r.includes("stop"))throw new Error("Cannot have an input variable named 'stop', as it is used internally, please rename.");Object.assign(this,e)}async mergePartialAndUserVariables(e){const r=this.partialVariables??{},n={};for(const[s,a]of Object.entries(r))typeof a=="string"?n[s]=a:n[s]=await a();return{...n,...e}}async invoke(e,r){return this._callWithConfig(n=>this.formatPromptValue(n),e,{...r,runType:"prompt"})}serialize(){throw new Error("Use .toJSON() instead")}static async deserialize(e){switch(e._type){case"prompt":{const{PromptTemplate:r}=await je(()=>Promise.resolve().then(()=>Fp),void 0,import.meta.url);return r.deserialize(e)}case void 0:{const{PromptTemplate:r}=await je(()=>Promise.resolve().then(()=>Fp),void 0,import.meta.url);return r.deserialize({...e,_type:"prompt"})}case"few_shot":{const{FewShotPromptTemplate:r}=await je(()=>import("./few_shot-aeac62fe.js"),["./few_shot-aeac62fe.js","./theme-e406f2b7.css"],import.meta.url);return r.deserialize(e)}default:throw new Error(`Invalid prompt type in config: ${e._type}`)}}}class rx extends bh{async formatPromptValue(e){const r=await this.format(e);return new zv(r)}}const Bv=t=>{const e=t.split(""),r=[],n=(s,a)=>{for(let o=a;o<e.length;o+=1)if(s.includes(e[o]))return o;return-1};let i=0;for(;i<e.length;)if(e[i]==="{"&&i+1<e.length&&e[i+1]==="{")r.push({type:"literal",text:"{"}),i+=2;else if(e[i]==="}"&&i+1<e.length&&e[i+1]==="}")r.push({type:"literal",text:"}"}),i+=2;else if(e[i]==="{"){const s=n("}",i);if(s<0)throw new Error("Unclosed '{' in template.");r.push({type:"variable",name:e.slice(i+1,s).join("")}),i=s+1}else{if(e[i]==="}")throw new Error("Single '}' in template.");{const s=n("{}",i),a=(s<0?e.slice(i):e.slice(i,s)).join("");r.push({type:"literal",text:a}),i=s<0?e.length:s}}return r},nx=(t,e)=>Bv(t).reduce((r,n)=>{if(n.type==="variable"){if(n.name in e)return r+e[n.name];throw new Error(`Missing value for input ${n.name}`)}return r+n.text},""),Bc={"f-string":nx,jinja2:(t,e)=>""},ix={"f-string":Bv,jinja2:t=>[]},Vv=(t,e,r)=>Bc[e](t,r),sx=(t,e)=>ix[e](t),ax=(t,e,r)=>{if(!(e in Bc)){const n=Object.keys(Bc);throw new Error(`Invalid template format. Got \`${e}\`;
                         should be one of ${n}`)}try{const n=r.reduce((i,s)=>(i[s]="foo",i),{});Vv(t,e,n)}catch(n){throw new Error(`Invalid prompt schema: ${n.message}`)}};class Yt extends rx{static lc_name(){return"PromptTemplate"}constructor(e){if(super(e),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign(this,e),this.validateTemplate){let r=this.inputVariables;this.partialVariables&&(r=r.concat(Object.keys(this.partialVariables))),ax(this.template,this.templateFormat,r)}}_getPromptType(){return"prompt"}async format(e){const r=await this.mergePartialAndUserVariables(e);return Vv(this.template,this.templateFormat,r)}static fromExamples(e,r,n,i=`

`,s=""){const a=[s,...e,r].join(i);return new Yt({inputVariables:n,template:a})}static fromTemplate(e,{templateFormat:r="f-string",...n}={}){if(r==="jinja2")throw new Error("jinja2 templates are not currently supported.");const i=new Set;return sx(e,r).forEach(s=>{s.type==="variable"&&i.add(s.name)}),new Yt({inputVariables:[...i],templateFormat:r,template:e,...n})}async partial(e){const r=this.inputVariables.filter(s=>!(s in e)),n={...this.partialVariables??{},...e},i={...this,inputVariables:r,partialVariables:n};return new Yt(i)}serialize(){if(this.outputParser!==void 0)throw new Error("Cannot serialize a prompt template with an output parser");return{_type:this._getPromptType(),input_variables:this.inputVariables,template:this.template,template_format:this.templateFormat}}static async deserialize(e){if(!e.template)throw new Error("Prompt template must have a template");return new Yt({inputVariables:e.input_variables,template:e.template,templateFormat:e.template_format})}}const Fp=Object.freeze(Object.defineProperty({__proto__:null,PromptTemplate:Yt},Symbol.toStringTag,{value:"Module"}));class ox extends Ze{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts","chat"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}async invoke(e,r){return this._callWithConfig(n=>this.formatMessages(n),e,{...r,runType:"prompt"})}}class Hv extends Vy{static lc_name(){return"ChatPromptValue"}constructor(e){Array.isArray(e)&&(e={messages:e}),super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts","chat"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return JSON.stringify(this.messages)}toChatMessages(){return this.messages}}class Zl extends ox{constructor(e){"prompt"in e||(e={prompt:e}),super(e),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt}get inputVariables(){return this.prompt.inputVariables}async formatMessages(e){return[await this.format(e)]}}class lx extends bh{constructor(e){super(e)}async format(e){return(await this.formatPromptValue(e)).toString()}async formatPromptValue(e){const r=await this.formatMessages(e);return new Hv(r)}}class ux extends Zl{static lc_name(){return"ChatMessagePromptTemplate"}constructor(e,r){"prompt"in e||(e={prompt:e,role:r}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}async format(e){return new Ol(await this.prompt.format(e),this.role)}static fromTemplate(e,r){return new this(Yt.fromTemplate(e),r)}}class cx extends Zl{static lc_name(){return"HumanMessagePromptTemplate"}async format(e){return new En(await this.prompt.format(e))}static fromTemplate(e){return new this(Yt.fromTemplate(e))}}class dx extends Zl{static lc_name(){return"AIMessagePromptTemplate"}async format(e){return new Pl(await this.prompt.format(e))}static fromTemplate(e){return new this(Yt.fromTemplate(e))}}class Zv extends Zl{static lc_name(){return"SystemMessagePromptTemplate"}async format(e){return new sh(await this.prompt.format(e))}static fromTemplate(e){return new this(Yt.fromTemplate(e))}}function hx(t){return typeof t.formatMessages=="function"}function fx(t){if(hx(t)||By(t))return t;const e=xs(t);if(e._getType()==="human")return cx.fromTemplate(e.content);if(e._getType()==="ai")return dx.fromTemplate(e.content);if(e._getType()==="system")return Zv.fromTemplate(e.content);if(Ol.isInstance(e))return ux.fromTemplate(e.content,e.role);throw new Error(`Could not coerce message prompt template from input. Received message type: "${e._getType()}".`)}class Xn extends lx{static lc_name(){return"ChatPromptTemplate"}get lc_aliases(){return{promptMessages:"messages"}}constructor(e){if(super(e),Object.defineProperty(this,"promptMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign(this,e),this.validateTemplate){const r=new Set;for(const o of this.promptMessages)if(!(o instanceof zr))for(const l of o.inputVariables)r.add(l);const n=this.inputVariables,i=new Set(this.partialVariables?n.concat(Object.keys(this.partialVariables)):n),s=new Set([...i].filter(o=>!r.has(o)));if(s.size>0)throw new Error(`Input variables \`${[...s]}\` are not used in any of the prompt messages.`);const a=new Set([...r].filter(o=>!i.has(o)));if(a.size>0)throw new Error(`Input variables \`${[...a]}\` are used in prompt messages but not in the prompt template.`)}}_getPromptType(){return"chat"}async formatMessages(e){const r=await this.mergePartialAndUserVariables(e);let n=[];for(const i of this.promptMessages)if(i instanceof zr)n.push(i);else{const s=i.inputVariables.reduce((o,l)=>{if(!(l in r))throw new Error(`Missing value for input variable \`${l.toString()}\``);return o[l]=r[l],o},{}),a=await i.formatMessages(s);n=n.concat(a)}return n}async partial(e){const r=this.inputVariables.filter(s=>!(s in e)),n={...this.partialVariables??{},...e},i={...this,inputVariables:r,partialVariables:n};return new Xn(i)}static fromMessages(e){const r=e.reduce((s,a)=>s.concat(a instanceof Xn?a.promptMessages:[fx(a)]),[]),n=e.reduce((s,a)=>a instanceof Xn?Object.assign(s,a.partialVariables):s,Object.create(null)),i=new Set;for(const s of r)if(!(s instanceof zr))for(const a of s.inputVariables)a in n||i.add(a);return new Xn({inputVariables:[...i],promptMessages:r,partialVariables:n})}static fromPromptMessages(e){return this.fromMessages(e)}}function Fa(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Kv={exports:{}};(function(t,e){(function(r){t.exports=r()})(function(){return function r(n,i,s){function a(u,c){if(!i[u]){if(!n[u]){var d=typeof Fa=="function"&&Fa;if(!c&&d)return d(u,!0);if(o)return o(u,!0);throw new Error("Cannot find module '"+u+"'")}c=i[u]={exports:{}},n[u][0].call(c.exports,function(h){var w=n[u][1][h];return a(w||h)},c,c.exports,r,n,i,s)}return i[u].exports}for(var o=typeof Fa=="function"&&Fa,l=0;l<s.length;l++)a(s[l]);return a}({1:[function(r,n,i){(function(s,a,o,l,u,c,d,h,w){var v=r("crypto");function T(S,P){P=p(S,P);var m;return(m=P.algorithm!=="passthrough"?v.createHash(P.algorithm):new I).write===void 0&&(m.write=m.update,m.end=m.update),x(P,m).dispatch(S),m.update||m.end(""),m.digest?m.digest(P.encoding==="buffer"?void 0:P.encoding):(S=m.read(),P.encoding!=="buffer"?S.toString(P.encoding):S)}(i=n.exports=T).sha1=function(S){return T(S)},i.keys=function(S){return T(S,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},i.MD5=function(S){return T(S,{algorithm:"md5",encoding:"hex"})},i.keysMD5=function(S){return T(S,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var b=v.getHashes?v.getHashes().slice():["sha1","md5"],y=(b.push("passthrough"),["buffer","hex","binary","base64"]);function p(S,P){var m={};if(m.algorithm=(P=P||{}).algorithm||"sha1",m.encoding=P.encoding||"hex",m.excludeValues=!!P.excludeValues,m.algorithm=m.algorithm.toLowerCase(),m.encoding=m.encoding.toLowerCase(),m.ignoreUnknown=P.ignoreUnknown===!0,m.respectType=P.respectType!==!1,m.respectFunctionNames=P.respectFunctionNames!==!1,m.respectFunctionProperties=P.respectFunctionProperties!==!1,m.unorderedArrays=P.unorderedArrays===!0,m.unorderedSets=P.unorderedSets!==!1,m.unorderedObjects=P.unorderedObjects!==!1,m.replacer=P.replacer||void 0,m.excludeKeys=P.excludeKeys||void 0,S===void 0)throw new Error("Object argument required.");for(var E=0;E<b.length;++E)b[E].toLowerCase()===m.algorithm.toLowerCase()&&(m.algorithm=b[E]);if(b.indexOf(m.algorithm)===-1)throw new Error('Algorithm "'+m.algorithm+'"  not supported. supported values: '+b.join(", "));if(y.indexOf(m.encoding)===-1&&m.algorithm!=="passthrough")throw new Error('Encoding "'+m.encoding+'"  not supported. supported values: '+y.join(", "));return m}function _(S){if(typeof S=="function")return/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(S))!=null}function x(S,P,m){m=m||[];function E(g){return P.update?P.update(g,"utf8"):P.write(g,"utf8")}return{dispatch:function(g){return this["_"+((g=S.replacer?S.replacer(g):g)===null?"null":typeof g)](g)},_object:function(g){var A,C=Object.prototype.toString.call(g),W=/\[object (.*)\]/i.exec(C);if(W=(W=W?W[1]:"unknown:["+C+"]").toLowerCase(),0<=(C=m.indexOf(g)))return this.dispatch("[CIRCULAR:"+C+"]");if(m.push(g),o!==void 0&&o.isBuffer&&o.isBuffer(g))return E("buffer:"),E(g);if(W==="object"||W==="function"||W==="asyncfunction")return C=Object.keys(g),S.unorderedObjects&&(C=C.sort()),S.respectType===!1||_(g)||C.splice(0,0,"prototype","__proto__","constructor"),S.excludeKeys&&(C=C.filter(function(q){return!S.excludeKeys(q)})),E("object:"+C.length+":"),A=this,C.forEach(function(q){A.dispatch(q),E(":"),S.excludeValues||A.dispatch(g[q]),E(",")});if(!this["_"+W]){if(S.ignoreUnknown)return E("["+W+"]");throw new Error('Unknown object type "'+W+'"')}this["_"+W](g)},_array:function(g,q){q=q!==void 0?q:S.unorderedArrays!==!1;var C=this;if(E("array:"+g.length+":"),!q||g.length<=1)return g.forEach(function(G){return C.dispatch(G)});var W=[],q=g.map(function(G){var H=new I,ae=m.slice();return x(S,H,ae).dispatch(G),W=W.concat(ae.slice(m.length)),H.read().toString()});return m=m.concat(W),q.sort(),this._array(q,!1)},_date:function(g){return E("date:"+g.toJSON())},_symbol:function(g){return E("symbol:"+g.toString())},_error:function(g){return E("error:"+g.toString())},_boolean:function(g){return E("bool:"+g.toString())},_string:function(g){E("string:"+g.length+":"),E(g.toString())},_function:function(g){E("fn:"),_(g)?this.dispatch("[native]"):this.dispatch(g.toString()),S.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(g.name)),S.respectFunctionProperties&&this._object(g)},_number:function(g){return E("number:"+g.toString())},_xml:function(g){return E("xml:"+g.toString())},_null:function(){return E("Null")},_undefined:function(){return E("Undefined")},_regexp:function(g){return E("regex:"+g.toString())},_uint8array:function(g){return E("uint8array:"),this.dispatch(Array.prototype.slice.call(g))},_uint8clampedarray:function(g){return E("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(g))},_int8array:function(g){return E("int8array:"),this.dispatch(Array.prototype.slice.call(g))},_uint16array:function(g){return E("uint16array:"),this.dispatch(Array.prototype.slice.call(g))},_int16array:function(g){return E("int16array:"),this.dispatch(Array.prototype.slice.call(g))},_uint32array:function(g){return E("uint32array:"),this.dispatch(Array.prototype.slice.call(g))},_int32array:function(g){return E("int32array:"),this.dispatch(Array.prototype.slice.call(g))},_float32array:function(g){return E("float32array:"),this.dispatch(Array.prototype.slice.call(g))},_float64array:function(g){return E("float64array:"),this.dispatch(Array.prototype.slice.call(g))},_arraybuffer:function(g){return E("arraybuffer:"),this.dispatch(new Uint8Array(g))},_url:function(g){return E("url:"+g.toString())},_map:function(g){return E("map:"),g=Array.from(g),this._array(g,S.unorderedSets!==!1)},_set:function(g){return E("set:"),g=Array.from(g),this._array(g,S.unorderedSets!==!1)},_file:function(g){return E("file:"),this.dispatch([g.name,g.size,g.type,g.lastModfied])},_blob:function(){if(S.ignoreUnknown)return E("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return E("domwindow")},_bigint:function(g){return E("bigint:"+g.toString())},_process:function(){return E("process")},_timer:function(){return E("timer")},_pipe:function(){return E("pipe")},_tcp:function(){return E("tcp")},_udp:function(){return E("udp")},_tty:function(){return E("tty")},_statwatcher:function(){return E("statwatcher")},_securecontext:function(){return E("securecontext")},_connection:function(){return E("connection")},_zlib:function(){return E("zlib")},_context:function(){return E("context")},_nodescript:function(){return E("nodescript")},_httpparser:function(){return E("httpparser")},_dataview:function(){return E("dataview")},_signal:function(){return E("signal")},_fsevent:function(){return E("fsevent")},_tlswrap:function(){return E("tlswrap")}}}function I(){return{buf:"",write:function(S){this.buf+=S},end:function(S){this.buf+=S},read:function(){return this.buf}}}i.writeToStream=function(S,P,m){return m===void 0&&(m=P,P={}),x(P=p(S,P),m).dispatch(S)}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(r,n,i){(function(s,a,o,l,u,c,d,h,w){(function(v){var T=typeof Uint8Array<"u"?Uint8Array:Array,b="+".charCodeAt(0),y="/".charCodeAt(0),p="0".charCodeAt(0),_="a".charCodeAt(0),x="A".charCodeAt(0),I="-".charCodeAt(0),S="_".charCodeAt(0);function P(m){return m=m.charCodeAt(0),m===b||m===I?62:m===y||m===S?63:m<p?-1:m<p+10?m-p+26+26:m<x+26?m-x:m<_+26?m-_+26:void 0}v.toByteArray=function(m){var E,g;if(0<m.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var A=m.length,A=m.charAt(A-2)==="="?2:m.charAt(A-1)==="="?1:0,C=new T(3*m.length/4-A),W=0<A?m.length-4:m.length,q=0;function G(H){C[q++]=H}for(E=0;E<W;E+=4,0)G((16711680&(g=P(m.charAt(E))<<18|P(m.charAt(E+1))<<12|P(m.charAt(E+2))<<6|P(m.charAt(E+3))))>>16),G((65280&g)>>8),G(255&g);return A==2?G(255&(g=P(m.charAt(E))<<2|P(m.charAt(E+1))>>4)):A==1&&(G((g=P(m.charAt(E))<<10|P(m.charAt(E+1))<<4|P(m.charAt(E+2))>>2)>>8&255),G(255&g)),C},v.fromByteArray=function(m){var E,g,A,C,W=m.length%3,q="";function G(H){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(H)}for(E=0,A=m.length-W;E<A;E+=3)g=(m[E]<<16)+(m[E+1]<<8)+m[E+2],q+=G((C=g)>>18&63)+G(C>>12&63)+G(C>>6&63)+G(63&C);switch(W){case 1:q=(q+=G((g=m[m.length-1])>>2))+G(g<<4&63)+"==";break;case 2:q=(q=(q+=G((g=(m[m.length-2]<<8)+m[m.length-1])>>10))+G(g>>4&63))+G(g<<2&63)+"="}return q}})(i===void 0?this.base64js={}:i)}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(r,n,i){(function(s,a,b,l,u,c,d,h,w){var v=r("base64-js"),T=r("ieee754");function b(f,k,O){if(!(this instanceof b))return new b(f,k,O);var L,N,z,te,ve=typeof f;if(k==="base64"&&ve=="string")for(f=(te=f).trim?te.trim():te.replace(/^\s+|\s+$/g,"");f.length%4!=0;)f+="=";if(ve=="number")L=M(f);else if(ve=="string")L=b.byteLength(f,k);else{if(ve!="object")throw new Error("First argument needs to be a number, array or string.");L=M(f.length)}if(b._useTypedArrays?N=b._augment(new Uint8Array(L)):((N=this).length=L,N._isBuffer=!0),b._useTypedArrays&&typeof f.byteLength=="number")N._set(f);else if(j(te=f)||b.isBuffer(te)||te&&typeof te=="object"&&typeof te.length=="number")for(z=0;z<L;z++)b.isBuffer(f)?N[z]=f.readUInt8(z):N[z]=f[z];else if(ve=="string")N.write(f,0,k);else if(ve=="number"&&!b._useTypedArrays&&!O)for(z=0;z<L;z++)N[z]=0;return N}function y(f,k,O,L){return b._charsWritten=wt(function(N){for(var z=[],te=0;te<N.length;te++)z.push(255&N.charCodeAt(te));return z}(k),f,O,L)}function p(f,k,O,L){return b._charsWritten=wt(function(N){for(var z,te,ve=[],Te=0;Te<N.length;Te++)te=N.charCodeAt(Te),z=te>>8,te=te%256,ve.push(te),ve.push(z);return ve}(k),f,O,L)}function _(f,k,O){var L="";O=Math.min(f.length,O);for(var N=k;N<O;N++)L+=String.fromCharCode(f[N]);return L}function x(f,k,O,z){z||(F(typeof O=="boolean","missing or invalid endian"),F(k!=null,"missing offset"),F(k+1<f.length,"Trying to read beyond buffer length"));var N,z=f.length;if(!(z<=k))return O?(N=f[k],k+1<z&&(N|=f[k+1]<<8)):(N=f[k]<<8,k+1<z&&(N|=f[k+1])),N}function I(f,k,O,z){z||(F(typeof O=="boolean","missing or invalid endian"),F(k!=null,"missing offset"),F(k+3<f.length,"Trying to read beyond buffer length"));var N,z=f.length;if(!(z<=k))return O?(k+2<z&&(N=f[k+2]<<16),k+1<z&&(N|=f[k+1]<<8),N|=f[k],k+3<z&&(N+=f[k+3]<<24>>>0)):(k+1<z&&(N=f[k+1]<<16),k+2<z&&(N|=f[k+2]<<8),k+3<z&&(N|=f[k+3]),N+=f[k]<<24>>>0),N}function S(f,k,O,L){if(L||(F(typeof O=="boolean","missing or invalid endian"),F(k!=null,"missing offset"),F(k+1<f.length,"Trying to read beyond buffer length")),!(f.length<=k))return L=x(f,k,O,!0),32768&L?-1*(65535-L+1):L}function P(f,k,O,L){if(L||(F(typeof O=="boolean","missing or invalid endian"),F(k!=null,"missing offset"),F(k+3<f.length,"Trying to read beyond buffer length")),!(f.length<=k))return L=I(f,k,O,!0),2147483648&L?-1*(4294967295-L+1):L}function m(f,k,O,L){return L||(F(typeof O=="boolean","missing or invalid endian"),F(k+3<f.length,"Trying to read beyond buffer length")),T.read(f,k,O,23,4)}function E(f,k,O,L){return L||(F(typeof O=="boolean","missing or invalid endian"),F(k+7<f.length,"Trying to read beyond buffer length")),T.read(f,k,O,52,8)}function g(f,k,O,L,N){if(N||(F(k!=null,"missing value"),F(typeof L=="boolean","missing or invalid endian"),F(O!=null,"missing offset"),F(O+1<f.length,"trying to write beyond buffer length"),Kt(k,65535)),N=f.length,!(N<=O))for(var z=0,te=Math.min(N-O,2);z<te;z++)f[O+z]=(k&255<<8*(L?z:1-z))>>>8*(L?z:1-z)}function A(f,k,O,L,N){if(N||(F(k!=null,"missing value"),F(typeof L=="boolean","missing or invalid endian"),F(O!=null,"missing offset"),F(O+3<f.length,"trying to write beyond buffer length"),Kt(k,4294967295)),N=f.length,!(N<=O))for(var z=0,te=Math.min(N-O,4);z<te;z++)f[O+z]=k>>>8*(L?z:3-z)&255}function C(f,k,O,L,N){N||(F(k!=null,"missing value"),F(typeof L=="boolean","missing or invalid endian"),F(O!=null,"missing offset"),F(O+1<f.length,"Trying to write beyond buffer length"),Rt(k,32767,-32768)),f.length<=O||g(f,0<=k?k:65535+k+1,O,L,N)}function W(f,k,O,L,N){N||(F(k!=null,"missing value"),F(typeof L=="boolean","missing or invalid endian"),F(O!=null,"missing offset"),F(O+3<f.length,"Trying to write beyond buffer length"),Rt(k,2147483647,-2147483648)),f.length<=O||A(f,0<=k?k:4294967295+k+1,O,L,N)}function q(f,k,O,L,N){N||(F(k!=null,"missing value"),F(typeof L=="boolean","missing or invalid endian"),F(O!=null,"missing offset"),F(O+3<f.length,"Trying to write beyond buffer length"),Qr(k,34028234663852886e22,-34028234663852886e22)),f.length<=O||T.write(f,k,O,L,23,4)}function G(f,k,O,L,N){N||(F(k!=null,"missing value"),F(typeof L=="boolean","missing or invalid endian"),F(O!=null,"missing offset"),F(O+7<f.length,"Trying to write beyond buffer length"),Qr(k,17976931348623157e292,-17976931348623157e292)),f.length<=O||T.write(f,k,O,L,52,8)}i.Buffer=b,i.SlowBuffer=b,i.INSPECT_MAX_BYTES=50,b.poolSize=8192,b._useTypedArrays=function(){try{var f=new ArrayBuffer(0),k=new Uint8Array(f);return k.foo=function(){return 42},k.foo()===42&&typeof k.subarray=="function"}catch{return!1}}(),b.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},b.isBuffer=function(f){return!(f==null||!f._isBuffer)},b.byteLength=function(f,k){var O;switch(f+="",k||"utf8"){case"hex":O=f.length/2;break;case"utf8":case"utf-8":O=U(f).length;break;case"ascii":case"binary":case"raw":O=f.length;break;case"base64":O=oe(f).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":O=2*f.length;break;default:throw new Error("Unknown encoding")}return O},b.concat=function(f,k){if(F(j(f),`Usage: Buffer.concat(list, [totalLength])
list should be an Array.`),f.length===0)return new b(0);if(f.length===1)return f[0];if(typeof k!="number")for(N=k=0;N<f.length;N++)k+=f[N].length;for(var O=new b(k),L=0,N=0;N<f.length;N++){var z=f[N];z.copy(O,L),L+=z.length}return O},b.prototype.write=function(f,k,O,L){isFinite(k)?isFinite(O)||(L=O,O=void 0):(Te=L,L=k,k=O,O=Te),k=Number(k)||0;var N,z,te,ve,Te=this.length-k;switch((!O||Te<(O=Number(O)))&&(O=Te),L=String(L||"utf8").toLowerCase()){case"hex":N=function(Nt,rt,nt,Pe){nt=Number(nt)||0;var be=Nt.length-nt;(!Pe||be<(Pe=Number(Pe)))&&(Pe=be),F((be=rt.length)%2==0,"Invalid hex string"),be/2<Pe&&(Pe=be/2);for(var On=0;On<Pe;On++){var Th=parseInt(rt.substr(2*On,2),16);F(!isNaN(Th),"Invalid hex string"),Nt[nt+On]=Th}return b._charsWritten=2*On,On}(this,f,k,O);break;case"utf8":case"utf-8":z=this,te=k,ve=O,N=b._charsWritten=wt(U(f),z,te,ve);break;case"ascii":case"binary":N=y(this,f,k,O);break;case"base64":z=this,te=k,ve=O,N=b._charsWritten=wt(oe(f),z,te,ve);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":N=p(this,f,k,O);break;default:throw new Error("Unknown encoding")}return N},b.prototype.toString=function(f,k,O){var L,N,z,te,ve=this;if(f=String(f||"utf8").toLowerCase(),k=Number(k)||0,(O=O!==void 0?Number(O):ve.length)===k)return"";switch(f){case"hex":L=function(Te,Nt,rt){var nt=Te.length;(!Nt||Nt<0)&&(Nt=0),(!rt||rt<0||nt<rt)&&(rt=nt);for(var Pe="",be=Nt;be<rt;be++)Pe+=$(Te[be]);return Pe}(ve,k,O);break;case"utf8":case"utf-8":L=function(Te,Nt,rt){var nt="",Pe="";rt=Math.min(Te.length,rt);for(var be=Nt;be<rt;be++)Te[be]<=127?(nt+=Je(Pe)+String.fromCharCode(Te[be]),Pe=""):Pe+="%"+Te[be].toString(16);return nt+Je(Pe)}(ve,k,O);break;case"ascii":case"binary":L=_(ve,k,O);break;case"base64":N=ve,te=O,L=(z=k)===0&&te===N.length?v.fromByteArray(N):v.fromByteArray(N.slice(z,te));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":L=function(Te,Nt,rt){for(var nt=Te.slice(Nt,rt),Pe="",be=0;be<nt.length;be+=2)Pe+=String.fromCharCode(nt[be]+256*nt[be+1]);return Pe}(ve,k,O);break;default:throw new Error("Unknown encoding")}return L},b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},b.prototype.copy=function(f,k,O,L){if(k=k||0,(L=L||L===0?L:this.length)!==(O=O||0)&&f.length!==0&&this.length!==0){F(O<=L,"sourceEnd < sourceStart"),F(0<=k&&k<f.length,"targetStart out of bounds"),F(0<=O&&O<this.length,"sourceStart out of bounds"),F(0<=L&&L<=this.length,"sourceEnd out of bounds"),L>this.length&&(L=this.length);var N=(L=f.length-k<L-O?f.length-k+O:L)-O;if(N<100||!b._useTypedArrays)for(var z=0;z<N;z++)f[z+k]=this[z+O];else f._set(this.subarray(O,O+N),k)}},b.prototype.slice=function(f,k){var O=this.length;if(f=ae(f,O,0),k=ae(k,O,O),b._useTypedArrays)return b._augment(this.subarray(f,k));for(var L=k-f,N=new b(L,void 0,!0),z=0;z<L;z++)N[z]=this[z+f];return N},b.prototype.get=function(f){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(f)},b.prototype.set=function(f,k){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(f,k)},b.prototype.readUInt8=function(f,k){if(k||(F(f!=null,"missing offset"),F(f<this.length,"Trying to read beyond buffer length")),!(f>=this.length))return this[f]},b.prototype.readUInt16LE=function(f,k){return x(this,f,!0,k)},b.prototype.readUInt16BE=function(f,k){return x(this,f,!1,k)},b.prototype.readUInt32LE=function(f,k){return I(this,f,!0,k)},b.prototype.readUInt32BE=function(f,k){return I(this,f,!1,k)},b.prototype.readInt8=function(f,k){if(k||(F(f!=null,"missing offset"),F(f<this.length,"Trying to read beyond buffer length")),!(f>=this.length))return 128&this[f]?-1*(255-this[f]+1):this[f]},b.prototype.readInt16LE=function(f,k){return S(this,f,!0,k)},b.prototype.readInt16BE=function(f,k){return S(this,f,!1,k)},b.prototype.readInt32LE=function(f,k){return P(this,f,!0,k)},b.prototype.readInt32BE=function(f,k){return P(this,f,!1,k)},b.prototype.readFloatLE=function(f,k){return m(this,f,!0,k)},b.prototype.readFloatBE=function(f,k){return m(this,f,!1,k)},b.prototype.readDoubleLE=function(f,k){return E(this,f,!0,k)},b.prototype.readDoubleBE=function(f,k){return E(this,f,!1,k)},b.prototype.writeUInt8=function(f,k,O){O||(F(f!=null,"missing value"),F(k!=null,"missing offset"),F(k<this.length,"trying to write beyond buffer length"),Kt(f,255)),k>=this.length||(this[k]=f)},b.prototype.writeUInt16LE=function(f,k,O){g(this,f,k,!0,O)},b.prototype.writeUInt16BE=function(f,k,O){g(this,f,k,!1,O)},b.prototype.writeUInt32LE=function(f,k,O){A(this,f,k,!0,O)},b.prototype.writeUInt32BE=function(f,k,O){A(this,f,k,!1,O)},b.prototype.writeInt8=function(f,k,O){O||(F(f!=null,"missing value"),F(k!=null,"missing offset"),F(k<this.length,"Trying to write beyond buffer length"),Rt(f,127,-128)),k>=this.length||(0<=f?this.writeUInt8(f,k,O):this.writeUInt8(255+f+1,k,O))},b.prototype.writeInt16LE=function(f,k,O){C(this,f,k,!0,O)},b.prototype.writeInt16BE=function(f,k,O){C(this,f,k,!1,O)},b.prototype.writeInt32LE=function(f,k,O){W(this,f,k,!0,O)},b.prototype.writeInt32BE=function(f,k,O){W(this,f,k,!1,O)},b.prototype.writeFloatLE=function(f,k,O){q(this,f,k,!0,O)},b.prototype.writeFloatBE=function(f,k,O){q(this,f,k,!1,O)},b.prototype.writeDoubleLE=function(f,k,O){G(this,f,k,!0,O)},b.prototype.writeDoubleBE=function(f,k,O){G(this,f,k,!1,O)},b.prototype.fill=function(f,k,O){if(k=k||0,O=O||this.length,F(typeof(f=typeof(f=f||0)=="string"?f.charCodeAt(0):f)=="number"&&!isNaN(f),"value is not a number"),F(k<=O,"end < start"),O!==k&&this.length!==0){F(0<=k&&k<this.length,"start out of bounds"),F(0<=O&&O<=this.length,"end out of bounds");for(var L=k;L<O;L++)this[L]=f}},b.prototype.inspect=function(){for(var f=[],k=this.length,O=0;O<k;O++)if(f[O]=$(this[O]),O===i.INSPECT_MAX_BYTES){f[O+1]="...";break}return"<Buffer "+f.join(" ")+">"},b.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(b._useTypedArrays)return new b(this).buffer;for(var f=new Uint8Array(this.length),k=0,O=f.length;k<O;k+=1)f[k]=this[k];return f.buffer};var H=b.prototype;function ae(f,k,O){return typeof f!="number"?O:k<=(f=~~f)?k:0<=f||0<=(f+=k)?f:0}function M(f){return(f=~~Math.ceil(+f))<0?0:f}function j(f){return(Array.isArray||function(k){return Object.prototype.toString.call(k)==="[object Array]"})(f)}function $(f){return f<16?"0"+f.toString(16):f.toString(16)}function U(f){for(var k=[],O=0;O<f.length;O++){var L=f.charCodeAt(O);if(L<=127)k.push(f.charCodeAt(O));else for(var N=O,z=(55296<=L&&L<=57343&&O++,encodeURIComponent(f.slice(N,O+1)).substr(1).split("%")),te=0;te<z.length;te++)k.push(parseInt(z[te],16))}return k}function oe(f){return v.toByteArray(f)}function wt(f,k,O,L){for(var N=0;N<L&&!(N+O>=k.length||N>=f.length);N++)k[N+O]=f[N];return N}function Je(f){try{return decodeURIComponent(f)}catch{return String.fromCharCode(65533)}}function Kt(f,k){F(typeof f=="number","cannot write a non-number as a number"),F(0<=f,"specified a negative value for writing an unsigned value"),F(f<=k,"value is larger than maximum value for type"),F(Math.floor(f)===f,"value has a fractional component")}function Rt(f,k,O){F(typeof f=="number","cannot write a non-number as a number"),F(f<=k,"value larger than maximum allowed value"),F(O<=f,"value smaller than minimum allowed value"),F(Math.floor(f)===f,"value has a fractional component")}function Qr(f,k,O){F(typeof f=="number","cannot write a non-number as a number"),F(f<=k,"value larger than maximum allowed value"),F(O<=f,"value smaller than minimum allowed value")}function F(f,k){if(!f)throw new Error(k||"Failed assertion")}b._augment=function(f){return f._isBuffer=!0,f._get=f.get,f._set=f.set,f.get=H.get,f.set=H.set,f.write=H.write,f.toString=H.toString,f.toLocaleString=H.toString,f.toJSON=H.toJSON,f.copy=H.copy,f.slice=H.slice,f.readUInt8=H.readUInt8,f.readUInt16LE=H.readUInt16LE,f.readUInt16BE=H.readUInt16BE,f.readUInt32LE=H.readUInt32LE,f.readUInt32BE=H.readUInt32BE,f.readInt8=H.readInt8,f.readInt16LE=H.readInt16LE,f.readInt16BE=H.readInt16BE,f.readInt32LE=H.readInt32LE,f.readInt32BE=H.readInt32BE,f.readFloatLE=H.readFloatLE,f.readFloatBE=H.readFloatBE,f.readDoubleLE=H.readDoubleLE,f.readDoubleBE=H.readDoubleBE,f.writeUInt8=H.writeUInt8,f.writeUInt16LE=H.writeUInt16LE,f.writeUInt16BE=H.writeUInt16BE,f.writeUInt32LE=H.writeUInt32LE,f.writeUInt32BE=H.writeUInt32BE,f.writeInt8=H.writeInt8,f.writeInt16LE=H.writeInt16LE,f.writeInt16BE=H.writeInt16BE,f.writeInt32LE=H.writeInt32LE,f.writeInt32BE=H.writeInt32BE,f.writeFloatLE=H.writeFloatLE,f.writeFloatBE=H.writeFloatBE,f.writeDoubleLE=H.writeDoubleLE,f.writeDoubleBE=H.writeDoubleBE,f.fill=H.fill,f.inspect=H.inspect,f.toArrayBuffer=H.toArrayBuffer,f}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(r,n,i){(function(s,a,v,l,u,c,d,h,w){var v=r("buffer").Buffer,T=4,b=new v(T);b.fill(0),n.exports={hash:function(y,p,_,x){for(var I=p(function(g,A){g.length%T!=0&&(C=g.length+(T-g.length%T),g=v.concat([g,b],C));for(var C,W=[],q=A?g.readInt32BE:g.readInt32LE,G=0;G<g.length;G+=T)W.push(q.call(g,G));return W}(y=v.isBuffer(y)?y:new v(y),x),8*y.length),p=x,S=new v(_),P=p?S.writeInt32BE:S.writeInt32LE,m=0;m<I.length;m++)P.call(S,I[m],4*m,!0);return S}}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(r,n,i){(function(s,a,v,l,u,c,d,h,w){var v=r("buffer").Buffer,T=r("./sha"),b=r("./sha256"),y=r("./rng"),p={sha1:T,sha256:b,md5:r("./md5")},_=64,x=new v(_);function I(g,A){var C=p[g=g||"sha1"],W=[];return C||S("algorithm:",g,"is not yet supported"),{update:function(q){return v.isBuffer(q)||(q=new v(q)),W.push(q),q.length,this},digest:function(q){var G=v.concat(W),G=A?function(H,ae,M){v.isBuffer(ae)||(ae=new v(ae)),v.isBuffer(M)||(M=new v(M)),ae.length>_?ae=H(ae):ae.length<_&&(ae=v.concat([ae,x],_));for(var j=new v(_),$=new v(_),U=0;U<_;U++)j[U]=54^ae[U],$[U]=92^ae[U];return M=H(v.concat([j,M])),H(v.concat([$,M]))}(C,A,G):C(G);return W=null,q?G.toString(q):G}}}function S(){var g=[].slice.call(arguments).join(" ");throw new Error([g,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join(`
`))}x.fill(0),i.createHash=function(g){return I(g)},i.createHmac=I,i.randomBytes=function(g,A){if(!A||!A.call)return new v(y(g));try{A.call(this,void 0,new v(y(g)))}catch(C){A(C)}};var P,m=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],E=function(g){i[g]=function(){S("sorry,",g,"is not implemented yet")}};for(P in m)E(m[P])}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(r,n,i){(function(s,a,o,l,u,c,d,h,w){var v=r("./helpers");function T(S,P){S[P>>5]|=128<<P%32,S[14+(P+64>>>9<<4)]=P;for(var m=1732584193,E=-271733879,g=-1732584194,A=271733878,C=0;C<S.length;C+=16){var W=m,q=E,G=g,H=A,m=y(m,E,g,A,S[C+0],7,-680876936),A=y(A,m,E,g,S[C+1],12,-389564586),g=y(g,A,m,E,S[C+2],17,606105819),E=y(E,g,A,m,S[C+3],22,-1044525330);m=y(m,E,g,A,S[C+4],7,-176418897),A=y(A,m,E,g,S[C+5],12,1200080426),g=y(g,A,m,E,S[C+6],17,-1473231341),E=y(E,g,A,m,S[C+7],22,-45705983),m=y(m,E,g,A,S[C+8],7,1770035416),A=y(A,m,E,g,S[C+9],12,-1958414417),g=y(g,A,m,E,S[C+10],17,-42063),E=y(E,g,A,m,S[C+11],22,-1990404162),m=y(m,E,g,A,S[C+12],7,1804603682),A=y(A,m,E,g,S[C+13],12,-40341101),g=y(g,A,m,E,S[C+14],17,-1502002290),m=p(m,E=y(E,g,A,m,S[C+15],22,1236535329),g,A,S[C+1],5,-165796510),A=p(A,m,E,g,S[C+6],9,-1069501632),g=p(g,A,m,E,S[C+11],14,643717713),E=p(E,g,A,m,S[C+0],20,-373897302),m=p(m,E,g,A,S[C+5],5,-701558691),A=p(A,m,E,g,S[C+10],9,38016083),g=p(g,A,m,E,S[C+15],14,-660478335),E=p(E,g,A,m,S[C+4],20,-405537848),m=p(m,E,g,A,S[C+9],5,568446438),A=p(A,m,E,g,S[C+14],9,-1019803690),g=p(g,A,m,E,S[C+3],14,-187363961),E=p(E,g,A,m,S[C+8],20,1163531501),m=p(m,E,g,A,S[C+13],5,-1444681467),A=p(A,m,E,g,S[C+2],9,-51403784),g=p(g,A,m,E,S[C+7],14,1735328473),m=_(m,E=p(E,g,A,m,S[C+12],20,-1926607734),g,A,S[C+5],4,-378558),A=_(A,m,E,g,S[C+8],11,-2022574463),g=_(g,A,m,E,S[C+11],16,1839030562),E=_(E,g,A,m,S[C+14],23,-35309556),m=_(m,E,g,A,S[C+1],4,-1530992060),A=_(A,m,E,g,S[C+4],11,1272893353),g=_(g,A,m,E,S[C+7],16,-155497632),E=_(E,g,A,m,S[C+10],23,-1094730640),m=_(m,E,g,A,S[C+13],4,681279174),A=_(A,m,E,g,S[C+0],11,-358537222),g=_(g,A,m,E,S[C+3],16,-722521979),E=_(E,g,A,m,S[C+6],23,76029189),m=_(m,E,g,A,S[C+9],4,-640364487),A=_(A,m,E,g,S[C+12],11,-421815835),g=_(g,A,m,E,S[C+15],16,530742520),m=x(m,E=_(E,g,A,m,S[C+2],23,-995338651),g,A,S[C+0],6,-198630844),A=x(A,m,E,g,S[C+7],10,1126891415),g=x(g,A,m,E,S[C+14],15,-1416354905),E=x(E,g,A,m,S[C+5],21,-57434055),m=x(m,E,g,A,S[C+12],6,1700485571),A=x(A,m,E,g,S[C+3],10,-1894986606),g=x(g,A,m,E,S[C+10],15,-1051523),E=x(E,g,A,m,S[C+1],21,-2054922799),m=x(m,E,g,A,S[C+8],6,1873313359),A=x(A,m,E,g,S[C+15],10,-30611744),g=x(g,A,m,E,S[C+6],15,-1560198380),E=x(E,g,A,m,S[C+13],21,1309151649),m=x(m,E,g,A,S[C+4],6,-145523070),A=x(A,m,E,g,S[C+11],10,-1120210379),g=x(g,A,m,E,S[C+2],15,718787259),E=x(E,g,A,m,S[C+9],21,-343485551),m=I(m,W),E=I(E,q),g=I(g,G),A=I(A,H)}return Array(m,E,g,A)}function b(S,P,m,E,g,A){return I((P=I(I(P,S),I(E,A)))<<g|P>>>32-g,m)}function y(S,P,m,E,g,A,C){return b(P&m|~P&E,S,P,g,A,C)}function p(S,P,m,E,g,A,C){return b(P&E|m&~E,S,P,g,A,C)}function _(S,P,m,E,g,A,C){return b(P^m^E,S,P,g,A,C)}function x(S,P,m,E,g,A,C){return b(m^(P|~E),S,P,g,A,C)}function I(S,P){var m=(65535&S)+(65535&P);return(S>>16)+(P>>16)+(m>>16)<<16|65535&m}n.exports=function(S){return v.hash(S,T,16)}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(r,n,i){(function(s,a,o,l,u,c,d,h,w){n.exports=function(v){for(var T,b=new Array(v),y=0;y<v;y++)!(3&y)&&(T=4294967296*Math.random()),b[y]=T>>>((3&y)<<3)&255;return b}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(r,n,i){(function(s,a,o,l,u,c,d,h,w){var v=r("./helpers");function T(p,_){p[_>>5]|=128<<24-_%32,p[15+(_+64>>9<<4)]=_;for(var x,I,S,P=Array(80),m=1732584193,E=-271733879,g=-1732584194,A=271733878,C=-1009589776,W=0;W<p.length;W+=16){for(var q=m,G=E,H=g,ae=A,M=C,j=0;j<80;j++){P[j]=j<16?p[W+j]:y(P[j-3]^P[j-8]^P[j-14]^P[j-16],1);var $=b(b(y(m,5),($=E,I=g,S=A,(x=j)<20?$&I|~$&S:!(x<40)&&x<60?$&I|$&S|I&S:$^I^S)),b(b(C,P[j]),(x=j)<20?1518500249:x<40?1859775393:x<60?-1894007588:-899497514)),C=A,A=g,g=y(E,30),E=m,m=$}m=b(m,q),E=b(E,G),g=b(g,H),A=b(A,ae),C=b(C,M)}return Array(m,E,g,A,C)}function b(p,_){var x=(65535&p)+(65535&_);return(p>>16)+(_>>16)+(x>>16)<<16|65535&x}function y(p,_){return p<<_|p>>>32-_}n.exports=function(p){return v.hash(p,T,20,!0)}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(r,n,i){(function(s,a,o,l,u,c,d,h,w){function v(_,x){var I=(65535&_)+(65535&x);return(_>>16)+(x>>16)+(I>>16)<<16|65535&I}function T(_,x){var I,S=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),P=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),m=new Array(64);_[x>>5]|=128<<24-x%32,_[15+(x+64>>9<<4)]=x;for(var E,g,A=0;A<_.length;A+=16){for(var C=P[0],W=P[1],q=P[2],G=P[3],H=P[4],ae=P[5],M=P[6],j=P[7],$=0;$<64;$++)m[$]=$<16?_[$+A]:v(v(v((g=m[$-2],y(g,17)^y(g,19)^p(g,10)),m[$-7]),(g=m[$-15],y(g,7)^y(g,18)^p(g,3))),m[$-16]),I=v(v(v(v(j,y(g=H,6)^y(g,11)^y(g,25)),H&ae^~H&M),S[$]),m[$]),E=v(y(E=C,2)^y(E,13)^y(E,22),C&W^C&q^W&q),j=M,M=ae,ae=H,H=v(G,I),G=q,q=W,W=C,C=v(I,E);P[0]=v(C,P[0]),P[1]=v(W,P[1]),P[2]=v(q,P[2]),P[3]=v(G,P[3]),P[4]=v(H,P[4]),P[5]=v(ae,P[5]),P[6]=v(M,P[6]),P[7]=v(j,P[7])}return P}var b=r("./helpers"),y=function(_,x){return _>>>x|_<<32-x},p=function(_,x){return _>>>x};n.exports=function(_){return b.hash(_,T,32,!0)}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(r,n,i){(function(s,a,o,l,u,c,d,h,w){i.read=function(v,T,b,y,A){var _,x,I=8*A-y-1,S=(1<<I)-1,P=S>>1,m=-7,E=b?A-1:0,g=b?-1:1,A=v[T+E];for(E+=g,_=A&(1<<-m)-1,A>>=-m,m+=I;0<m;_=256*_+v[T+E],E+=g,m-=8);for(x=_&(1<<-m)-1,_>>=-m,m+=y;0<m;x=256*x+v[T+E],E+=g,m-=8);if(_===0)_=1-P;else{if(_===S)return x?NaN:1/0*(A?-1:1);x+=Math.pow(2,y),_-=P}return(A?-1:1)*x*Math.pow(2,_-y)},i.write=function(v,T,b,y,p,C){var x,I,S=8*C-p-1,P=(1<<S)-1,m=P>>1,E=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=y?0:C-1,A=y?1:-1,C=T<0||T===0&&1/T<0?1:0;for(T=Math.abs(T),isNaN(T)||T===1/0?(I=isNaN(T)?1:0,x=P):(x=Math.floor(Math.log(T)/Math.LN2),T*(y=Math.pow(2,-x))<1&&(x--,y*=2),2<=(T+=1<=x+m?E/y:E*Math.pow(2,1-m))*y&&(x++,y/=2),P<=x+m?(I=0,x=P):1<=x+m?(I=(T*y-1)*Math.pow(2,p),x+=m):(I=T*Math.pow(2,m-1)*Math.pow(2,p),x=0));8<=p;v[b+g]=255&I,g+=A,I/=256,p-=8);for(x=x<<p|I,S+=p;0<S;v[b+g]=255&x,g+=A,x/=256,S-=8);v[b+g-A]|=128*C}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(r,n,i){(function(s,a,o,l,u,c,d,h,w){var v,T,b;function y(){}(s=n.exports={}).nextTick=(T=typeof window<"u"&&window.setImmediate,b=typeof window<"u"&&window.postMessage&&window.addEventListener,T?function(p){return window.setImmediate(p)}:b?(v=[],window.addEventListener("message",function(p){var _=p.source;_!==window&&_!==null||p.data!=="process-tick"||(p.stopPropagation(),0<v.length&&v.shift()())},!0),function(p){v.push(p),window.postMessage("process-tick","*")}):function(p){setTimeout(p,0)}),s.title="browser",s.browser=!0,s.env={},s.argv=[],s.on=y,s.addListener=y,s.once=y,s.off=y,s.removeListener=y,s.removeAllListeners=y,s.emit=y,s.binding=function(p){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(p){throw new Error("process.chdir is not supported")}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)})})(Kv);var px=Kv.exports;const mx=ia(px),zp=(...t)=>mx(t.join("_")),gx=new Map;class kh extends pE{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,r){return Promise.resolve(this.cache.get(zp(e,r))??null)}async update(e,r,n){this.cache.set(zp(e,r),n)}static global(){return new kh(gx)}}const yx=()=>!1;class qv extends Ze{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??yx(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}}class Wv extends qv{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor({callbacks:e,callbackManager:r,...n}){super({callbacks:e??r,...n}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof n.cache=="object"?this.cache=n.cache:n.cache?this.cache=kh.global():this.cache=void 0,this.caller=new nh(n??{})}async getNumTokens(e){let r=Math.ceil(e.length/4);if(!this._encoding)try{this._encoding=await tE("modelName"in this?$c(this.modelName):"gpt2")}catch(n){console.warn("Failed to calculate number of tokens, falling back to approximate count",n)}return this._encoding&&(r=this._encoding.encode(e).length),r}static _convertInputToPromptValue(e){return typeof e=="string"?new zv(e):Array.isArray(e)?new Hv(e.map(xs)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall(e){const r={...this._identifyingParams(),...e,_type:this._llmType(),_model:this._modelType()};return Object.entries(r).filter(([s,a])=>a!==void 0).map(([s,a])=>`${s}:${JSON.stringify(a)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){const{_type:r,_model:n,...i}=e;if(n&&n!=="base_chat_model")throw new Error(`Cannot load LLM with model ${n}`);const s={openai:(await je(()=>Promise.resolve().then(()=>Ex),void 0,import.meta.url)).ChatOpenAI}[r];if(s===void 0)throw new Error(`Cannot load LLM with type ${r}`);return new s(i)}}class ln extends Wv{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models",this._llmType()]})}_separateRunnableConfigFromCallOptions(e){const[r,n]=super._separateRunnableConfigFromCallOptions(e);return n!=null&&n.timeout&&!n.signal&&(n.signal=AbortSignal.timeout(n.timeout)),[r,n]}async invoke(e,r){const n=ln._convertInputToPromptValue(e);return(await this.generatePrompt([n],r,r==null?void 0:r.callbacks)).generations[0][0].message}async*_streamResponseChunks(e,r,n){throw new Error("Not implemented.")}async*_streamIterator(e,r){if(this._streamResponseChunks===ln.prototype._streamResponseChunks)yield this.invoke(e,r);else{const i=ln._convertInputToPromptValue(e).toChatMessages(),[s,a]=this._separateRunnableConfigFromCallOptions(r),o=await pt.configure(s.callbacks,this.callbacks,s.tags,this.tags,s.metadata,this.metadata,{verbose:this.verbose}),l={options:a,invocation_params:this==null?void 0:this.invocationParams(a)},u=await(o==null?void 0:o.handleChatModelStart(this.toJSON(),[i],void 0,void 0,l));let c;try{for await(const d of this._streamResponseChunks(i,a,u==null?void 0:u[0]))yield d.message,c?c=c.concat(d):c=d}catch(d){throw await Promise.all((u??[]).map(h=>h==null?void 0:h.handleLLMError(d))),d}await Promise.all((u??[]).map(d=>d==null?void 0:d.handleLLMEnd({generations:[[c]]})))}}async _generateUncached(e,r,n){var h;const i=e.map(w=>w.map(xs)),s=await pt.configure(n.callbacks,this.callbacks,n.tags,this.tags,n.metadata,this.metadata,{verbose:this.verbose}),a={options:r,invocation_params:this==null?void 0:this.invocationParams(r)},o=await(s==null?void 0:s.handleChatModelStart(this.toJSON(),i,void 0,void 0,a)),l=await Promise.allSettled(i.map((w,v)=>this._generate(w,{...r,promptIndex:v},o==null?void 0:o[v]))),u=[],c=[];await Promise.all(l.map(async(w,v)=>{var T,b;if(w.status==="fulfilled"){const y=w.value;return u[v]=y.generations,c[v]=y.llmOutput,(T=o==null?void 0:o[v])==null?void 0:T.handleLLMEnd({generations:[y.generations],llmOutput:y.llmOutput})}else return await((b=o==null?void 0:o[v])==null?void 0:b.handleLLMError(w.reason)),Promise.reject(w.reason)}));const d={generations:u,llmOutput:c.length?(h=this._combineLLMOutput)==null?void 0:h.call(this,...c):void 0};return Object.defineProperty(d,zy,{value:o?{runIds:o==null?void 0:o.map(w=>w.runId)}:void 0,configurable:!0}),d}async generate(e,r,n){let i;Array.isArray(r)?i={stop:r}:i=r;const s=e.map(w=>w.map(xs)),[a,o]=this._separateRunnableConfigFromCallOptions(i);if(a.callbacks=a.callbacks??n,!this.cache)return this._generateUncached(s,o,a);const{cache:l}=this,u=this._getSerializedCacheKeyParametersForCall(o),c=[],d=await Promise.all(s.map(async(w,v)=>{const T=ln._convertInputToPromptValue(w).toString(),b=await l.lookup(T,u);return b||c.push(v),b}));let h={};if(c.length>0){const w=await this._generateUncached(c.map(v=>s[v]),o,a);await Promise.all(w.generations.map(async(v,T)=>{const b=c[T];d[b]=v;const y=ln._convertInputToPromptValue(s[b]).toString();return l.update(y,u,v)})),h=w.llmOutput??{}}return{generations:d,llmOutput:h}}invocationParams(e){return{}}_modelType(){return"base_chat_model"}serialize(){return{...this.invocationParams(),_type:this._llmType(),_model:this._modelType()}}async generatePrompt(e,r,n){const i=e.map(s=>s.toChatMessages());return this.generate(i,r,n)}async call(e,r,n){return(await this.generate([e.map(xs)],r,n)).generations[0][0].message}async callPrompt(e,r,n){const i=e.toChatMessages();return this.call(i,r,n)}async predictMessages(e,r,n){return this.call(e,r,n)}async predict(e,r,n){const i=new En(e);return(await this.call([i],r,n)).content}}function vx(t){let e;return t.constructor.name===gk.name?(e=new Error(t.message),e.name="TimeoutError"):t.constructor.name===yk.name?(e=new Error(t.message),e.name="AbortError"):e=t,e}function _x(t){return t.role!=="system"&&t.role!=="assistant"&&t.role!=="user"&&t.role!=="function"&&console.warn(`Unknown message role: ${t.role}`),t.role}function to(t){const e=t._getType();switch(e){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"generic":{if(!Ol.isInstance(t))throw new Error("Invalid generic chat message");return _x(t)}default:throw new Error(`Unknown message type: ${e}`)}}function wx(t){switch(t.role){case"user":return new En(t.content||"");case"assistant":return new Pl(t.content||"",{function_call:t.function_call});case"system":return new sh(t.content||"");default:return new Ol(t.content||"",t.role??"unknown")}}function bx(t,e){const r=t.role??e,n=t.content??"";let i;return t.function_call?i={function_call:t.function_call}:i={},r==="user"?new qo({content:n}):r==="assistant"?new Wo({content:n,additional_kwargs:i}):r==="system"?new Jo({content:n}):r==="function"?new Go({content:n,additional_kwargs:i,name:t.name}):new Yo({content:n,role:r})}class Eh extends ln{static lc_name(){return"ChatOpenAI"}get callKeys(){return[...super.callKeys,"options","function_call","functions","tools","promptIndex"]}get lc_secrets(){return{openAIApiKey:"OPENAI_API_KEY",azureOpenAIApiKey:"AZURE_OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{modelName:"model",openAIApiKey:"openai_api_key",azureOpenAIApiVersion:"azure_openai_api_version",azureOpenAIApiKey:"azure_openai_api_key",azureOpenAIApiInstanceName:"azure_openai_api_instance_name",azureOpenAIApiDeploymentName:"azure_openai_api_deployment_name"}}constructor(e,r){var n,i,s,a,o,l,u,c;if(super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"openAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.openAIApiKey=(e==null?void 0:e.openAIApiKey)??Be("OPENAI_API_KEY"),this.azureOpenAIApiKey=(e==null?void 0:e.azureOpenAIApiKey)??Be("AZURE_OPENAI_API_KEY"),!this.azureOpenAIApiKey&&!this.openAIApiKey)throw new Error("OpenAI or Azure OpenAI API key not found");if(this.azureOpenAIApiInstanceName=(e==null?void 0:e.azureOpenAIApiInstanceName)??Be("AZURE_OPENAI_API_INSTANCE_NAME"),this.azureOpenAIApiDeploymentName=(e==null?void 0:e.azureOpenAIApiDeploymentName)??Be("AZURE_OPENAI_API_DEPLOYMENT_NAME"),this.azureOpenAIApiVersion=(e==null?void 0:e.azureOpenAIApiVersion)??Be("AZURE_OPENAI_API_VERSION"),this.azureOpenAIBasePath=(e==null?void 0:e.azureOpenAIBasePath)??Be("AZURE_OPENAI_BASE_PATH"),this.organization=((n=e==null?void 0:e.configuration)==null?void 0:n.organization)??Be("OPENAI_ORGANIZATION"),this.modelName=(e==null?void 0:e.modelName)??this.modelName,this.modelKwargs=(e==null?void 0:e.modelKwargs)??{},this.timeout=e==null?void 0:e.timeout,this.temperature=(e==null?void 0:e.temperature)??this.temperature,this.topP=(e==null?void 0:e.topP)??this.topP,this.frequencyPenalty=(e==null?void 0:e.frequencyPenalty)??this.frequencyPenalty,this.presencePenalty=(e==null?void 0:e.presencePenalty)??this.presencePenalty,this.maxTokens=e==null?void 0:e.maxTokens,this.n=(e==null?void 0:e.n)??this.n,this.logitBias=e==null?void 0:e.logitBias,this.stop=e==null?void 0:e.stop,this.user=e==null?void 0:e.user,this.streaming=(e==null?void 0:e.streaming)??!1,this.azureOpenAIApiKey){if(!this.azureOpenAIApiInstanceName&&!this.azureOpenAIBasePath)throw new Error("Azure OpenAI API instance name not found");if(!this.azureOpenAIApiDeploymentName)throw new Error("Azure OpenAI API deployment name not found");if(!this.azureOpenAIApiVersion)throw new Error("Azure OpenAI API version not found");this.openAIApiKey=this.openAIApiKey??""}this.clientConfig={apiKey:this.openAIApiKey,organization:this.organization,baseURL:(r==null?void 0:r.basePath)??((i=e==null?void 0:e.configuration)==null?void 0:i.basePath),dangerouslyAllowBrowser:!0,defaultHeaders:((s=r==null?void 0:r.baseOptions)==null?void 0:s.headers)??((o=(a=e==null?void 0:e.configuration)==null?void 0:a.baseOptions)==null?void 0:o.headers),defaultQuery:((l=r==null?void 0:r.baseOptions)==null?void 0:l.params)??((c=(u=e==null?void 0:e.configuration)==null?void 0:u.baseOptions)==null?void 0:c.params),...r,...e==null?void 0:e.configuration}}invocationParams(e){return{model:this.modelName,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,max_tokens:this.maxTokens===-1?void 0:this.maxTokens,n:this.n,logit_bias:this.logitBias,stop:(e==null?void 0:e.stop)??this.stop,user:this.user,stream:this.streaming,functions:(e==null?void 0:e.functions)??(e!=null&&e.tools?e==null?void 0:e.tools.map(aS):void 0),function_call:e==null?void 0:e.function_call,...this.modelKwargs}}_identifyingParams(){return{model_name:this.modelName,...this.invocationParams(),...this.clientConfig}}async*_streamResponseChunks(e,r,n){var l;const i=e.map(u=>({role:to(u),content:u.content,name:u.name,function_call:u.additional_kwargs.function_call})),s={...this.invocationParams(r),messages:i,stream:!0};let a;const o=await this.completionWithRetry(s,r);for await(const u of o){const c=u==null?void 0:u.choices[0];if(!c)continue;const{delta:d}=c,h=bx(d,a);a=d.role??a;const w={prompt:r.promptIndex??0,completion:c.index??0},v=new ah({message:h,text:h.content,generationInfo:w});yield v,n==null||n.handleLLMNewToken(v.text??"",w,void 0,void 0,void 0,{chunk:v})}if((l=r.signal)!=null&&l.aborted)throw new Error("AbortError")}identifyingParams(){return this._identifyingParams()}async _generate(e,r,n){var o,l;const i={},s=this.invocationParams(r),a=e.map(u=>({role:to(u),content:u.content,name:u.name,function_call:u.additional_kwargs.function_call}));if(s.stream){const u=await this._streamResponseChunks(e,r,n),c={};for await(const h of u){const w=((o=h.generationInfo)==null?void 0:o.completion)??0;c[w]===void 0?c[w]=h:c[w]=c[w].concat(h)}return{generations:Object.entries(c).sort(([h],[w])=>parseInt(h,10)-parseInt(w,10)).map(([h,w])=>w)}}else{const u=await this.completionWithRetry({...s,stream:!1,messages:a},{signal:r==null?void 0:r.signal,...r==null?void 0:r.options}),{completion_tokens:c,prompt_tokens:d,total_tokens:h}=(u==null?void 0:u.usage)??{};c&&(i.completionTokens=(i.completionTokens??0)+c),d&&(i.promptTokens=(i.promptTokens??0)+d),h&&(i.totalTokens=(i.totalTokens??0)+h);const w=[];for(const v of(u==null?void 0:u.choices)??[]){const b={text:((l=v.message)==null?void 0:l.content)??"",message:wx(v.message??{role:"assistant"})};v.finish_reason&&(b.generationInfo={finish_reason:v.finish_reason}),w.push(b)}return{generations:w,llmOutput:{tokenUsage:i}}}}async getNumTokensFromMessages(e){let r=0,n=0,i=0;$c(this.modelName)==="gpt-3.5-turbo"?(n=4,i=-1):$c(this.modelName).startsWith("gpt-4")&&(n=3,i=1);const s=await Promise.all(e.map(async a=>{const o=await this.getNumTokens(a.content),l=await this.getNumTokens(to(a)),u=a.name!==void 0?i+await this.getNumTokens(a.name):0,c=o+n+l+u;return r+=c,c}));return r+=3,{totalCount:r,countPerMessage:s}}async completionWithRetry(e,r){const n=this._getClientOptions(r);return this.caller.call(async()=>{try{return await this.client.chat.completions.create(e,n)}catch(i){throw vx(i)}})}_getClientOptions(e){if(!this.client){const n={azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,baseURL:this.clientConfig.baseURL},i=oS(n),s={...this.clientConfig,baseURL:i,timeout:this.timeout,maxRetries:0};s.baseURL||delete s.baseURL,this.client=new $e(s)}const r={...this.clientConfig,...e};return this.azureOpenAIApiKey&&(r.headers={"api-key":this.azureOpenAIApiKey,...r.headers},r.query={"api-version":this.azureOpenAIApiVersion,...r.query}),r}_llmType(){return"openai"}_combineLLMOutput(...e){return e.reduce((r,n)=>(n&&n.tokenUsage&&(r.tokenUsage.completionTokens+=n.tokenUsage.completionTokens??0,r.tokenUsage.promptTokens+=n.tokenUsage.promptTokens??0,r.tokenUsage.totalTokens+=n.tokenUsage.totalTokens??0),r),{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}}class kx extends Eh{constructor(e){var r;super(e),Object.defineProperty(this,"promptLayerApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"plTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnPromptLayerId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.promptLayerApiKey=(e==null?void 0:e.promptLayerApiKey)??(typeof process<"u"?(r=process.env)==null?void 0:r.PROMPTLAYER_API_KEY:void 0),this.plTags=(e==null?void 0:e.plTags)??[],this.returnPromptLayerId=(e==null?void 0:e.returnPromptLayerId)??!1}async _generate(e,r,n){const i=Date.now();let s;Array.isArray(r)?s={stop:r}:r!=null&&r.timeout&&!r.signal?s={...r,signal:AbortSignal.timeout(r.timeout)}:s=r??{};const a=await super._generate(e,s,n),o=Date.now(),l=c=>{let d;if(c._getType()==="human")d={role:"user",content:c.content};else if(c._getType()==="ai")d={role:"assistant",content:c.content};else if(c._getType()==="function")d={role:"assistant",content:c.content};else if(c._getType()==="system")d={role:"system",content:c.content};else if(c._getType()==="generic")d={role:c.role,content:c.content};else throw new Error(`Got unknown type ${c}`);return d},u=(c,d)=>{const h={...this.invocationParams(),model:this.modelName};if(d!=null&&d.stop&&Object.keys(h).includes("stop"))throw new Error("`stop` found in both the input and default params.");return c.map(v=>l(v))};for(let c=0;c<a.generations.length;c+=1){const d=a.generations[c],h=u(e,s);let w;const v=[{content:d.text,role:to(d.message)}],T=await pS(this.caller,"langchain.PromptLayerChatOpenAI",{...this._identifyingParams(),messages:h,stream:!1},this.plTags,v,i,o,this.promptLayerApiKey);this.returnPromptLayerId===!0&&(T.success===!0&&(w=T.request_id),(!d.generationInfo||typeof d.generationInfo!="object")&&(d.generationInfo={}),d.generationInfo.promptLayerRequestId=w)}return a}}const Ex=Object.freeze(Object.defineProperty({__proto__:null,ChatOpenAI:Eh,PromptLayerChatOpenAI:kx},Symbol.toStringTag,{value:"Module"}));class Sx extends fE{constructor(e){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","stores","message","in_memory"]}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.messages=e??[]}async getMessages(){return this.messages}async addMessage(e){this.messages.push(e)}async clear(){this.messages=[]}}class xx extends jS{constructor(e){super(),Object.defineProperty(this,"chatHistory",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnMessages",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.chatHistory=(e==null?void 0:e.chatHistory)??new Sx,this.returnMessages=(e==null?void 0:e.returnMessages)??this.returnMessages,this.inputKey=(e==null?void 0:e.inputKey)??this.inputKey,this.outputKey=(e==null?void 0:e.outputKey)??this.outputKey}async saveContext(e,r){await this.chatHistory.addUserMessage(RS(e,this.inputKey)),await this.chatHistory.addAIChatMessage(NS(r,this.outputKey))}async clear(){await this.chatHistory.clear()}}class Tx extends qv{get lc_namespace(){return["langchain","chains",this._chainType()]}constructor(e,r,n){if(arguments.length===1&&typeof e=="object"&&!("saveContext"in e)){const{memory:i,callbackManager:s,...a}=e;super({...a,callbacks:s??a.callbacks}),this.memory=i}else super({verbose:r,callbacks:n}),this.memory=e}_selectMemoryInputs(e){const r={...e};return"signal"in r&&delete r.signal,"timeout"in r&&delete r.timeout,r}async invoke(e,r){return this.call(e,r)}serialize(){throw new Error("Method not implemented.")}async run(e,r){const n=this.inputKeys.filter(l=>{var u;return!((u=this.memory)!=null&&u.memoryKeys.includes(l))});if(!(n.length<=1))throw new Error(`Chain ${this._chainType()} expects multiple inputs, cannot use 'run' `);const s=n.length?{[n[0]]:e}:{},a=await this.call(s,r),o=Object.keys(a);if(o.length===1)return a[o[0]];throw new Error("return values have multiple keys, `run` only supported when one key currently")}async _formatValues(e){const r={...e};if(r.timeout&&!r.signal&&(r.signal=AbortSignal.timeout(r.timeout),delete r.timeout),this.memory!=null){const n=await this.memory.loadMemoryVariables(this._selectMemoryInputs(e));for(const[i,s]of Object.entries(n))r[i]=s}return r}async call(e,r,n){const i=await this._formatValues(e),s=US(r),a=await pt.configure(s.callbacks,this.callbacks,s.tags||n,this.tags,s.metadata,this.metadata,{verbose:this.verbose}),o=await(a==null?void 0:a.handleChainStart(this.toJSON(),i));let l;try{l=await(e.signal?Promise.race([this._call(i,o),new Promise((u,c)=>{var d;(d=e.signal)==null||d.addEventListener("abort",()=>{c(new Error("AbortError"))})})]):this._call(i,o))}catch(u){throw await(o==null?void 0:o.handleChainError(u)),u}return this.memory!=null&&await this.memory.saveContext(this._selectMemoryInputs(e),l),await(o==null?void 0:o.handleChainEnd(l)),Object.defineProperty(l,zy,{value:o?{runId:o==null?void 0:o.runId}:void 0,configurable:!0}),l}async apply(e,r){return Promise.all(e.map(async(n,i)=>this.call(n,r==null?void 0:r[i])))}static async deserialize(e,r={}){switch(e._type){case"llm_chain":{const{LLMChain:n}=await je(()=>Promise.resolve().then(()=>Cx),void 0,import.meta.url);return n.deserialize(e)}case"sequential_chain":{const{SequentialChain:n}=await je(()=>import("./sequential_chain-883c0590.js"),["./sequential_chain-883c0590.js","./theme-e406f2b7.css"],import.meta.url);return n.deserialize(e)}case"simple_sequential_chain":{const{SimpleSequentialChain:n}=await je(()=>import("./sequential_chain-883c0590.js"),["./sequential_chain-883c0590.js","./theme-e406f2b7.css"],import.meta.url);return n.deserialize(e)}case"stuff_documents_chain":{const{StuffDocumentsChain:n}=await je(()=>import("./combine_docs_chain-05d8210a.js"),["./combine_docs_chain-05d8210a.js","./theme-e406f2b7.css"],import.meta.url);return n.deserialize(e)}case"map_reduce_documents_chain":{const{MapReduceDocumentsChain:n}=await je(()=>import("./combine_docs_chain-05d8210a.js"),["./combine_docs_chain-05d8210a.js","./theme-e406f2b7.css"],import.meta.url);return n.deserialize(e)}case"refine_documents_chain":{const{RefineDocumentsChain:n}=await je(()=>import("./combine_docs_chain-05d8210a.js"),["./combine_docs_chain-05d8210a.js","./theme-e406f2b7.css"],import.meta.url);return n.deserialize(e)}case"vector_db_qa":{const{VectorDBQAChain:n}=await je(()=>import("./vector_db_qa-ba459948.js"),["./vector_db_qa-ba459948.js","./combine_docs_chain-05d8210a.js","./theme-e406f2b7.css"],import.meta.url);return n.deserialize(e,r)}case"api_chain":{const{APIChain:n}=await je(()=>import("./api_chain-5eef4c56.js"),["./api_chain-5eef4c56.js","./theme-e406f2b7.css"],import.meta.url);return n.deserialize(e)}default:throw new Error(`Invalid prompt type in config: ${e._type}`)}}}class Px extends Ze{parseResultWithPrompt(e,r,n){return this.parseResult(e,n)}async invoke(e,r){return typeof e=="string"?this._callWithConfig(async n=>this.parseResult([{text:n}]),e,{...r,runType:"parser"}):this._callWithConfig(async n=>this.parseResult([{message:n,text:n.content}]),e,{...r,runType:"parser"})}}class Ox extends Px{parseResult(e,r){return this.parse(e[0].text,r)}async parseWithPrompt(e,r,n){return this.parse(e,n)}_type(){throw new Error("_type not implemented")}}class Ax extends Ox{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","default"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"NoOpOutputParser"}parse(e){return Promise.resolve(e)}getFormatInstructions(){return""}}class Kl extends Tx{static lc_name(){return"LLMChain"}get inputKeys(){return this.prompt.inputVariables}get outputKeys(){return[this.outputKey]}constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"llm",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"llmKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputKey",{enumerable:!0,configurable:!0,writable:!0,value:"text"}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt,this.llm=e.llm,this.llmKwargs=e.llmKwargs,this.outputKey=e.outputKey??this.outputKey,this.outputParser=e.outputParser??new Ax,this.prompt.outputParser){if(e.outputParser)throw new Error("Cannot set both outputParser and prompt.outputParser");this.outputParser=this.prompt.outputParser}}_selectMemoryInputs(e){const r=super._selectMemoryInputs(e);for(const n of this.llm.callKeys)n in e&&delete r[n];return r}async _getFinalOutput(e,r,n){let i;return this.outputParser?i=await this.outputParser.parseResultWithPrompt(e,r,n==null?void 0:n.getChild()):i=e[0].text,i}call(e,r){return super.call(e,r)}async _call(e,r){const n={...e},i={...this.llmKwargs};for(const o of this.llm.callKeys)o in e&&(i[o]=e[o],delete n[o]);const s=await this.prompt.formatPromptValue(n),{generations:a}=await this.llm.generatePrompt([s],i,r==null?void 0:r.getChild());return{[this.outputKey]:await this._getFinalOutput(a[0],s,r)}}async predict(e,r){return(await this.call(e,r))[this.outputKey]}_chainType(){return"llm"}static async deserialize(e){const{llm:r,prompt:n}=e;if(!r)throw new Error("LLMChain must have llm");if(!n)throw new Error("LLMChain must have prompt");return new Kl({llm:await Wv.deserialize(r),prompt:await bh.deserialize(n)})}serialize(){return{_type:`${this._chainType()}_chain`,llm:this.llm.serialize(),prompt:this.prompt.serialize()}}}const Cx=Object.freeze(Object.defineProperty({__proto__:null,LLMChain:Kl},Symbol.toStringTag,{value:"Module"}));class Ix extends xx{constructor(e){super({returnMessages:(e==null?void 0:e.returnMessages)??!1,chatHistory:e==null?void 0:e.chatHistory,inputKey:e==null?void 0:e.inputKey,outputKey:e==null?void 0:e.outputKey}),Object.defineProperty(this,"humanPrefix",{enumerable:!0,configurable:!0,writable:!0,value:"Human"}),Object.defineProperty(this,"aiPrefix",{enumerable:!0,configurable:!0,writable:!0,value:"AI"}),Object.defineProperty(this,"memoryKey",{enumerable:!0,configurable:!0,writable:!0,value:"history"}),Object.defineProperty(this,"k",{enumerable:!0,configurable:!0,writable:!0,value:5}),this.humanPrefix=(e==null?void 0:e.humanPrefix)??this.humanPrefix,this.aiPrefix=(e==null?void 0:e.aiPrefix)??this.aiPrefix,this.memoryKey=(e==null?void 0:e.memoryKey)??this.memoryKey,this.k=(e==null?void 0:e.k)??this.k}get memoryKeys(){return[this.memoryKey]}async loadMemoryVariables(e){const r=await this.chatHistory.getMessages();return this.returnMessages?{[this.memoryKey]:r.slice(-this.k*2)}:{[this.memoryKey]:yh(r.slice(-this.k*2),this.humanPrefix,this.aiPrefix)}}}/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function Jv(t){return typeof t>"u"||t===null}function jx(t){return typeof t=="object"&&t!==null}function Rx(t){return Array.isArray(t)?t:Jv(t)?[]:[t]}function Nx(t,e){var r,n,i,s;if(e)for(s=Object.keys(e),r=0,n=s.length;r<n;r+=1)i=s[r],t[i]=e[i];return t}function Lx(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function $x(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var Dx=Jv,Mx=jx,Ux=Rx,Fx=Lx,zx=$x,Bx=Nx,Sh={isNothing:Dx,isObject:Mx,toArray:Ux,repeat:Fx,isNegativeZero:zx,extend:Bx};function Gv(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function na(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=Gv(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}na.prototype=Object.create(Error.prototype);na.prototype.constructor=na;na.prototype.toString=function(e){return this.name+": "+Gv(this,e)};var un=na,Vx=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Hx=["scalar","sequence","mapping"];function Zx(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function Kx(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(Vx.indexOf(r)===-1)throw new un('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=Zx(e.styleAliases||null),Hx.indexOf(this.kind)===-1)throw new un('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Ke=Kx;function Bp(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(s,a){s.tag===n.tag&&s.kind===n.kind&&s.multi===n.multi&&(i=a)}),r[i]=n}),r}function qx(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function Vc(t){return this.extend(t)}Vc.prototype.extend=function(e){var r=[],n=[];if(e instanceof Ke)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new un("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(s){if(!(s instanceof Ke))throw new un("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new un("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new un("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(s){if(!(s instanceof Ke))throw new un("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(Vc.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=Bp(i,"implicit"),i.compiledExplicit=Bp(i,"explicit"),i.compiledTypeMap=qx(i.compiledImplicit,i.compiledExplicit),i};var Wx=Vc,Jx=new Ke("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),Gx=new Ke("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),Yx=new Ke("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),Qx=new Wx({explicit:[Jx,Gx,Yx]});function Xx(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function eT(){return null}function tT(t){return t===null}var rT=new Ke("tag:yaml.org,2002:null",{kind:"scalar",resolve:Xx,construct:eT,predicate:tT,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function nT(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function iT(t){return t==="true"||t==="True"||t==="TRUE"}function sT(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var aT=new Ke("tag:yaml.org,2002:bool",{kind:"scalar",resolve:nT,construct:iT,predicate:sT,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function oT(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function lT(t){return 48<=t&&t<=55}function uT(t){return 48<=t&&t<=57}function cT(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!oT(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!lT(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!uT(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function dT(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function hT(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Sh.isNegativeZero(t)}var fT=new Ke("tag:yaml.org,2002:int",{kind:"scalar",resolve:cT,construct:dT,predicate:hT,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),pT=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function mT(t){return!(t===null||!pT.test(t)||t[t.length-1]==="_")}function gT(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var yT=/^[-+]?[0-9]+e/;function vT(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Sh.isNegativeZero(t))return"-0.0";return r=t.toString(10),yT.test(r)?r.replace("e",".e"):r}function _T(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Sh.isNegativeZero(t))}var wT=new Ke("tag:yaml.org,2002:float",{kind:"scalar",resolve:mT,construct:gT,predicate:_T,represent:vT,defaultStyle:"lowercase"}),bT=Qx.extend({implicit:[rT,aT,fT,wT]}),kT=bT,Yv=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Qv=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function ET(t){return t===null?!1:Yv.exec(t)!==null||Qv.exec(t)!==null}function ST(t){var e,r,n,i,s,a,o,l=0,u=null,c,d,h;if(e=Yv.exec(t),e===null&&(e=Qv.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(s=+e[4],a=+e[5],o=+e[6],e[7]){for(l=e[7].slice(0,3);l.length<3;)l+="0";l=+l}return e[9]&&(c=+e[10],d=+(e[11]||0),u=(c*60+d)*6e4,e[9]==="-"&&(u=-u)),h=new Date(Date.UTC(r,n,i,s,a,o,l)),u&&h.setTime(h.getTime()-u),h}function xT(t){return t.toISOString()}var TT=new Ke("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:ET,construct:ST,instanceOf:Date,represent:xT});function PT(t){return t==="<<"||t===null}var OT=new Ke("tag:yaml.org,2002:merge",{kind:"scalar",resolve:PT}),xh=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function AT(t){if(t===null)return!1;var e,r,n=0,i=t.length,s=xh;for(r=0;r<i;r++)if(e=s.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function CT(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,s=xh,a=0,o=[];for(e=0;e<i;e++)e%4===0&&e&&(o.push(a>>16&255),o.push(a>>8&255),o.push(a&255)),a=a<<6|s.indexOf(n.charAt(e));return r=i%4*6,r===0?(o.push(a>>16&255),o.push(a>>8&255),o.push(a&255)):r===18?(o.push(a>>10&255),o.push(a>>2&255)):r===12&&o.push(a>>4&255),new Uint8Array(o)}function IT(t){var e="",r=0,n,i,s=t.length,a=xh;for(n=0;n<s;n++)n%3===0&&n&&(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]),r=(r<<8)+t[n];return i=s%3,i===0?(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]):i===2?(e+=a[r>>10&63],e+=a[r>>4&63],e+=a[r<<2&63],e+=a[64]):i===1&&(e+=a[r>>2&63],e+=a[r<<4&63],e+=a[64],e+=a[64]),e}function jT(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var RT=new Ke("tag:yaml.org,2002:binary",{kind:"scalar",resolve:AT,construct:CT,predicate:jT,represent:IT}),NT=Object.prototype.hasOwnProperty,LT=Object.prototype.toString;function $T(t){if(t===null)return!0;var e=[],r,n,i,s,a,o=t;for(r=0,n=o.length;r<n;r+=1){if(i=o[r],a=!1,LT.call(i)!=="[object Object]")return!1;for(s in i)if(NT.call(i,s))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}function DT(t){return t!==null?t:[]}var MT=new Ke("tag:yaml.org,2002:omap",{kind:"sequence",resolve:$T,construct:DT}),UT=Object.prototype.toString;function FT(t){if(t===null)return!0;var e,r,n,i,s,a=t;for(s=new Array(a.length),e=0,r=a.length;e<r;e+=1){if(n=a[e],UT.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;s[e]=[i[0],n[i[0]]]}return!0}function zT(t){if(t===null)return[];var e,r,n,i,s,a=t;for(s=new Array(a.length),e=0,r=a.length;e<r;e+=1)n=a[e],i=Object.keys(n),s[e]=[i[0],n[i[0]]];return s}var BT=new Ke("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:FT,construct:zT}),VT=Object.prototype.hasOwnProperty;function HT(t){if(t===null)return!0;var e,r=t;for(e in r)if(VT.call(r,e)&&r[e]!==null)return!1;return!0}function ZT(t){return t!==null?t:{}}var KT=new Ke("tag:yaml.org,2002:set",{kind:"mapping",resolve:HT,construct:ZT});kT.extend({implicit:[TT,OT],explicit:[RT,MT,BT,KT]});function Vp(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"":t===95?" ":t===76?"\u2028":t===80?"\u2029":""}var qT=new Array(256),WT=new Array(256);for(var Ln=0;Ln<256;Ln++)qT[Ln]=Vp(Ln)?1:0,WT[Ln]=Vp(Ln);const Hp=async t=>{let e=[];const r=await O1(t.clientId);e.push(r[1]);const n=await j1();if(r[0]===!1){const b=await A1(t.clientId),y=await C1(t.clientId);b[0]===!0&&(e.push(b[1]),e.push(b[2])),y[0]===!0&&(e.push(y[1]),e.push(y[2]))}const i=await I1(t.clientId),s=b=>{if(typeof b=="string")return b;switch(b.name){case"page_viewed":return r[0]===!0?"Hi, this is my first time visiting this store.":"Hi, welcome me back to the store and ask for any help I may need.";case"cart_viewed":return i===!0?"I am back at my cart again. I will consider purchasing if you give me a coupon.":"Encourage me to checkout.";case"product_viewed":return`I am looking at ${b.detail.productVariant.product.title}. Suggest for me another product in your catalog for me to look at. `;case"search_submitted":return`I am searching for ${b.detail.query}. Ask me if I found what I was looking for.`;default:return"Hello."}},a=`You are a helpful online sales assistant. Your goal is to help customers in their shopping experience whether it's by answering questions, recommending products, or helping them checkout. Be friendly, helpful, and concise in your responses. The below is relevent context for this customer:
{context}
Given that context, here are some suggestions to give the customer a great experience:
If the customer has items in their cart, encourage them to go to their cart and complete the purchase. You are provided the link for the cart. 
If the customer has viewed a product multiple times, encourage them to revisit the product by giving them the product link.
If the customer asks for a coupon, give them a coupon link at www.claimcoupon.com
If the customer asks you how their search experience was, ask them if they found what they're looking for and offer to help refine search.
If the customer is viewing a product, recommend a similar product they may also enjoy. Here's the whole product catalog:
{catalog}`,l=await Zv.fromTemplate(a).format({context:e,catalog:n}),u="{message}",c=Xn.fromMessages([l,u]),d=new Eh({openAIApiKey:"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",temperature:.7,streaming:!0}),h=new Ix({k:3}),w=new Kl({llm:d,prompt:c,memory:h}),v=s(t);return await w.call({message:v})};function JT({home:t}){const[e,r]=no.useState("");console.log("Home",t),no.useEffect(()=>{P1().then(s=>{s==null||s.forEach(a=>{Hp(a).then(o=>{console.log(o.text)}).catch(o=>console.error(o))})})},[]);const n=s=>{r(s.target.value)},i=()=>{Hp(e).then(s=>{console.log(s.text)}).catch(s=>console.error(s)),r("")};return Va.jsxs("div",{className:"mt-4",children:[Va.jsx("input",{type:"text",value:e,onChange:n,className:"border-2 border-black bg-white h-10 px-5 pr-16 rounded-lg text-sm "}),Va.jsx("button",{onClick:i,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Submit"})]})}Lu.createRoot(document.getElementById("root")).render(Va.jsx(JT,{home}));export{rx as B,Xn as C,cx as H,Kl as L,Yt as P,Zv as S,Tx as a,ax as c,Vv as r};
