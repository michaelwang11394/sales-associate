var Fw=Object.defineProperty;var Bw=(t,e,r)=>e in t?Fw(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var hn=(t,e,r)=>(Bw(t,typeof e!="symbol"?e+"":e,r),r);/* empty css                */var gp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vo(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Vw(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var Hg={exports:{}},xu={},Zg={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _o=Symbol.for("react.element"),Hw=Symbol.for("react.portal"),Zw=Symbol.for("react.fragment"),Kw=Symbol.for("react.strict_mode"),qw=Symbol.for("react.profiler"),Ww=Symbol.for("react.provider"),Jw=Symbol.for("react.context"),Gw=Symbol.for("react.forward_ref"),Yw=Symbol.for("react.suspense"),Qw=Symbol.for("react.memo"),Xw=Symbol.for("react.lazy"),yp=Symbol.iterator;function eb(t){return t===null||typeof t!="object"?null:(t=yp&&t[yp]||t["@@iterator"],typeof t=="function"?t:null)}var Kg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qg=Object.assign,Wg={};function Rs(t,e,r){this.props=t,this.context=e,this.refs=Wg,this.updater=r||Kg}Rs.prototype.isReactComponent={};Rs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Rs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Jg(){}Jg.prototype=Rs.prototype;function wh(t,e,r){this.props=t,this.context=e,this.refs=Wg,this.updater=r||Kg}var bh=wh.prototype=new Jg;bh.constructor=wh;qg(bh,Rs.prototype);bh.isPureReactComponent=!0;var vp=Array.isArray,Gg=Object.prototype.hasOwnProperty,xh={current:null},Yg={key:!0,ref:!0,__self:!0,__source:!0};function Qg(t,e,r){var n,i={},s=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)Gg.call(e,n)&&!Yg.hasOwnProperty(n)&&(i[n]=e[n]);var o=arguments.length-2;if(o===1)i.children=r;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:_o,type:t,key:s,ref:a,props:i,_owner:xh.current}}function tb(t,e){return{$$typeof:_o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function kh(t){return typeof t=="object"&&t!==null&&t.$$typeof===_o}function rb(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var _p=/\/+/g;function yc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?rb(""+t.key):e.toString(36)}function ol(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case _o:case Hw:a=!0}}if(a)return a=t,i=i(a),t=n===""?"."+yc(a,0):n,vp(i)?(r="",t!=null&&(r=t.replace(_p,"$&/")+"/"),ol(i,e,r,"",function(u){return u})):i!=null&&(kh(i)&&(i=tb(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(_p,"$&/")+"/")+t)),e.push(i)),1;if(a=0,n=n===""?".":n+":",vp(t))for(var o=0;o<t.length;o++){s=t[o];var l=n+yc(s,o);a+=ol(s,e,r,l,i)}else if(l=eb(t),typeof l=="function")for(t=l.call(t),o=0;!(s=t.next()).done;)s=s.value,l=n+yc(s,o++),a+=ol(s,e,r,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function No(t,e,r){if(t==null)return t;var n=[],i=0;return ol(t,n,"","",function(s){return e.call(r,s,i++)}),n}function nb(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ot={current:null},ll={transition:null},ib={ReactCurrentDispatcher:Ot,ReactCurrentBatchConfig:ll,ReactCurrentOwner:xh};he.Children={map:No,forEach:function(t,e,r){No(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return No(t,function(){e++}),e},toArray:function(t){return No(t,function(e){return e})||[]},only:function(t){if(!kh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};he.Component=Rs;he.Fragment=Zw;he.Profiler=qw;he.PureComponent=wh;he.StrictMode=Kw;he.Suspense=Yw;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ib;he.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=qg({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=xh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)Gg.call(e,l)&&!Yg.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:_o,type:t.type,key:i,ref:s,props:n,_owner:a}};he.createContext=function(t){return t={$$typeof:Jw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ww,_context:t},t.Consumer=t};he.createElement=Qg;he.createFactory=function(t){var e=Qg.bind(null,t);return e.type=t,e};he.createRef=function(){return{current:null}};he.forwardRef=function(t){return{$$typeof:Gw,render:t}};he.isValidElement=kh;he.lazy=function(t){return{$$typeof:Xw,_payload:{_status:-1,_result:t},_init:nb}};he.memo=function(t,e){return{$$typeof:Qw,type:t,compare:e===void 0?null:e}};he.startTransition=function(t){var e=ll.transition;ll.transition={};try{t()}finally{ll.transition=e}};he.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};he.useCallback=function(t,e){return Ot.current.useCallback(t,e)};he.useContext=function(t){return Ot.current.useContext(t)};he.useDebugValue=function(){};he.useDeferredValue=function(t){return Ot.current.useDeferredValue(t)};he.useEffect=function(t,e){return Ot.current.useEffect(t,e)};he.useId=function(){return Ot.current.useId()};he.useImperativeHandle=function(t,e,r){return Ot.current.useImperativeHandle(t,e,r)};he.useInsertionEffect=function(t,e){return Ot.current.useInsertionEffect(t,e)};he.useLayoutEffect=function(t,e){return Ot.current.useLayoutEffect(t,e)};he.useMemo=function(t,e){return Ot.current.useMemo(t,e)};he.useReducer=function(t,e,r){return Ot.current.useReducer(t,e,r)};he.useRef=function(t){return Ot.current.useRef(t)};he.useState=function(t){return Ot.current.useState(t)};he.useSyncExternalStore=function(t,e,r){return Ot.current.useSyncExternalStore(t,e,r)};he.useTransition=function(){return Ot.current.useTransition()};he.version="18.2.0";Zg.exports=he;var Ne=Zg.exports;const pi=vo(Ne);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sb=Ne,ab=Symbol.for("react.element"),ob=Symbol.for("react.fragment"),lb=Object.prototype.hasOwnProperty,ub=sb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cb={key:!0,ref:!0,__self:!0,__source:!0};function Xg(t,e,r){var n,i={},s=null,a=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)lb.call(e,n)&&!cb.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:ab,type:t,key:s,ref:a,props:i,_owner:ub.current}}xu.Fragment=ob;xu.jsx=Xg;xu.jsxs=Xg;Hg.exports=xu;var T=Hg.exports;(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var xl={},ey={exports:{}},Kt={},ty={exports:{}},ry={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,$){var F=V.length;V.push($);e:for(;0<F;){var H=F-1>>>1,ve=V[H];if(0<i(ve,$))V[H]=$,V[F]=ve,F=H;else break e}}function r(V){return V.length===0?null:V[0]}function n(V){if(V.length===0)return null;var $=V[0],F=V.pop();if(F!==$){V[0]=F;e:for(var H=0,ve=V.length,jt=ve>>>1;H<jt;){var et=2*(H+1)-1,Jt=V[et],Dt=et+1,Mr=V[Dt];if(0>i(Jt,F))Dt<ve&&0>i(Mr,Jt)?(V[H]=Mr,V[Dt]=F,H=Dt):(V[H]=Jt,V[et]=F,H=et);else if(Dt<ve&&0>i(Mr,F))V[H]=Mr,V[Dt]=F,H=Dt;else break e}}return $}function i(V,$){var F=V.sortIndex-$.sortIndex;return F!==0?F:V.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],u=[],c=1,d=null,h=3,b=!1,v=!1,P=!1,x=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function f(V){for(var $=r(u);$!==null;){if($.callback===null)n(u);else if($.startTime<=V)n(u),$.sortIndex=$.expirationTime,e(l,$);else break;$=r(u)}}function S(V){if(P=!1,f(V),!v)if(r(l)!==null)v=!0,G(A);else{var $=r(u);$!==null&&ge(S,$.startTime-V)}}function A(V,$){v=!1,P&&(P=!1,p(_),_=-1),b=!0;var F=h;try{for(f($),d=r(l);d!==null&&(!(d.expirationTime>$)||V&&!R());){var H=d.callback;if(typeof H=="function"){d.callback=null,h=d.priorityLevel;var ve=H(d.expirationTime<=$);$=t.unstable_now(),typeof ve=="function"?d.callback=ve:d===r(l)&&n(l),f($)}else n(l);d=r(l)}if(d!==null)var jt=!0;else{var et=r(u);et!==null&&ge(S,et.startTime-$),jt=!1}return jt}finally{d=null,h=F,b=!1}}var k=!1,j=null,_=-1,O=5,w=-1;function R(){return!(t.unstable_now()-w<O)}function L(){if(j!==null){var V=t.unstable_now();w=V;var $=!0;try{$=j(!0,V)}finally{$?te():(k=!1,j=null)}}else k=!1}var te;if(typeof m=="function")te=function(){m(L)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,ie=X.port2;X.port1.onmessage=L,te=function(){ie.postMessage(null)}}else te=function(){x(L,0)};function G(V){j=V,k||(k=!0,te())}function ge(V,$){_=x(function(){V(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){v||b||(v=!0,G(A))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(V){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var F=h;h=$;try{return V()}finally{h=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,$){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var F=h;h=V;try{return $()}finally{h=F}},t.unstable_scheduleCallback=function(V,$,F){var H=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?H+F:H):F=H,V){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=F+ve,V={id:c++,callback:$,priorityLevel:V,startTime:F,expirationTime:ve,sortIndex:-1},F>H?(V.sortIndex=F,e(u,V),r(l)===null&&V===r(u)&&(P?(p(_),_=-1):P=!0,ge(S,F-H))):(V.sortIndex=ve,e(l,V),v||b||(v=!0,G(A))),V},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(V){var $=h;return function(){var F=h;h=$;try{return V.apply(this,arguments)}finally{h=F}}}})(ry);ty.exports=ry;var db=ty.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ny=Ne,Ht=db;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var iy=new Set,za={};function Pi(t,e){ds(t,e),ds(t+"Capture",e)}function ds(t,e){for(za[t]=e,t=0;t<e.length;t++)iy.add(e[t])}var Qr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ud=Object.prototype.hasOwnProperty,hb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wp={},bp={};function fb(t){return ud.call(bp,t)?!0:ud.call(wp,t)?!1:hb.test(t)?bp[t]=!0:(wp[t]=!0,!1)}function pb(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function mb(t,e,r,n){if(e===null||typeof e>"u"||pb(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Pt(t,e,r,n,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ot[t]=new Pt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ot[e]=new Pt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ot[t]=new Pt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ot[t]=new Pt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ot[t]=new Pt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ot[t]=new Pt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ot[t]=new Pt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ot[t]=new Pt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ot[t]=new Pt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Sh=/[\-:]([a-z])/g;function Eh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Sh,Eh);ot[e]=new Pt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Sh,Eh);ot[e]=new Pt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Sh,Eh);ot[e]=new Pt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ot[t]=new Pt(t,1,!1,t.toLowerCase(),null,!1,!1)});ot.xlinkHref=new Pt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ot[t]=new Pt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Oh(t,e,r,n){var i=ot.hasOwnProperty(e)?ot[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(mb(e,r,i,n)&&(r=null),n||i===null?fb(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var an=ny.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Lo=Symbol.for("react.element"),Vi=Symbol.for("react.portal"),Hi=Symbol.for("react.fragment"),Ph=Symbol.for("react.strict_mode"),cd=Symbol.for("react.profiler"),sy=Symbol.for("react.provider"),ay=Symbol.for("react.context"),Th=Symbol.for("react.forward_ref"),dd=Symbol.for("react.suspense"),hd=Symbol.for("react.suspense_list"),jh=Symbol.for("react.memo"),vn=Symbol.for("react.lazy"),oy=Symbol.for("react.offscreen"),xp=Symbol.iterator;function Bs(t){return t===null||typeof t!="object"?null:(t=xp&&t[xp]||t["@@iterator"],typeof t=="function"?t:null)}var $e=Object.assign,vc;function ha(t){if(vc===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);vc=e&&e[1]||""}return`
`+vc+t}var _c=!1;function wc(t,e){if(!t||_c)return"";_c=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=n.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{_c=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?ha(t):""}function gb(t){switch(t.tag){case 5:return ha(t.type);case 16:return ha("Lazy");case 13:return ha("Suspense");case 19:return ha("SuspenseList");case 0:case 2:case 15:return t=wc(t.type,!1),t;case 11:return t=wc(t.type.render,!1),t;case 1:return t=wc(t.type,!0),t;default:return""}}function fd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Hi:return"Fragment";case Vi:return"Portal";case cd:return"Profiler";case Ph:return"StrictMode";case dd:return"Suspense";case hd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ay:return(t.displayName||"Context")+".Consumer";case sy:return(t._context.displayName||"Context")+".Provider";case Th:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case jh:return e=t.displayName||null,e!==null?e:fd(t.type)||"Memo";case vn:e=t._payload,t=t._init;try{return fd(t(e))}catch{}}return null}function yb(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fd(e);case 8:return e===Ph?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Mn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ly(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vb(t){var e=ly(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function $o(t){t._valueTracker||(t._valueTracker=vb(t))}function uy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=ly(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function kl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function pd(t,e){var r=e.checked;return $e({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function kp(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Mn(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function cy(t,e){e=e.checked,e!=null&&Oh(t,"checked",e,!1)}function md(t,e){cy(t,e);var r=Mn(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?gd(t,e.type,r):e.hasOwnProperty("defaultValue")&&gd(t,e.type,Mn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Sp(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function gd(t,e,r){(e!=="number"||kl(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var fa=Array.isArray;function is(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Mn(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function yd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return $e({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ep(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(z(92));if(fa(r)){if(1<r.length)throw Error(z(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Mn(r)}}function dy(t,e){var r=Mn(e.value),n=Mn(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Op(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function hy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?hy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Do,fy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Do=Do||document.createElement("div"),Do.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Do.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Fa(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var wa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_b=["Webkit","ms","Moz","O"];Object.keys(wa).forEach(function(t){_b.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),wa[e]=wa[t]})});function py(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||wa.hasOwnProperty(t)&&wa[t]?(""+e).trim():e+"px"}function my(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=py(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var wb=$e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _d(t,e){if(e){if(wb[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function wd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bd=null;function Ch(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var xd=null,ss=null,as=null;function Pp(t){if(t=xo(t)){if(typeof xd!="function")throw Error(z(280));var e=t.stateNode;e&&(e=Pu(e),xd(t.stateNode,t.type,e))}}function gy(t){ss?as?as.push(t):as=[t]:ss=t}function yy(){if(ss){var t=ss,e=as;if(as=ss=null,Pp(t),e)for(t=0;t<e.length;t++)Pp(e[t])}}function vy(t,e){return t(e)}function _y(){}var bc=!1;function wy(t,e,r){if(bc)return t(e,r);bc=!0;try{return vy(t,e,r)}finally{bc=!1,(ss!==null||as!==null)&&(_y(),yy())}}function Ba(t,e){var r=t.stateNode;if(r===null)return null;var n=Pu(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(z(231,e,typeof r));return r}var kd=!1;if(Qr)try{var Vs={};Object.defineProperty(Vs,"passive",{get:function(){kd=!0}}),window.addEventListener("test",Vs,Vs),window.removeEventListener("test",Vs,Vs)}catch{kd=!1}function bb(t,e,r,n,i,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(c){this.onError(c)}}var ba=!1,Sl=null,El=!1,Sd=null,xb={onError:function(t){ba=!0,Sl=t}};function kb(t,e,r,n,i,s,a,o,l){ba=!1,Sl=null,bb.apply(xb,arguments)}function Sb(t,e,r,n,i,s,a,o,l){if(kb.apply(this,arguments),ba){if(ba){var u=Sl;ba=!1,Sl=null}else throw Error(z(198));El||(El=!0,Sd=u)}}function Ti(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function by(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Tp(t){if(Ti(t)!==t)throw Error(z(188))}function Eb(t){var e=t.alternate;if(!e){if(e=Ti(t),e===null)throw Error(z(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return Tp(i),t;if(s===n)return Tp(i),e;s=s.sibling}throw Error(z(188))}if(r.return!==n.return)r=i,n=s;else{for(var a=!1,o=i.child;o;){if(o===r){a=!0,r=i,n=s;break}if(o===n){a=!0,n=i,r=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===r){a=!0,r=s,n=i;break}if(o===n){a=!0,n=s,r=i;break}o=o.sibling}if(!a)throw Error(z(189))}}if(r.alternate!==n)throw Error(z(190))}if(r.tag!==3)throw Error(z(188));return r.stateNode.current===r?t:e}function xy(t){return t=Eb(t),t!==null?ky(t):null}function ky(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ky(t);if(e!==null)return e;t=t.sibling}return null}var Sy=Ht.unstable_scheduleCallback,jp=Ht.unstable_cancelCallback,Ob=Ht.unstable_shouldYield,Pb=Ht.unstable_requestPaint,Ve=Ht.unstable_now,Tb=Ht.unstable_getCurrentPriorityLevel,Ah=Ht.unstable_ImmediatePriority,Ey=Ht.unstable_UserBlockingPriority,Ol=Ht.unstable_NormalPriority,jb=Ht.unstable_LowPriority,Oy=Ht.unstable_IdlePriority,ku=null,Rr=null;function Cb(t){if(Rr&&typeof Rr.onCommitFiberRoot=="function")try{Rr.onCommitFiberRoot(ku,t,void 0,(t.current.flags&128)===128)}catch{}}var _r=Math.clz32?Math.clz32:Rb,Ab=Math.log,Ib=Math.LN2;function Rb(t){return t>>>=0,t===0?32:31-(Ab(t)/Ib|0)|0}var Mo=64,Uo=4194304;function pa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Pl(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,a=r&268435455;if(a!==0){var o=a&~i;o!==0?n=pa(o):(s&=a,s!==0&&(n=pa(s)))}else a=r&~i,a!==0?n=pa(a):s!==0&&(n=pa(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-_r(e),i=1<<r,n|=t[r],e&=~i;return n}function Nb(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lb(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-_r(s),o=1<<a,l=i[a];l===-1?(!(o&r)||o&n)&&(i[a]=Nb(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}}function Ed(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Py(){var t=Mo;return Mo<<=1,!(Mo&4194240)&&(Mo=64),t}function xc(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function wo(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-_r(e),t[e]=r}function $b(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-_r(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function Ih(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-_r(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var we=0;function Ty(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var jy,Rh,Cy,Ay,Iy,Od=!1,zo=[],Pn=null,Tn=null,jn=null,Va=new Map,Ha=new Map,xn=[],Db="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cp(t,e){switch(t){case"focusin":case"focusout":Pn=null;break;case"dragenter":case"dragleave":Tn=null;break;case"mouseover":case"mouseout":jn=null;break;case"pointerover":case"pointerout":Va.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ha.delete(e.pointerId)}}function Hs(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=xo(e),e!==null&&Rh(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Mb(t,e,r,n,i){switch(e){case"focusin":return Pn=Hs(Pn,t,e,r,n,i),!0;case"dragenter":return Tn=Hs(Tn,t,e,r,n,i),!0;case"mouseover":return jn=Hs(jn,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return Va.set(s,Hs(Va.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Ha.set(s,Hs(Ha.get(s)||null,t,e,r,n,i)),!0}return!1}function Ry(t){var e=ci(t.target);if(e!==null){var r=Ti(e);if(r!==null){if(e=r.tag,e===13){if(e=by(r),e!==null){t.blockedOn=e,Iy(t.priority,function(){Cy(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ul(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Pd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);bd=n,r.target.dispatchEvent(n),bd=null}else return e=xo(r),e!==null&&Rh(e),t.blockedOn=r,!1;e.shift()}return!0}function Ap(t,e,r){ul(t)&&r.delete(e)}function Ub(){Od=!1,Pn!==null&&ul(Pn)&&(Pn=null),Tn!==null&&ul(Tn)&&(Tn=null),jn!==null&&ul(jn)&&(jn=null),Va.forEach(Ap),Ha.forEach(Ap)}function Zs(t,e){t.blockedOn===e&&(t.blockedOn=null,Od||(Od=!0,Ht.unstable_scheduleCallback(Ht.unstable_NormalPriority,Ub)))}function Za(t){function e(i){return Zs(i,t)}if(0<zo.length){Zs(zo[0],t);for(var r=1;r<zo.length;r++){var n=zo[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Pn!==null&&Zs(Pn,t),Tn!==null&&Zs(Tn,t),jn!==null&&Zs(jn,t),Va.forEach(e),Ha.forEach(e),r=0;r<xn.length;r++)n=xn[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<xn.length&&(r=xn[0],r.blockedOn===null);)Ry(r),r.blockedOn===null&&xn.shift()}var os=an.ReactCurrentBatchConfig,Tl=!0;function zb(t,e,r,n){var i=we,s=os.transition;os.transition=null;try{we=1,Nh(t,e,r,n)}finally{we=i,os.transition=s}}function Fb(t,e,r,n){var i=we,s=os.transition;os.transition=null;try{we=4,Nh(t,e,r,n)}finally{we=i,os.transition=s}}function Nh(t,e,r,n){if(Tl){var i=Pd(t,e,r,n);if(i===null)Ic(t,e,n,jl,r),Cp(t,n);else if(Mb(i,t,e,r,n))n.stopPropagation();else if(Cp(t,n),e&4&&-1<Db.indexOf(t)){for(;i!==null;){var s=xo(i);if(s!==null&&jy(s),s=Pd(t,e,r,n),s===null&&Ic(t,e,n,jl,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else Ic(t,e,n,null,r)}}var jl=null;function Pd(t,e,r,n){if(jl=null,t=Ch(n),t=ci(t),t!==null)if(e=Ti(t),e===null)t=null;else if(r=e.tag,r===13){if(t=by(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return jl=t,null}function Ny(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Tb()){case Ah:return 1;case Ey:return 4;case Ol:case jb:return 16;case Oy:return 536870912;default:return 16}default:return 16}}var En=null,Lh=null,cl=null;function Ly(){if(cl)return cl;var t,e=Lh,r=e.length,n,i="value"in En?En.value:En.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===i[s-n];n++);return cl=i.slice(t,1<n?1-n:void 0)}function dl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Fo(){return!0}function Ip(){return!1}function qt(t){function e(r,n,i,s,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Fo:Ip,this.isPropagationStopped=Ip,this}return $e(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Fo)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Fo)},persist:function(){},isPersistent:Fo}),e}var Ns={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$h=qt(Ns),bo=$e({},Ns,{view:0,detail:0}),Bb=qt(bo),kc,Sc,Ks,Su=$e({},bo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ks&&(Ks&&t.type==="mousemove"?(kc=t.screenX-Ks.screenX,Sc=t.screenY-Ks.screenY):Sc=kc=0,Ks=t),kc)},movementY:function(t){return"movementY"in t?t.movementY:Sc}}),Rp=qt(Su),Vb=$e({},Su,{dataTransfer:0}),Hb=qt(Vb),Zb=$e({},bo,{relatedTarget:0}),Ec=qt(Zb),Kb=$e({},Ns,{animationName:0,elapsedTime:0,pseudoElement:0}),qb=qt(Kb),Wb=$e({},Ns,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Jb=qt(Wb),Gb=$e({},Ns,{data:0}),Np=qt(Gb),Yb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function e1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Xb[t])?!!e[t]:!1}function Dh(){return e1}var t1=$e({},bo,{key:function(t){if(t.key){var e=Yb[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=dl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Qb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dh,charCode:function(t){return t.type==="keypress"?dl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?dl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),r1=qt(t1),n1=$e({},Su,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lp=qt(n1),i1=$e({},bo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dh}),s1=qt(i1),a1=$e({},Ns,{propertyName:0,elapsedTime:0,pseudoElement:0}),o1=qt(a1),l1=$e({},Su,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),u1=qt(l1),c1=[9,13,27,32],Mh=Qr&&"CompositionEvent"in window,xa=null;Qr&&"documentMode"in document&&(xa=document.documentMode);var d1=Qr&&"TextEvent"in window&&!xa,$y=Qr&&(!Mh||xa&&8<xa&&11>=xa),$p=String.fromCharCode(32),Dp=!1;function Dy(t,e){switch(t){case"keyup":return c1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function My(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Zi=!1;function h1(t,e){switch(t){case"compositionend":return My(e);case"keypress":return e.which!==32?null:(Dp=!0,$p);case"textInput":return t=e.data,t===$p&&Dp?null:t;default:return null}}function f1(t,e){if(Zi)return t==="compositionend"||!Mh&&Dy(t,e)?(t=Ly(),cl=Lh=En=null,Zi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return $y&&e.locale!=="ko"?null:e.data;default:return null}}var p1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!p1[t.type]:e==="textarea"}function Uy(t,e,r,n){gy(n),e=Cl(e,"onChange"),0<e.length&&(r=new $h("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var ka=null,Ka=null;function m1(t){Gy(t,0)}function Eu(t){var e=Wi(t);if(uy(e))return t}function g1(t,e){if(t==="change")return e}var zy=!1;if(Qr){var Oc;if(Qr){var Pc="oninput"in document;if(!Pc){var Up=document.createElement("div");Up.setAttribute("oninput","return;"),Pc=typeof Up.oninput=="function"}Oc=Pc}else Oc=!1;zy=Oc&&(!document.documentMode||9<document.documentMode)}function zp(){ka&&(ka.detachEvent("onpropertychange",Fy),Ka=ka=null)}function Fy(t){if(t.propertyName==="value"&&Eu(Ka)){var e=[];Uy(e,Ka,t,Ch(t)),wy(m1,e)}}function y1(t,e,r){t==="focusin"?(zp(),ka=e,Ka=r,ka.attachEvent("onpropertychange",Fy)):t==="focusout"&&zp()}function v1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Eu(Ka)}function _1(t,e){if(t==="click")return Eu(e)}function w1(t,e){if(t==="input"||t==="change")return Eu(e)}function b1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var br=typeof Object.is=="function"?Object.is:b1;function qa(t,e){if(br(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!ud.call(e,i)||!br(t[i],e[i]))return!1}return!0}function Fp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Bp(t,e){var r=Fp(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Fp(r)}}function By(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?By(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Vy(){for(var t=window,e=kl();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=kl(t.document)}return e}function Uh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function x1(t){var e=Vy(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&By(r.ownerDocument.documentElement,r)){if(n!==null&&Uh(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=Bp(r,s);var a=Bp(r,n);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var k1=Qr&&"documentMode"in document&&11>=document.documentMode,Ki=null,Td=null,Sa=null,jd=!1;function Vp(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;jd||Ki==null||Ki!==kl(n)||(n=Ki,"selectionStart"in n&&Uh(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Sa&&qa(Sa,n)||(Sa=n,n=Cl(Td,"onSelect"),0<n.length&&(e=new $h("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Ki)))}function Bo(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var qi={animationend:Bo("Animation","AnimationEnd"),animationiteration:Bo("Animation","AnimationIteration"),animationstart:Bo("Animation","AnimationStart"),transitionend:Bo("Transition","TransitionEnd")},Tc={},Hy={};Qr&&(Hy=document.createElement("div").style,"AnimationEvent"in window||(delete qi.animationend.animation,delete qi.animationiteration.animation,delete qi.animationstart.animation),"TransitionEvent"in window||delete qi.transitionend.transition);function Ou(t){if(Tc[t])return Tc[t];if(!qi[t])return t;var e=qi[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Hy)return Tc[t]=e[r];return t}var Zy=Ou("animationend"),Ky=Ou("animationiteration"),qy=Ou("animationstart"),Wy=Ou("transitionend"),Jy=new Map,Hp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hn(t,e){Jy.set(t,e),Pi(e,[t])}for(var jc=0;jc<Hp.length;jc++){var Cc=Hp[jc],S1=Cc.toLowerCase(),E1=Cc[0].toUpperCase()+Cc.slice(1);Hn(S1,"on"+E1)}Hn(Zy,"onAnimationEnd");Hn(Ky,"onAnimationIteration");Hn(qy,"onAnimationStart");Hn("dblclick","onDoubleClick");Hn("focusin","onFocus");Hn("focusout","onBlur");Hn(Wy,"onTransitionEnd");ds("onMouseEnter",["mouseout","mouseover"]);ds("onMouseLeave",["mouseout","mouseover"]);ds("onPointerEnter",["pointerout","pointerover"]);ds("onPointerLeave",["pointerout","pointerover"]);Pi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ma="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),O1=new Set("cancel close invalid load scroll toggle".split(" ").concat(ma));function Zp(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Sb(n,e,void 0,t),t.currentTarget=null}function Gy(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Zp(i,o,u),s=l}else for(a=0;a<n.length;a++){if(o=n[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Zp(i,o,u),s=l}}}if(El)throw t=Sd,El=!1,Sd=null,t}function Te(t,e){var r=e[Nd];r===void 0&&(r=e[Nd]=new Set);var n=t+"__bubble";r.has(n)||(Yy(e,t,2,!1),r.add(n))}function Ac(t,e,r){var n=0;e&&(n|=4),Yy(r,t,n,e)}var Vo="_reactListening"+Math.random().toString(36).slice(2);function Wa(t){if(!t[Vo]){t[Vo]=!0,iy.forEach(function(r){r!=="selectionchange"&&(O1.has(r)||Ac(r,!1,t),Ac(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Vo]||(e[Vo]=!0,Ac("selectionchange",!1,e))}}function Yy(t,e,r,n){switch(Ny(e)){case 1:var i=zb;break;case 4:i=Fb;break;default:i=Nh}r=i.bind(null,e,r,t),i=void 0,!kd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Ic(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=ci(o),a===null)return;if(l=a.tag,l===5||l===6){n=s=a;continue e}o=o.parentNode}}n=n.return}wy(function(){var u=s,c=Ch(r),d=[];e:{var h=Jy.get(t);if(h!==void 0){var b=$h,v=t;switch(t){case"keypress":if(dl(r)===0)break e;case"keydown":case"keyup":b=r1;break;case"focusin":v="focus",b=Ec;break;case"focusout":v="blur",b=Ec;break;case"beforeblur":case"afterblur":b=Ec;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=Rp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=Hb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=s1;break;case Zy:case Ky:case qy:b=qb;break;case Wy:b=o1;break;case"scroll":b=Bb;break;case"wheel":b=u1;break;case"copy":case"cut":case"paste":b=Jb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=Lp}var P=(e&4)!==0,x=!P&&t==="scroll",p=P?h!==null?h+"Capture":null:h;P=[];for(var m=u,f;m!==null;){f=m;var S=f.stateNode;if(f.tag===5&&S!==null&&(f=S,p!==null&&(S=Ba(m,p),S!=null&&P.push(Ja(m,S,f)))),x)break;m=m.return}0<P.length&&(h=new b(h,v,null,r,c),d.push({event:h,listeners:P}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",b=t==="mouseout"||t==="pointerout",h&&r!==bd&&(v=r.relatedTarget||r.fromElement)&&(ci(v)||v[Xr]))break e;if((b||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,b?(v=r.relatedTarget||r.toElement,b=u,v=v?ci(v):null,v!==null&&(x=Ti(v),v!==x||v.tag!==5&&v.tag!==6)&&(v=null)):(b=null,v=u),b!==v)){if(P=Rp,S="onMouseLeave",p="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(P=Lp,S="onPointerLeave",p="onPointerEnter",m="pointer"),x=b==null?h:Wi(b),f=v==null?h:Wi(v),h=new P(S,m+"leave",b,r,c),h.target=x,h.relatedTarget=f,S=null,ci(c)===u&&(P=new P(p,m+"enter",v,r,c),P.target=f,P.relatedTarget=x,S=P),x=S,b&&v)t:{for(P=b,p=v,m=0,f=P;f;f=Ii(f))m++;for(f=0,S=p;S;S=Ii(S))f++;for(;0<m-f;)P=Ii(P),m--;for(;0<f-m;)p=Ii(p),f--;for(;m--;){if(P===p||p!==null&&P===p.alternate)break t;P=Ii(P),p=Ii(p)}P=null}else P=null;b!==null&&Kp(d,h,b,P,!1),v!==null&&x!==null&&Kp(d,x,v,P,!0)}}e:{if(h=u?Wi(u):window,b=h.nodeName&&h.nodeName.toLowerCase(),b==="select"||b==="input"&&h.type==="file")var A=g1;else if(Mp(h))if(zy)A=w1;else{A=v1;var k=y1}else(b=h.nodeName)&&b.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(A=_1);if(A&&(A=A(t,u))){Uy(d,A,r,c);break e}k&&k(t,h,u),t==="focusout"&&(k=h._wrapperState)&&k.controlled&&h.type==="number"&&gd(h,"number",h.value)}switch(k=u?Wi(u):window,t){case"focusin":(Mp(k)||k.contentEditable==="true")&&(Ki=k,Td=u,Sa=null);break;case"focusout":Sa=Td=Ki=null;break;case"mousedown":jd=!0;break;case"contextmenu":case"mouseup":case"dragend":jd=!1,Vp(d,r,c);break;case"selectionchange":if(k1)break;case"keydown":case"keyup":Vp(d,r,c)}var j;if(Mh)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Zi?Dy(t,r)&&(_="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(_="onCompositionStart");_&&($y&&r.locale!=="ko"&&(Zi||_!=="onCompositionStart"?_==="onCompositionEnd"&&Zi&&(j=Ly()):(En=c,Lh="value"in En?En.value:En.textContent,Zi=!0)),k=Cl(u,_),0<k.length&&(_=new Np(_,t,null,r,c),d.push({event:_,listeners:k}),j?_.data=j:(j=My(r),j!==null&&(_.data=j)))),(j=d1?h1(t,r):f1(t,r))&&(u=Cl(u,"onBeforeInput"),0<u.length&&(c=new Np("onBeforeInput","beforeinput",null,r,c),d.push({event:c,listeners:u}),c.data=j))}Gy(d,e)})}function Ja(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Cl(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ba(t,r),s!=null&&n.unshift(Ja(t,s,i)),s=Ba(t,e),s!=null&&n.push(Ja(t,s,i))),t=t.return}return n}function Ii(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Kp(t,e,r,n,i){for(var s=e._reactName,a=[];r!==null&&r!==n;){var o=r,l=o.alternate,u=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&u!==null&&(o=u,i?(l=Ba(r,s),l!=null&&a.unshift(Ja(r,l,o))):i||(l=Ba(r,s),l!=null&&a.push(Ja(r,l,o)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var P1=/\r\n?/g,T1=/\u0000|\uFFFD/g;function qp(t){return(typeof t=="string"?t:""+t).replace(P1,`
`).replace(T1,"")}function Ho(t,e,r){if(e=qp(e),qp(t)!==e&&r)throw Error(z(425))}function Al(){}var Cd=null,Ad=null;function Id(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Rd=typeof setTimeout=="function"?setTimeout:void 0,j1=typeof clearTimeout=="function"?clearTimeout:void 0,Wp=typeof Promise=="function"?Promise:void 0,C1=typeof queueMicrotask=="function"?queueMicrotask:typeof Wp<"u"?function(t){return Wp.resolve(null).then(t).catch(A1)}:Rd;function A1(t){setTimeout(function(){throw t})}function Rc(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Za(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Za(e)}function Cn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Jp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Ls=Math.random().toString(36).slice(2),Cr="__reactFiber$"+Ls,Ga="__reactProps$"+Ls,Xr="__reactContainer$"+Ls,Nd="__reactEvents$"+Ls,I1="__reactListeners$"+Ls,R1="__reactHandles$"+Ls;function ci(t){var e=t[Cr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Xr]||r[Cr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Jp(t);t!==null;){if(r=t[Cr])return r;t=Jp(t)}return e}t=r,r=t.parentNode}return null}function xo(t){return t=t[Cr]||t[Xr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Wi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function Pu(t){return t[Ga]||null}var Ld=[],Ji=-1;function Zn(t){return{current:t}}function je(t){0>Ji||(t.current=Ld[Ji],Ld[Ji]=null,Ji--)}function Oe(t,e){Ji++,Ld[Ji]=t.current,t.current=e}var Un={},bt=Zn(Un),Nt=Zn(!1),_i=Un;function hs(t,e){var r=t.type.contextTypes;if(!r)return Un;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Lt(t){return t=t.childContextTypes,t!=null}function Il(){je(Nt),je(bt)}function Gp(t,e,r){if(bt.current!==Un)throw Error(z(168));Oe(bt,e),Oe(Nt,r)}function Qy(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(z(108,yb(t)||"Unknown",i));return $e({},r,n)}function Rl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Un,_i=bt.current,Oe(bt,t),Oe(Nt,Nt.current),!0}function Yp(t,e,r){var n=t.stateNode;if(!n)throw Error(z(169));r?(t=Qy(t,e,_i),n.__reactInternalMemoizedMergedChildContext=t,je(Nt),je(bt),Oe(bt,t)):je(Nt),Oe(Nt,r)}var Zr=null,Tu=!1,Nc=!1;function Xy(t){Zr===null?Zr=[t]:Zr.push(t)}function N1(t){Tu=!0,Xy(t)}function Kn(){if(!Nc&&Zr!==null){Nc=!0;var t=0,e=we;try{var r=Zr;for(we=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Zr=null,Tu=!1}catch(i){throw Zr!==null&&(Zr=Zr.slice(t+1)),Sy(Ah,Kn),i}finally{we=e,Nc=!1}}return null}var Gi=[],Yi=0,Nl=null,Ll=0,er=[],tr=0,wi=null,Wr=1,Jr="";function ti(t,e){Gi[Yi++]=Ll,Gi[Yi++]=Nl,Nl=t,Ll=e}function ev(t,e,r){er[tr++]=Wr,er[tr++]=Jr,er[tr++]=wi,wi=t;var n=Wr;t=Jr;var i=32-_r(n)-1;n&=~(1<<i),r+=1;var s=32-_r(e)+i;if(30<s){var a=i-i%5;s=(n&(1<<a)-1).toString(32),n>>=a,i-=a,Wr=1<<32-_r(e)+i|r<<i|n,Jr=s+t}else Wr=1<<s|r<<i|n,Jr=t}function zh(t){t.return!==null&&(ti(t,1),ev(t,1,0))}function Fh(t){for(;t===Nl;)Nl=Gi[--Yi],Gi[Yi]=null,Ll=Gi[--Yi],Gi[Yi]=null;for(;t===wi;)wi=er[--tr],er[tr]=null,Jr=er[--tr],er[tr]=null,Wr=er[--tr],er[tr]=null}var Bt=null,Ft=null,Ie=!1,vr=null;function tv(t,e){var r=rr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Qp(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Bt=t,Ft=Cn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Bt=t,Ft=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=wi!==null?{id:Wr,overflow:Jr}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=rr(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Bt=t,Ft=null,!0):!1;default:return!1}}function $d(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Dd(t){if(Ie){var e=Ft;if(e){var r=e;if(!Qp(t,e)){if($d(t))throw Error(z(418));e=Cn(r.nextSibling);var n=Bt;e&&Qp(t,e)?tv(n,r):(t.flags=t.flags&-4097|2,Ie=!1,Bt=t)}}else{if($d(t))throw Error(z(418));t.flags=t.flags&-4097|2,Ie=!1,Bt=t}}}function Xp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Bt=t}function Zo(t){if(t!==Bt)return!1;if(!Ie)return Xp(t),Ie=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Id(t.type,t.memoizedProps)),e&&(e=Ft)){if($d(t))throw rv(),Error(z(418));for(;e;)tv(t,e),e=Cn(e.nextSibling)}if(Xp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Ft=Cn(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Ft=null}}else Ft=Bt?Cn(t.stateNode.nextSibling):null;return!0}function rv(){for(var t=Ft;t;)t=Cn(t.nextSibling)}function fs(){Ft=Bt=null,Ie=!1}function Bh(t){vr===null?vr=[t]:vr.push(t)}var L1=an.ReactCurrentBatchConfig;function mr(t,e){if(t&&t.defaultProps){e=$e({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}var $l=Zn(null),Dl=null,Qi=null,Vh=null;function Hh(){Vh=Qi=Dl=null}function Zh(t){var e=$l.current;je($l),t._currentValue=e}function Md(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function ls(t,e){Dl=t,Vh=Qi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Rt=!0),t.firstContext=null)}function or(t){var e=t._currentValue;if(Vh!==t)if(t={context:t,memoizedValue:e,next:null},Qi===null){if(Dl===null)throw Error(z(308));Qi=t,Dl.dependencies={lanes:0,firstContext:t}}else Qi=Qi.next=t;return e}var di=null;function Kh(t){di===null?di=[t]:di.push(t)}function nv(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,Kh(e)):(r.next=i.next,i.next=r),e.interleaved=r,en(t,n)}function en(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var _n=!1;function qh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function iv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Gr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function An(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,me&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,en(t,r)}return i=n.interleaved,i===null?(e.next=e,Kh(n)):(e.next=i.next,i.next=e),n.interleaved=e,en(t,r)}function hl(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Ih(t,r)}}function em(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=a:s=s.next=a,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Ml(t,e,r,n){var i=t.updateQueue;_n=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?s=u:a.next=u,a=l;var c=t.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==a&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;a=0,c=u=l=null,o=s;do{var h=o.lane,b=o.eventTime;if((n&h)===h){c!==null&&(c=c.next={eventTime:b,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=t,P=o;switch(h=e,b=r,P.tag){case 1:if(v=P.payload,typeof v=="function"){d=v.call(b,d,h);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=P.payload,h=typeof v=="function"?v.call(b,d,h):v,h==null)break e;d=$e({},d,h);break e;case 2:_n=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[o]:h.push(o))}else b={eventTime:b,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=b,l=d):c=c.next=b,a|=h;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;h=o,o=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);xi|=a,t.lanes=a,t.memoizedState=d}}function tm(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(z(191,i));i.call(n)}}}var sv=new ny.Component().refs;function Ud(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:$e({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var ju={isMounted:function(t){return(t=t._reactInternals)?Ti(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Et(),i=Rn(t),s=Gr(n,i);s.payload=e,r!=null&&(s.callback=r),e=An(t,s,i),e!==null&&(wr(e,t,i,n),hl(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Et(),i=Rn(t),s=Gr(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=An(t,s,i),e!==null&&(wr(e,t,i,n),hl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Et(),n=Rn(t),i=Gr(r,n);i.tag=2,e!=null&&(i.callback=e),e=An(t,i,n),e!==null&&(wr(e,t,n,r),hl(e,t,n))}};function rm(t,e,r,n,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,a):e.prototype&&e.prototype.isPureReactComponent?!qa(r,n)||!qa(i,s):!0}function av(t,e,r){var n=!1,i=Un,s=e.contextType;return typeof s=="object"&&s!==null?s=or(s):(i=Lt(e)?_i:bt.current,n=e.contextTypes,s=(n=n!=null)?hs(t,i):Un),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ju,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function nm(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&ju.enqueueReplaceState(e,e.state,null)}function zd(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs=sv,qh(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=or(s):(s=Lt(e)?_i:bt.current,i.context=hs(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Ud(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ju.enqueueReplaceState(i,i.state,null),Ml(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function qs(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(z(309));var n=r.stateNode}if(!n)throw Error(z(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;o===sv&&(o=i.refs={}),a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(z(284));if(!r._owner)throw Error(z(290,t))}return t}function Ko(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function im(t){var e=t._init;return e(t._payload)}function ov(t){function e(p,m){if(t){var f=p.deletions;f===null?(p.deletions=[m],p.flags|=16):f.push(m)}}function r(p,m){if(!t)return null;for(;m!==null;)e(p,m),m=m.sibling;return null}function n(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function i(p,m){return p=Nn(p,m),p.index=0,p.sibling=null,p}function s(p,m,f){return p.index=f,t?(f=p.alternate,f!==null?(f=f.index,f<m?(p.flags|=2,m):f):(p.flags|=2,m)):(p.flags|=1048576,m)}function a(p){return t&&p.alternate===null&&(p.flags|=2),p}function o(p,m,f,S){return m===null||m.tag!==6?(m=Fc(f,p.mode,S),m.return=p,m):(m=i(m,f),m.return=p,m)}function l(p,m,f,S){var A=f.type;return A===Hi?c(p,m,f.props.children,S,f.key):m!==null&&(m.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===vn&&im(A)===m.type)?(S=i(m,f.props),S.ref=qs(p,m,f),S.return=p,S):(S=vl(f.type,f.key,f.props,null,p.mode,S),S.ref=qs(p,m,f),S.return=p,S)}function u(p,m,f,S){return m===null||m.tag!==4||m.stateNode.containerInfo!==f.containerInfo||m.stateNode.implementation!==f.implementation?(m=Bc(f,p.mode,S),m.return=p,m):(m=i(m,f.children||[]),m.return=p,m)}function c(p,m,f,S,A){return m===null||m.tag!==7?(m=gi(f,p.mode,S,A),m.return=p,m):(m=i(m,f),m.return=p,m)}function d(p,m,f){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Fc(""+m,p.mode,f),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Lo:return f=vl(m.type,m.key,m.props,null,p.mode,f),f.ref=qs(p,null,m),f.return=p,f;case Vi:return m=Bc(m,p.mode,f),m.return=p,m;case vn:var S=m._init;return d(p,S(m._payload),f)}if(fa(m)||Bs(m))return m=gi(m,p.mode,f,null),m.return=p,m;Ko(p,m)}return null}function h(p,m,f,S){var A=m!==null?m.key:null;if(typeof f=="string"&&f!==""||typeof f=="number")return A!==null?null:o(p,m,""+f,S);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Lo:return f.key===A?l(p,m,f,S):null;case Vi:return f.key===A?u(p,m,f,S):null;case vn:return A=f._init,h(p,m,A(f._payload),S)}if(fa(f)||Bs(f))return A!==null?null:c(p,m,f,S,null);Ko(p,f)}return null}function b(p,m,f,S,A){if(typeof S=="string"&&S!==""||typeof S=="number")return p=p.get(f)||null,o(m,p,""+S,A);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Lo:return p=p.get(S.key===null?f:S.key)||null,l(m,p,S,A);case Vi:return p=p.get(S.key===null?f:S.key)||null,u(m,p,S,A);case vn:var k=S._init;return b(p,m,f,k(S._payload),A)}if(fa(S)||Bs(S))return p=p.get(f)||null,c(m,p,S,A,null);Ko(m,S)}return null}function v(p,m,f,S){for(var A=null,k=null,j=m,_=m=0,O=null;j!==null&&_<f.length;_++){j.index>_?(O=j,j=null):O=j.sibling;var w=h(p,j,f[_],S);if(w===null){j===null&&(j=O);break}t&&j&&w.alternate===null&&e(p,j),m=s(w,m,_),k===null?A=w:k.sibling=w,k=w,j=O}if(_===f.length)return r(p,j),Ie&&ti(p,_),A;if(j===null){for(;_<f.length;_++)j=d(p,f[_],S),j!==null&&(m=s(j,m,_),k===null?A=j:k.sibling=j,k=j);return Ie&&ti(p,_),A}for(j=n(p,j);_<f.length;_++)O=b(j,p,_,f[_],S),O!==null&&(t&&O.alternate!==null&&j.delete(O.key===null?_:O.key),m=s(O,m,_),k===null?A=O:k.sibling=O,k=O);return t&&j.forEach(function(R){return e(p,R)}),Ie&&ti(p,_),A}function P(p,m,f,S){var A=Bs(f);if(typeof A!="function")throw Error(z(150));if(f=A.call(f),f==null)throw Error(z(151));for(var k=A=null,j=m,_=m=0,O=null,w=f.next();j!==null&&!w.done;_++,w=f.next()){j.index>_?(O=j,j=null):O=j.sibling;var R=h(p,j,w.value,S);if(R===null){j===null&&(j=O);break}t&&j&&R.alternate===null&&e(p,j),m=s(R,m,_),k===null?A=R:k.sibling=R,k=R,j=O}if(w.done)return r(p,j),Ie&&ti(p,_),A;if(j===null){for(;!w.done;_++,w=f.next())w=d(p,w.value,S),w!==null&&(m=s(w,m,_),k===null?A=w:k.sibling=w,k=w);return Ie&&ti(p,_),A}for(j=n(p,j);!w.done;_++,w=f.next())w=b(j,p,_,w.value,S),w!==null&&(t&&w.alternate!==null&&j.delete(w.key===null?_:w.key),m=s(w,m,_),k===null?A=w:k.sibling=w,k=w);return t&&j.forEach(function(L){return e(p,L)}),Ie&&ti(p,_),A}function x(p,m,f,S){if(typeof f=="object"&&f!==null&&f.type===Hi&&f.key===null&&(f=f.props.children),typeof f=="object"&&f!==null){switch(f.$$typeof){case Lo:e:{for(var A=f.key,k=m;k!==null;){if(k.key===A){if(A=f.type,A===Hi){if(k.tag===7){r(p,k.sibling),m=i(k,f.props.children),m.return=p,p=m;break e}}else if(k.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===vn&&im(A)===k.type){r(p,k.sibling),m=i(k,f.props),m.ref=qs(p,k,f),m.return=p,p=m;break e}r(p,k);break}else e(p,k);k=k.sibling}f.type===Hi?(m=gi(f.props.children,p.mode,S,f.key),m.return=p,p=m):(S=vl(f.type,f.key,f.props,null,p.mode,S),S.ref=qs(p,m,f),S.return=p,p=S)}return a(p);case Vi:e:{for(k=f.key;m!==null;){if(m.key===k)if(m.tag===4&&m.stateNode.containerInfo===f.containerInfo&&m.stateNode.implementation===f.implementation){r(p,m.sibling),m=i(m,f.children||[]),m.return=p,p=m;break e}else{r(p,m);break}else e(p,m);m=m.sibling}m=Bc(f,p.mode,S),m.return=p,p=m}return a(p);case vn:return k=f._init,x(p,m,k(f._payload),S)}if(fa(f))return v(p,m,f,S);if(Bs(f))return P(p,m,f,S);Ko(p,f)}return typeof f=="string"&&f!==""||typeof f=="number"?(f=""+f,m!==null&&m.tag===6?(r(p,m.sibling),m=i(m,f),m.return=p,p=m):(r(p,m),m=Fc(f,p.mode,S),m.return=p,p=m),a(p)):r(p,m)}return x}var ps=ov(!0),lv=ov(!1),ko={},Nr=Zn(ko),Ya=Zn(ko),Qa=Zn(ko);function hi(t){if(t===ko)throw Error(z(174));return t}function Wh(t,e){switch(Oe(Qa,e),Oe(Ya,t),Oe(Nr,ko),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:vd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=vd(e,t)}je(Nr),Oe(Nr,e)}function ms(){je(Nr),je(Ya),je(Qa)}function uv(t){hi(Qa.current);var e=hi(Nr.current),r=vd(e,t.type);e!==r&&(Oe(Ya,t),Oe(Nr,r))}function Jh(t){Ya.current===t&&(je(Nr),je(Ya))}var Re=Zn(0);function Ul(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Lc=[];function Gh(){for(var t=0;t<Lc.length;t++)Lc[t]._workInProgressVersionPrimary=null;Lc.length=0}var fl=an.ReactCurrentDispatcher,$c=an.ReactCurrentBatchConfig,bi=0,Le=null,Je=null,Ye=null,zl=!1,Ea=!1,Xa=0,$1=0;function ft(){throw Error(z(321))}function Yh(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!br(t[r],e[r]))return!1;return!0}function Qh(t,e,r,n,i,s){if(bi=s,Le=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,fl.current=t===null||t.memoizedState===null?z1:F1,t=r(n,i),Ea){s=0;do{if(Ea=!1,Xa=0,25<=s)throw Error(z(301));s+=1,Ye=Je=null,e.updateQueue=null,fl.current=B1,t=r(n,i)}while(Ea)}if(fl.current=Fl,e=Je!==null&&Je.next!==null,bi=0,Ye=Je=Le=null,zl=!1,e)throw Error(z(300));return t}function Xh(){var t=Xa!==0;return Xa=0,t}function Pr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?Le.memoizedState=Ye=t:Ye=Ye.next=t,Ye}function lr(){if(Je===null){var t=Le.alternate;t=t!==null?t.memoizedState:null}else t=Je.next;var e=Ye===null?Le.memoizedState:Ye.next;if(e!==null)Ye=e,Je=t;else{if(t===null)throw Error(z(310));Je=t,t={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},Ye===null?Le.memoizedState=Ye=t:Ye=Ye.next=t}return Ye}function eo(t,e){return typeof e=="function"?e(t):e}function Dc(t){var e=lr(),r=e.queue;if(r===null)throw Error(z(311));r.lastRenderedReducer=t;var n=Je,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var o=a=null,l=null,u=s;do{var c=u.lane;if((bi&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=d,a=n):l=l.next=d,Le.lanes|=c,xi|=c}u=u.next}while(u!==null&&u!==s);l===null?a=n:l.next=o,br(n,e.memoizedState)||(Rt=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,Le.lanes|=s,xi|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Mc(t){var e=lr(),r=e.queue;if(r===null)throw Error(z(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);br(s,e.memoizedState)||(Rt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function cv(){}function dv(t,e){var r=Le,n=lr(),i=e(),s=!br(n.memoizedState,i);if(s&&(n.memoizedState=i,Rt=!0),n=n.queue,ef(pv.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||Ye!==null&&Ye.memoizedState.tag&1){if(r.flags|=2048,to(9,fv.bind(null,r,n,i,e),void 0,null),Qe===null)throw Error(z(349));bi&30||hv(r,e,i)}return i}function hv(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Le.updateQueue,e===null?(e={lastEffect:null,stores:null},Le.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function fv(t,e,r,n){e.value=r,e.getSnapshot=n,mv(e)&&gv(t)}function pv(t,e,r){return r(function(){mv(e)&&gv(t)})}function mv(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!br(t,r)}catch{return!0}}function gv(t){var e=en(t,1);e!==null&&wr(e,t,1,-1)}function sm(t){var e=Pr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:eo,lastRenderedState:t},e.queue=t,t=t.dispatch=U1.bind(null,Le,t),[e.memoizedState,t]}function to(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Le.updateQueue,e===null?(e={lastEffect:null,stores:null},Le.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function yv(){return lr().memoizedState}function pl(t,e,r,n){var i=Pr();Le.flags|=t,i.memoizedState=to(1|e,r,void 0,n===void 0?null:n)}function Cu(t,e,r,n){var i=lr();n=n===void 0?null:n;var s=void 0;if(Je!==null){var a=Je.memoizedState;if(s=a.destroy,n!==null&&Yh(n,a.deps)){i.memoizedState=to(e,r,s,n);return}}Le.flags|=t,i.memoizedState=to(1|e,r,s,n)}function am(t,e){return pl(8390656,8,t,e)}function ef(t,e){return Cu(2048,8,t,e)}function vv(t,e){return Cu(4,2,t,e)}function _v(t,e){return Cu(4,4,t,e)}function wv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function bv(t,e,r){return r=r!=null?r.concat([t]):null,Cu(4,4,wv.bind(null,e,t),r)}function tf(){}function xv(t,e){var r=lr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Yh(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function kv(t,e){var r=lr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Yh(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function Sv(t,e,r){return bi&21?(br(r,e)||(r=Py(),Le.lanes|=r,xi|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Rt=!0),t.memoizedState=r)}function D1(t,e){var r=we;we=r!==0&&4>r?r:4,t(!0);var n=$c.transition;$c.transition={};try{t(!1),e()}finally{we=r,$c.transition=n}}function Ev(){return lr().memoizedState}function M1(t,e,r){var n=Rn(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Ov(t))Pv(e,r);else if(r=nv(t,e,r,n),r!==null){var i=Et();wr(r,t,n,i),Tv(r,e,n)}}function U1(t,e,r){var n=Rn(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ov(t))Pv(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,r);if(i.hasEagerState=!0,i.eagerState=o,br(o,a)){var l=e.interleaved;l===null?(i.next=i,Kh(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=nv(t,e,i,n),r!==null&&(i=Et(),wr(r,t,n,i),Tv(r,e,n))}}function Ov(t){var e=t.alternate;return t===Le||e!==null&&e===Le}function Pv(t,e){Ea=zl=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Tv(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Ih(t,r)}}var Fl={readContext:or,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useInsertionEffect:ft,useLayoutEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useMutableSource:ft,useSyncExternalStore:ft,useId:ft,unstable_isNewReconciler:!1},z1={readContext:or,useCallback:function(t,e){return Pr().memoizedState=[t,e===void 0?null:e],t},useContext:or,useEffect:am,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,pl(4194308,4,wv.bind(null,e,t),r)},useLayoutEffect:function(t,e){return pl(4194308,4,t,e)},useInsertionEffect:function(t,e){return pl(4,2,t,e)},useMemo:function(t,e){var r=Pr();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Pr();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=M1.bind(null,Le,t),[n.memoizedState,t]},useRef:function(t){var e=Pr();return t={current:t},e.memoizedState=t},useState:sm,useDebugValue:tf,useDeferredValue:function(t){return Pr().memoizedState=t},useTransition:function(){var t=sm(!1),e=t[0];return t=D1.bind(null,t[1]),Pr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Le,i=Pr();if(Ie){if(r===void 0)throw Error(z(407));r=r()}else{if(r=e(),Qe===null)throw Error(z(349));bi&30||hv(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,am(pv.bind(null,n,s,t),[t]),n.flags|=2048,to(9,fv.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=Pr(),e=Qe.identifierPrefix;if(Ie){var r=Jr,n=Wr;r=(n&~(1<<32-_r(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Xa++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=$1++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},F1={readContext:or,useCallback:xv,useContext:or,useEffect:ef,useImperativeHandle:bv,useInsertionEffect:vv,useLayoutEffect:_v,useMemo:kv,useReducer:Dc,useRef:yv,useState:function(){return Dc(eo)},useDebugValue:tf,useDeferredValue:function(t){var e=lr();return Sv(e,Je.memoizedState,t)},useTransition:function(){var t=Dc(eo)[0],e=lr().memoizedState;return[t,e]},useMutableSource:cv,useSyncExternalStore:dv,useId:Ev,unstable_isNewReconciler:!1},B1={readContext:or,useCallback:xv,useContext:or,useEffect:ef,useImperativeHandle:bv,useInsertionEffect:vv,useLayoutEffect:_v,useMemo:kv,useReducer:Mc,useRef:yv,useState:function(){return Mc(eo)},useDebugValue:tf,useDeferredValue:function(t){var e=lr();return Je===null?e.memoizedState=t:Sv(e,Je.memoizedState,t)},useTransition:function(){var t=Mc(eo)[0],e=lr().memoizedState;return[t,e]},useMutableSource:cv,useSyncExternalStore:dv,useId:Ev,unstable_isNewReconciler:!1};function gs(t,e){try{var r="",n=e;do r+=gb(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Uc(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Fd(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var V1=typeof WeakMap=="function"?WeakMap:Map;function jv(t,e,r){r=Gr(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Vl||(Vl=!0,Yd=n),Fd(t,e)},r}function Cv(t,e,r){r=Gr(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){Fd(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){Fd(t,e),typeof n!="function"&&(In===null?In=new Set([this]):In.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function om(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new V1;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=nx.bind(null,t,e,r),e.then(t,t))}function lm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function um(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Gr(-1,1),e.tag=2,An(r,e,1))),r.lanes|=1),t)}var H1=an.ReactCurrentOwner,Rt=!1;function St(t,e,r,n){e.child=t===null?lv(e,null,r,n):ps(e,t.child,r,n)}function cm(t,e,r,n,i){r=r.render;var s=e.ref;return ls(e,i),n=Qh(t,e,r,n,s,i),r=Xh(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,tn(t,e,i)):(Ie&&r&&zh(e),e.flags|=1,St(t,e,n,i),e.child)}function dm(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!cf(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,Av(t,e,s,n,i)):(t=vl(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(r=r.compare,r=r!==null?r:qa,r(a,n)&&t.ref===e.ref)return tn(t,e,i)}return e.flags|=1,t=Nn(s,n),t.ref=e.ref,t.return=e,e.child=t}function Av(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(qa(s,n)&&t.ref===e.ref)if(Rt=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(Rt=!0);else return e.lanes=t.lanes,tn(t,e,i)}return Bd(t,e,r,n,i)}function Iv(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe(es,Ut),Ut|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Oe(es,Ut),Ut|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Oe(es,Ut),Ut|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,Oe(es,Ut),Ut|=n;return St(t,e,i,r),e.child}function Rv(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Bd(t,e,r,n,i){var s=Lt(r)?_i:bt.current;return s=hs(e,s),ls(e,i),r=Qh(t,e,r,n,s,i),n=Xh(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,tn(t,e,i)):(Ie&&n&&zh(e),e.flags|=1,St(t,e,r,i),e.child)}function hm(t,e,r,n,i){if(Lt(r)){var s=!0;Rl(e)}else s=!1;if(ls(e,i),e.stateNode===null)ml(t,e),av(e,r,n),zd(e,r,n,i),n=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=or(u):(u=Lt(r)?_i:bt.current,u=hs(e,u));var c=r.getDerivedStateFromProps,d=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||l!==u)&&nm(e,a,n,u),_n=!1;var h=e.memoizedState;a.state=h,Ml(e,n,a,i),l=e.memoizedState,o!==n||h!==l||Nt.current||_n?(typeof c=="function"&&(Ud(e,r,c,n),l=e.memoizedState),(o=_n||rm(e,r,o,n,h,l,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),a.props=n,a.state=l,a.context=u,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,iv(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:mr(e.type,o),a.props=u,d=e.pendingProps,h=a.context,l=r.contextType,typeof l=="object"&&l!==null?l=or(l):(l=Lt(r)?_i:bt.current,l=hs(e,l));var b=r.getDerivedStateFromProps;(c=typeof b=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||h!==l)&&nm(e,a,n,l),_n=!1,h=e.memoizedState,a.state=h,Ml(e,n,a,i);var v=e.memoizedState;o!==d||h!==v||Nt.current||_n?(typeof b=="function"&&(Ud(e,r,b,n),v=e.memoizedState),(u=_n||rm(e,r,u,n,h,v,l)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,v,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,v,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),a.props=n,a.state=v,a.context=l,n=u):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return Vd(t,e,r,n,s,i)}function Vd(t,e,r,n,i,s){Rv(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return i&&Yp(e,r,!1),tn(t,e,s);n=e.stateNode,H1.current=e;var o=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=ps(e,t.child,null,s),e.child=ps(e,null,o,s)):St(t,e,o,s),e.memoizedState=n.state,i&&Yp(e,r,!0),e.child}function Nv(t){var e=t.stateNode;e.pendingContext?Gp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Gp(t,e.context,!1),Wh(t,e.containerInfo)}function fm(t,e,r,n,i){return fs(),Bh(i),e.flags|=256,St(t,e,r,n),e.child}var Hd={dehydrated:null,treeContext:null,retryLane:0};function Zd(t){return{baseLanes:t,cachePool:null,transitions:null}}function Lv(t,e,r){var n=e.pendingProps,i=Re.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Oe(Re,i&1),t===null)return Dd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,s?(n=e.mode,s=e.child,a={mode:"hidden",children:a},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Ru(a,n,0,null),t=gi(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Zd(r),e.memoizedState=Hd,t):rf(e,a));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return Z1(t,e,a,n,o,i,r);if(s){s=n.fallback,a=e.mode,i=t.child,o=i.sibling;var l={mode:"hidden",children:n.children};return!(a&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Nn(i,l),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=Nn(o,s):(s=gi(s,a,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,a=t.child.memoizedState,a=a===null?Zd(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~r,e.memoizedState=Hd,n}return s=t.child,t=s.sibling,n=Nn(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function rf(t,e){return e=Ru({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function qo(t,e,r,n){return n!==null&&Bh(n),ps(e,t.child,null,r),t=rf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Z1(t,e,r,n,i,s,a){if(r)return e.flags&256?(e.flags&=-257,n=Uc(Error(z(422))),qo(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=Ru({mode:"visible",children:n.children},i,0,null),s=gi(s,i,a,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&ps(e,t.child,null,a),e.child.memoizedState=Zd(a),e.memoizedState=Hd,s);if(!(e.mode&1))return qo(t,e,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,s=Error(z(419)),n=Uc(s,n,void 0),qo(t,e,a,n)}if(o=(a&t.childLanes)!==0,Rt||o){if(n=Qe,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,en(t,i),wr(n,t,i,-1))}return uf(),n=Uc(Error(z(421))),qo(t,e,a,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=ix.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ft=Cn(i.nextSibling),Bt=e,Ie=!0,vr=null,t!==null&&(er[tr++]=Wr,er[tr++]=Jr,er[tr++]=wi,Wr=t.id,Jr=t.overflow,wi=e),e=rf(e,n.children),e.flags|=4096,e)}function pm(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Md(t.return,e,r)}function zc(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function $v(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(St(t,e,n.children,r),n=Re.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&pm(t,r,e);else if(t.tag===19)pm(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Oe(Re,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&Ul(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),zc(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ul(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}zc(e,!0,r,null,s);break;case"together":zc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ml(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function tn(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),xi|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,r=Nn(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Nn(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function K1(t,e,r){switch(e.tag){case 3:Nv(e),fs();break;case 5:uv(e);break;case 1:Lt(e.type)&&Rl(e);break;case 4:Wh(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Oe($l,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Oe(Re,Re.current&1),e.flags|=128,null):r&e.child.childLanes?Lv(t,e,r):(Oe(Re,Re.current&1),t=tn(t,e,r),t!==null?t.sibling:null);Oe(Re,Re.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return $v(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Oe(Re,Re.current),n)break;return null;case 22:case 23:return e.lanes=0,Iv(t,e,r)}return tn(t,e,r)}var Dv,Kd,Mv,Uv;Dv=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Kd=function(){};Mv=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,hi(Nr.current);var s=null;switch(r){case"input":i=pd(t,i),n=pd(t,n),s=[];break;case"select":i=$e({},i,{value:void 0}),n=$e({},n,{value:void 0}),s=[];break;case"textarea":i=yd(t,i),n=yd(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Al)}_d(r,n);var a;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(za.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var l=n[u];if(o=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(r||(r={}),r[a]=l[a])}else r||(s||(s=[]),s.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(za.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Te("scroll",t),s||o===l||(s=[])):(s=s||[]).push(u,l))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Uv=function(t,e,r,n){r!==n&&(e.flags|=4)};function Ws(t,e){if(!Ie)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function pt(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function q1(t,e,r){var n=e.pendingProps;switch(Fh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(e),null;case 1:return Lt(e.type)&&Il(),pt(e),null;case 3:return n=e.stateNode,ms(),je(Nt),je(bt),Gh(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Zo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,vr!==null&&(eh(vr),vr=null))),Kd(t,e),pt(e),null;case 5:Jh(e);var i=hi(Qa.current);if(r=e.type,t!==null&&e.stateNode!=null)Mv(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(z(166));return pt(e),null}if(t=hi(Nr.current),Zo(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[Cr]=e,n[Ga]=s,t=(e.mode&1)!==0,r){case"dialog":Te("cancel",n),Te("close",n);break;case"iframe":case"object":case"embed":Te("load",n);break;case"video":case"audio":for(i=0;i<ma.length;i++)Te(ma[i],n);break;case"source":Te("error",n);break;case"img":case"image":case"link":Te("error",n),Te("load",n);break;case"details":Te("toggle",n);break;case"input":kp(n,s),Te("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Te("invalid",n);break;case"textarea":Ep(n,s),Te("invalid",n)}_d(r,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?n.textContent!==o&&(s.suppressHydrationWarning!==!0&&Ho(n.textContent,o,t),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&Ho(n.textContent,o,t),i=["children",""+o]):za.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Te("scroll",n)}switch(r){case"input":$o(n),Sp(n,s,!0);break;case"textarea":$o(n),Op(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Al)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=hy(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[Cr]=e,t[Ga]=n,Dv(t,e,!1,!1),e.stateNode=t;e:{switch(a=wd(r,n),r){case"dialog":Te("cancel",t),Te("close",t),i=n;break;case"iframe":case"object":case"embed":Te("load",t),i=n;break;case"video":case"audio":for(i=0;i<ma.length;i++)Te(ma[i],t);i=n;break;case"source":Te("error",t),i=n;break;case"img":case"image":case"link":Te("error",t),Te("load",t),i=n;break;case"details":Te("toggle",t),i=n;break;case"input":kp(t,n),i=pd(t,n),Te("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=$e({},n,{value:void 0}),Te("invalid",t);break;case"textarea":Ep(t,n),i=yd(t,n),Te("invalid",t);break;default:i=n}_d(r,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?my(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&fy(t,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Fa(t,l):typeof l=="number"&&Fa(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(za.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Te("scroll",t):l!=null&&Oh(t,s,l,a))}switch(r){case"input":$o(t),Sp(t,n,!1);break;case"textarea":$o(t),Op(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Mn(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?is(t,!!n.multiple,s,!1):n.defaultValue!=null&&is(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Al)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return pt(e),null;case 6:if(t&&e.stateNode!=null)Uv(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(z(166));if(r=hi(Qa.current),hi(Nr.current),Zo(e)){if(n=e.stateNode,r=e.memoizedProps,n[Cr]=e,(s=n.nodeValue!==r)&&(t=Bt,t!==null))switch(t.tag){case 3:Ho(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ho(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Cr]=e,e.stateNode=n}return pt(e),null;case 13:if(je(Re),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ie&&Ft!==null&&e.mode&1&&!(e.flags&128))rv(),fs(),e.flags|=98560,s=!1;else if(s=Zo(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(z(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(z(317));s[Cr]=e}else fs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;pt(e),s=!1}else vr!==null&&(eh(vr),vr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Re.current&1?Ge===0&&(Ge=3):uf())),e.updateQueue!==null&&(e.flags|=4),pt(e),null);case 4:return ms(),Kd(t,e),t===null&&Wa(e.stateNode.containerInfo),pt(e),null;case 10:return Zh(e.type._context),pt(e),null;case 17:return Lt(e.type)&&Il(),pt(e),null;case 19:if(je(Re),s=e.memoizedState,s===null)return pt(e),null;if(n=(e.flags&128)!==0,a=s.rendering,a===null)if(n)Ws(s,!1);else{if(Ge!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Ul(t),a!==null){for(e.flags|=128,Ws(s,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Oe(Re,Re.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ve()>ys&&(e.flags|=128,n=!0,Ws(s,!1),e.lanes=4194304)}else{if(!n)if(t=Ul(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Ws(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Ie)return pt(e),null}else 2*Ve()-s.renderingStartTime>ys&&r!==1073741824&&(e.flags|=128,n=!0,Ws(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(r=s.last,r!==null?r.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ve(),e.sibling=null,r=Re.current,Oe(Re,n?r&1|2:r&1),e):(pt(e),null);case 22:case 23:return lf(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Ut&1073741824&&(pt(e),e.subtreeFlags&6&&(e.flags|=8192)):pt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function W1(t,e){switch(Fh(e),e.tag){case 1:return Lt(e.type)&&Il(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ms(),je(Nt),je(bt),Gh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Jh(e),null;case 13:if(je(Re),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));fs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return je(Re),null;case 4:return ms(),null;case 10:return Zh(e.type._context),null;case 22:case 23:return lf(),null;case 24:return null;default:return null}}var Wo=!1,yt=!1,J1=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Xi(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Me(t,e,n)}else r.current=null}function qd(t,e,r){try{r()}catch(n){Me(t,e,n)}}var mm=!1;function G1(t,e){if(Cd=Tl,t=Vy(),Uh(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var a=0,o=-1,l=-1,u=0,c=0,d=t,h=null;t:for(;;){for(var b;d!==r||i!==0&&d.nodeType!==3||(o=a+i),d!==s||n!==0&&d.nodeType!==3||(l=a+n),d.nodeType===3&&(a+=d.nodeValue.length),(b=d.firstChild)!==null;)h=d,d=b;for(;;){if(d===t)break t;if(h===r&&++u===i&&(o=a),h===s&&++c===n&&(l=a),(b=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=b}r=o===-1||l===-1?null:{start:o,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ad={focusedElem:t,selectionRange:r},Tl=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var P=v.memoizedProps,x=v.memoizedState,p=e.stateNode,m=p.getSnapshotBeforeUpdate(e.elementType===e.type?P:mr(e.type,P),x);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var f=e.stateNode.containerInfo;f.nodeType===1?f.textContent="":f.nodeType===9&&f.documentElement&&f.removeChild(f.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(S){Me(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return v=mm,mm=!1,v}function Oa(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&qd(e,r,s)}i=i.next}while(i!==n)}}function Au(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Wd(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function zv(t){var e=t.alternate;e!==null&&(t.alternate=null,zv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Cr],delete e[Ga],delete e[Nd],delete e[I1],delete e[R1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Fv(t){return t.tag===5||t.tag===3||t.tag===4}function gm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Fv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Jd(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Al));else if(n!==4&&(t=t.child,t!==null))for(Jd(t,e,r),t=t.sibling;t!==null;)Jd(t,e,r),t=t.sibling}function Gd(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Gd(t,e,r),t=t.sibling;t!==null;)Gd(t,e,r),t=t.sibling}var nt=null,gr=!1;function fn(t,e,r){for(r=r.child;r!==null;)Bv(t,e,r),r=r.sibling}function Bv(t,e,r){if(Rr&&typeof Rr.onCommitFiberUnmount=="function")try{Rr.onCommitFiberUnmount(ku,r)}catch{}switch(r.tag){case 5:yt||Xi(r,e);case 6:var n=nt,i=gr;nt=null,fn(t,e,r),nt=n,gr=i,nt!==null&&(gr?(t=nt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):nt.removeChild(r.stateNode));break;case 18:nt!==null&&(gr?(t=nt,r=r.stateNode,t.nodeType===8?Rc(t.parentNode,r):t.nodeType===1&&Rc(t,r),Za(t)):Rc(nt,r.stateNode));break;case 4:n=nt,i=gr,nt=r.stateNode.containerInfo,gr=!0,fn(t,e,r),nt=n,gr=i;break;case 0:case 11:case 14:case 15:if(!yt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&qd(r,e,a),i=i.next}while(i!==n)}fn(t,e,r);break;case 1:if(!yt&&(Xi(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Me(r,e,o)}fn(t,e,r);break;case 21:fn(t,e,r);break;case 22:r.mode&1?(yt=(n=yt)||r.memoizedState!==null,fn(t,e,r),yt=n):fn(t,e,r);break;default:fn(t,e,r)}}function ym(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new J1),e.forEach(function(n){var i=sx.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function hr(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:nt=o.stateNode,gr=!1;break e;case 3:nt=o.stateNode.containerInfo,gr=!0;break e;case 4:nt=o.stateNode.containerInfo,gr=!0;break e}o=o.return}if(nt===null)throw Error(z(160));Bv(s,a,i),nt=null,gr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Me(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Vv(e,t),e=e.sibling}function Vv(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(hr(e,t),Or(t),n&4){try{Oa(3,t,t.return),Au(3,t)}catch(P){Me(t,t.return,P)}try{Oa(5,t,t.return)}catch(P){Me(t,t.return,P)}}break;case 1:hr(e,t),Or(t),n&512&&r!==null&&Xi(r,r.return);break;case 5:if(hr(e,t),Or(t),n&512&&r!==null&&Xi(r,r.return),t.flags&32){var i=t.stateNode;try{Fa(i,"")}catch(P){Me(t,t.return,P)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=r!==null?r.memoizedProps:s,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&cy(i,s),wd(o,a);var u=wd(o,s);for(a=0;a<l.length;a+=2){var c=l[a],d=l[a+1];c==="style"?my(i,d):c==="dangerouslySetInnerHTML"?fy(i,d):c==="children"?Fa(i,d):Oh(i,c,d,u)}switch(o){case"input":md(i,s);break;case"textarea":dy(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var b=s.value;b!=null?is(i,!!s.multiple,b,!1):h!==!!s.multiple&&(s.defaultValue!=null?is(i,!!s.multiple,s.defaultValue,!0):is(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ga]=s}catch(P){Me(t,t.return,P)}}break;case 6:if(hr(e,t),Or(t),n&4){if(t.stateNode===null)throw Error(z(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(P){Me(t,t.return,P)}}break;case 3:if(hr(e,t),Or(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Za(e.containerInfo)}catch(P){Me(t,t.return,P)}break;case 4:hr(e,t),Or(t);break;case 13:hr(e,t),Or(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(af=Ve())),n&4&&ym(t);break;case 22:if(c=r!==null&&r.memoizedState!==null,t.mode&1?(yt=(u=yt)||c,hr(e,t),yt=u):hr(e,t),Or(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(Q=t,c=t.child;c!==null;){for(d=Q=c;Q!==null;){switch(h=Q,b=h.child,h.tag){case 0:case 11:case 14:case 15:Oa(4,h,h.return);break;case 1:Xi(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){n=h,r=h.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(P){Me(n,r,P)}}break;case 5:Xi(h,h.return);break;case 22:if(h.memoizedState!==null){_m(d);continue}}b!==null?(b.return=h,Q=b):_m(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=py("display",a))}catch(P){Me(t,t.return,P)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(P){Me(t,t.return,P)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:hr(e,t),Or(t),n&4&&ym(t);break;case 21:break;default:hr(e,t),Or(t)}}function Or(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Fv(r)){var n=r;break e}r=r.return}throw Error(z(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Fa(i,""),n.flags&=-33);var s=gm(t);Gd(t,s,i);break;case 3:case 4:var a=n.stateNode.containerInfo,o=gm(t);Jd(t,o,a);break;default:throw Error(z(161))}}catch(l){Me(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Y1(t,e,r){Q=t,Hv(t)}function Hv(t,e,r){for(var n=(t.mode&1)!==0;Q!==null;){var i=Q,s=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||Wo;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||yt;o=Wo;var u=yt;if(Wo=a,(yt=l)&&!u)for(Q=i;Q!==null;)a=Q,l=a.child,a.tag===22&&a.memoizedState!==null?wm(i):l!==null?(l.return=a,Q=l):wm(i);for(;s!==null;)Q=s,Hv(s),s=s.sibling;Q=i,Wo=o,yt=u}vm(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Q=s):vm(t)}}function vm(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:yt||Au(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!yt)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:mr(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&tm(e,s,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}tm(e,a,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Za(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}yt||e.flags&512&&Wd(e)}catch(h){Me(e,e.return,h)}}if(e===t){Q=null;break}if(r=e.sibling,r!==null){r.return=e.return,Q=r;break}Q=e.return}}function _m(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Q=r;break}Q=e.return}}function wm(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Au(4,e)}catch(l){Me(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){Me(e,i,l)}}var s=e.return;try{Wd(e)}catch(l){Me(e,s,l)}break;case 5:var a=e.return;try{Wd(e)}catch(l){Me(e,a,l)}}}catch(l){Me(e,e.return,l)}if(e===t){Q=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Q=o;break}Q=e.return}}var Q1=Math.ceil,Bl=an.ReactCurrentDispatcher,nf=an.ReactCurrentOwner,ir=an.ReactCurrentBatchConfig,me=0,Qe=null,Ze=null,at=0,Ut=0,es=Zn(0),Ge=0,ro=null,xi=0,Iu=0,sf=0,Pa=null,It=null,af=0,ys=1/0,Fr=null,Vl=!1,Yd=null,In=null,Jo=!1,On=null,Hl=0,Ta=0,Qd=null,gl=-1,yl=0;function Et(){return me&6?Ve():gl!==-1?gl:gl=Ve()}function Rn(t){return t.mode&1?me&2&&at!==0?at&-at:L1.transition!==null?(yl===0&&(yl=Py()),yl):(t=we,t!==0||(t=window.event,t=t===void 0?16:Ny(t.type)),t):1}function wr(t,e,r,n){if(50<Ta)throw Ta=0,Qd=null,Error(z(185));wo(t,r,n),(!(me&2)||t!==Qe)&&(t===Qe&&(!(me&2)&&(Iu|=r),Ge===4&&kn(t,at)),$t(t,n),r===1&&me===0&&!(e.mode&1)&&(ys=Ve()+500,Tu&&Kn()))}function $t(t,e){var r=t.callbackNode;Lb(t,e);var n=Pl(t,t===Qe?at:0);if(n===0)r!==null&&jp(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&jp(r),e===1)t.tag===0?N1(bm.bind(null,t)):Xy(bm.bind(null,t)),C1(function(){!(me&6)&&Kn()}),r=null;else{switch(Ty(n)){case 1:r=Ah;break;case 4:r=Ey;break;case 16:r=Ol;break;case 536870912:r=Oy;break;default:r=Ol}r=Qv(r,Zv.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Zv(t,e){if(gl=-1,yl=0,me&6)throw Error(z(327));var r=t.callbackNode;if(us()&&t.callbackNode!==r)return null;var n=Pl(t,t===Qe?at:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Zl(t,n);else{e=n;var i=me;me|=2;var s=qv();(Qe!==t||at!==e)&&(Fr=null,ys=Ve()+500,mi(t,e));do try{tx();break}catch(o){Kv(t,o)}while(1);Hh(),Bl.current=s,me=i,Ze!==null?e=0:(Qe=null,at=0,e=Ge)}if(e!==0){if(e===2&&(i=Ed(t),i!==0&&(n=i,e=Xd(t,i))),e===1)throw r=ro,mi(t,0),kn(t,n),$t(t,Ve()),r;if(e===6)kn(t,n);else{if(i=t.current.alternate,!(n&30)&&!X1(i)&&(e=Zl(t,n),e===2&&(s=Ed(t),s!==0&&(n=s,e=Xd(t,s))),e===1))throw r=ro,mi(t,0),kn(t,n),$t(t,Ve()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(z(345));case 2:ri(t,It,Fr);break;case 3:if(kn(t,n),(n&130023424)===n&&(e=af+500-Ve(),10<e)){if(Pl(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Et(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Rd(ri.bind(null,t,It,Fr),e);break}ri(t,It,Fr);break;case 4:if(kn(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var a=31-_r(n);s=1<<a,a=e[a],a>i&&(i=a),n&=~s}if(n=i,n=Ve()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Q1(n/1960))-n,10<n){t.timeoutHandle=Rd(ri.bind(null,t,It,Fr),n);break}ri(t,It,Fr);break;case 5:ri(t,It,Fr);break;default:throw Error(z(329))}}}return $t(t,Ve()),t.callbackNode===r?Zv.bind(null,t):null}function Xd(t,e){var r=Pa;return t.current.memoizedState.isDehydrated&&(mi(t,e).flags|=256),t=Zl(t,e),t!==2&&(e=It,It=r,e!==null&&eh(e)),t}function eh(t){It===null?It=t:It.push.apply(It,t)}function X1(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!br(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function kn(t,e){for(e&=~sf,e&=~Iu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-_r(e),n=1<<r;t[r]=-1,e&=~n}}function bm(t){if(me&6)throw Error(z(327));us();var e=Pl(t,0);if(!(e&1))return $t(t,Ve()),null;var r=Zl(t,e);if(t.tag!==0&&r===2){var n=Ed(t);n!==0&&(e=n,r=Xd(t,n))}if(r===1)throw r=ro,mi(t,0),kn(t,e),$t(t,Ve()),r;if(r===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ri(t,It,Fr),$t(t,Ve()),null}function of(t,e){var r=me;me|=1;try{return t(e)}finally{me=r,me===0&&(ys=Ve()+500,Tu&&Kn())}}function ki(t){On!==null&&On.tag===0&&!(me&6)&&us();var e=me;me|=1;var r=ir.transition,n=we;try{if(ir.transition=null,we=1,t)return t()}finally{we=n,ir.transition=r,me=e,!(me&6)&&Kn()}}function lf(){Ut=es.current,je(es)}function mi(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,j1(r)),Ze!==null)for(r=Ze.return;r!==null;){var n=r;switch(Fh(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Il();break;case 3:ms(),je(Nt),je(bt),Gh();break;case 5:Jh(n);break;case 4:ms();break;case 13:je(Re);break;case 19:je(Re);break;case 10:Zh(n.type._context);break;case 22:case 23:lf()}r=r.return}if(Qe=t,Ze=t=Nn(t.current,null),at=Ut=e,Ge=0,ro=null,sf=Iu=xi=0,It=Pa=null,di!==null){for(e=0;e<di.length;e++)if(r=di[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var a=s.next;s.next=i,n.next=a}r.pending=n}di=null}return t}function Kv(t,e){do{var r=Ze;try{if(Hh(),fl.current=Fl,zl){for(var n=Le.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}zl=!1}if(bi=0,Ye=Je=Le=null,Ea=!1,Xa=0,nf.current=null,r===null||r.return===null){Ge=1,ro=e,Ze=null;break}e:{var s=t,a=r.return,o=r,l=e;if(e=at,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=o,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var b=lm(a);if(b!==null){b.flags&=-257,um(b,a,o,s,e),b.mode&1&&om(s,u,e),e=b,l=u;var v=e.updateQueue;if(v===null){var P=new Set;P.add(l),e.updateQueue=P}else v.add(l);break e}else{if(!(e&1)){om(s,u,e),uf();break e}l=Error(z(426))}}else if(Ie&&o.mode&1){var x=lm(a);if(x!==null){!(x.flags&65536)&&(x.flags|=256),um(x,a,o,s,e),Bh(gs(l,o));break e}}s=l=gs(l,o),Ge!==4&&(Ge=2),Pa===null?Pa=[s]:Pa.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=jv(s,l,e);em(s,p);break e;case 1:o=l;var m=s.type,f=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(In===null||!In.has(f)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=Cv(s,o,e);em(s,S);break e}}s=s.return}while(s!==null)}Jv(r)}catch(A){e=A,Ze===r&&r!==null&&(Ze=r=r.return);continue}break}while(1)}function qv(){var t=Bl.current;return Bl.current=Fl,t===null?Fl:t}function uf(){(Ge===0||Ge===3||Ge===2)&&(Ge=4),Qe===null||!(xi&268435455)&&!(Iu&268435455)||kn(Qe,at)}function Zl(t,e){var r=me;me|=2;var n=qv();(Qe!==t||at!==e)&&(Fr=null,mi(t,e));do try{ex();break}catch(i){Kv(t,i)}while(1);if(Hh(),me=r,Bl.current=n,Ze!==null)throw Error(z(261));return Qe=null,at=0,Ge}function ex(){for(;Ze!==null;)Wv(Ze)}function tx(){for(;Ze!==null&&!Ob();)Wv(Ze)}function Wv(t){var e=Yv(t.alternate,t,Ut);t.memoizedProps=t.pendingProps,e===null?Jv(t):Ze=e,nf.current=null}function Jv(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=W1(r,e),r!==null){r.flags&=32767,Ze=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ge=6,Ze=null;return}}else if(r=q1(r,e,Ut),r!==null){Ze=r;return}if(e=e.sibling,e!==null){Ze=e;return}Ze=e=t}while(e!==null);Ge===0&&(Ge=5)}function ri(t,e,r){var n=we,i=ir.transition;try{ir.transition=null,we=1,rx(t,e,r,n)}finally{ir.transition=i,we=n}return null}function rx(t,e,r,n){do us();while(On!==null);if(me&6)throw Error(z(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if($b(t,s),t===Qe&&(Ze=Qe=null,at=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Jo||(Jo=!0,Qv(Ol,function(){return us(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=ir.transition,ir.transition=null;var a=we;we=1;var o=me;me|=4,nf.current=null,G1(t,r),Vv(r,t),x1(Ad),Tl=!!Cd,Ad=Cd=null,t.current=r,Y1(r),Pb(),me=o,we=a,ir.transition=s}else t.current=r;if(Jo&&(Jo=!1,On=t,Hl=i),s=t.pendingLanes,s===0&&(In=null),Cb(r.stateNode),$t(t,Ve()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Vl)throw Vl=!1,t=Yd,Yd=null,t;return Hl&1&&t.tag!==0&&us(),s=t.pendingLanes,s&1?t===Qd?Ta++:(Ta=0,Qd=t):Ta=0,Kn(),null}function us(){if(On!==null){var t=Ty(Hl),e=ir.transition,r=we;try{if(ir.transition=null,we=16>t?16:t,On===null)var n=!1;else{if(t=On,On=null,Hl=0,me&6)throw Error(z(331));var i=me;for(me|=4,Q=t.current;Q!==null;){var s=Q,a=s.child;if(Q.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(Q=u;Q!==null;){var c=Q;switch(c.tag){case 0:case 11:case 15:Oa(8,c,s)}var d=c.child;if(d!==null)d.return=c,Q=d;else for(;Q!==null;){c=Q;var h=c.sibling,b=c.return;if(zv(c),c===u){Q=null;break}if(h!==null){h.return=b,Q=h;break}Q=b}}}var v=s.alternate;if(v!==null){var P=v.child;if(P!==null){v.child=null;do{var x=P.sibling;P.sibling=null,P=x}while(P!==null)}}Q=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Q=a;else e:for(;Q!==null;){if(s=Q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Oa(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,Q=p;break e}Q=s.return}}var m=t.current;for(Q=m;Q!==null;){a=Q;var f=a.child;if(a.subtreeFlags&2064&&f!==null)f.return=a,Q=f;else e:for(a=m;Q!==null;){if(o=Q,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Au(9,o)}}catch(A){Me(o,o.return,A)}if(o===a){Q=null;break e}var S=o.sibling;if(S!==null){S.return=o.return,Q=S;break e}Q=o.return}}if(me=i,Kn(),Rr&&typeof Rr.onPostCommitFiberRoot=="function")try{Rr.onPostCommitFiberRoot(ku,t)}catch{}n=!0}return n}finally{we=r,ir.transition=e}}return!1}function xm(t,e,r){e=gs(r,e),e=jv(t,e,1),t=An(t,e,1),e=Et(),t!==null&&(wo(t,1,e),$t(t,e))}function Me(t,e,r){if(t.tag===3)xm(t,t,r);else for(;e!==null;){if(e.tag===3){xm(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(In===null||!In.has(n))){t=gs(r,t),t=Cv(e,t,1),e=An(e,t,1),t=Et(),e!==null&&(wo(e,1,t),$t(e,t));break}}e=e.return}}function nx(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Et(),t.pingedLanes|=t.suspendedLanes&r,Qe===t&&(at&r)===r&&(Ge===4||Ge===3&&(at&130023424)===at&&500>Ve()-af?mi(t,0):sf|=r),$t(t,e)}function Gv(t,e){e===0&&(t.mode&1?(e=Uo,Uo<<=1,!(Uo&130023424)&&(Uo=4194304)):e=1);var r=Et();t=en(t,e),t!==null&&(wo(t,e,r),$t(t,r))}function ix(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Gv(t,r)}function sx(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(z(314))}n!==null&&n.delete(e),Gv(t,r)}var Yv;Yv=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Nt.current)Rt=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Rt=!1,K1(t,e,r);Rt=!!(t.flags&131072)}else Rt=!1,Ie&&e.flags&1048576&&ev(e,Ll,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;ml(t,e),t=e.pendingProps;var i=hs(e,bt.current);ls(e,r),i=Qh(null,e,n,t,i,r);var s=Xh();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Lt(n)?(s=!0,Rl(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,qh(e),i.updater=ju,e.stateNode=i,i._reactInternals=e,zd(e,n,t,r),e=Vd(null,e,n,!0,s,r)):(e.tag=0,Ie&&s&&zh(e),St(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(ml(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=ox(n),t=mr(n,t),i){case 0:e=Bd(null,e,n,t,r);break e;case 1:e=hm(null,e,n,t,r);break e;case 11:e=cm(null,e,n,t,r);break e;case 14:e=dm(null,e,n,mr(n.type,t),r);break e}throw Error(z(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:mr(n,i),Bd(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:mr(n,i),hm(t,e,n,i,r);case 3:e:{if(Nv(e),t===null)throw Error(z(387));n=e.pendingProps,s=e.memoizedState,i=s.element,iv(t,e),Ml(e,n,null,r);var a=e.memoizedState;if(n=a.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=gs(Error(z(423)),e),e=fm(t,e,n,r,i);break e}else if(n!==i){i=gs(Error(z(424)),e),e=fm(t,e,n,r,i);break e}else for(Ft=Cn(e.stateNode.containerInfo.firstChild),Bt=e,Ie=!0,vr=null,r=lv(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(fs(),n===i){e=tn(t,e,r);break e}St(t,e,n,r)}e=e.child}return e;case 5:return uv(e),t===null&&Dd(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,Id(n,i)?a=null:s!==null&&Id(n,s)&&(e.flags|=32),Rv(t,e),St(t,e,a,r),e.child;case 6:return t===null&&Dd(e),null;case 13:return Lv(t,e,r);case 4:return Wh(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=ps(e,null,n,r):St(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:mr(n,i),cm(t,e,n,i,r);case 7:return St(t,e,e.pendingProps,r),e.child;case 8:return St(t,e,e.pendingProps.children,r),e.child;case 12:return St(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Oe($l,n._currentValue),n._currentValue=a,s!==null)if(br(s.value,a)){if(s.children===i.children&&!Nt.current){e=tn(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=Gr(-1,r&-r),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),Md(s.return,r,e),o.lanes|=r;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(z(341));a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),Md(a,r,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}St(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,ls(e,r),i=or(i),n=n(i),e.flags|=1,St(t,e,n,r),e.child;case 14:return n=e.type,i=mr(n,e.pendingProps),i=mr(n.type,i),dm(t,e,n,i,r);case 15:return Av(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:mr(n,i),ml(t,e),e.tag=1,Lt(n)?(t=!0,Rl(e)):t=!1,ls(e,r),av(e,n,i),zd(e,n,i,r),Vd(null,e,n,!0,t,r);case 19:return $v(t,e,r);case 22:return Iv(t,e,r)}throw Error(z(156,e.tag))};function Qv(t,e){return Sy(t,e)}function ax(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rr(t,e,r,n){return new ax(t,e,r,n)}function cf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ox(t){if(typeof t=="function")return cf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Th)return 11;if(t===jh)return 14}return 2}function Nn(t,e){var r=t.alternate;return r===null?(r=rr(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function vl(t,e,r,n,i,s){var a=2;if(n=t,typeof t=="function")cf(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Hi:return gi(r.children,i,s,e);case Ph:a=8,i|=8;break;case cd:return t=rr(12,r,e,i|2),t.elementType=cd,t.lanes=s,t;case dd:return t=rr(13,r,e,i),t.elementType=dd,t.lanes=s,t;case hd:return t=rr(19,r,e,i),t.elementType=hd,t.lanes=s,t;case oy:return Ru(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case sy:a=10;break e;case ay:a=9;break e;case Th:a=11;break e;case jh:a=14;break e;case vn:a=16,n=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=rr(a,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function gi(t,e,r,n){return t=rr(7,t,n,e),t.lanes=r,t}function Ru(t,e,r,n){return t=rr(22,t,n,e),t.elementType=oy,t.lanes=r,t.stateNode={isHidden:!1},t}function Fc(t,e,r){return t=rr(6,t,null,e),t.lanes=r,t}function Bc(t,e,r){return e=rr(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function lx(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xc(0),this.expirationTimes=xc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xc(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function df(t,e,r,n,i,s,a,o,l){return t=new lx(t,e,r,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=rr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},qh(s),t}function ux(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vi,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function Xv(t){if(!t)return Un;t=t._reactInternals;e:{if(Ti(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Lt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var r=t.type;if(Lt(r))return Qy(t,r,e)}return e}function e0(t,e,r,n,i,s,a,o,l){return t=df(r,n,!0,t,i,s,a,o,l),t.context=Xv(null),r=t.current,n=Et(),i=Rn(r),s=Gr(n,i),s.callback=e??null,An(r,s,i),t.current.lanes=i,wo(t,i,n),$t(t,n),t}function Nu(t,e,r,n){var i=e.current,s=Et(),a=Rn(i);return r=Xv(r),e.context===null?e.context=r:e.pendingContext=r,e=Gr(s,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=An(i,e,a),t!==null&&(wr(t,i,a,s),hl(t,i,a)),a}function Kl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function km(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function hf(t,e){km(t,e),(t=t.alternate)&&km(t,e)}function cx(){return null}var t0=typeof reportError=="function"?reportError:function(t){console.error(t)};function ff(t){this._internalRoot=t}Lu.prototype.render=ff.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Nu(t,e,null,null)};Lu.prototype.unmount=ff.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ki(function(){Nu(null,t,null,null)}),e[Xr]=null}};function Lu(t){this._internalRoot=t}Lu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ay();t={blockedOn:null,target:t,priority:e};for(var r=0;r<xn.length&&e!==0&&e<xn[r].priority;r++);xn.splice(r,0,t),r===0&&Ry(t)}};function pf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function $u(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Sm(){}function dx(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var u=Kl(a);s.call(u)}}var a=e0(e,n,t,0,null,!1,!1,"",Sm);return t._reactRootContainer=a,t[Xr]=a.current,Wa(t.nodeType===8?t.parentNode:t),ki(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var u=Kl(l);o.call(u)}}var l=df(t,0,!1,null,null,!1,!1,"",Sm);return t._reactRootContainer=l,t[Xr]=l.current,Wa(t.nodeType===8?t.parentNode:t),ki(function(){Nu(e,l,r,n)}),l}function Du(t,e,r,n,i){var s=r._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=Kl(a);o.call(l)}}Nu(e,a,t,i)}else a=dx(r,e,t,i,n);return Kl(a)}jy=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=pa(e.pendingLanes);r!==0&&(Ih(e,r|1),$t(e,Ve()),!(me&6)&&(ys=Ve()+500,Kn()))}break;case 13:ki(function(){var n=en(t,1);if(n!==null){var i=Et();wr(n,t,1,i)}}),hf(t,1)}};Rh=function(t){if(t.tag===13){var e=en(t,134217728);if(e!==null){var r=Et();wr(e,t,134217728,r)}hf(t,134217728)}};Cy=function(t){if(t.tag===13){var e=Rn(t),r=en(t,e);if(r!==null){var n=Et();wr(r,t,e,n)}hf(t,e)}};Ay=function(){return we};Iy=function(t,e){var r=we;try{return we=t,e()}finally{we=r}};xd=function(t,e,r){switch(e){case"input":if(md(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=Pu(n);if(!i)throw Error(z(90));uy(n),md(n,i)}}}break;case"textarea":dy(t,r);break;case"select":e=r.value,e!=null&&is(t,!!r.multiple,e,!1)}};vy=of;_y=ki;var hx={usingClientEntryPoint:!1,Events:[xo,Wi,Pu,gy,yy,of]},Js={findFiberByHostInstance:ci,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},fx={bundleType:Js.bundleType,version:Js.version,rendererPackageName:Js.rendererPackageName,rendererConfig:Js.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:an.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=xy(t),t===null?null:t.stateNode},findFiberByHostInstance:Js.findFiberByHostInstance||cx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Go=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Go.isDisabled&&Go.supportsFiber)try{ku=Go.inject(fx),Rr=Go}catch{}}Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hx;Kt.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pf(e))throw Error(z(200));return ux(t,e,null,r)};Kt.createRoot=function(t,e){if(!pf(t))throw Error(z(299));var r=!1,n="",i=t0;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=df(t,1,!1,null,null,r,!1,n,i),t[Xr]=e.current,Wa(t.nodeType===8?t.parentNode:t),new ff(e)};Kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=xy(e),t=t===null?null:t.stateNode,t};Kt.flushSync=function(t){return ki(t)};Kt.hydrate=function(t,e,r){if(!$u(e))throw Error(z(200));return Du(null,t,e,!0,r)};Kt.hydrateRoot=function(t,e,r){if(!pf(t))throw Error(z(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",a=t0;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=e0(e,null,t,1,r??null,i,!1,s,a),t[Xr]=e.current,Wa(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new Lu(e)};Kt.render=function(t,e,r){if(!$u(e))throw Error(z(200));return Du(null,t,e,!1,r)};Kt.unmountComponentAtNode=function(t){if(!$u(t))throw Error(z(40));return t._reactRootContainer?(ki(function(){Du(null,null,t,!1,function(){t._reactRootContainer=null,t[Xr]=null})}),!0):!1};Kt.unstable_batchedUpdates=of;Kt.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!$u(r))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Du(t,e,r,!1,n)};Kt.version="18.2.0-next-9e3b772b8-20220608";function r0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r0)}catch(t){console.error(t)}}r0(),ey.exports=Kt;var px=ey.exports,Em=px;xl.createRoot=Em.createRoot,xl.hydrateRoot=Em.hydrateRoot;const mx="modulepreload",gx=function(t,e){return new URL(t,e).href},Om={},it=function(e,r,n){if(!r||r.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(r.map(s=>{if(s=gx(s,n),s in Om)return;Om[s]=!0;const a=s.endsWith(".css"),o=a?'[rel="stylesheet"]':"";if(!!n)for(let c=i.length-1;c>=0;c--){const d=i[c];if(d.href===s&&(!a||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${o}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":mx,a||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),a)return new Promise((c,d)=>{u.addEventListener("load",c),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s})},yx=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>it(()=>Promise.resolve().then(()=>So),void 0,import.meta.url).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class mf extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class vx extends mf{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class _x extends mf{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class wx extends mf{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var bx=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{u(n.next(c))}catch(d){a(d)}}function l(c){try{u(n.throw(c))}catch(d){a(d)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((n=n.apply(t,e||[])).next())})};class xx{constructor(e,{headers:r={},customFetch:n}={}){this.url=e,this.headers=r,this.fetch=yx(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var n;return bx(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:a}=r;let o={},l;a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",l=a):typeof a=="string"?(o["Content-Type"]="text/plain",l=a):typeof FormData<"u"&&a instanceof FormData?l=a:(o["Content-Type"]="application/json",l=JSON.stringify(a)));const u=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),i),body:l}).catch(b=>{throw new vx(b)}),c=u.headers.get("x-relay-error");if(c&&c==="true")throw new _x(u);if(!u.ok)throw new wx(u);let d=((n=u.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),h;return d==="application/json"?h=yield u.json():d==="application/octet-stream"?h=yield u.blob():d==="multipart/form-data"?h=yield u.formData():h=yield u.text(),{data:h,error:null}}catch(i){return{data:null,error:i}}})}}var kx=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},vs=kx();const Sx=vs.fetch,gf=vs.fetch.bind(vs),n0=vs.Headers,Ex=vs.Request,Ox=vs.Response,So=Object.freeze(Object.defineProperty({__proto__:null,Headers:n0,Request:Ex,Response:Ox,default:gf,fetch:Sx},Symbol.toStringTag,{value:"Module"}));class Px{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=gf:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var a,o,l;let u=null,c=null,d=null,h=s.status,b=s.statusText;if(s.ok){if(this.method!=="HEAD"){const p=await s.text();p===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?c=p:c=JSON.parse(p))}const P=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),x=(o=s.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");P&&x&&x.length>1&&(d=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(c)&&(c.length>1?(u={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,d=null,h=406,b="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{const P=await s.text();try{u=JSON.parse(P),Array.isArray(u)&&s.status===404&&(c=[],u=null,h=200,b="OK")}catch{s.status===404&&P===""?(h=204,b="No Content"):u={message:P}}if(u&&this.isMaybeSingle&&(!((l=u==null?void 0:u.details)===null||l===void 0)&&l.includes("0 rows"))&&(u=null,h=200,b="OK"),u&&this.shouldThrowOnError)throw u}return{error:u,data:c,count:d,status:h,statusText:b}});return this.shouldThrowOnError||(i=i.catch(s=>{var a,o,l;return{error:{message:`${(a=s==null?void 0:s.name)!==null&&a!==void 0?a:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(o=s==null?void 0:s.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,r)}}class Tx extends Px{select(e){let r=!1;const n=(e??"*").split("").map(i=>/\s/.test(i)&&!r?"":(i==='"'&&(r=!r),i)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:r=!0,nullsFirst:n,foreignTable:i,referencedTable:s=i}={}){const a=s?`${s}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,r,{foreignTable:n,referencedTable:i=n}={}){const s=typeof i>"u"?"offset":`${i}.offset`,a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(a,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:r=!1,settings:n=!1,buffers:i=!1,wal:s=!1,format:a="text"}={}){var o;const l=[e?"analyze":null,r?"verbose":null,n?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${u}"; options=${l};`,a==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class Ui extends Tx{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const n=r.map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:n,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${s}fts${a}.${r}`),this}match(e){return Object.entries(e).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(e,r,n){return this.url.searchParams.append(e,`not.${r}.${n}`),this}or(e,{foreignTable:r,referencedTable:n=r}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,r,n){return this.url.searchParams.append(e,`${r}.${n}`),this}}class jx{constructor(e,{headers:r={},schema:n,fetch:i}){this.url=e,this.headers=r,this.schema=n,this.fetch=i}select(e,{head:r=!1,count:n}={}){const i=r?"HEAD":"GET";let s=!1;const a=(e??"*").split("").map(o=>/\s/.test(o)&&!s?"":(o==='"'&&(s=!s),o)).join("");return this.url.searchParams.set("select",a),n&&(this.headers.Prefer=`count=${n}`),new Ui({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:r,defaultToNull:n=!0}={}){const i="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),n||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const a=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(a.length>0){const o=[...new Set(a)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new Ui({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:r,ignoreDuplicates:n=!1,count:i,defaultToNull:s=!0}={}){const a="POST",o=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&o.push(this.headers.Prefer),i&&o.push(`count=${i}`),s||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const l=e.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){const u=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new Ui({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:r}={}){const n="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),this.headers.Prefer=i.join(","),new Ui({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const r="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Ui({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const Cx="1.9.0",Ax={"X-Client-Info":`postgrest-js/${Cx}`};class yf{constructor(e,{headers:r={},schema:n,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},Ax),r),this.schemaName=n,this.fetch=i}from(e){const r=new URL(`${this.url}/${e}`);return new jx(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new yf(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,count:i}={}){let s;const a=new URL(`${this.url}/rpc/${e}`);let o;n?(s="HEAD",Object.entries(r).forEach(([u,c])=>{a.searchParams.append(u,`${c}`)})):(s="POST",o=r);const l=Object.assign({},this.headers);return i&&(l.Prefer=`count=${i}`),new Ui({method:s,url:a,headers:l,schema:this.schemaName,body:o,fetch:this.fetch,allowEmpty:!1})}}var Vc,Pm;function Ix(){if(Pm)return Vc;Pm=1;var t=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return Vc=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return t()}try{return __global__||t()}finally{delete Object.prototype.__global__}}(),Vc}const Rx="websocket",Nx="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",Lx=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],$x="Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",Dx=["Iaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],Mx="1.0.34",Ux={type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},zx="https://github.com/theturtle32/WebSocket-Node",Fx={node:">=4.0.0"},Bx={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},Vx={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},Hx={verbose:!1},Zx={test:"tape test/unit/*.js",gulp:"gulp"},Kx="index",qx={lib:"./lib"},Wx="lib/browser.js",Jx="Apache-2.0",Gx={name:Rx,description:Nx,keywords:Lx,author:$x,contributors:Dx,version:Mx,repository:Ux,homepage:zx,engines:Fx,dependencies:Bx,devDependencies:Vx,config:Hx,scripts:Zx,main:Kx,directories:qx,browser:Wx,license:Jx};var Yx=Gx.version,ii;if(typeof globalThis=="object")ii=globalThis;else try{ii=Ix()}catch{}finally{if(!ii&&typeof window<"u"&&(ii=window),!ii)throw new Error("Could not determine global this")}var no=ii.WebSocket||ii.MozWebSocket,Qx=Yx;function i0(t,e){var r;return e?r=new no(t,e):r=new no(t),r}no&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(t){Object.defineProperty(i0,t,{get:function(){return no[t]}})});var Xx={w3cwebsocket:no?i0:null,version:Qx};const ek="2.8.4",tk={"X-Client-Info":`realtime-js/${ek}`},rk="1.0.0",s0=1e4,nk=1e3;var ja;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ja||(ja={}));var Mt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Mt||(Mt={}));var yr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(yr||(yr={}));var th;(function(t){t.websocket="websocket"})(th||(th={}));var si;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(si||(si={}));class a0{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class ik{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const i=r.getUint8(1),s=r.getUint8(2);let a=this.HEADER_LENGTH+2;const o=n.decode(e.slice(a,a+i));a=a+i;const l=n.decode(e.slice(a,a+s));a=a+s;const u=JSON.parse(n.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:l,payload:u}}}class Hc{constructor(e,r,n={},i=s0){this.channel=e,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Tm;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Tm||(Tm={}));class Ca{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ca.syncState(this.state,i,s,a),this.pendingDiffs.forEach(l=>{this.state=Ca.syncDiff(this.state,l,s,a)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Ca.syncDiff(this.state,i,s,a),o())}),this.onJoin((i,s,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:a})}),this.onLeave((i,s,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,i){const s=this.cloneDeep(e),a=this.transformState(r),o={},l={};return this.map(s,(u,c)=>{a[u]||(l[u]=c)}),this.map(a,(u,c)=>{const d=s[u];if(d){const h=c.map(x=>x.presence_ref),b=d.map(x=>x.presence_ref),v=c.filter(x=>b.indexOf(x.presence_ref)<0),P=d.filter(x=>h.indexOf(x.presence_ref)<0);v.length>0&&(o[u]=v),P.length>0&&(l[u]=P)}else o[u]=c}),this.syncDiff(s,{joins:o,leaves:l},n,i)}static syncDiff(e,r,n,i){const{joins:s,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(s,(o,l)=>{var u;const c=(u=e[o])!==null&&u!==void 0?u:[];if(e[o]=this.cloneDeep(l),c.length>0){const d=e[o].map(b=>b.presence_ref),h=c.filter(b=>d.indexOf(b.presence_ref)<0);e[o].unshift(...h)}n(o,c,l)}),this.map(a,(o,l)=>{let u=e[o];if(!u)return;const c=l.map(d=>d.presence_ref);u=u.filter(d=>c.indexOf(d.presence_ref)<0),e[o]=u,i(o,u,l),u.length===0&&delete e[o]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const i=e[n];return"metas"in i?r[n]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):r[n]=i,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Se;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Se||(Se={}));const jm=(t,e,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((s,a)=>(s[a]=sk(a,t,e,i),s),{})},sk=(t,e,r,n)=>{const i=e.find(o=>o.name===t),s=i==null?void 0:i.type,a=r[t];return s&&!n.includes(s)?o0(s,a):rh(a)},o0=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return uk(e,r)}switch(t){case Se.bool:return ak(e);case Se.float4:case Se.float8:case Se.int2:case Se.int4:case Se.int8:case Se.numeric:case Se.oid:return ok(e);case Se.json:case Se.jsonb:return lk(e);case Se.timestamp:return ck(e);case Se.abstime:case Se.date:case Se.daterange:case Se.int4range:case Se.int8range:case Se.money:case Se.reltime:case Se.text:case Se.time:case Se.timestamptz:case Se.timetz:case Se.tsrange:case Se.tstzrange:return rh(e);default:return rh(e)}},rh=t=>t,ak=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},ok=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},lk=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},uk=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let s;const a=t.slice(1,r);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(o=>o0(e,o))}return t},ck=t=>typeof t=="string"?t.replace(" ","T"):t;var Cm;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Cm||(Cm={}));var Am;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes"})(Am||(Am={}));var Im;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Im||(Im={}));class vf{constructor(e,r={config:{}},n){this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Mt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},r.config),this.timeout=this.socket.timeout,this.joinPush=new Hc(this,yr.join,this.params,this.timeout),this.rejoinTimer=new a0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Mt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Mt.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Mt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Mt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(yr.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new Ca(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,r=this.timeout){var n,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:a}}=this.params;this._onError(u=>e&&e("CHANNEL_ERROR",u)),this._onClose(()=>e&&e("CLOSED"));const o={},l={broadcast:s,presence:a,postgres_changes:(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&i!==void 0?i:[]};this.socket.accessToken&&(o.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:l},o)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",({postgres_changes:u})=>{var c;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),u===void 0){e&&e("SUBSCRIBED");return}else{const d=this.bindings.postgres_changes,h=(c=d==null?void 0:d.length)!==null&&c!==void 0?c:0,b=[];for(let v=0;v<h;v++){const P=d[v],{filter:{event:x,schema:p,table:m,filter:f}}=P,S=u&&u[v];if(S&&S.event===x&&S.schema===p&&S.table===m&&S.filter===f)b.push(Object.assign(Object.assign({},P),{id:S.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,e&&e("SUBSCRIBED");return}}).receive("error",u=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this._on(e,r,n)}async send(e,r={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:a}=e,o={method:"POST",headers:{apikey:(n=this.socket.accessToken)!==null&&n!==void 0?n:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=r.timeout)!==null&&i!==void 0?i:this.timeout)).ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,o,l;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Mt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(yr.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const i=new Hc(this,yr.leave,{},e);i.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,r,n){const i=new AbortController,s=setTimeout(()=>i.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(s),a}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Hc(this,e,r,n);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var i,s;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:u,join:c}=yr;if(n&&[o,l,u,c].indexOf(a)>=0&&n!==this._joinRef())return;let h=this._onMessage(a,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(b=>{var v,P,x;return((v=b.filter)===null||v===void 0?void 0:v.event)==="*"||((x=(P=b.filter)===null||P===void 0?void 0:P.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===a}).map(b=>b.callback(h,n)):(s=this.bindings[a])===null||s===void 0||s.filter(b=>{var v,P,x,p,m,f;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in b){const S=b.id,A=(v=b.filter)===null||v===void 0?void 0:v.event;return S&&((P=r.ids)===null||P===void 0?void 0:P.includes(S))&&(A==="*"||(A==null?void 0:A.toLocaleLowerCase())===((x=r.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const S=(m=(p=b==null?void 0:b.filter)===null||p===void 0?void 0:p.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return S==="*"||S===((f=r==null?void 0:r.event)===null||f===void 0?void 0:f.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===a}).map(b=>{if(typeof h=="object"&&"ids"in h){const v=h.data,{schema:P,table:x,commit_timestamp:p,type:m,errors:f}=v;h=Object.assign(Object.assign({},{schema:P,table:x,commit_timestamp:p,eventType:m,new:{},old:{},errors:f}),this._getPayloadRecords(v))}b.callback(h,n)})}_isClosed(){return this.state===Mt.closed}_isJoined(){return this.state===Mt.joined}_isJoining(){return this.state===Mt.joining}_isLeaving(){return this.state===Mt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const i=e.toLocaleLowerCase(),s={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===n&&vf.isEqual(i.filter,r))}),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(yr.close,{},e)}_onError(e){this._on(yr.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Mt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=jm(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=jm(e.columns,e.old_record)),r}}const dk=()=>{};class hk{constructor(e,r){var n;this.accessToken=null,this.channels=[],this.endPoint="",this.headers=tk,this.params={},this.timeout=s0,this.transport=Xx.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=dk,this.conn=null,this.sendBuffer=[],this.serializer=new ik,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=s=>{let a;return s?a=s:typeof fetch>"u"?a=(...o)=>it(()=>Promise.resolve().then(()=>So),void 0,import.meta.url).then(({default:l})=>l(...o)):a=fetch,(...o)=>a(...o)},this.endPoint=`${e}/${th.websocket}`,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),r!=null&&r.transport&&(this.transport=r.transport),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const i=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;i&&(this.accessToken=i),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(s,a)=>a(JSON.stringify(s)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new a0(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){this.conn||(this.conn=new this.transport(this._endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e)))}disconnect(e,r){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ja.connecting:return si.Connecting;case ja.open:return si.Open;case ja.closing:return si.Closing;default:return si.Closed}}isConnected(){return this.connectionState()===si.Open}channel(e,r={config:{}}){const n=new vf(`realtime:${e}`,r,this);return this.channels.push(n),n}push(e){const{topic:r,event:n,payload:i,ref:s}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${r} ${n} (${s})`,i),this.isConnected()?a():this.sendBuffer.push(a)}setAuth(e){this.accessToken=e,this.channels.forEach(r=>{e&&r.updateJoinPayload({access_token:e}),r.joinedOnce&&r._isJoined()&&r._push(yr.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r._joinRef()!==e._joinRef())}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:rk}))}_onConnMessage(e){this.decode(e.data,r=>{let{topic:n,event:i,payload:s,ref:a}=r;(a&&a===this.pendingHeartbeatRef||i===(s==null?void 0:s.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${n} ${i} ${a&&"("+a+")"||""}`,s),this.channels.filter(o=>o._isMember(n)).forEach(o=>o._trigger(i,s,a)),this.stateChangeCallbacks.message.forEach(o=>o(r))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(yr.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${e}${n}${i}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(nk,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class _f extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function mt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class fk extends _f{constructor(e,r){super(e),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Rm extends _f{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var pk=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{u(n.next(c))}catch(d){a(d)}}function l(c){try{u(n.throw(c))}catch(d){a(d)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((n=n.apply(t,e||[])).next())})};const l0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>it(()=>Promise.resolve().then(()=>So),void 0,import.meta.url).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},mk=()=>pk(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield it(()=>Promise.resolve().then(()=>So),void 0,import.meta.url)).Response:Response});var $s=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{u(n.next(c))}catch(d){a(d)}}function l(c){try{u(n.throw(c))}catch(d){a(d)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((n=n.apply(t,e||[])).next())})};const Zc=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),gk=(t,e)=>$s(void 0,void 0,void 0,function*(){const r=yield mk();t instanceof r?t.json().then(n=>{e(new fk(Zc(n),t.status||500))}).catch(n=>{e(new Rm(Zc(n),n))}):e(new Rm(Zc(t),t))}),yk=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};function Mu(t,e,r,n,i,s){return $s(this,void 0,void 0,function*(){return new Promise((a,o)=>{t(r,yk(e,n,i,s)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>gk(l,o))})})}function nh(t,e,r,n){return $s(this,void 0,void 0,function*(){return Mu(t,"GET",e,r,n)})}function wn(t,e,r,n,i){return $s(this,void 0,void 0,function*(){return Mu(t,"POST",e,n,i,r)})}function vk(t,e,r,n,i){return $s(this,void 0,void 0,function*(){return Mu(t,"PUT",e,n,i,r)})}function u0(t,e,r,n,i){return $s(this,void 0,void 0,function*(){return Mu(t,"DELETE",e,n,i,r)})}var Yt=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{u(n.next(c))}catch(d){a(d)}}function l(c){try{u(n.throw(c))}catch(d){a(d)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((n=n.apply(t,e||[])).next())})};const _k={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Nm={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class wk{constructor(e,r={},n,i){this.url=e,this.headers=r,this.bucketId=n,this.fetch=l0(i)}uploadOrUpdate(e,r,n,i){return Yt(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},Nm),i),o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.append("cacheControl",a.cacheControl)):(s=n,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType);const l=this._removeEmptyFolders(r),u=this._getFinalPath(l),c=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:s,headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return c.ok?{data:{path:l},error:null}:{data:null,error:yield c.json()}}catch(s){if(mt(s))return{data:null,error:s};throw s}})}upload(e,r,n){return Yt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,i){return Yt(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),a=this._getFinalPath(s),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",r);try{let l;const u=Object.assign({upsert:Nm.upsert},i),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const d=yield this.fetch(o.toString(),{method:"PUT",body:l,headers:c});return d.ok?{data:{path:s},error:null}:{data:null,error:yield d.json()}}catch(l){if(mt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e){return Yt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const n=yield wn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:this.headers}),i=new URL(this.url+n.url),s=i.searchParams.get("token");if(!s)throw new _f("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:s},error:null}}catch(r){if(mt(r))return{data:null,error:r};throw r}})}update(e,r,n){return Yt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r){return Yt(this,void 0,void 0,function*(){try{return{data:yield wn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r},{headers:this.headers}),error:null}}catch(n){if(mt(n))return{data:null,error:n};throw n}})}copy(e,r){return Yt(this,void 0,void 0,function*(){try{return{data:{path:(yield wn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r},{headers:this.headers})).Key},error:null}}catch(n){if(mt(n))return{data:null,error:n};throw n}})}createSignedUrl(e,r,n){return Yt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield wn(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(i){if(mt(i))return{data:null,error:i};throw i}})}createSignedUrls(e,r,n){return Yt(this,void 0,void 0,function*(){try{const i=yield wn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(i){if(mt(i))return{data:null,error:i};throw i}})}download(e,r){return Yt(this,void 0,void 0,function*(){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),a=s?`?${s}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield nh(this.fetch,`${this.url}/${i}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(mt(o))return{data:null,error:o};throw o}})}getPublicUrl(e,r){const n=this._getFinalPath(e),i=[],s=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";s!==""&&i.push(s);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${u}`)}}}remove(e){return Yt(this,void 0,void 0,function*(){try{return{data:yield u0(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(mt(r))return{data:null,error:r};throw r}})}list(e,r,n){return Yt(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},_k),r),{prefix:e||""});return{data:yield wn(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(mt(i))return{data:null,error:i};throw i}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const bk="2.5.4",xk={"X-Client-Info":`storage-js/${bk}`};var Ri=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{u(n.next(c))}catch(d){a(d)}}function l(c){try{u(n.throw(c))}catch(d){a(d)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((n=n.apply(t,e||[])).next())})};class kk{constructor(e,r={},n){this.url=e,this.headers=Object.assign(Object.assign({},xk),r),this.fetch=l0(n)}listBuckets(){return Ri(this,void 0,void 0,function*(){try{return{data:yield nh(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(mt(e))return{data:null,error:e};throw e}})}getBucket(e){return Ri(this,void 0,void 0,function*(){try{return{data:yield nh(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(mt(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return Ri(this,void 0,void 0,function*(){try{return{data:yield wn(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(mt(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return Ri(this,void 0,void 0,function*(){try{return{data:yield vk(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(mt(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Ri(this,void 0,void 0,function*(){try{return{data:yield wn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(mt(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Ri(this,void 0,void 0,function*(){try{return{data:yield u0(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(mt(r))return{data:null,error:r};throw r}})}}class Sk extends kk{constructor(e,r={},n){super(e,r,n)}from(e){return new wk(this.url,this.headers,e,this.fetch)}}const Ek="2.38.5";let ga="";typeof Deno<"u"?ga="deno":typeof document<"u"?ga="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ga="react-native":ga="node";const Ok={"X-Client-Info":`supabase-js-${ga}/${Ek}`};var Pk=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{u(n.next(c))}catch(d){a(d)}}function l(c){try{u(n.throw(c))}catch(d){a(d)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((n=n.apply(t,e||[])).next())})};const Tk=t=>{let e;return t?e=t:typeof fetch>"u"?e=gf:e=fetch,(...r)=>e(...r)},jk=()=>typeof Headers>"u"?n0:Headers,Ck=(t,e,r)=>{const n=Tk(r),i=jk();return(s,a)=>Pk(void 0,void 0,void 0,function*(){var o;const l=(o=yield e())!==null&&o!==void 0?o:t;let u=new i(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),n(s,Object.assign(Object.assign({},a),{headers:u}))})};function Ak(t){return t.replace(/\/$/,"")}function Ik(t,e){const{db:r,auth:n,realtime:i,global:s}=t,{db:a,auth:o,realtime:l,global:u}=e;return{db:Object.assign(Object.assign({},a),r),auth:Object.assign(Object.assign({},o),n),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},u),s)}}function Rk(t){return Math.round(Date.now()/1e3)+t}function Nk(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const zr=()=>typeof document<"u",Gn={tested:!1,writable:!1},Aa=()=>{if(!zr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Gn.tested)return Gn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Gn.tested=!0,Gn.writable=!0}catch{Gn.tested=!0,Gn.writable=!1}return Gn.writable};function Kc(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return r.searchParams.forEach((n,i)=>{e[i]=n}),e}const c0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>it(()=>Promise.resolve().then(()=>So),void 0,import.meta.url).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},Lk=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Yn=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Yo=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},qc=async(t,e)=>{await t.removeItem(e)};function $k(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let r="",n,i,s,a,o,l,u,c=0;for(t=t.replace("-","+").replace("_","/");c<t.length;)a=e.indexOf(t.charAt(c++)),o=e.indexOf(t.charAt(c++)),l=e.indexOf(t.charAt(c++)),u=e.indexOf(t.charAt(c++)),n=a<<2|o>>4,i=(o&15)<<4|l>>2,s=(l&3)<<6|u,r=r+String.fromCharCode(n),l!=64&&i!=0&&(r=r+String.fromCharCode(i)),u!=64&&s!=0&&(r=r+String.fromCharCode(s));return r}class Uu{constructor(){this.promise=new Uu.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Uu.promiseConstructor=Promise;function Lm(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,r=t.split(".");if(r.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(r[1]))throw new Error("JWT is not valid: payload is not in base64url format");const n=r[1];return JSON.parse($k(n))}async function Dk(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Mk(t,e){return new Promise((n,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await t(s);if(!e(s,null,a)){n(a);return}}catch(a){if(!e(s,a)){i(a);return}}})()})}function Uk(t){return("0"+t.toString(16)).substr(-2)}function Ni(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let s=0;s<56;s++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,Uk).join("")}async function zk(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}function Fk(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Li(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await zk(t);return Fk(r)}class wf extends Error{constructor(e,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r}}function fe(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Bk extends wf{constructor(e,r){super(e,r),this.name="AuthApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function Vk(t){return fe(t)&&t.name==="AuthApiError"}class d0 extends wf{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Ds extends wf{constructor(e,r,n){super(e),this.name=r,this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class $i extends Ds{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class Wc extends Ds{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class Qo extends Ds{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class Xo extends Ds{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class $m extends Ds{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ih extends Ds{constructor(e,r){super(e,"AuthRetryableFetchError",r)}}function Dm(t){return fe(t)&&t.name==="AuthRetryableFetchError"}var Hk=globalThis&&globalThis.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};const ya=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Zk=[502,503,504];async function Mm(t){if(!Lk(t))throw new ih(ya(t),0);if(Zk.includes(t.status))throw new ih(ya(t),t.status);let e;try{e=await t.json()}catch(r){throw new d0(ya(r),r)}throw new Bk(ya(e),t.status||500)}const Kk=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function ye(t,e,r,n){var i;const s=Object.assign({},n==null?void 0:n.headers);n!=null&&n.jwt&&(s.Authorization=`Bearer ${n.jwt}`);const a=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await qk(t,e,r+o,{headers:s,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function qk(t,e,r,n,i,s){const a=Kk(e,n,i,s);let o;try{o=await t(r,a)}catch(l){throw console.error(l),new ih(ya(l),0)}if(o.ok||await Mm(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(l){await Mm(l)}}function pn(t){var e;let r=null;Yk(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=Rk(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function Sn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Wk(t){return{data:t,error:null}}function Jk(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s}=t,a=Hk(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function Gk(t){return t}function Yk(t){return t.access_token&&t.refresh_token&&t.expires_in}var Qk=globalThis&&globalThis.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};class Xk{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=c0(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r="global"){try{return await ye(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await ye(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Sn})}catch(n){if(fe(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=Qk(e,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await ye(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Jk,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(fe(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await ye(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Sn})}catch(r){if(fe(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,i,s,a,o,l;try{const u={nextPage:null,lastPage:0,total:0},c=await ye(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Gk});if(c.error)throw c.error;const d=await c.json(),h=(a=c.headers.get("x-total-count"))!==null&&a!==void 0?a:0,b=(l=(o=c.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return b.length>0&&(b.forEach(v=>{const P=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(v.split(";")[1].split("=")[1]);u[`${x}Page`]=P}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(fe(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await ye(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Sn})}catch(r){if(fe(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){try{return await ye(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Sn})}catch(n){if(fe(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){try{return await ye(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Sn})}catch(n){if(fe(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:r,error:n}=await ye(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(fe(r))return{data:null,error:r};throw r}}async _deleteFactor(e){try{return{data:await ye(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(fe(r))return{data:null,error:r};throw r}}}const h0="2.57.0",eS="http://localhost:9999",tS="supabase.auth.token",rS={"X-Client-Info":`gotrue-js/${h0}`},Um=10,nS={getItem:t=>Aa()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Aa()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Aa()&&globalThis.localStorage.removeItem(t)}};function zm(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function iS(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}globalThis&&Aa()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug");class sS extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}iS();const aS={url:eS,storageKey:tS,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:rS,flowType:"implicit",debug:!1},Gs=30*1e3,Fm=3;async function oS(t,e,r){return await r()}class io{constructor(e){var r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=io.nextInstanceID,io.nextInstanceID+=1,this.instanceID>0&&zr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},aS),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new Xk({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=c0(n.fetch),this.lock=n.lock||oS,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:Aa()?this.storage=nS:(this.memoryStorage={},this.storage=zm(this.memoryStorage)):(this.memoryStorage={},this.storage=zm(this.memoryStorage)),zr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${h0}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=zr()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:r,error:n}=await this._getSessionFromURL(e);if(n)return this._debug("#_initialize()","error detecting session from URL",n),await this._removeSession(),{error:n};const{session:i,redirectType:s}=r;return this._debug("#_initialize()","detected session in URL",i,"redirect type",s),await this._saveSession(i),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return fe(e)?{error:e}:{error:new d0("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signUp(e){var r,n,i;try{await this._removeSession();let s;if("email"in e){const{email:c,password:d,options:h}=e;let b=null,v=null;if(this.flowType==="pkce"){const P=Ni();await Yn(this.storage,`${this.storageKey}-code-verifier`,P),b=await Li(P),v=P===b?"plain":"s256"}s=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:c,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:b,code_challenge_method:v},xform:pn})}else if("phone"in e){const{phone:c,password:d,options:h}=e;s=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(i=h==null?void 0:h.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:pn})}else throw new Qo("You must provide either an email or phone number and a password");const{data:a,error:o}=s;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(fe(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{await this._removeSession();let r;if("email"in e){const{email:s,password:a,options:o}=e;r=await ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:pn})}else if("phone"in e){const{phone:s,password:a,options:o}=e;r=await ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:pn})}else throw new Qo("You must provide either an email or phone number and a password");const{data:n,error:i}=r;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Wc}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:{user:n.user,session:n.session},error:i})}catch(r){if(fe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,i,s;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const r=await Yo(this.storage,`${this.storageKey}-code-verifier`),{data:n,error:i}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:pn});return await qc(this.storage,`${this.storageKey}-code-verifier`),i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Wc}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:n,error:i})}async signInWithIdToken(e){await this._removeSession();try{const{options:r,provider:n,token:i,access_token:s,nonce:a}=e,o=await ye(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:pn}),{data:l,error:u}=o;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Wc}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(r){if(fe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,i,s,a;try{if(await this._removeSession(),"email"in e){const{email:o,options:l}=e;let u=null,c=null;if(this.flowType==="pkce"){const h=Ni();await Yn(this.storage,`${this.storageKey}-code-verifier`,h),u=await Li(h),c=h===u?"plain":"s256"}const{error:d}=await ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:o,options:l}=e,{data:u,error:c}=await ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new Qo("You must provide either an email or phone number.")}catch(o){if(fe(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var r,n;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();let i,s;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,s=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:o}=await ye(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:pn});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,u=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(fe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var r,n,i;try{await this._removeSession();let s=null,a=null;if(this.flowType==="pkce"){const o=Ni();await Yn(this.storage,`${this.storageKey}-code-verifier`,o),s=await Li(o),a=o===s?"plain":"s256"}return await ye(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:Wk})}catch(s){if(fe(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new $i;const{error:i}=await ye(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(fe(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const r=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:s}=e,{error:a}=await ye(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:n,type:i,options:s}=e,{data:a,error:o}=await ye(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new Qo("You must provide either an email or phone number and a type")}catch(r){if(fe(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Yo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n)return{data:{session:e},error:null};const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Sn}):await this._useSession(async r=>{var n,i;const{data:s,error:a}=r;if(a)throw a;return await ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:Sn})})}catch(r){if(fe(r))return{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:i,error:s}=n;if(s)throw s;if(!i.session)throw new $i;const a=i.session;let o=null,l=null;if(this.flowType==="pkce"&&e.email!=null){const d=Ni();await Yn(this.storage,`${this.storageKey}-code-verifier`,d),o=await Li(d),l=d===o?"plain":"s256"}const{data:u,error:c}=await ye(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:Sn});if(c)throw c;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(n){if(fe(n))return{data:{user:null},error:n};throw n}}_decodeJWT(e){return Lm(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new $i;const r=Date.now()/1e3;let n=r,i=!0,s=null;const a=Lm(e.access_token);if(a.exp&&(n=a.exp,i=n<=r),i){const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};s=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(r){if(fe(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:a,error:o}=r;if(o)throw o;e=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new $i;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(fe(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e){try{if(!zr())throw new Xo("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Xo("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new $m("Not a valid PKCE flow url.");const r=Kc(window.location.href);if(e){if(!r.code)throw new $m("No code detected.");const{data:m,error:f}=await this._exchangeCodeForSession(r.code);if(f)throw f;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:m.session,redirectType:null},error:null}}if(r.error||r.error_description||r.error_code)throw new Xo(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});const{provider_token:n,provider_refresh_token:i,access_token:s,refresh_token:a,expires_in:o,expires_at:l,token_type:u}=r;if(!s||!o||!a||!u)throw new Xo("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(o);let h=c+d;l&&(h=parseInt(l));const b=h-c;b*1e3<=Gs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${d}s`);const v=h-d;c-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,h,c):c-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",v,h,c);const{data:P,error:x}=await this._getUser(s);if(x)throw x;const p={provider_token:n,provider_refresh_token:i,access_token:s,expires_in:d,expires_at:h,refresh_token:a,token_type:u,user:P.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:r.type},error:null}}catch(r){if(fe(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantFlow(){const e=Kc(window.location.href);return!!(zr()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=Kc(window.location.href),r=await Yo(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return{error:s};const a=(n=i.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(Vk(o)&&(o.status===404||o.status===401)))return{error:o}}return e!=="others"&&(await this._removeSession(),await qc(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const r=Nk(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,i;try{const{data:{session:s},error:a}=r;if(a)throw a;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,r={}){let n=null,i=null;if(this.flowType==="pkce"){const s=Ni();await Yn(this.storage,`${this.storageKey}-code-verifier`,s),n=await Li(s),i=s===n?"plain":"s256"}try{return await ye(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(fe(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Mk(async i=>(await Dk(i*200),this._debug(r,"refreshing attempt",i),await ye(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:pn})),(i,s,a)=>a&&a.error&&Dm(a.error)&&Date.now()+(i+1)*200-n<Gs)}catch(n){if(this._debug(r,"error",n),fe(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),zr()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await Yo(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const i=Math.round(Date.now()/1e3),s=((e=n.expires_at)!==null&&e!==void 0?e:1/0)<i+Um;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${Um}s`),s){if(this.autoRefreshToken&&n.refresh_token){const{error:a}=await this._callRefreshToken(n.refresh_token);a&&(console.error(a),Dm(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new $i;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Uu;const{data:s,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new $i;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const o={session:s.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(s){if(this._debug(i,"error",s),fe(s)){const a={session:null,error:s};return(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,r,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,r)}catch(l){s.push(l)}});if(await Promise.all(a),s.length>0){for(let o=0;o<s.length;o+=1)console.error(s[o]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),await this._persistSession(e)}_persistSession(e){return this._debug("#_persistSession()",e),Yn(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await qc(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&zr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Gs);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/Gs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Gs}ms, refresh threshold is ${Fm} ticks`),i<=Fm&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof sS)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!zr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r){const n=[`provider=${encodeURIComponent(e)}`];if(r!=null&&r.redirectTo&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const i=Ni();await Yn(this.storage,`${this.storageKey}-code-verifier`,i);const s=await Li(i),a=i===s?"plain":"s256";this._debug("PKCE","code verifier",`${i.substring(0,5)}...`,"code challenge",s,"method",a);const o=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});n.push(o.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);n.push(i.toString())}return`${this.url}/authorize?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;return s?{data:null,error:s}:await ye(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(fe(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,i;const{data:s,error:a}=r;if(a)return{data:null,error:a};const{data:o,error:l}=await ye(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(!((i=o==null?void 0:o.totp)===null||i===void 0)&&i.qr_code&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(r){if(fe(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return{data:null,error:s};const{data:a,error:o}=await ye(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(r){if(fe(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;return s?{data:null,error:s}:await ye(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(fe(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(e==null?void 0:e.factors)||[],i=n.filter(s=>s.factor_type==="totp"&&s.status==="verified");return{data:{all:n,totp:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const a=this._decodeJWT(i.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((n=(r=i.user.factors)===null||r===void 0?void 0:r.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const c=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}}io.nextInstanceID=0;class lS extends io{constructor(e){super(e)}}var uS=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{u(n.next(c))}catch(d){a(d)}}function l(c){try{u(n.throw(c))}catch(d){a(d)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((n=n.apply(t,e||[])).next())})};const cS={headers:Ok},dS={schema:"public"},hS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},fS={};class pS{constructor(e,r,n){var i,s,a,o,l,u,c,d;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const h=Ak(e);this.realtimeUrl=`${h}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${h}/auth/v1`,this.storageUrl=`${h}/storage/v1`,this.functionsUrl=`${h}/functions/v1`;const b=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,v={db:dS,realtime:fS,auth:Object.assign(Object.assign({},hS),{storageKey:b}),global:cS},P=Ik(n??{},v);this.storageKey=(s=(i=P.auth)===null||i===void 0?void 0:i.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=(a=P.global)===null||a===void 0?void 0:a.headers)!==null&&o!==void 0?o:{},this.auth=this._initSupabaseAuthClient((l=P.auth)!==null&&l!==void 0?l:{},this.headers,(u=P.global)===null||u===void 0?void 0:u.fetch),this.fetch=Ck(r,this._getAccessToken.bind(this),(c=P.global)===null||c===void 0?void 0:c.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},P.realtime)),this.rest=new yf(`${h}/rest/v1`,{headers:this.headers,schema:(d=P.db)===null||d===void 0?void 0:d.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new xx(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Sk(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return uS(this,void 0,void 0,function*(){const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,storageKey:s,flowType:a,debug:o},l,u){const c={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new lS({url:this.authUrl,headers:Object.assign(Object.assign({},c),l),storageKey:s,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,flowType:a,debug:o,fetch:u})}_initRealtimeClient(e){return new hk(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.realtime.setAuth(n??null),this.changedAccessToken=n):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const mS=(t,e,r)=>new pS(t,e,r),gS="https://xrxqgzrdxkvoszkhvnzg.supabase.co",yS="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhyeHFnenJkeGt2b3N6a2h2bnpnIiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTYxMDY2NDgsImV4cCI6MjAxMTY4MjY0OH0.7wQAVyg2lK41GxRae6B-lmEYR1ahWCHBDWoS09aiOnw",Eo=mS(gS,yS),f0=async()=>{const{data:t,error:e}=await Eo.from("events").select("*").order("timestamp",{ascending:!1}).limit(1);if(e){console.log("Error",e);return}return console.log("Data",t),t},vS=async t=>{const e=new Date;e.setDate(e.getDate()-7);const{data:r,error:n}=await Eo.from("events").select("*").eq("clientId",t).gte("timestamp",e.toISOString());return n?(console.log("Error",n),[!1,"Error checking if customer is new."]):r.length<=1?[!0,"This is the first time the customer has visited the store."]:[!1,"This customer has visited the store before."]},_S=async t=>{const{data:e,error:r}=await Eo.from("events").select("*").eq("clientId",t).eq("name","cart_viewed").order("timestamp",{ascending:!1}).limit(1);if(r)return console.log("Error",r),[!1,"Error checking if customer has items in their cart."];if(e.length>0){const n=e[0].detail.cart.lines.map(s=>s.merchandise.product.title),i=e[0].context.document.location.href;return[!0,`This customer has the following items in their cart: ${n.join(", ")}`,`The customer can go to their cart by clicking this link: ${i}`]}else return[!1,"This customer does not have items in their cart."]},wS=async t=>{const e=new Date;e.setDate(e.getDate()-7);const{data:r,error:n}=await Eo.from("events").select("*").eq("clientId",t).eq("name","product_viewed").gte("timestamp",e.toISOString());if(n)return console.log("Error",n),[!1,"Error checking if customer has viewed products."];if(r.length>0){const i=r.map(a=>a.detail.productVariant.product.title),s=r.map(a=>a.context.document.location.href);return[!0,`This customer has viewed the following products: ${i.join(", ")}`,`The customer can revisit these products by clicking these links: ${s.join(", ")}`]}else return[!1,"This customer has not viewed any products."]},bS=async t=>{const e=new Date;e.setMinutes(e.getMinutes()-30);const{data:r,error:n}=await Eo.from("events").select("*").eq("clientId",t).eq("name","cart_viewed").gte("timestamp",e.toISOString());return n?(console.log("Error",n),[!1,"Error checking if customer has viewed products."]):r.length>2},zi="4.4.0";class xS{constructor(e,r){this.response=e,this.controller=r,this.decoder=new kS}async*iterMessages(){if(!this.response.body)throw this.controller.abort(),new Error("Attempted to iterate over a response with no body");const e=new _s,r=ES(this.response.body);for await(const n of r)for(const i of e.decode(n)){const s=this.decoder.decode(i);s&&(yield s)}for(const n of e.flush()){const i=this.decoder.decode(n);i&&(yield i)}}async*[Symbol.asyncIterator](){let e=!1;try{for await(const r of this.iterMessages())if(!e){if(r.data.startsWith("[DONE]")){e=!0;continue}if(r.event===null)try{yield JSON.parse(r.data)}catch(n){throw console.error("Could not parse message into JSON:",r.data),console.error("From chunk:",r.raw),n}}e=!0}catch(r){if(r instanceof Error&&r.name==="AbortError")return;throw r}finally{e||this.controller.abort()}}}class kS{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[r,n,i]=SS(e,":");return i.startsWith(" ")&&(i=i.substring(1)),r==="event"?this.event=i:r==="data"&&this.data.push(i),null}}class _s{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let r=this.decodeText(e);if(this.trailingCR&&(r="\r"+r,this.trailingCR=!1),r.endsWith("\r")&&(this.trailingCR=!0,r=r.slice(0,-1)),!r)return[];const n=_s.NEWLINE_CHARS.has(r[r.length-1]||"");let i=r.split(_s.NEWLINE_REGEXP);return i.length===1&&!n?(this.buffer.push(i[0]),[]):(this.buffer.length>0&&(i=[this.buffer.join("")+i[0],...i.slice(1)],this.buffer=[]),n||(this.buffer=[i.pop()||""]),i)}decodeText(e){var r;if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new Error(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return(r=this.textDecoder)!==null&&r!==void 0||(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new Error(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new Error("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}_s.NEWLINE_CHARS=new Set([`
`,"\r","\v","\f","","","","","\u2028","\u2029"]);_s.NEWLINE_REGEXP=/\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;function SS(t,e){const r=t.indexOf(e);return r!==-1?[t.substring(0,r),e,t.substring(r+e.length)]:[t,"",""]}function ES(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const r=await e.read();return r!=null&&r.done&&e.releaseLock(),r}catch(r){throw e.releaseLock(),r}},async return(){const r=e.cancel();return e.releaseLock(),await r,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}let Wt=class sh extends Error{constructor(e,r,n,i){super(sh.makeMessage(r,n)),this.status=e,this.headers=i;const s=r;this.error=s,this.code=s==null?void 0:s.code,this.param=s==null?void 0:s.param,this.type=s==null?void 0:s.type}static makeMessage(e,r){return e!=null&&e.message?typeof e.message=="string"?e.message:JSON.stringify(e.message):e?JSON.stringify(e):r||"Unknown error occurred"}static generate(e,r,n,i){if(!e)return new Oo({cause:_0(r)});const s=r==null?void 0:r.error;return e===400?new xf(e,s,n,i):e===401?new kf(e,s,n,i):e===403?new Sf(e,s,n,i):e===404?new Ef(e,s,n,i):e===409?new Of(e,s,n,i):e===422?new Pf(e,s,n,i):e===429?new Tf(e,s,n,i):e>=500?new jf(e,s,n,i):new sh(e,s,n,i)}},ql=class extends Wt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0),this.status=void 0}},Oo=class extends Wt{constructor({message:e,cause:r}){super(void 0,void 0,e||"Connection error.",void 0),this.status=void 0,r&&(this.cause=r)}},bf=class extends Oo{constructor(){super({message:"Request timed out."})}},xf=class extends Wt{constructor(){super(...arguments),this.status=400}},kf=class extends Wt{constructor(){super(...arguments),this.status=401}},Sf=class extends Wt{constructor(){super(...arguments),this.status=403}},Ef=class extends Wt{constructor(){super(...arguments),this.status=404}},Of=class extends Wt{constructor(){super(...arguments),this.status=409}},Pf=class extends Wt{constructor(){super(...arguments),this.status=422}},Tf=class extends Wt{constructor(){super(...arguments),this.status=429}},jf=class extends Wt{};const OS=Object.freeze(Object.defineProperty({__proto__:null,APIConnectionError:Oo,APIConnectionTimeoutError:bf,APIError:Wt,APIUserAbortError:ql,AuthenticationError:kf,BadRequestError:xf,ConflictError:Of,InternalServerError:jf,NotFoundError:Ef,PermissionDeniedError:Sf,RateLimitError:Tf,UnprocessableEntityError:Pf},Symbol.toStringTag,{value:"Module"})),PS=t=>{},TS=fetch.bind(void 0),jS=!1,CS=FormData,Bm=typeof File<"u"?File:class extends Blob{constructor(){throw new Error("file uploads aren't supported in this environment yet as 'File' is not defined")}};async function AS(t,e){return{...e,body:new zS(t)}}async function IS(){throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")}function RS(t){return!1}const p0=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function",NS=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&m0(t),m0=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",LS=t=>NS(t)||p0(t)||RS();async function g0(t,e,r={}){var n,i,s;if(t=await t,p0(t)){const o=await t.blob();return e||(e=(n=new URL(t.url).pathname.split(/[\\/]/).pop())!==null&&n!==void 0?n:"unknown_file"),new Bm([o],e,r)}const a=await $S(t);if(e||(e=(i=MS(t))!==null&&i!==void 0?i:"unknown_file"),!r.type){const o=(s=a[0])===null||s===void 0?void 0:s.type;typeof o=="string"&&(r={...r,type:o})}return new Bm(a,e,r)}async function $S(t){var e;let r=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)r.push(t);else if(m0(t))r.push(await t.arrayBuffer());else if(US(t))for await(const n of t)r.push(n);else throw new Error(`Unexpected data type: ${typeof t}; constructor: ${(e=t==null?void 0:t.constructor)===null||e===void 0?void 0:e.name}; props: ${DS(t)}`);return r}function DS(t){return`[${Object.getOwnPropertyNames(t).map(r=>`"${r}"`).join(", ")}]`}function MS(t){var e;return Jc(t.name)||Jc(t.filename)||((e=Jc(t.path))===null||e===void 0?void 0:e.split(/[\\/]/).pop())}const Jc=t=>{if(typeof t=="string")return t;if(typeof Buffer<"u"&&t instanceof Buffer)return String(t)},US=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";class zS{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}const Vm=t=>t&&typeof t=="object"&&t.body&&t[Symbol.toStringTag]==="MultipartBody",so=async t=>{const e=await FS(t.body);return AS(e,t)},FS=async t=>{const e=new CS;return await Promise.all(Object.entries(t||{}).map(([r,n])=>ah(e,r,n))),e},ah=async(t,e,r)=>{if(r!==void 0){if(r==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")t.append(e,String(r));else if(LS(r)){const n=await g0(r);t.append(e,n)}else if(Array.isArray(r))await Promise.all(r.map(n=>ah(t,e+"[]",n)));else if(typeof r=="object")await Promise.all(Object.entries(r).map(([n,i])=>ah(t,`${e}[${n}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`)}};var BS=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},VS=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},el;const HS=2;async function y0(t){const{response:e}=t;if(t.options.stream)return new xS(e,t.controller);const r=e.headers.get("content-type");if(r!=null&&r.includes("application/json")){const i=await e.json();return Wl("response",e.status,e.url,e.headers,i),i}const n=await e.text();return Wl("response",e.status,e.url,e.headers,n),n}class zu extends Promise{constructor(e,r=y0){super(n=>{n(null)}),this.responsePromise=e,this.parseResponse=r}_thenUnwrap(e){return new zu(this.responsePromise,async r=>e(await this.parseResponse(r)))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,r]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:r}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,r){return this.parse().then(e,r)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class ZS{constructor({baseURL:e,maxRetries:r,timeout:n=6e5,httpAgent:i,fetch:s}){this.baseURL=e,this.maxRetries=Gc("maxRetries",r??HS),this.timeout=Gc("timeout",n),this.httpAgent=i,this.fetch=s??TS}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...YS(),...this.authHeaders(e)}}validateHeaders(e,r){}defaultIdempotencyKey(){return`stainless-node-retry-${nE()}`}get(e,r){return this.methodRequest("get",e,r)}post(e,r){return this.methodRequest("post",e,r)}patch(e,r){return this.methodRequest("patch",e,r)}put(e,r){return this.methodRequest("put",e,r)}delete(e,r){return this.methodRequest("delete",e,r)}methodRequest(e,r,n){return this.request(Promise.resolve(n).then(i=>({method:e,path:r,...i})))}getAPIList(e,r,n){return this.requestAPIList(r,{method:"get",path:e,...n})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}return null}buildRequest(e){var r,n,i,s,a,o;const{method:l,path:u,query:c,headers:d={}}=e,h=Vm(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,b=this.calculateContentLength(h),v=this.buildURL(u,c);"timeout"in e&&Gc("timeout",e.timeout);const P=(r=e.timeout)!==null&&r!==void 0?r:this.timeout,x=(i=(n=e.httpAgent)!==null&&n!==void 0?n:this.httpAgent)!==null&&i!==void 0?i:PS(),p=P+1e3;typeof((s=x==null?void 0:x.options)===null||s===void 0?void 0:s.timeout)=="number"&&p>((a=x.options.timeout)!==null&&a!==void 0?a:0)&&(x.options.timeout=p),this.idempotencyHeader&&l!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),d[this.idempotencyHeader]=e.idempotencyKey);const m={...b&&{"Content-Length":b},...this.defaultHeaders(e),...d};Vm(e.body)&&!jS&&delete m["Content-Type"],Object.keys(m).forEach(S=>m[S]===null&&delete m[S]);const f={method:l,...h&&{body:h},headers:m,...x&&{agent:x},signal:(o=e.signal)!==null&&o!==void 0?o:null};return this.validateHeaders(m,d),{req:f,url:v,timeout:P}}async prepareRequest(e,{url:r,options:n}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(r=>[...r])):{...e}:{}}makeStatusError(e,r,n,i){return Wt.generate(e,r,n,i)}request(e,r=null){return new zu(this.makeRequest(e,r))}async makeRequest(e,r){var n,i,s;const a=await e;r==null&&(r=(n=a.maxRetries)!==null&&n!==void 0?n:this.maxRetries);const{req:o,url:l,timeout:u}=this.buildRequest(a);if(await this.prepareRequest(o,{url:l,options:a}),Wl("request",l,a,o.headers),!((i=a.signal)===null||i===void 0)&&i.aborted)throw new ql;const c=new AbortController,d=await this.fetchWithTimeout(l,o,u,c).catch(_0);if(d instanceof Error){if(!((s=a.signal)===null||s===void 0)&&s.aborted)throw new ql;if(r)return this.retryRequest(a,r);throw d.name==="AbortError"?new bf:new Oo({cause:d})}const h=qS(d.headers);if(!d.ok){if(r&&this.shouldRetry(d))return this.retryRequest(a,r,h);const b=await d.text().catch(()=>"Unknown"),v=QS(b),P=v?void 0:b;throw Wl("response",d.status,l,h,P),this.makeStatusError(d.status,v,P,h)}return{response:d,options:a,controller:c}}requestAPIList(e,r){const n=this.makeRequest(r,null);return new KS(this,n,e)}buildURL(e,r){const n=eE(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),i=this.defaultQuery();return w0(i)||(r={...i,...r}),r&&(n.search=this.stringifyQuery(r)),n.toString()}stringifyQuery(e){return Object.entries(e).filter(([r,n])=>typeof n<"u").map(([r,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(r)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(r)}=`;throw new Error(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,r,n,i){const{signal:s,...a}=r||{};s&&s.addEventListener("abort",()=>i.abort());const o=setTimeout(()=>i.abort(),n);return this.getRequestClient().fetch(e,{signal:i.signal,...a}).finally(()=>{clearTimeout(o)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(e){const r=e.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:e.status===409||e.status===429||e.status>=500}async retryRequest(e,r,n){var i;r-=1;const s=parseInt((n==null?void 0:n["retry-after"])||""),a=(i=e.maxRetries)!==null&&i!==void 0?i:this.maxRetries,o=this.calculateRetryTimeoutSeconds(r,s,a)*1e3;return await tE(o),this.makeRequest(e,r)}calculateRetryTimeoutSeconds(e,r,n){if(Number.isInteger(r)&&r<=60)return r;const a=n-e,o=Math.min(.5*Math.pow(a-1,2),2),l=Math.random()-.5;return o+l}getUserAgent(){return`${this.constructor.name}/JS ${zi}`}}class v0{constructor(e,r,n,i){el.set(this,void 0),BS(this,el,e,"f"),this.options=i,this.response=r,this.body=n}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new Error("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const r={...this.options};if("params"in e)r.query={...r.query,...e.params};else if("url"in e){const n=[...Object.entries(r.query||{}),...e.url.searchParams.entries()];for(const[i,s]of n)e.url.searchParams.set(i,s);r.query=void 0,r.path=e.url.toString()}return await VS(this,el,"f").requestAPIList(this.constructor,r)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(el=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const r of e.getPaginatedItems())yield r}}class KS extends zu{constructor(e,r,n){super(r,async i=>new n(e,i.response,await y0(i),i.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const r of e)yield r}}const qS=t=>new Proxy(Object.fromEntries(t.entries()),{get(e,r){const n=r.toString();return e[n.toLowerCase()]||e[n]}}),WS={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0},Hm=t=>typeof t=="object"&&t!==null&&!w0(t)&&Object.keys(t).every(e=>rE(WS,e)),JS=()=>{if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":zi,"X-Stainless-OS":Km(Deno.build.os),"X-Stainless-Arch":Zm(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":Deno.version};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":zi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":zi,"X-Stainless-OS":Km(process.platform),"X-Stainless-Arch":Zm(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const t=GS();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":zi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":zi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function GS(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:r}of t){const n=r.exec(navigator.userAgent);if(n){const i=n[1]||0,s=n[2]||0,a=n[3]||0;return{browser:e,version:`${i}.${s}.${a}`}}}return null}const Zm=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Km=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let tl;const YS=()=>tl??(tl=JS()),QS=t=>{try{return JSON.parse(t)}catch{return}},XS=new RegExp("^(?:[a-z]+:)?//","i"),eE=t=>XS.test(t),tE=t=>new Promise(e=>setTimeout(e,t)),Gc=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Error(`${t} must be an integer`);if(e<0)throw new Error(`${t} must be a positive integer`);return e},_0=t=>t instanceof Error?t:new Error(t),qm=t=>{var e,r,n,i;if(typeof process<"u")return(r=(e=process.env)===null||e===void 0?void 0:e[t])!==null&&r!==void 0?r:void 0;if(typeof Deno<"u")return(i=(n=Deno.env)===null||n===void 0?void 0:n.get)===null||i===void 0?void 0:i.call(n,t)};function w0(t){if(!t)return!0;for(const e in t)return!1;return!0}function rE(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Wl(t,...e){typeof process<"u"&&process.env.DEBUG==="true"&&console.log(`OpenAI:DEBUG:${t}`,...e)}const nE=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)}),iE=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";class Fu extends v0{constructor(e,r,n,i){super(e,r,n,i),this.object=n.object,this.data=n.data}getPaginatedItems(){return this.data}nextPageParams(){return null}nextPageInfo(){return null}}class Cf extends v0{constructor(e,r,n,i){super(e,r,n,i),this.data=n.data}getPaginatedItems(){return this.data}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const r=Object.fromEntries(e.url.searchParams);return Object.keys(r).length?r:null}nextPageInfo(){var e,r;if(!(!((e=this.data)===null||e===void 0)&&e.length))return null;const n=(r=this.data[this.data.length-1])===null||r===void 0?void 0:r.id;return n?{params:{after:n}}:null}}class Tt{constructor(e){this.client=e,this.get=e.get.bind(e),this.post=e.post.bind(e),this.patch=e.patch.bind(e),this.put=e.put.bind(e),this.delete=e.delete.bind(e),this.getAPIList=e.getAPIList.bind(e)}}class Jl extends Tt{create(e,r){return this.post("/audio/transcriptions",so({body:e,...r}))}}Jl||(Jl={});class Gl extends Tt{create(e,r){return this.post("/audio/translations",so({body:e,...r}))}}Gl||(Gl={});class Yl extends Tt{constructor(){super(...arguments),this.transcriptions=new Jl(this.client),this.translations=new Gl(this.client)}}(function(t){t.Transcriptions=Jl,t.Translations=Gl})(Yl||(Yl={}));let Ql=class extends Tt{create(e,r){var n;return this.post("/chat/completions",{body:e,...r,stream:(n=e.stream)!==null&&n!==void 0?n:!1})}};Ql||(Ql={});class Xl extends Tt{constructor(){super(...arguments),this.completions=new Ql(this.client)}}(function(t){t.Completions=Ql})(Xl||(Xl={}));class eu extends Tt{create(e,r){var n;return this.post("/completions",{body:e,...r,stream:(n=e.stream)!==null&&n!==void 0?n:!1})}}eu||(eu={});class tu extends Tt{create(e,r){return this.post("/embeddings",{body:e,...r})}}tu||(tu={});class ru extends Tt{create(e,r){return this.post("/edits",{body:e,...r})}}ru||(ru={});class nu extends Tt{create(e,r){return this.post("/files",so({body:e,...r}))}retrieve(e,r){return this.get(`/files/${e}`,r)}list(e){return this.getAPIList("/files",b0,e)}del(e,r){return this.delete(`/files/${e}`,r)}retrieveContent(e,r){return this.get(`/files/${e}/content`,{...r,headers:{Accept:"application/json",...r==null?void 0:r.headers}})}}class b0 extends Fu{}nu||(nu={});class iu extends Tt{create(e,r){return this.post("/fine-tunes",{body:e,...r})}retrieve(e,r){return this.get(`/fine-tunes/${e}`,r)}list(e){return this.getAPIList("/fine-tunes",x0,e)}cancel(e,r){return this.post(`/fine-tunes/${e}/cancel`,r)}listEvents(e,r,n){var i;return this.get(`/fine-tunes/${e}/events`,{query:r,timeout:864e5,...n,stream:(i=r==null?void 0:r.stream)!==null&&i!==void 0?i:!1})}}class x0 extends Fu{}iu||(iu={});class su extends Tt{create(e,r){return this.post("/fine_tuning/jobs",{body:e,...r})}retrieve(e,r){return this.get(`/fine_tuning/jobs/${e}`,r)}list(e={},r){return Hm(e)?this.list({},e):this.getAPIList("/fine_tuning/jobs",k0,{query:e,...r})}cancel(e,r){return this.post(`/fine_tuning/jobs/${e}/cancel`,r)}listEvents(e,r={},n){return Hm(r)?this.listEvents(e,{},r):this.getAPIList(`/fine_tuning/jobs/${e}/events`,S0,{query:r,...n})}}class k0 extends Cf{}class S0 extends Cf{}su||(su={});class au extends Tt{constructor(){super(...arguments),this.jobs=new su(this.client)}}(function(t){t.Jobs=su,t.FineTuningJobsPage=k0,t.FineTuningJobEventsPage=S0})(au||(au={}));class ou extends Tt{createVariation(e,r){return this.post("/images/variations",so({body:e,...r}))}edit(e,r){return this.post("/images/edits",so({body:e,...r}))}generate(e,r){return this.post("/images/generations",{body:e,...r})}}ou||(ou={});class lu extends Tt{retrieve(e,r){return this.get(`/models/${e}`,r)}list(e){return this.getAPIList("/models",E0,e)}del(e,r){return this.delete(`/models/${e}`,r)}}class E0 extends Fu{}lu||(lu={});class uu extends Tt{create(e,r){return this.post("/moderations",{body:e,...r})}}uu||(uu={});var O0;class lt extends ZS{constructor(e){var r,n,{apiKey:i=qm("OPENAI_API_KEY"),organization:s=(r=qm("OPENAI_ORG_ID"))!==null&&r!==void 0?r:null,...a}=e===void 0?{}:e;if(i===void 0)throw new Error("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'my apiKey' }).");const o={apiKey:i,organization:s,baseURL:"https://api.openai.com/v1",...a};if(!o.dangerouslyAllowBrowser&&iE())throw new Error(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:o.baseURL,timeout:(n=o.timeout)!==null&&n!==void 0?n:6e5,httpAgent:o.httpAgent,maxRetries:o.maxRetries,fetch:o.fetch}),this.completions=new eu(this),this.chat=new Xl(this),this.edits=new ru(this),this.embeddings=new tu(this),this.files=new nu(this),this.images=new ou(this),this.audio=new Yl(this),this.moderations=new uu(this),this.models=new lu(this),this.fineTuning=new au(this),this.fineTunes=new iu(this),this._options=o,this.apiKey=i,this.organization=s}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}}O0=lt;lt.OpenAI=O0;lt.APIError=Wt;lt.APIConnectionError=Oo;lt.APIConnectionTimeoutError=bf;lt.APIUserAbortError=ql;lt.NotFoundError=Ef;lt.ConflictError=Of;lt.RateLimitError=Tf;lt.BadRequestError=xf;lt.AuthenticationError=kf;lt.InternalServerError=jf;lt.PermissionDeniedError=Sf;lt.UnprocessableEntityError=Pf;const{APIError:nC,APIConnectionError:iC,APIConnectionTimeoutError:sE,APIUserAbortError:aE,NotFoundError:sC,ConflictError:aC,RateLimitError:oC,BadRequestError:lC,AuthenticationError:uC,InternalServerError:cC,PermissionDeniedError:dC,UnprocessableEntityError:hC}=OS;(function(t){t.toFile=g0,t.fileFromPath=IS,t.Page=Fu,t.CursorPage=Cf,t.Completions=eu,t.Chat=Xl,t.Edits=ru,t.Embeddings=tu,t.Files=nu,t.FileObjectsPage=b0,t.Images=ou,t.Audio=Yl,t.Moderations=uu,t.Models=lu,t.ModelsPage=E0,t.FineTuning=au,t.FineTunes=iu,t.FineTunesPage=x0})(lt||(lt={}));var Bu={};Bu.byteLength=uE;Bu.toByteArray=dE;Bu.fromByteArray=pE;var Ar=[],Xt=[],oE=typeof Uint8Array<"u"?Uint8Array:Array,Yc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Di=0,lE=Yc.length;Di<lE;++Di)Ar[Di]=Yc[Di],Xt[Yc.charCodeAt(Di)]=Di;Xt["-".charCodeAt(0)]=62;Xt["_".charCodeAt(0)]=63;function P0(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function uE(t){var e=P0(t),r=e[0],n=e[1];return(r+n)*3/4-n}function cE(t,e,r){return(e+r)*3/4-r}function dE(t){var e,r=P0(t),n=r[0],i=r[1],s=new oE(cE(t,n,i)),a=0,o=i>0?n-4:n,l;for(l=0;l<o;l+=4)e=Xt[t.charCodeAt(l)]<<18|Xt[t.charCodeAt(l+1)]<<12|Xt[t.charCodeAt(l+2)]<<6|Xt[t.charCodeAt(l+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return i===2&&(e=Xt[t.charCodeAt(l)]<<2|Xt[t.charCodeAt(l+1)]>>4,s[a++]=e&255),i===1&&(e=Xt[t.charCodeAt(l)]<<10|Xt[t.charCodeAt(l+1)]<<4|Xt[t.charCodeAt(l+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function hE(t){return Ar[t>>18&63]+Ar[t>>12&63]+Ar[t>>6&63]+Ar[t&63]}function fE(t,e,r){for(var n,i=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(hE(n));return i.join("")}function pE(t){for(var e,r=t.length,n=r%3,i=[],s=16383,a=0,o=r-n;a<o;a+=s)i.push(fE(t,a,a+s>o?o:a+s));return n===1?(e=t[r-1],i.push(Ar[e>>2]+Ar[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(Ar[e>>10]+Ar[e>>4&63]+Ar[e<<2&63]+"=")),i.join("")}var mE=Object.defineProperty,gE=(t,e,r)=>e in t?mE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,yE=(t,e,r)=>(gE(t,typeof e!="symbol"?e+"":e,r),r);function vE(t,e){let r=Array.from({length:t.length},(n,i)=>({start:i,end:i+1}));for(;r.length>1;){let n=null;for(let i=0;i<r.length-1;i++){const s=t.slice(r[i].start,r[i+1].end),a=e.get(s.join(","));a!=null&&(n==null||a<n[0])&&(n=[a,i])}if(n!=null){const i=n[1];r[i]={start:r[i].start,end:r[i+1].end},r.splice(i+1,1)}else break}return r}function _E(t,e){return t.length===1?[e.get(t.join(","))]:vE(t,e).map(r=>e.get(t.slice(r.start,r.end).join(","))).filter(r=>r!=null)}function wE(t){return t.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var oh=class{constructor(t,e){hn(this,"specialTokens");hn(this,"inverseSpecialTokens");hn(this,"patStr");hn(this,"textEncoder",new TextEncoder);hn(this,"textDecoder",new TextDecoder("utf-8"));hn(this,"rankMap",new Map);hn(this,"textMap",new Map);this.patStr=t.pat_str;const r=t.bpe_ranks.split(`
`).filter(Boolean).reduce((n,i)=>{const[s,a,...o]=i.split(" "),l=Number.parseInt(a,10);return o.forEach((u,c)=>n[u]=l+c),n},{});for(const[n,i]of Object.entries(r)){const s=Bu.toByteArray(n);this.rankMap.set(s.join(","),i),this.textMap.set(i,s)}this.specialTokens={...t.special_tokens,...e},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((n,[i,s])=>(n[s]=this.textEncoder.encode(i),n),{})}encode(t,e=[],r="all"){const n=new RegExp(this.patStr,"ug"),i=oh.specialTokenRegex(Object.keys(this.specialTokens)),s=[],a=new Set(e==="all"?Object.keys(this.specialTokens):e),o=new Set(r==="all"?Object.keys(this.specialTokens).filter(u=>!a.has(u)):r);if(o.size>0){const u=oh.specialTokenRegex([...o]),c=t.match(u);if(c!=null)throw new Error(`The text contains a special token that is not allowed: ${c[0]}`)}let l=0;for(;;){let u=null,c=l;for(;i.lastIndex=c,u=i.exec(t),!(u==null||a.has(u[0]));)c=u.index+1;const d=(u==null?void 0:u.index)??t.length;for(const b of t.substring(l,d).matchAll(n)){const v=this.textEncoder.encode(b[0]),P=this.rankMap.get(v.join(","));if(P!=null){s.push(P);continue}s.push(..._E(v,this.rankMap))}if(u==null)break;let h=this.specialTokens[u[0]];s.push(h),l=u.index+u[0].length}return s}decode(t){const e=[];let r=0;for(let s=0;s<t.length;++s){const a=t[s],o=this.textMap.get(a)??this.inverseSpecialTokens[a];o!=null&&(e.push(o),r+=o.length)}const n=new Uint8Array(r);let i=0;for(const s of e)n.set(s,i),i+=s.length;return this.textDecoder.decode(n)}},T0=oh;yE(T0,"specialTokenRegex",t=>new RegExp(t.map(e=>wE(e)).join("|"),"g"));function bE(t){switch(t){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"text-embedding-ada-002":return"cl100k_base";default:throw new Error("Unknown model")}}var Vu={exports:{}},j0={};function ur(t,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var xE=ur;ur.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};ur.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};ur.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=new Date().getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var r=this._timeouts.shift();if(r===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1);else return!1;var n=this;return this._timer=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},r),this._options.unref&&this._timer.unref(),!0};ur.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};ur.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)};ur.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)};ur.prototype.start=ur.prototype.try;ur.prototype.errors=function(){return this._errors};ur.prototype.attempts=function(){return this._attempts};ur.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},e=null,r=0,n=0;n<this._errors.length;n++){var i=this._errors[n],s=i.message,a=(t[s]||0)+1;t[s]=a,a>=r&&(e=i,r=a)}return e};(function(t){var e=xE;t.operation=function(r){var n=t.timeouts(r);return new e(n,{forever:r&&(r.forever||r.retries===1/0),unref:r&&r.unref,maxRetryTime:r&&r.maxRetryTime})},t.timeouts=function(r){if(r instanceof Array)return[].concat(r);var n={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var i in r)n[i]=r[i];if(n.minTimeout>n.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var s=[],a=0;a<n.retries;a++)s.push(this.createTimeout(a,n));return r&&r.forever&&!s.length&&s.push(this.createTimeout(a,n)),s.sort(function(o,l){return o-l}),s},t.createTimeout=function(r,n){var i=n.randomize?Math.random()+1:1,s=Math.round(i*Math.max(n.minTimeout,1)*Math.pow(n.factor,r));return s=Math.min(s,n.maxTimeout),s},t.wrap=function(r,n,i){if(n instanceof Array&&(i=n,n=null),!i){i=[];for(var s in r)typeof r[s]=="function"&&i.push(s)}for(var a=0;a<i.length;a++){var o=i[a],l=r[o];r[o]=(function(c){var d=t.operation(n),h=Array.prototype.slice.call(arguments,1),b=h.pop();h.push(function(v){d.retry(v)||(v&&(arguments[0]=d.mainError()),b.apply(this,arguments))}),d.attempt(function(){c.apply(r,h)})}).bind(r,l),r[o].options=n}}})(j0);var kE=j0;const SE=kE,EE=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class C0 extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}const OE=(t,e,r)=>{const n=r.retries-(e-1);return t.attemptNumber=e,t.retriesLeft=n,t},PE=t=>EE.includes(t),A0=(t,e)=>new Promise((r,n)=>{e={onFailedAttempt:()=>{},retries:10,...e};const i=SE.operation(e);i.attempt(async s=>{try{r(await t(s))}catch(a){if(!(a instanceof Error)){n(new TypeError(`Non-error was thrown: "${a}". You should only throw errors.`));return}if(a instanceof C0)i.stop(),n(a.originalError);else if(a instanceof TypeError&&!PE(a.message))i.stop(),n(a);else{OE(a,s,e);try{await e.onFailedAttempt(a)}catch(o){n(o);return}i.retry(a)||n(i.mainError())}}})});Vu.exports=A0;Vu.exports.default=A0;Vu.exports.AbortError=C0;var TE=Vu.exports;const cu=vo(TE);var I0={},R0={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function s(l,u,c,d,h){if(typeof c!="function")throw new TypeError("The listener must be a function");var b=new i(c,d||l,h),v=r?r+u:u;return l._events[v]?l._events[v].fn?l._events[v]=[l._events[v],b]:l._events[v].push(b):(l._events[v]=b,l._eventsCount++),l}function a(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],c,d;if(this._eventsCount===0)return u;for(d in c=this._events)e.call(c,d)&&u.push(r?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},o.prototype.listeners=function(u){var c=r?r+u:u,d=this._events[c];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,b=d.length,v=new Array(b);h<b;h++)v[h]=d[h].fn;return v},o.prototype.listenerCount=function(u){var c=r?r+u:u,d=this._events[c];return d?d.fn?1:d.length:0},o.prototype.emit=function(u,c,d,h,b,v){var P=r?r+u:u;if(!this._events[P])return!1;var x=this._events[P],p=arguments.length,m,f;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),p){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,c),!0;case 3:return x.fn.call(x.context,c,d),!0;case 4:return x.fn.call(x.context,c,d,h),!0;case 5:return x.fn.call(x.context,c,d,h,b),!0;case 6:return x.fn.call(x.context,c,d,h,b,v),!0}for(f=1,m=new Array(p-1);f<p;f++)m[f-1]=arguments[f];x.fn.apply(x.context,m)}else{var S=x.length,A;for(f=0;f<S;f++)switch(x[f].once&&this.removeListener(u,x[f].fn,void 0,!0),p){case 1:x[f].fn.call(x[f].context);break;case 2:x[f].fn.call(x[f].context,c);break;case 3:x[f].fn.call(x[f].context,c,d);break;case 4:x[f].fn.call(x[f].context,c,d,h);break;default:if(!m)for(A=1,m=new Array(p-1);A<p;A++)m[A-1]=arguments[A];x[f].fn.apply(x[f].context,m)}}return!0},o.prototype.on=function(u,c,d){return s(this,u,c,d,!1)},o.prototype.once=function(u,c,d){return s(this,u,c,d,!0)},o.prototype.removeListener=function(u,c,d,h){var b=r?r+u:u;if(!this._events[b])return this;if(!c)return a(this,b),this;var v=this._events[b];if(v.fn)v.fn===c&&(!h||v.once)&&(!d||v.context===d)&&a(this,b);else{for(var P=0,x=[],p=v.length;P<p;P++)(v[P].fn!==c||h&&!v[P].once||d&&v[P].context!==d)&&x.push(v[P]);x.length?this._events[b]=x.length===1?x[0]:x:a(this,b)}return this},o.prototype.removeAllListeners=function(u){var c;return u?(c=r?r+u:u,this._events[c]&&a(this,c)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,t.exports=o})(R0);var jE=R0.exports,Hu={exports:{}},CE=(t,e)=>(e=e||(()=>{}),t.then(r=>new Promise(n=>{n(e())}).then(()=>r),r=>new Promise(n=>{n(e())}).then(()=>{throw r})));const AE=CE;class N0 extends Error{constructor(e){super(e),this.name="TimeoutError"}}const L0=(t,e,r)=>new Promise((n,i)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){n(t);return}const s=setTimeout(()=>{if(typeof r=="function"){try{n(r())}catch(l){i(l)}return}const a=typeof r=="string"?r:`Promise timed out after ${e} milliseconds`,o=r instanceof Error?r:new N0(a);typeof t.cancel=="function"&&t.cancel(),i(o)},e);AE(t.then(n,i),()=>{clearTimeout(s)})});Hu.exports=L0;Hu.exports.default=L0;Hu.exports.TimeoutError=N0;var IE=Hu.exports,Af={},If={};Object.defineProperty(If,"__esModule",{value:!0});function RE(t,e,r){let n=0,i=t.length;for(;i>0;){const s=i/2|0;let a=n+s;r(t[a],e)<=0?(n=++a,i-=s+1):i=s}return n}If.default=RE;Object.defineProperty(Af,"__esModule",{value:!0});const NE=If;class LE{constructor(){this._queue=[]}enqueue(e,r){r=Object.assign({priority:0},r);const n={priority:r.priority,run:e};if(this.size&&this._queue[this.size-1].priority>=r.priority){this._queue.push(n);return}const i=NE.default(this._queue,n,(s,a)=>a.priority-s.priority);this._queue.splice(i,0,n)}dequeue(){const e=this._queue.shift();return e==null?void 0:e.run}filter(e){return this._queue.filter(r=>r.priority===e.priority).map(r=>r.run)}get size(){return this._queue.length}}Af.default=LE;Object.defineProperty(I0,"__esModule",{value:!0});const $E=jE,$0=IE,DE=Af,rl=()=>{},ME=new $0.TimeoutError;class UE extends $E{constructor(e){var r,n,i,s;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=rl,this._resolveIdle=rl,e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:DE.default},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(r=e.intervalCap)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(s=(i=e.interval)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||e.interval===0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout===!0,this._isPaused=e.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=rl,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=rl,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(this._intervalId===void 0){const r=this._intervalEnd-e;if(r<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},r)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const r=this._queue.dequeue();return r?(this.emit("active"),r(),e&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,r={}){return new Promise((n,i)=>{const s=async()=>{this._pendingCount++,this._intervalCount++;try{const a=this._timeout===void 0&&r.timeout===void 0?e():$0.default(Promise.resolve(e()),r.timeout===void 0?this._timeout:r.timeout,()=>{(r.throwOnTimeout===void 0?this._throwOnTimeout:r.throwOnTimeout)&&i(ME)});n(await a)}catch(a){i(a)}this._next()};this._queue.enqueue(s,r),this._tryToStartAnother(),this.emit("add")})}async addAll(e,r){return Promise.all(e.map(async n=>this.add(n,r)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(e=>{const r=this._resolveEmpty;this._resolveEmpty=()=>{r(),e()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(e=>{const r=this._resolveIdle;this._resolveIdle=()=>{r(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}var Yr=I0.default=UE;const zE=[400,401,402,403,404,405,406,407,408,409],FE=t=>{var r,n;if(t.message.startsWith("Cancel")||t.message.startsWith("TimeoutError")||t.name==="TimeoutError"||t.message.startsWith("AbortError")||t.name==="AbortError"||(t==null?void 0:t.code)==="ECONNABORTED")throw t;const e=((r=t==null?void 0:t.response)==null?void 0:r.status)??(t==null?void 0:t.status);if(e&&zE.includes(+e))throw t;if(((n=t==null?void 0:t.error)==null?void 0:n.code)==="insufficient_quota"){const i=new Error(t==null?void 0:t.message);throw i.name="InsufficientQuotaError",i}};let Rf=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.onFailedAttempt=e.onFailedAttempt??FE;const r="default"in Yr?Yr.default:Yr;this.queue=new r({concurrency:this.maxConcurrency})}call(e,...r){return this.queue.add(()=>cu(()=>e(...r).catch(n=>{throw n instanceof Error?n:new Error(n)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,r,...n){return e.signal?Promise.race([this.call(r,...n),new Promise((i,s)=>{var a;(a=e.signal)==null||a.addEventListener("abort",()=>{s(new Error("AbortError"))})})]):this.call(r,...n)}fetch(...e){return this.call(()=>fetch(...e).then(r=>r.ok?r:Promise.reject(r)))}};const nl={},BE=new Rf({});async function VE(t,e){return t in nl||(nl[t]=BE.fetch(`https://tiktoken.pages.dev/js/${t}.json`,{signal:e==null?void 0:e.signal}).then(r=>r.json()).catch(r=>{throw delete nl[t],r})),new T0(await nl[t],e==null?void 0:e.extendedSpecialTokens)}async function HE(t,e){return VE(bE(t),e)}const lh=t=>t.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":t.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":t.startsWith("gpt-4-32k")?"gpt-4-32k":t.startsWith("gpt-4-")?"gpt-4":t;var ZE=function(t,e){if(typeof t!="string")throw new TypeError("Expected a string");return e=typeof e>"u"?"_":e,t.replace(/([a-z\d])([A-Z])/g,"$1"+e+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+e+"$2").toLowerCase()};const KE=vo(ZE);var D0={exports:{}};const qE=/[\p{Lu}]/u,WE=/[\p{Ll}]/u,Wm=/^[\p{Lu}](?![\p{Lu}])/gu,M0=/([\p{Alpha}\p{N}_]|$)/u,U0=/[_.\- ]+/,JE=new RegExp("^"+U0.source),Jm=new RegExp(U0.source+M0.source,"gu"),Gm=new RegExp("\\d+"+M0.source,"gu"),GE=(t,e,r)=>{let n=!1,i=!1,s=!1;for(let a=0;a<t.length;a++){const o=t[a];n&&qE.test(o)?(t=t.slice(0,a)+"-"+t.slice(a),n=!1,s=i,i=!0,a++):i&&s&&WE.test(o)?(t=t.slice(0,a-1)+"-"+t.slice(a-1),s=i,i=!1,n=!0):(n=e(o)===o&&r(o)!==o,s=i,i=r(o)===o&&e(o)!==o)}return t},YE=(t,e)=>(Wm.lastIndex=0,t.replace(Wm,r=>e(r))),QE=(t,e)=>(Jm.lastIndex=0,Gm.lastIndex=0,t.replace(Jm,(r,n)=>e(n)).replace(Gm,r=>e(r))),z0=(t,e)=>{if(!(typeof t=="string"||Array.isArray(t)))throw new TypeError("Expected the input to be `string | string[]`");if(e={pascalCase:!1,preserveConsecutiveUppercase:!1,...e},Array.isArray(t)?t=t.map(s=>s.trim()).filter(s=>s.length).join("-"):t=t.trim(),t.length===0)return"";const r=e.locale===!1?s=>s.toLowerCase():s=>s.toLocaleLowerCase(e.locale),n=e.locale===!1?s=>s.toUpperCase():s=>s.toLocaleUpperCase(e.locale);return t.length===1?e.pascalCase?n(t):r(t):(t!==r(t)&&(t=GE(t,r,n)),t=t.replace(JE,""),e.preserveConsecutiveUppercase?t=YE(t,r):t=r(t),e.pascalCase&&(t=n(t.charAt(0))+t.slice(1)),QE(t,n))};D0.exports=z0;D0.exports.default=z0;function XE(t,e){return(e==null?void 0:e[t])||KE(t)}function e2(t,e,r){const n={};for(const i in t)Object.hasOwn(t,i)&&(n[e(i,r)]=t[i]);return n}function Ym(t){return Array.isArray(t)?[...t]:{...t}}function t2(t,e){const r=Ym(t);for(const[n,i]of Object.entries(e)){const[s,...a]=n.split(".").reverse();let o=r;for(const l of a.reverse()){if(o[l]===void 0)break;o[l]=Ym(o[l]),o=o[l]}o[s]!==void 0&&(o[s]={lc:1,type:"secret",id:[i]})}return r}function F0(t){const e=Object.getPrototypeOf(t);return typeof t.lc_name=="function"&&(typeof e.lc_name!="function"||t.lc_name()!==e.lc_name())?t.lc_name():t.name}class zn{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,F0(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}constructor(e,...r){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_kwargs=e||{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof zn||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},r={},n=Object.keys(this.lc_kwargs).reduce((i,s)=>(i[s]=s in this?this[s]:this.lc_kwargs[s],i),{});for(let i=Object.getPrototypeOf(this);i;i=Object.getPrototypeOf(i))Object.assign(e,Reflect.get(i,"lc_aliases",this)),Object.assign(r,Reflect.get(i,"lc_secrets",this)),Object.assign(n,Reflect.get(i,"lc_attributes",this));return Object.keys(r).forEach(i=>{let s=this,a=n;const[o,...l]=i.split(".").reverse();for(const u of l.reverse()){if(!(u in s)||s[u]===void 0)return;(!(u in a)||a[u]===void 0)&&(typeof s[u]=="object"&&s[u]!=null?a[u]={}:Array.isArray(s[u])&&(a[u]=[])),s=s[u],a=a[u]}o in s&&s[o]!==void 0&&(a[o]=a[o]||s[o])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:e2(Object.keys(r).length?t2(n,r):n,XE,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}const B0="__run";class Nf{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new Nf({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}}class Ln extends zn{get text(){return this.content}constructor(e,r){typeof e=="string"&&(e={content:e,additional_kwargs:r}),e.additional_kwargs||(e.additional_kwargs={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","schema"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}}class Po extends Ln{static _mergeAdditionalKwargs(e,r){const n={...e};for(const[i,s]of Object.entries(r))if(n[i]===void 0)n[i]=s;else{if(typeof n[i]!=typeof s)throw new Error(`additional_kwargs[${i}] already exists in the message chunk, but with a different type.`);if(typeof n[i]=="string")n[i]=n[i]+s;else if(!Array.isArray(n[i])&&typeof n[i]=="object")n[i]=this._mergeAdditionalKwargs(n[i],s);else throw new Error(`additional_kwargs[${i}] already exists in this message chunk.`)}return n}}class Si extends Ln{static lc_name(){return"HumanMessage"}_getType(){return"human"}}class du extends Po{static lc_name(){return"HumanMessageChunk"}_getType(){return"human"}concat(e){return new du({content:this.content+e.content,additional_kwargs:du._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs)})}}class Zu extends Ln{static lc_name(){return"AIMessage"}_getType(){return"ai"}}class hu extends Po{static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}concat(e){return new hu({content:this.content+e.content,additional_kwargs:hu._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs)})}}class Lf extends Ln{static lc_name(){return"SystemMessage"}_getType(){return"system"}}class fu extends Po{static lc_name(){return"SystemMessageChunk"}_getType(){return"system"}concat(e){return new fu({content:this.content+e.content,additional_kwargs:fu._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs)})}}class pu extends Po{static lc_name(){return"FunctionMessageChunk"}_getType(){return"function"}concat(e){return new pu({content:this.content+e.content,additional_kwargs:pu._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs),name:this.name??""})}}class Ku extends Ln{static lc_name(){return"ChatMessage"}constructor(e,r){typeof e=="string"&&(e={content:e,role:r}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}static isInstance(e){return e._getType()==="generic"}}function V0(t){return typeof t._getType=="function"}function Ia(t){if(typeof t=="string")return new Si(t);if(V0(t))return t;const[e,r]=t;if(e==="human"||e==="user")return new Si({content:r});if(e==="ai"||e==="assistant")return new Zu({content:r});if(e==="system")return new Lf({content:r});throw new Error("Unable to coerce message from array: only human, AI, or system message coercion is currently supported.")}class mu extends Po{static lc_name(){return"ChatMessageChunk"}constructor(e,r){typeof e=="string"&&(e={content:e,role:r}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}concat(e){return new mu({content:this.content+e.content,additional_kwargs:mu._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs),role:this.role})}}class $f extends Nf{constructor(e){super(e),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.message=e.message}concat(e){return new $f({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo},message:this.message.concat(e.message)})}}class H0 extends zn{}class r2 extends zn{addUserMessage(e){return this.addMessage(new Si(e))}addAIChatMessage(e){return this.addMessage(new Zu(e))}}class n2{}var Z0={},qu={},Ys={},pe;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{const s={};for(const a of i)s[a]=a;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(o=>typeof i[i[o]]!="number"),a={};for(const o of s)a[o]=i[o];return t.objectValues(a)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const a in i)Object.prototype.hasOwnProperty.call(i,a)&&s.push(a);return s},t.find=(i,s)=>{for(const a of i)if(s(a))return a},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,s=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(s)}t.joinValues=n,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(pe||(pe={}));var gu;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(gu||(gu={}));const J=pe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),qr=t=>{switch(typeof t){case"undefined":return J.undefined;case"string":return J.string;case"number":return isNaN(t)?J.nan:J.number;case"boolean":return J.boolean;case"function":return J.function;case"bigint":return J.bigint;case"symbol":return J.symbol;case"object":return Array.isArray(t)?J.array:t===null?J.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?J.promise:typeof Map<"u"&&t instanceof Map?J.map:typeof Set<"u"&&t instanceof Set?J.set:typeof Date<"u"&&t instanceof Date?J.date:J.object;default:return J.unknown}},B=pe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),K0=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class sr extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const r=e||function(s){return s.message},n={_errors:[]},i=s=>{for(const a of s.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let o=n,l=0;for(;l<a.path.length;){const u=a.path[l];l===a.path.length-1?(o[u]=o[u]||{_errors:[]},o[u]._errors.push(r(a))):o[u]=o[u]||{_errors:[]},o=o[u],l++}}};return i(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,pe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}sr.create=t=>new sr(t);const ws=(t,e)=>{let r;switch(t.code){case B.invalid_type:t.received===J.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case B.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,pe.jsonStringifyReplacer)}`;break;case B.unrecognized_keys:r=`Unrecognized key(s) in object: ${pe.joinValues(t.keys,", ")}`;break;case B.invalid_union:r="Invalid input";break;case B.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${pe.joinValues(t.options)}`;break;case B.invalid_enum_value:r=`Invalid enum value. Expected ${pe.joinValues(t.options)}, received '${t.received}'`;break;case B.invalid_arguments:r="Invalid function arguments";break;case B.invalid_return_type:r="Invalid function return type";break;case B.invalid_date:r="Invalid date";break;case B.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:pe.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case B.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case B.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case B.custom:r="Invalid input";break;case B.invalid_intersection_types:r="Intersection results could not be merged";break;case B.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case B.not_finite:r="Number must be finite";break;default:r=e.defaultError,pe.assertNever(t)}return{message:r}};let q0=ws;function W0(t){q0=t}function ao(){return q0}const oo=t=>{const{data:e,path:r,errorMaps:n,issueData:i}=t,s=[...r,...i.path||[]],a={...i,path:s};let o="";const l=n.filter(u=>!!u).slice().reverse();for(const u of l)o=u(a,{data:e,defaultError:o}).message;return{...i,path:s,message:i.message||o}},J0=[];function Y(t,e){const r=oo({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ao(),ws].filter(n=>!!n)});t.common.issues.push(r)}class ut{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const i of r){if(i.status==="aborted")return se;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const i of r)n.push({key:await i.key,value:await i.value});return ut.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const i of r){const{key:s,value:a}=i;if(s.status==="aborted"||a.status==="aborted")return se;s.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(n[s.value]=a.value)}return{status:e.value,value:n}}}const se=Object.freeze({status:"aborted"}),Df=t=>({status:"dirty",value:t}),xt=t=>({status:"valid",value:t}),yu=t=>t.status==="aborted",vu=t=>t.status==="dirty",bs=t=>t.status==="valid",lo=t=>typeof Promise<"u"&&t instanceof Promise;var ee;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ee||(ee={}));class $r{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Qm=(t,e)=>{if(bs(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new sr(t.common.issues);return this._error=r,this._error}}};function oe(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(a,o)=>a.code!=="invalid_type"?{message:o.defaultError}:typeof o.data>"u"?{message:n??o.defaultError}:{message:r??o.defaultError},description:i}}class ae{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return qr(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:qr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ut,ctx:{common:e.parent.common,data:e.data,parsedType:qr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(lo(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;const i={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:qr(e)},s=this._parseSync({data:e,path:i.path,parent:i});return Qm(i,s)}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:qr(e)},i=this._parse({data:e,path:n.path,parent:n}),s=await(lo(i)?i:Promise.resolve(i));return Qm(n,s)}refine(e,r){const n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,s)=>{const a=e(i),o=()=>s.addIssue({code:B.custom,...n(i)});return typeof Promise<"u"&&a instanceof Promise?a.then(l=>l?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new Zt({schema:this,typeName:re.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Lr.create(this,this._def)}nullable(){return Vn.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ar.create(this,this._def)}promise(){return Oi.create(this,this._def)}or(e){return Es.create([this,e],this._def)}and(e){return Os.create(this,e,this._def)}transform(e){return new Zt({...oe(this._def),schema:this,typeName:re.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new As({...oe(this._def),innerType:this,defaultValue:r,typeName:re.ZodDefault})}brand(){return new Mf({typeName:re.ZodBranded,type:this,...oe(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new fo({...oe(this._def),innerType:this,catchValue:r,typeName:re.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Ms.create(this,e)}readonly(){return mo.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const i2=/^c[^\s-]{8,}$/i,s2=/^[a-z][a-z0-9]*$/,a2=/^[0-9A-HJKMNP-TV-Z]{26}$/,o2=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,l2=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,u2="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Qc;const c2=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,d2=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,h2=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function f2(t,e){return!!((e==="v4"||!e)&&c2.test(t)||(e==="v6"||!e)&&d2.test(t))}class nr extends ae{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==J.string){const s=this._getOrReturnCtx(e);return Y(s,{code:B.invalid_type,expected:J.string,received:s.parsedType}),se}const n=new ut;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),Y(i,{code:B.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),Y(i,{code:B.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="length"){const a=e.data.length>s.value,o=e.data.length<s.value;(a||o)&&(i=this._getOrReturnCtx(e,i),a?Y(i,{code:B.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):o&&Y(i,{code:B.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if(s.kind==="email")l2.test(e.data)||(i=this._getOrReturnCtx(e,i),Y(i,{validation:"email",code:B.invalid_string,message:s.message}),n.dirty());else if(s.kind==="emoji")Qc||(Qc=new RegExp(u2,"u")),Qc.test(e.data)||(i=this._getOrReturnCtx(e,i),Y(i,{validation:"emoji",code:B.invalid_string,message:s.message}),n.dirty());else if(s.kind==="uuid")o2.test(e.data)||(i=this._getOrReturnCtx(e,i),Y(i,{validation:"uuid",code:B.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid")i2.test(e.data)||(i=this._getOrReturnCtx(e,i),Y(i,{validation:"cuid",code:B.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid2")s2.test(e.data)||(i=this._getOrReturnCtx(e,i),Y(i,{validation:"cuid2",code:B.invalid_string,message:s.message}),n.dirty());else if(s.kind==="ulid")a2.test(e.data)||(i=this._getOrReturnCtx(e,i),Y(i,{validation:"ulid",code:B.invalid_string,message:s.message}),n.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Y(i,{validation:"url",code:B.invalid_string,message:s.message}),n.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Y(i,{validation:"regex",code:B.invalid_string,message:s.message}),n.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),Y(i,{code:B.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),Y(i,{code:B.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),Y(i,{code:B.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty()):s.kind==="datetime"?h2(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Y(i,{code:B.invalid_string,validation:"datetime",message:s.message}),n.dirty()):s.kind==="ip"?f2(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Y(i,{validation:"ip",code:B.invalid_string,message:s.message}),n.dirty()):pe.assertNever(s);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:B.invalid_string,...ee.errToObj(n)})}_addCheck(e){return new nr({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ee.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ee.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ee.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ee.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ee.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ee.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ee.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ee.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(r=e==null?void 0:e.offset)!==null&&r!==void 0?r:!1,...ee.errToObj(e==null?void 0:e.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...ee.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...ee.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...ee.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...ee.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...ee.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...ee.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...ee.errToObj(r)})}nonempty(e){return this.min(1,ee.errToObj(e))}trim(){return new nr({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new nr({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new nr({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}nr.create=t=>{var e;return new nr({checks:[],typeName:re.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...oe(t)})};function p2(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,s=parseInt(t.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return s%a/Math.pow(10,i)}class rn extends ae{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==J.number){const s=this._getOrReturnCtx(e);return Y(s,{code:B.invalid_type,expected:J.number,received:s.parsedType}),se}let n;const i=new ut;for(const s of this._def.checks)s.kind==="int"?pe.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),Y(n,{code:B.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),Y(n,{code:B.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),Y(n,{code:B.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?p2(e.data,s.value)!==0&&(n=this._getOrReturnCtx(e,n),Y(n,{code:B.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),Y(n,{code:B.not_finite,message:s.message}),i.dirty()):pe.assertNever(s);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ee.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ee.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ee.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ee.toString(r))}setLimit(e,r,n,i){return new rn({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ee.toString(i)}]})}_addCheck(e){return new rn({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ee.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ee.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ee.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ee.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ee.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ee.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:ee.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ee.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ee.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&pe.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}rn.create=t=>new rn({checks:[],typeName:re.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...oe(t)});class nn extends ae{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==J.bigint){const s=this._getOrReturnCtx(e);return Y(s,{code:B.invalid_type,expected:J.bigint,received:s.parsedType}),se}let n;const i=new ut;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),Y(n,{code:B.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),Y(n,{code:B.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),Y(n,{code:B.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):pe.assertNever(s);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ee.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ee.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ee.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ee.toString(r))}setLimit(e,r,n,i){return new nn({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ee.toString(i)}]})}_addCheck(e){return new nn({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ee.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ee.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ee.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ee.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ee.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}nn.create=t=>{var e;return new nn({checks:[],typeName:re.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...oe(t)})};class xs extends ae{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==J.boolean){const n=this._getOrReturnCtx(e);return Y(n,{code:B.invalid_type,expected:J.boolean,received:n.parsedType}),se}return xt(e.data)}}xs.create=t=>new xs({typeName:re.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...oe(t)});class Fn extends ae{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==J.date){const s=this._getOrReturnCtx(e);return Y(s,{code:B.invalid_type,expected:J.date,received:s.parsedType}),se}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return Y(s,{code:B.invalid_date}),se}const n=new ut;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),Y(i,{code:B.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),n.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),Y(i,{code:B.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),n.dirty()):pe.assertNever(s);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Fn({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:ee.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:ee.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}Fn.create=t=>new Fn({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:re.ZodDate,...oe(t)});class uo extends ae{_parse(e){if(this._getType(e)!==J.symbol){const n=this._getOrReturnCtx(e);return Y(n,{code:B.invalid_type,expected:J.symbol,received:n.parsedType}),se}return xt(e.data)}}uo.create=t=>new uo({typeName:re.ZodSymbol,...oe(t)});class ks extends ae{_parse(e){if(this._getType(e)!==J.undefined){const n=this._getOrReturnCtx(e);return Y(n,{code:B.invalid_type,expected:J.undefined,received:n.parsedType}),se}return xt(e.data)}}ks.create=t=>new ks({typeName:re.ZodUndefined,...oe(t)});class Ss extends ae{_parse(e){if(this._getType(e)!==J.null){const n=this._getOrReturnCtx(e);return Y(n,{code:B.invalid_type,expected:J.null,received:n.parsedType}),se}return xt(e.data)}}Ss.create=t=>new Ss({typeName:re.ZodNull,...oe(t)});class Ei extends ae{constructor(){super(...arguments),this._any=!0}_parse(e){return xt(e.data)}}Ei.create=t=>new Ei({typeName:re.ZodAny,...oe(t)});class $n extends ae{constructor(){super(...arguments),this._unknown=!0}_parse(e){return xt(e.data)}}$n.create=t=>new $n({typeName:re.ZodUnknown,...oe(t)});class Dr extends ae{_parse(e){const r=this._getOrReturnCtx(e);return Y(r,{code:B.invalid_type,expected:J.never,received:r.parsedType}),se}}Dr.create=t=>new Dr({typeName:re.ZodNever,...oe(t)});class co extends ae{_parse(e){if(this._getType(e)!==J.undefined){const n=this._getOrReturnCtx(e);return Y(n,{code:B.invalid_type,expected:J.void,received:n.parsedType}),se}return xt(e.data)}}co.create=t=>new co({typeName:re.ZodVoid,...oe(t)});class ar extends ae{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==J.array)return Y(r,{code:B.invalid_type,expected:J.array,received:r.parsedType}),se;if(i.exactLength!==null){const a=r.data.length>i.exactLength.value,o=r.data.length<i.exactLength.value;(a||o)&&(Y(r,{code:a?B.too_big:B.too_small,minimum:o?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(Y(r,{code:B.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(Y(r,{code:B.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,o)=>i.type._parseAsync(new $r(r,a,r.path,o)))).then(a=>ut.mergeArray(n,a));const s=[...r.data].map((a,o)=>i.type._parseSync(new $r(r,a,r.path,o)));return ut.mergeArray(n,s)}get element(){return this._def.type}min(e,r){return new ar({...this._def,minLength:{value:e,message:ee.toString(r)}})}max(e,r){return new ar({...this._def,maxLength:{value:e,message:ee.toString(r)}})}length(e,r){return new ar({...this._def,exactLength:{value:e,message:ee.toString(r)}})}nonempty(e){return this.min(1,e)}}ar.create=(t,e)=>new ar({type:t,minLength:null,maxLength:null,exactLength:null,typeName:re.ZodArray,...oe(e)});function Fi(t){if(t instanceof Ae){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=Lr.create(Fi(n))}return new Ae({...t._def,shape:()=>e})}else return t instanceof ar?new ar({...t._def,type:Fi(t.element)}):t instanceof Lr?Lr.create(Fi(t.unwrap())):t instanceof Vn?Vn.create(Fi(t.unwrap())):t instanceof xr?xr.create(t.items.map(e=>Fi(e))):t}class Ae extends ae{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=pe.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==J.object){const u=this._getOrReturnCtx(e);return Y(u,{code:B.invalid_type,expected:J.object,received:u.parsedType}),se}const{status:n,ctx:i}=this._processInputParams(e),{shape:s,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof Dr&&this._def.unknownKeys==="strip"))for(const u in i.data)a.includes(u)||o.push(u);const l=[];for(const u of a){const c=s[u],d=i.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new $r(i,d,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof Dr){const u=this._def.unknownKeys;if(u==="passthrough")for(const c of o)l.push({key:{status:"valid",value:c},value:{status:"valid",value:i.data[c]}});else if(u==="strict")o.length>0&&(Y(i,{code:B.unrecognized_keys,keys:o}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const c of o){const d=i.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new $r(i,d,i.path,c)),alwaysSet:c in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const c of l){const d=await c.key;u.push({key:d,value:await c.value,alwaysSet:c.alwaysSet})}return u}).then(u=>ut.mergeObjectSync(n,u)):ut.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(e){return ee.errToObj,new Ae({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,s,a,o;const l=(a=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,r,n).message)!==null&&a!==void 0?a:n.defaultError;return r.code==="unrecognized_keys"?{message:(o=ee.errToObj(e).message)!==null&&o!==void 0?o:l}:{message:l}}}:{}})}strip(){return new Ae({...this._def,unknownKeys:"strip"})}passthrough(){return new Ae({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ae({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ae({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:re.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new Ae({...this._def,catchall:e})}pick(e){const r={};return pe.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new Ae({...this._def,shape:()=>r})}omit(e){const r={};return pe.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new Ae({...this._def,shape:()=>r})}deepPartial(){return Fi(this)}partial(e){const r={};return pe.objectKeys(this.shape).forEach(n=>{const i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new Ae({...this._def,shape:()=>r})}required(e){const r={};return pe.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let s=this.shape[n];for(;s instanceof Lr;)s=s._def.innerType;r[n]=s}}),new Ae({...this._def,shape:()=>r})}keyof(){return G0(pe.objectKeys(this.shape))}}Ae.create=(t,e)=>new Ae({shape:()=>t,unknownKeys:"strip",catchall:Dr.create(),typeName:re.ZodObject,...oe(e)});Ae.strictCreate=(t,e)=>new Ae({shape:()=>t,unknownKeys:"strict",catchall:Dr.create(),typeName:re.ZodObject,...oe(e)});Ae.lazycreate=(t,e)=>new Ae({shape:t,unknownKeys:"strip",catchall:Dr.create(),typeName:re.ZodObject,...oe(e)});class Es extends ae{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function i(s){for(const o of s)if(o.result.status==="valid")return o.result;for(const o of s)if(o.result.status==="dirty")return r.common.issues.push(...o.ctx.common.issues),o.result;const a=s.map(o=>new sr(o.ctx.common.issues));return Y(r,{code:B.invalid_union,unionErrors:a}),se}if(r.common.async)return Promise.all(n.map(async s=>{const a={...r,common:{...r.common,issues:[]},parent:null};return{result:await s._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(i);{let s;const a=[];for(const l of n){const u={...r,common:{...r.common,issues:[]},parent:null},c=l._parseSync({data:r.data,path:r.path,parent:u});if(c.status==="valid")return c;c.status==="dirty"&&!s&&(s={result:c,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(s)return r.common.issues.push(...s.ctx.common.issues),s.result;const o=a.map(l=>new sr(l));return Y(r,{code:B.invalid_union,unionErrors:o}),se}}get options(){return this._def.options}}Es.create=(t,e)=>new Es({options:t,typeName:re.ZodUnion,...oe(e)});const _l=t=>t instanceof Ts?_l(t.schema):t instanceof Zt?_l(t.innerType()):t instanceof js?[t.value]:t instanceof sn?t.options:t instanceof Cs?Object.keys(t.enum):t instanceof As?_l(t._def.innerType):t instanceof ks?[void 0]:t instanceof Ss?[null]:null;class To extends ae{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==J.object)return Y(r,{code:B.invalid_type,expected:J.object,received:r.parsedType}),se;const n=this.discriminator,i=r.data[n],s=this.optionsMap.get(i);return s?r.common.async?s._parseAsync({data:r.data,path:r.path,parent:r}):s._parseSync({data:r.data,path:r.path,parent:r}):(Y(r,{code:B.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),se)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){const i=new Map;for(const s of r){const a=_l(s.shape[e]);if(!a)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of a){if(i.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);i.set(o,s)}}return new To({typeName:re.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...oe(n)})}}function uh(t,e){const r=qr(t),n=qr(e);if(t===e)return{valid:!0,data:t};if(r===J.object&&n===J.object){const i=pe.objectKeys(e),s=pe.objectKeys(t).filter(o=>i.indexOf(o)!==-1),a={...t,...e};for(const o of s){const l=uh(t[o],e[o]);if(!l.valid)return{valid:!1};a[o]=l.data}return{valid:!0,data:a}}else if(r===J.array&&n===J.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const a=t[s],o=e[s],l=uh(a,o);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return r===J.date&&n===J.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Os extends ae{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=(s,a)=>{if(yu(s)||yu(a))return se;const o=uh(s.value,a.value);return o.valid?((vu(s)||vu(a))&&r.dirty(),{status:r.value,value:o.data}):(Y(n,{code:B.invalid_intersection_types}),se)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([s,a])=>i(s,a)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Os.create=(t,e,r)=>new Os({left:t,right:e,typeName:re.ZodIntersection,...oe(r)});class xr extends ae{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.array)return Y(n,{code:B.invalid_type,expected:J.array,received:n.parsedType}),se;if(n.data.length<this._def.items.length)return Y(n,{code:B.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),se;!this._def.rest&&n.data.length>this._def.items.length&&(Y(n,{code:B.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const s=[...n.data].map((a,o)=>{const l=this._def.items[o]||this._def.rest;return l?l._parse(new $r(n,a,n.path,o)):null}).filter(a=>!!a);return n.common.async?Promise.all(s).then(a=>ut.mergeArray(r,a)):ut.mergeArray(r,s)}get items(){return this._def.items}rest(e){return new xr({...this._def,rest:e})}}xr.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new xr({items:t,typeName:re.ZodTuple,rest:null,...oe(e)})};class Ps extends ae{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.object)return Y(n,{code:B.invalid_type,expected:J.object,received:n.parsedType}),se;const i=[],s=this._def.keyType,a=this._def.valueType;for(const o in n.data)i.push({key:s._parse(new $r(n,o,n.path,o)),value:a._parse(new $r(n,n.data[o],n.path,o))});return n.common.async?ut.mergeObjectAsync(r,i):ut.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof ae?new Ps({keyType:e,valueType:r,typeName:re.ZodRecord,...oe(n)}):new Ps({keyType:nr.create(),valueType:e,typeName:re.ZodRecord,...oe(r)})}}class ho extends ae{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.map)return Y(n,{code:B.invalid_type,expected:J.map,received:n.parsedType}),se;const i=this._def.keyType,s=this._def.valueType,a=[...n.data.entries()].map(([o,l],u)=>({key:i._parse(new $r(n,o,n.path,[u,"key"])),value:s._parse(new $r(n,l,n.path,[u,"value"]))}));if(n.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const l of a){const u=await l.key,c=await l.value;if(u.status==="aborted"||c.status==="aborted")return se;(u.status==="dirty"||c.status==="dirty")&&r.dirty(),o.set(u.value,c.value)}return{status:r.value,value:o}})}else{const o=new Map;for(const l of a){const u=l.key,c=l.value;if(u.status==="aborted"||c.status==="aborted")return se;(u.status==="dirty"||c.status==="dirty")&&r.dirty(),o.set(u.value,c.value)}return{status:r.value,value:o}}}}ho.create=(t,e,r)=>new ho({valueType:e,keyType:t,typeName:re.ZodMap,...oe(r)});class Bn extends ae{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.set)return Y(n,{code:B.invalid_type,expected:J.set,received:n.parsedType}),se;const i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(Y(n,{code:B.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(Y(n,{code:B.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());const s=this._def.valueType;function a(l){const u=new Set;for(const c of l){if(c.status==="aborted")return se;c.status==="dirty"&&r.dirty(),u.add(c.value)}return{status:r.value,value:u}}const o=[...n.data.values()].map((l,u)=>s._parse(new $r(n,l,n.path,u)));return n.common.async?Promise.all(o).then(l=>a(l)):a(o)}min(e,r){return new Bn({...this._def,minSize:{value:e,message:ee.toString(r)}})}max(e,r){return new Bn({...this._def,maxSize:{value:e,message:ee.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}Bn.create=(t,e)=>new Bn({valueType:t,minSize:null,maxSize:null,typeName:re.ZodSet,...oe(e)});class yi extends ae{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==J.function)return Y(r,{code:B.invalid_type,expected:J.function,received:r.parsedType}),se;function n(o,l){return oo({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,ao(),ws].filter(u=>!!u),issueData:{code:B.invalid_arguments,argumentsError:l}})}function i(o,l){return oo({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,ao(),ws].filter(u=>!!u),issueData:{code:B.invalid_return_type,returnTypeError:l}})}const s={errorMap:r.common.contextualErrorMap},a=r.data;if(this._def.returns instanceof Oi){const o=this;return xt(async function(...l){const u=new sr([]),c=await o._def.args.parseAsync(l,s).catch(b=>{throw u.addIssue(n(l,b)),u}),d=await Reflect.apply(a,this,c);return await o._def.returns._def.type.parseAsync(d,s).catch(b=>{throw u.addIssue(i(d,b)),u})})}else{const o=this;return xt(function(...l){const u=o._def.args.safeParse(l,s);if(!u.success)throw new sr([n(l,u.error)]);const c=Reflect.apply(a,this,u.data),d=o._def.returns.safeParse(c,s);if(!d.success)throw new sr([i(c,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new yi({...this._def,args:xr.create(e).rest($n.create())})}returns(e){return new yi({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new yi({args:e||xr.create([]).rest($n.create()),returns:r||$n.create(),typeName:re.ZodFunction,...oe(n)})}}class Ts extends ae{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}Ts.create=(t,e)=>new Ts({getter:t,typeName:re.ZodLazy,...oe(e)});class js extends ae{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return Y(r,{received:r.data,code:B.invalid_literal,expected:this._def.value}),se}return{status:"valid",value:e.data}}get value(){return this._def.value}}js.create=(t,e)=>new js({value:t,typeName:re.ZodLiteral,...oe(e)});function G0(t,e){return new sn({values:t,typeName:re.ZodEnum,...oe(e)})}class sn extends ae{_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return Y(r,{expected:pe.joinValues(n),received:r.parsedType,code:B.invalid_type}),se}if(this._def.values.indexOf(e.data)===-1){const r=this._getOrReturnCtx(e),n=this._def.values;return Y(r,{received:r.data,code:B.invalid_enum_value,options:n}),se}return xt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e){return sn.create(e)}exclude(e){return sn.create(this.options.filter(r=>!e.includes(r)))}}sn.create=G0;class Cs extends ae{_parse(e){const r=pe.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==J.string&&n.parsedType!==J.number){const i=pe.objectValues(r);return Y(n,{expected:pe.joinValues(i),received:n.parsedType,code:B.invalid_type}),se}if(r.indexOf(e.data)===-1){const i=pe.objectValues(r);return Y(n,{received:n.data,code:B.invalid_enum_value,options:i}),se}return xt(e.data)}get enum(){return this._def.values}}Cs.create=(t,e)=>new Cs({values:t,typeName:re.ZodNativeEnum,...oe(e)});class Oi extends ae{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==J.promise&&r.common.async===!1)return Y(r,{code:B.invalid_type,expected:J.promise,received:r.parsedType}),se;const n=r.parsedType===J.promise?r.data:Promise.resolve(r.data);return xt(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Oi.create=(t,e)=>new Oi({type:t,typeName:re.ZodPromise,...oe(e)});class Zt extends ae{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===re.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:a=>{Y(n,a),a.fatal?r.abort():r.dirty()},get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const a=i.transform(n.data,s);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(a).then(o=>this._def.schema._parseAsync({data:o,path:n.path,parent:n})):this._def.schema._parseSync({data:a,path:n.path,parent:n})}if(i.type==="refinement"){const a=o=>{const l=i.refinement(o,s);if(n.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?se:(o.status==="dirty"&&r.dirty(),a(o.value),{status:r.value,value:o.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>o.status==="aborted"?se:(o.status==="dirty"&&r.dirty(),a(o.value).then(()=>({status:r.value,value:o.value}))))}if(i.type==="transform")if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!bs(a))return a;const o=i.transform(a.value,s);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:o}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>bs(a)?Promise.resolve(i.transform(a.value,s)).then(o=>({status:r.value,value:o})):a);pe.assertNever(i)}}Zt.create=(t,e,r)=>new Zt({schema:t,typeName:re.ZodEffects,effect:e,...oe(r)});Zt.createWithPreprocess=(t,e,r)=>new Zt({schema:e,effect:{type:"preprocess",transform:t},typeName:re.ZodEffects,...oe(r)});class Lr extends ae{_parse(e){return this._getType(e)===J.undefined?xt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Lr.create=(t,e)=>new Lr({innerType:t,typeName:re.ZodOptional,...oe(e)});class Vn extends ae{_parse(e){return this._getType(e)===J.null?xt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Vn.create=(t,e)=>new Vn({innerType:t,typeName:re.ZodNullable,...oe(e)});class As extends ae{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===J.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}As.create=(t,e)=>new As({innerType:t,typeName:re.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...oe(e)});class fo extends ae{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return lo(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new sr(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new sr(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}fo.create=(t,e)=>new fo({innerType:t,typeName:re.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...oe(e)});class po extends ae{_parse(e){if(this._getType(e)!==J.nan){const n=this._getOrReturnCtx(e);return Y(n,{code:B.invalid_type,expected:J.nan,received:n.parsedType}),se}return{status:"valid",value:e.data}}}po.create=t=>new po({typeName:re.ZodNaN,...oe(t)});const Y0=Symbol("zod_brand");class Mf extends ae{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class Ms extends ae{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?se:s.status==="dirty"?(r.dirty(),Df(s.value)):this._def.out._parseAsync({data:s.value,path:n.path,parent:n})})();{const i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?se:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new Ms({in:e,out:r,typeName:re.ZodPipeline})}}class mo extends ae{_parse(e){const r=this._def.innerType._parse(e);return bs(r)&&(r.value=Object.freeze(r.value)),r}}mo.create=(t,e)=>new mo({innerType:t,typeName:re.ZodReadonly,...oe(e)});const Uf=(t,e={},r)=>t?Ei.create().superRefine((n,i)=>{var s,a;if(!t(n)){const o=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,l=(a=(s=o.fatal)!==null&&s!==void 0?s:r)!==null&&a!==void 0?a:!0,u=typeof o=="string"?{message:o}:o;i.addIssue({code:"custom",...u,fatal:l})}}):Ei.create(),Q0={object:Ae.lazycreate};var re;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(re||(re={}));const X0=(t,e={message:`Input not instance of ${t.name}`})=>Uf(r=>r instanceof t,e),zf=nr.create,Ff=rn.create,e_=po.create,t_=nn.create,Bf=xs.create,r_=Fn.create,n_=uo.create,i_=ks.create,s_=Ss.create,a_=Ei.create,o_=$n.create,l_=Dr.create,u_=co.create,c_=ar.create,d_=Ae.create,h_=Ae.strictCreate,f_=Es.create,p_=To.create,m_=Os.create,g_=xr.create,y_=Ps.create,v_=ho.create,__=Bn.create,w_=yi.create,b_=Ts.create,x_=js.create,k_=sn.create,S_=Cs.create,E_=Oi.create,_u=Zt.create,O_=Lr.create,P_=Vn.create,T_=Zt.createWithPreprocess,j_=Ms.create,C_=()=>zf().optional(),A_=()=>Ff().optional(),I_=()=>Bf().optional(),R_={string:t=>nr.create({...t,coerce:!0}),number:t=>rn.create({...t,coerce:!0}),boolean:t=>xs.create({...t,coerce:!0}),bigint:t=>nn.create({...t,coerce:!0}),date:t=>Fn.create({...t,coerce:!0})},N_=se;var Xm=Object.freeze({__proto__:null,defaultErrorMap:ws,setErrorMap:W0,getErrorMap:ao,makeIssue:oo,EMPTY_PATH:J0,addIssueToContext:Y,ParseStatus:ut,INVALID:se,DIRTY:Df,OK:xt,isAborted:yu,isDirty:vu,isValid:bs,isAsync:lo,get util(){return pe},get objectUtil(){return gu},ZodParsedType:J,getParsedType:qr,ZodType:ae,ZodString:nr,ZodNumber:rn,ZodBigInt:nn,ZodBoolean:xs,ZodDate:Fn,ZodSymbol:uo,ZodUndefined:ks,ZodNull:Ss,ZodAny:Ei,ZodUnknown:$n,ZodNever:Dr,ZodVoid:co,ZodArray:ar,ZodObject:Ae,ZodUnion:Es,ZodDiscriminatedUnion:To,ZodIntersection:Os,ZodTuple:xr,ZodRecord:Ps,ZodMap:ho,ZodSet:Bn,ZodFunction:yi,ZodLazy:Ts,ZodLiteral:js,ZodEnum:sn,ZodNativeEnum:Cs,ZodPromise:Oi,ZodEffects:Zt,ZodTransformer:Zt,ZodOptional:Lr,ZodNullable:Vn,ZodDefault:As,ZodCatch:fo,ZodNaN:po,BRAND:Y0,ZodBranded:Mf,ZodPipeline:Ms,ZodReadonly:mo,custom:Uf,Schema:ae,ZodSchema:ae,late:Q0,get ZodFirstPartyTypeKind(){return re},coerce:R_,any:a_,array:c_,bigint:t_,boolean:Bf,date:r_,discriminatedUnion:p_,effect:_u,enum:k_,function:w_,instanceof:X0,intersection:m_,lazy:b_,literal:x_,map:v_,nan:e_,nativeEnum:S_,never:l_,null:s_,nullable:P_,number:Ff,object:d_,oboolean:I_,onumber:A_,optional:O_,ostring:C_,pipeline:j_,preprocess:T_,promise:E_,record:y_,set:__,strictObject:h_,string:zf,symbol:n_,transformer:_u,tuple:g_,undefined:i_,union:f_,unknown:o_,void:u_,NEVER:N_,ZodIssueCode:B,quotelessJson:K0,ZodError:sr});const m2=Object.freeze(Object.defineProperty({__proto__:null,BRAND:Y0,DIRTY:Df,EMPTY_PATH:J0,INVALID:se,NEVER:N_,OK:xt,ParseStatus:ut,Schema:ae,ZodAny:Ei,ZodArray:ar,ZodBigInt:nn,ZodBoolean:xs,ZodBranded:Mf,ZodCatch:fo,ZodDate:Fn,ZodDefault:As,ZodDiscriminatedUnion:To,ZodEffects:Zt,ZodEnum:sn,ZodError:sr,get ZodFirstPartyTypeKind(){return re},ZodFunction:yi,ZodIntersection:Os,ZodIssueCode:B,ZodLazy:Ts,ZodLiteral:js,ZodMap:ho,ZodNaN:po,ZodNativeEnum:Cs,ZodNever:Dr,ZodNull:Ss,ZodNullable:Vn,ZodNumber:rn,ZodObject:Ae,ZodOptional:Lr,ZodParsedType:J,ZodPipeline:Ms,ZodPromise:Oi,ZodReadonly:mo,ZodRecord:Ps,ZodSchema:ae,ZodSet:Bn,ZodString:nr,ZodSymbol:uo,ZodTransformer:Zt,ZodTuple:xr,ZodType:ae,ZodUndefined:ks,ZodUnion:Es,ZodUnknown:$n,ZodVoid:co,addIssueToContext:Y,any:a_,array:c_,bigint:t_,boolean:Bf,coerce:R_,custom:Uf,date:r_,default:Xm,defaultErrorMap:ws,discriminatedUnion:p_,effect:_u,enum:k_,function:w_,getErrorMap:ao,getParsedType:qr,instanceof:X0,intersection:m_,isAborted:yu,isAsync:lo,isDirty:vu,isValid:bs,late:Q0,lazy:b_,literal:x_,makeIssue:oo,map:v_,nan:e_,nativeEnum:S_,never:l_,null:s_,nullable:P_,number:Ff,object:d_,get objectUtil(){return gu},oboolean:I_,onumber:A_,optional:O_,ostring:C_,pipeline:j_,preprocess:T_,promise:E_,quotelessJson:K0,record:y_,set:__,setErrorMap:W0,strictObject:h_,string:zf,symbol:n_,transformer:_u,tuple:g_,undefined:i_,union:f_,unknown:o_,get util(){return pe},void:u_,z:Xm},Symbol.toStringTag,{value:"Module"})),Vf=Vw(m2);var Wu={};Object.defineProperty(Wu,"__esModule",{value:!0});Wu.parseAnyDef=void 0;function g2(){return{}}Wu.parseAnyDef=g2;var Qs={},kr={};Object.defineProperty(kr,"__esModule",{value:!0});kr.setResponseValueAndErrors=kr.addErrorMessage=void 0;function L_(t,e,r,n){n!=null&&n.errorMessages&&r&&(t.errorMessage=Object.assign(Object.assign({},t.errorMessage),{[e]:r}))}kr.addErrorMessage=L_;function y2(t,e,r,n,i){t[e]=r,L_(t,e,n,i)}kr.setResponseValueAndErrors=y2;var eg;function v2(){if(eg)return Qs;eg=1,Object.defineProperty(Qs,"__esModule",{value:!0}),Qs.parseArrayDef=void 0;const t=Vf,e=kr,r=ct();function n(i,s){var a,o;const l={type:"array"};return((o=(a=i.type)===null||a===void 0?void 0:a._def)===null||o===void 0?void 0:o.typeName)!==t.ZodFirstPartyTypeKind.ZodAny&&(l.items=(0,r.parseDef)(i.type._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"items"]}))),i.minLength&&(0,e.setResponseValueAndErrors)(l,"minItems",i.minLength.value,i.minLength.message,s),i.maxLength&&(0,e.setResponseValueAndErrors)(l,"maxItems",i.maxLength.value,i.maxLength.message,s),i.exactLength&&((0,e.setResponseValueAndErrors)(l,"minItems",i.exactLength.value,i.exactLength.message,s),(0,e.setResponseValueAndErrors)(l,"maxItems",i.exactLength.value,i.exactLength.message,s)),l}return Qs.parseArrayDef=n,Qs}var Ju={};Object.defineProperty(Ju,"__esModule",{value:!0});Ju.parseBigintDef=void 0;const Qn=kr;function _2(t,e){const r={type:"integer",format:"int64"};if(!t.checks)return r;for(const n of t.checks)switch(n.kind){case"min":e.target==="jsonSchema7"?n.inclusive?(0,Qn.setResponseValueAndErrors)(r,"minimum",n.value,n.message,e):(0,Qn.setResponseValueAndErrors)(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),(0,Qn.setResponseValueAndErrors)(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?(0,Qn.setResponseValueAndErrors)(r,"maximum",n.value,n.message,e):(0,Qn.setResponseValueAndErrors)(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),(0,Qn.setResponseValueAndErrors)(r,"maximum",n.value,n.message,e));break;case"multipleOf":(0,Qn.setResponseValueAndErrors)(r,"multipleOf",n.value,n.message,e);break}return r}Ju.parseBigintDef=_2;var Gu={};Object.defineProperty(Gu,"__esModule",{value:!0});Gu.parseBooleanDef=void 0;function w2(){return{type:"boolean"}}Gu.parseBooleanDef=w2;var Xs={},tg;function b2(){if(tg)return Xs;tg=1,Object.defineProperty(Xs,"__esModule",{value:!0}),Xs.parseBrandedDef=void 0;const t=ct();function e(r,n){return(0,t.parseDef)(r.type._def,n)}return Xs.parseBrandedDef=e,Xs}var ea={},rg;function x2(){if(rg)return ea;rg=1,Object.defineProperty(ea,"__esModule",{value:!0}),ea.parseCatchDef=void 0;const t=ct(),e=(r,n)=>(0,t.parseDef)(r.innerType._def,n);return ea.parseCatchDef=e,ea}var Yu={};Object.defineProperty(Yu,"__esModule",{value:!0});Yu.parseDateDef=void 0;const ng=kr;function k2(t,e){return e.dateStrategy=="integer"?S2(t,e):{type:"string",format:"date-time"}}Yu.parseDateDef=k2;const S2=(t,e)=>{const r={type:"integer",format:"unix-time"};for(const n of t.checks)switch(n.kind){case"min":e.target==="jsonSchema7"&&(0,ng.setResponseValueAndErrors)(r,"minimum",n.value,n.message,e);break;case"max":e.target==="jsonSchema7"&&(0,ng.setResponseValueAndErrors)(r,"maximum",n.value,n.message,e);break}return r};var ta={},ig;function E2(){if(ig)return ta;ig=1,Object.defineProperty(ta,"__esModule",{value:!0}),ta.parseDefaultDef=void 0;const t=ct();function e(r,n){return Object.assign(Object.assign({},(0,t.parseDef)(r.innerType._def,n)),{default:r.defaultValue()})}return ta.parseDefaultDef=e,ta}var ra={},sg;function O2(){if(sg)return ra;sg=1,Object.defineProperty(ra,"__esModule",{value:!0}),ra.parseEffectsDef=void 0;const t=ct();function e(r,n){return n.effectStrategy==="input"?(0,t.parseDef)(r.schema._def,n):{}}return ra.parseEffectsDef=e,ra}var Qu={};Object.defineProperty(Qu,"__esModule",{value:!0});Qu.parseEnumDef=void 0;function P2(t){return{type:"string",enum:t.values}}Qu.parseEnumDef=P2;var na={},ag;function T2(){if(ag)return na;ag=1;var t=gp&&gp.__rest||function(i,s){var a={};for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.indexOf(o)<0&&(a[o]=i[o]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(i);l<o.length;l++)s.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(i,o[l])&&(a[o[l]]=i[o[l]]);return a};Object.defineProperty(na,"__esModule",{value:!0}),na.parseIntersectionDef=void 0;const e=ct(),r=i=>"type"in i&&i.type==="string"?!1:"allOf"in i;function n(i,s){const a=[(0,e.parseDef)(i.left._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"allOf","0"]})),(0,e.parseDef)(i.right._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"allOf","1"]}))].filter(u=>!!u);let o=s.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const l=[];return a.forEach(u=>{if(r(u))l.push(...u.allOf),u.unevaluatedProperties===void 0&&(o=void 0);else{let c=u;"additionalProperties"in u&&u.additionalProperties===!1?c=t(u,["additionalProperties"]):o=void 0,l.push(c)}}),l.length?Object.assign({allOf:l},o):void 0}return na.parseIntersectionDef=n,na}var Xu={};Object.defineProperty(Xu,"__esModule",{value:!0});Xu.parseLiteralDef=void 0;function j2(t,e){const r=typeof t.value;return r!=="bigint"&&r!=="number"&&r!=="boolean"&&r!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:r==="bigint"?"integer":r,enum:[t.value]}:{type:r==="bigint"?"integer":r,const:t.value}}Xu.parseLiteralDef=j2;var ia={},og;function C2(){if(og)return ia;og=1,Object.defineProperty(ia,"__esModule",{value:!0}),ia.parseMapDef=void 0;const t=ct();function e(r,n){const i=(0,t.parseDef)(r.keyType._def,Object.assign(Object.assign({},n),{currentPath:[...n.currentPath,"items","items","0"]}))||{},s=(0,t.parseDef)(r.valueType._def,Object.assign(Object.assign({},n),{currentPath:[...n.currentPath,"items","items","1"]}))||{};return{type:"array",maxItems:125,items:{type:"array",items:[i,s],minItems:2,maxItems:2}}}return ia.parseMapDef=e,ia}var ec={};Object.defineProperty(ec,"__esModule",{value:!0});ec.parseNativeEnumDef=void 0;function A2(t){const e=t.values,n=Object.keys(t.values).filter(s=>typeof e[e[s]]!="number").map(s=>e[s]),i=Array.from(new Set(n.map(s=>typeof s)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:n}}ec.parseNativeEnumDef=A2;var tc={};Object.defineProperty(tc,"__esModule",{value:!0});tc.parseNeverDef=void 0;function I2(){return{not:{}}}tc.parseNeverDef=I2;var rc={};Object.defineProperty(rc,"__esModule",{value:!0});rc.parseNullDef=void 0;function R2(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}rc.parseNullDef=R2;var sa={},Xc={},lg;function $_(){return lg||(lg=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.parseUnionDef=t.primitiveMappings=void 0;const e=ct();t.primitiveMappings={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function r(i,s){if(s.target==="openApi3")return n(i,s);const a=i.options instanceof Map?Array.from(i.options.values()):i.options;if(a.every(o=>o._def.typeName in t.primitiveMappings&&(!o._def.checks||!o._def.checks.length))){const o=a.reduce((l,u)=>{const c=t.primitiveMappings[u._def.typeName];return c&&!l.includes(c)?[...l,c]:l},[]);return{type:o.length>1?o:o[0]}}else if(a.every(o=>o._def.typeName==="ZodLiteral"&&!o.description)){const o=a.reduce((l,u)=>{const c=typeof u._def.value;switch(c){case"string":case"number":case"boolean":return[...l,c];case"bigint":return[...l,"integer"];case"object":if(u._def.value===null)return[...l,"null"];case"symbol":case"undefined":case"function":default:return l}},[]);if(o.length===a.length){const l=o.filter((u,c,d)=>d.indexOf(u)===c);return{type:l.length>1?l:l[0],enum:a.reduce((u,c)=>u.includes(c._def.value)?u:[...u,c._def.value],[])}}}else if(a.every(o=>o._def.typeName==="ZodEnum"))return{type:"string",enum:a.reduce((o,l)=>[...o,...l._def.values.filter(u=>!o.includes(u))],[])};return n(i,s)}t.parseUnionDef=r;const n=(i,s)=>{const a=(i.options instanceof Map?Array.from(i.options.values()):i.options).map((o,l)=>(0,e.parseDef)(o._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"anyOf",`${l}`]}))).filter(o=>!!o&&(!s.strictUnions||typeof o=="object"&&Object.keys(o).length>0));return a.length?{anyOf:a}:void 0}}(Xc)),Xc}var ug;function N2(){if(ug)return sa;ug=1,Object.defineProperty(sa,"__esModule",{value:!0}),sa.parseNullableDef=void 0;const t=ct(),e=$_();function r(n,i){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(n.innerType._def.typeName)&&(!n.innerType._def.checks||!n.innerType._def.checks.length))return i.target==="openApi3"?{type:e.primitiveMappings[n.innerType._def.typeName],nullable:!0}:{type:[e.primitiveMappings[n.innerType._def.typeName],"null"]};if(i.target==="openApi3"){const a=(0,t.parseDef)(n.innerType._def,Object.assign(Object.assign({},i),{currentPath:[...i.currentPath]}));return a&&Object.assign(Object.assign({},a),{nullable:!0})}const s=(0,t.parseDef)(n.innerType._def,Object.assign(Object.assign({},i),{currentPath:[...i.currentPath,"anyOf","0"]}));return s&&{anyOf:[s,{type:"null"}]}}return sa.parseNullableDef=r,sa}var nc={};Object.defineProperty(nc,"__esModule",{value:!0});nc.parseNumberDef=void 0;const mn=kr;function L2(t,e){const r={type:"number"};if(!t.checks)return r;for(const n of t.checks)switch(n.kind){case"int":r.type="integer",(0,mn.addErrorMessage)(r,"type",n.message,e);break;case"min":e.target==="jsonSchema7"?n.inclusive?(0,mn.setResponseValueAndErrors)(r,"minimum",n.value,n.message,e):(0,mn.setResponseValueAndErrors)(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),(0,mn.setResponseValueAndErrors)(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?(0,mn.setResponseValueAndErrors)(r,"maximum",n.value,n.message,e):(0,mn.setResponseValueAndErrors)(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),(0,mn.setResponseValueAndErrors)(r,"maximum",n.value,n.message,e));break;case"multipleOf":(0,mn.setResponseValueAndErrors)(r,"multipleOf",n.value,n.message,e);break}return r}nc.parseNumberDef=L2;var Xn={},cg;function $2(){if(cg)return Xn;cg=1,Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.parseObjectDef=Xn.parseObjectDefX=void 0;const t=ct();function e(n,i){var s,a;Object.keys(n.shape()).reduce((l,u)=>{let c=n.shape()[u];const d=c.isOptional();d||(c=Object.assign({},c._def.innerSchema));const h=(0,t.parseDef)(c._def,Object.assign(Object.assign({},i),{currentPath:[...i.currentPath,"properties",u],propertyPath:[...i.currentPath,"properties",u]}));return h!==void 0&&(l.properties[u]=h,d||(l.required||(l.required=[]),l.required.push(u))),l},{type:"object",properties:{},additionalProperties:n.catchall._def.typeName==="ZodNever"?n.unknownKeys==="passthrough":(s=(0,t.parseDef)(n.catchall._def,Object.assign(Object.assign({},i),{currentPath:[...i.currentPath,"additionalProperties"]})))!==null&&s!==void 0?s:!0});const o=Object.assign(Object.assign({type:"object"},Object.entries(n.shape()).reduce((l,[u,c])=>{if(c===void 0||c._def===void 0)return l;const d=(0,t.parseDef)(c._def,Object.assign(Object.assign({},i),{currentPath:[...i.currentPath,"properties",u],propertyPath:[...i.currentPath,"properties",u]}));return d===void 0?l:{properties:Object.assign(Object.assign({},l.properties),{[u]:d}),required:c.isOptional()?l.required:[...l.required,u]}},{properties:{},required:[]})),{additionalProperties:n.catchall._def.typeName==="ZodNever"?n.unknownKeys==="passthrough":(a=(0,t.parseDef)(n.catchall._def,Object.assign(Object.assign({},i),{currentPath:[...i.currentPath,"additionalProperties"]})))!==null&&a!==void 0?a:!0});return o.required.length||delete o.required,o}Xn.parseObjectDefX=e;function r(n,i){var s;const a=Object.assign(Object.assign({type:"object"},Object.entries(n.shape()).reduce((o,[l,u])=>{if(u===void 0||u._def===void 0)return o;const c=(0,t.parseDef)(u._def,Object.assign(Object.assign({},i),{currentPath:[...i.currentPath,"properties",l],propertyPath:[...i.currentPath,"properties",l]}));return c===void 0?o:{properties:Object.assign(Object.assign({},o.properties),{[l]:c}),required:u.isOptional()?o.required:[...o.required,l]}},{properties:{},required:[]})),{additionalProperties:n.catchall._def.typeName==="ZodNever"?n.unknownKeys==="passthrough":(s=(0,t.parseDef)(n.catchall._def,Object.assign(Object.assign({},i),{currentPath:[...i.currentPath,"additionalProperties"]})))!==null&&s!==void 0?s:!0});return a.required.length||delete a.required,a}return Xn.parseObjectDef=r,Xn}var aa={},dg;function D2(){if(dg)return aa;dg=1,Object.defineProperty(aa,"__esModule",{value:!0}),aa.parseOptionalDef=void 0;const t=ct(),e=(r,n)=>{var i;if(n.currentPath.toString()===((i=n.propertyPath)===null||i===void 0?void 0:i.toString()))return(0,t.parseDef)(r.innerType._def,n);const s=(0,t.parseDef)(r.innerType._def,Object.assign(Object.assign({},n),{currentPath:[...n.currentPath,"anyOf","1"]}));return s?{anyOf:[{not:{}},s]}:{}};return aa.parseOptionalDef=e,aa}var oa={},hg;function M2(){if(hg)return oa;hg=1,Object.defineProperty(oa,"__esModule",{value:!0}),oa.parsePipelineDef=void 0;const t=ct(),e=(r,n)=>{if(n.pipeStrategy==="input")return(0,t.parseDef)(r.in._def,n);const i=(0,t.parseDef)(r.in._def,Object.assign(Object.assign({},n),{currentPath:[...n.currentPath,"allOf","0"]})),s=(0,t.parseDef)(r.out._def,Object.assign(Object.assign({},n),{currentPath:[...n.currentPath,"allOf",i?"1":"0"]}));return{allOf:[i,s].filter(a=>a!==void 0)}};return oa.parsePipelineDef=e,oa}var la={},fg;function U2(){if(fg)return la;fg=1,Object.defineProperty(la,"__esModule",{value:!0}),la.parsePromiseDef=void 0;const t=ct();function e(r,n){return(0,t.parseDef)(r.type._def,n)}return la.parsePromiseDef=e,la}var ua={},Hf={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.parseStringDef=t.emojiPattern=t.ulidPattern=t.cuid2Pattern=t.cuidPattern=t.emailPattern=void 0;const e=kr;t.emailPattern='^(([^<>()[\\]\\\\.,;:\\s@\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\"]+)*)|(\\".+\\"))@((\\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\])|(\\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\\.[A-Za-z]{2,})+))$',t.cuidPattern="^c[^\\s-]{8,}$",t.cuid2Pattern="^[a-z][a-z0-9]*$",t.ulidPattern="/[0-9A-HJKMNP-TV-Z]{26}/",t.emojiPattern="/^(p{Extended_Pictographic}|p{Emoji_Component})+$/u";function r(a,o){const l={type:"string"};if(a.checks)for(const u of a.checks)switch(u.kind){case"min":(0,e.setResponseValueAndErrors)(l,"minLength",typeof l.minLength=="number"?Math.max(l.minLength,u.value):u.value,u.message,o);break;case"max":(0,e.setResponseValueAndErrors)(l,"maxLength",typeof l.maxLength=="number"?Math.min(l.maxLength,u.value):u.value,u.message,o);break;case"email":switch(o.emailStrategy){case"format:email":i(l,"email",u.message,o);break;case"format:idn-email":i(l,"idn-email",u.message,o);break;case"pattern:zod":s(l,t.emailPattern,u.message,o);break}break;case"url":i(l,"uri",u.message,o);break;case"uuid":i(l,"uuid",u.message,o);break;case"regex":s(l,u.regex.source,u.message,o);break;case"cuid":s(l,t.cuidPattern,u.message,o);break;case"cuid2":s(l,t.cuid2Pattern,u.message,o);break;case"startsWith":s(l,"^"+n(u.value),u.message,o);break;case"endsWith":s(l,n(u.value)+"$",u.message,o);break;case"datetime":i(l,"date-time",u.message,o);break;case"length":(0,e.setResponseValueAndErrors)(l,"minLength",typeof l.minLength=="number"?Math.max(l.minLength,u.value):u.value,u.message,o),(0,e.setResponseValueAndErrors)(l,"maxLength",typeof l.maxLength=="number"?Math.min(l.maxLength,u.value):u.value,u.message,o);break;case"includes":{s(l,n(u.value),u.message,o);break}case"ip":{u.version!=="v6"&&i(l,"ipv4",u.message,o),u.version!=="v4"&&i(l,"ipv6",u.message,o);break}case"emoji":s(l,t.emojiPattern,u.message,o);break;case"ulid":{s(l,t.ulidPattern,u.message,o);break}}return l}t.parseStringDef=r;const n=a=>Array.from(a).map(o=>/[a-zA-Z0-9]/.test(o)?o:`\\${o}`).join(""),i=(a,o,l,u)=>{var c;a.format||!((c=a.anyOf)===null||c===void 0)&&c.some(d=>d.format)?(a.anyOf||(a.anyOf=[]),a.format&&(a.anyOf.push(Object.assign({format:a.format},a.errorMessage&&u.errorMessages&&{errorMessage:{format:a.errorMessage.format}})),delete a.format,a.errorMessage&&(delete a.errorMessage.format,Object.keys(a.errorMessage).length===0&&delete a.errorMessage)),a.anyOf.push(Object.assign({format:o},l&&u.errorMessages&&{errorMessage:{format:l}}))):(0,e.setResponseValueAndErrors)(a,"format",o,l,u)},s=(a,o,l,u)=>{var c;a.pattern||!((c=a.allOf)===null||c===void 0)&&c.some(d=>d.pattern)?(a.allOf||(a.allOf=[]),a.pattern&&(a.allOf.push(Object.assign({pattern:a.pattern},a.errorMessage&&u.errorMessages&&{errorMessage:{pattern:a.errorMessage.pattern}})),delete a.pattern,a.errorMessage&&(delete a.errorMessage.pattern,Object.keys(a.errorMessage).length===0&&delete a.errorMessage)),a.allOf.push(Object.assign({pattern:o},l&&u.errorMessages&&{errorMessage:{pattern:l}}))):(0,e.setResponseValueAndErrors)(a,"pattern",o,l,u)}})(Hf);var pg;function z2(){if(pg)return ua;pg=1,Object.defineProperty(ua,"__esModule",{value:!0}),ua.parseRecordDef=void 0;const t=Vf,e=ct(),r=Hf;function n(i,s){var a,o,l,u,c;if(s.target==="openApi3"&&((a=i.keyType)===null||a===void 0?void 0:a._def.typeName)===t.ZodFirstPartyTypeKind.ZodEnum)return{type:"object",required:i.keyType._def.values,properties:i.keyType._def.values.reduce((h,b)=>{var v;return Object.assign(Object.assign({},h),{[b]:(v=(0,e.parseDef)(i.valueType._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"properties",b]})))!==null&&v!==void 0?v:{}})},{}),additionalProperties:!1};const d={type:"object",additionalProperties:(o=(0,e.parseDef)(i.valueType._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"additionalProperties"]})))!==null&&o!==void 0?o:{}};if(s.target==="openApi3")return d;if(((l=i.keyType)===null||l===void 0?void 0:l._def.typeName)===t.ZodFirstPartyTypeKind.ZodString&&(!((u=i.keyType._def.checks)===null||u===void 0)&&u.length)){const h=Object.entries((0,r.parseStringDef)(i.keyType._def,s)).reduce((b,[v,P])=>v==="type"?b:Object.assign(Object.assign({},b),{[v]:P}),{});return Object.assign(Object.assign({},d),{propertyNames:h})}else if(((c=i.keyType)===null||c===void 0?void 0:c._def.typeName)===t.ZodFirstPartyTypeKind.ZodEnum)return Object.assign(Object.assign({},d),{propertyNames:{enum:i.keyType._def.values}});return d}return ua.parseRecordDef=n,ua}var ca={},mg;function F2(){if(mg)return ca;mg=1,Object.defineProperty(ca,"__esModule",{value:!0}),ca.parseSetDef=void 0;const t=kr,e=ct();function r(n,i){const a={type:"array",uniqueItems:!0,items:(0,e.parseDef)(n.valueType._def,Object.assign(Object.assign({},i),{currentPath:[...i.currentPath,"items"]}))};return n.minSize&&(0,t.setResponseValueAndErrors)(a,"minItems",n.minSize.value,n.minSize.message,i),n.maxSize&&(0,t.setResponseValueAndErrors)(a,"maxItems",n.maxSize.value,n.maxSize.message,i),a}return ca.parseSetDef=r,ca}var da={},gg;function B2(){if(gg)return da;gg=1,Object.defineProperty(da,"__esModule",{value:!0}),da.parseTupleDef=void 0;const t=ct();function e(r,n){return r.rest?{type:"array",minItems:r.items.length,items:r.items.map((i,s)=>(0,t.parseDef)(i._def,Object.assign(Object.assign({},n),{currentPath:[...n.currentPath,"items",`${s}`]}))).reduce((i,s)=>s===void 0?i:[...i,s],[]),additionalItems:(0,t.parseDef)(r.rest._def,Object.assign(Object.assign({},n),{currentPath:[...n.currentPath,"additionalItems"]}))}:{type:"array",minItems:r.items.length,maxItems:r.items.length,items:r.items.map((i,s)=>(0,t.parseDef)(i._def,Object.assign(Object.assign({},n),{currentPath:[...n.currentPath,"items",`${s}`]}))).reduce((i,s)=>s===void 0?i:[...i,s],[])}}return da.parseTupleDef=e,da}var ic={};Object.defineProperty(ic,"__esModule",{value:!0});ic.parseUndefinedDef=void 0;function V2(){return{not:{}}}ic.parseUndefinedDef=V2;var sc={};Object.defineProperty(sc,"__esModule",{value:!0});sc.parseUnknownDef=void 0;function H2(){return{}}sc.parseUnknownDef=H2;var yg;function ct(){if(yg)return Ys;yg=1,Object.defineProperty(Ys,"__esModule",{value:!0}),Ys.parseDef=void 0;const t=Vf,e=Wu,r=v2(),n=Ju,i=Gu,s=b2(),a=x2(),o=Yu,l=E2(),u=O2(),c=Qu,d=T2(),h=Xu,b=C2(),v=ec,P=tc,x=rc,p=N2(),m=nc,f=$2(),S=D2(),A=M2(),k=U2(),j=z2(),_=F2(),O=Hf,w=B2(),R=ic,L=$_(),te=sc;function X($,F,H=!1){const ve=F.seen.get($);if(ve&&!H){const Jt=ie(ve,F);if(Jt!==void 0)return Jt}const jt={def:$,path:F.currentPath,jsonSchema:void 0};F.seen.set($,jt);const et=ge($,$.typeName,F);return et&&V($,F,et),jt.jsonSchema=et,et}Ys.parseDef=X;const ie=($,F)=>{switch(F.$refStrategy){case"root":return{$ref:$.path.length===0?"":$.path.length===1?`${$.path[0]}/`:$.path.join("/")};case"relative":return{$ref:G(F.currentPath,$.path)};case"none":return $.path.length<F.currentPath.length&&$.path.every((H,ve)=>F.currentPath[ve]===H)?(console.warn(`Recursive reference detected at ${F.currentPath.join("/")}! Defaulting to any`),{}):void 0;case"seen":return $.path.length<F.currentPath.length&&$.path.every((H,ve)=>F.currentPath[ve]===H)?(console.warn(`Recursive reference detected at ${F.currentPath.join("/")}! Defaulting to any`),{}):$.jsonSchema}},G=($,F)=>{let H=0;for(;H<$.length&&H<F.length&&$[H]===F[H];H++);return[($.length-H).toString(),...F.slice(H)].join("/")},ge=($,F,H)=>{switch(F){case t.ZodFirstPartyTypeKind.ZodString:return(0,O.parseStringDef)($,H);case t.ZodFirstPartyTypeKind.ZodNumber:return(0,m.parseNumberDef)($,H);case t.ZodFirstPartyTypeKind.ZodObject:return(0,f.parseObjectDef)($,H);case t.ZodFirstPartyTypeKind.ZodBigInt:return(0,n.parseBigintDef)($,H);case t.ZodFirstPartyTypeKind.ZodBoolean:return(0,i.parseBooleanDef)();case t.ZodFirstPartyTypeKind.ZodDate:return(0,o.parseDateDef)($,H);case t.ZodFirstPartyTypeKind.ZodUndefined:return(0,R.parseUndefinedDef)();case t.ZodFirstPartyTypeKind.ZodNull:return(0,x.parseNullDef)(H);case t.ZodFirstPartyTypeKind.ZodArray:return(0,r.parseArrayDef)($,H);case t.ZodFirstPartyTypeKind.ZodUnion:case t.ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return(0,L.parseUnionDef)($,H);case t.ZodFirstPartyTypeKind.ZodIntersection:return(0,d.parseIntersectionDef)($,H);case t.ZodFirstPartyTypeKind.ZodTuple:return(0,w.parseTupleDef)($,H);case t.ZodFirstPartyTypeKind.ZodRecord:return(0,j.parseRecordDef)($,H);case t.ZodFirstPartyTypeKind.ZodLiteral:return(0,h.parseLiteralDef)($,H);case t.ZodFirstPartyTypeKind.ZodEnum:return(0,c.parseEnumDef)($);case t.ZodFirstPartyTypeKind.ZodNativeEnum:return(0,v.parseNativeEnumDef)($);case t.ZodFirstPartyTypeKind.ZodNullable:return(0,p.parseNullableDef)($,H);case t.ZodFirstPartyTypeKind.ZodOptional:return(0,S.parseOptionalDef)($,H);case t.ZodFirstPartyTypeKind.ZodMap:return(0,b.parseMapDef)($,H);case t.ZodFirstPartyTypeKind.ZodSet:return(0,_.parseSetDef)($,H);case t.ZodFirstPartyTypeKind.ZodLazy:return X($.getter()._def,H);case t.ZodFirstPartyTypeKind.ZodPromise:return(0,k.parsePromiseDef)($,H);case t.ZodFirstPartyTypeKind.ZodNaN:case t.ZodFirstPartyTypeKind.ZodNever:return(0,P.parseNeverDef)();case t.ZodFirstPartyTypeKind.ZodEffects:return(0,u.parseEffectsDef)($,H);case t.ZodFirstPartyTypeKind.ZodAny:return(0,e.parseAnyDef)();case t.ZodFirstPartyTypeKind.ZodUnknown:return(0,te.parseUnknownDef)();case t.ZodFirstPartyTypeKind.ZodDefault:return(0,l.parseDefaultDef)($,H);case t.ZodFirstPartyTypeKind.ZodBranded:return(0,s.parseBrandedDef)($,H);case t.ZodFirstPartyTypeKind.ZodCatch:return(0,a.parseCatchDef)($,H);case t.ZodFirstPartyTypeKind.ZodPipeline:return(0,A.parsePipelineDef)($,H);case t.ZodFirstPartyTypeKind.ZodFunction:case t.ZodFirstPartyTypeKind.ZodVoid:case t.ZodFirstPartyTypeKind.ZodSymbol:return;default:return(ve=>{})()}},V=($,F,H)=>($.description&&(H.description=$.description,F.markdownDescription&&(H.markdownDescription=$.description)),H);return Ys}var ac={},D_={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultOptions=t.defaultOptions=void 0,t.defaultOptions={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"string",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,emailStrategy:"format:email"};const e=r=>typeof r=="string"?Object.assign(Object.assign({},t.defaultOptions),{name:r}):Object.assign(Object.assign({},t.defaultOptions),r);t.getDefaultOptions=e})(D_);Object.defineProperty(ac,"__esModule",{value:!0});ac.getRefs=void 0;const Z2=D_,K2=t=>{const e=(0,Z2.getDefaultOptions)(t),r=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return Object.assign(Object.assign({},e),{currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([n,i])=>[i._def,{def:i._def,path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))})};ac.getRefs=K2;Object.defineProperty(qu,"__esModule",{value:!0});qu.zodToJsonSchema=void 0;const vg=ct(),q2=ac,W2=(t,e)=>{var r;const n=(0,q2.getRefs)(e),i=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((l,[u,c])=>{var d;return Object.assign(Object.assign({},l),{[u]:(d=(0,vg.parseDef)(c._def,Object.assign(Object.assign({},n),{currentPath:[...n.basePath,n.definitionPath,u]}),!0))!==null&&d!==void 0?d:{}})},{}):void 0,s=typeof e=="string"?e:e==null?void 0:e.name,a=(r=(0,vg.parseDef)(t._def,s===void 0?n:Object.assign(Object.assign({},n),{currentPath:[...n.basePath,n.definitionPath,s]}),!1))!==null&&r!==void 0?r:{},o=s===void 0?i?Object.assign(Object.assign({},a),{[n.definitionPath]:i}):a:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,s].join("/"),[n.definitionPath]:Object.assign(Object.assign({},i),{[s]:a})};return n.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":n.target==="jsonSchema2019-09"&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),o};qu.zodToJsonSchema=W2;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.zodToJsonSchema=void 0;const e=qu;Object.defineProperty(t,"zodToJsonSchema",{enumerable:!0,get:function(){return e.zodToJsonSchema}}),t.default=e.zodToJsonSchema})(Z0);function J2(t){return{name:t.name,description:t.description,parameters:Z0.zodToJsonSchema(t.schema)}}function G2(t){const{azureOpenAIApiDeploymentName:e,azureOpenAIApiInstanceName:r,azureOpenAIApiKey:n,azureOpenAIBasePath:i,baseURL:s}=t;if(n&&i&&e)return`${i}/${e}`;if(n){if(!r)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!e)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${r}.openai.azure.com/openai/deployments/${e}`}return s}const Y2=()=>typeof window<"u"&&typeof window.document<"u",Q2=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",X2=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),M_=()=>typeof Deno<"u",eO=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!M_(),tO=()=>{let t;return Y2()?t="browser":eO()?t="node":Q2()?t="webworker":X2()?t="jsdom":M_()?t="deno":t="other",t};let ed;async function rO(){return ed===void 0&&(ed={library:"langchain-js",runtime:tO()}),ed}function gt(t){var e;try{return typeof process<"u"?(e=process.env)==null?void 0:e[t]:void 0}catch{return}}const nO=async(t,e,r,n,i,s,a,o)=>(await t.call(fetch,"https://api.promptlayer.com/track-request",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({function_name:e,provider:"langchain",kwargs:r,tags:n,request_response:i,request_start_time:Math.floor(s/1e3),request_end_time:Math.floor(a/1e3),api_key:o})})).json();let il;const iO=new Uint8Array(16);function sO(){if(!il&&(il=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!il))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return il(iO)}const aO=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function oO(t){return typeof t=="string"&&aO.test(t)}const rt=[];for(let t=0;t<256;++t)rt.push((t+256).toString(16).slice(1));function lO(t,e=0){return rt[t[e+0]]+rt[t[e+1]]+rt[t[e+2]]+rt[t[e+3]]+"-"+rt[t[e+4]]+rt[t[e+5]]+"-"+rt[t[e+6]]+rt[t[e+7]]+"-"+rt[t[e+8]]+rt[t[e+9]]+"-"+rt[t[e+10]]+rt[t[e+11]]+rt[t[e+12]]+rt[t[e+13]]+rt[t[e+14]]+rt[t[e+15]]}const uO=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),_g={randomUUID:uO};function Kr(t,e,r){if(_g.randomUUID&&!e&&!t)return _g.randomUUID();t=t||{};const n=t.random||(t.rng||sO)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return lO(n)}class cO{}class jo extends cO{get lc_namespace(){return["langchain","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,F0(this.constructor)]}constructor(e){var r;super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:typeof process<"u"?((r=process.env)==null?void 0:r.LANGCHAIN_CALLBACKS_BACKGROUND)!=="true":!0}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever)}copy(){return new this.constructor(this)}toJSON(){return zn.prototype.toJSON.call(this)}toJSONNotImplemented(){return zn.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class r extends jo{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Kr()}),Object.assign(this,e)}}return new r}}var Zf={exports:{}};Zf.exports;(function(t){const r=(s=0)=>a=>`\x1B[${38+s};5;${a}m`,n=(s=0)=>(a,o,l)=>`\x1B[${38+s};2;${a};${o};${l}m`;function i(){const s=new Map,a={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};a.color.gray=a.color.blackBright,a.bgColor.bgGray=a.bgColor.bgBlackBright,a.color.grey=a.color.blackBright,a.bgColor.bgGrey=a.bgColor.bgBlackBright;for(const[o,l]of Object.entries(a)){for(const[u,c]of Object.entries(l))a[u]={open:`\x1B[${c[0]}m`,close:`\x1B[${c[1]}m`},l[u]=a[u],s.set(c[0],c[1]);Object.defineProperty(a,o,{value:l,enumerable:!1})}return Object.defineProperty(a,"codes",{value:s,enumerable:!1}),a.color.close="\x1B[39m",a.bgColor.close="\x1B[49m",a.color.ansi256=r(),a.color.ansi16m=n(),a.bgColor.ansi256=r(10),a.bgColor.ansi16m=n(10),Object.defineProperties(a,{rgbToAnsi256:{value:(o,l,u)=>o===l&&l===u?o<8?16:o>248?231:Math.round((o-8)/247*24)+232:16+36*Math.round(o/255*5)+6*Math.round(l/255*5)+Math.round(u/255*5),enumerable:!1},hexToRgb:{value:o=>{const l=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(o.toString(16));if(!l)return[0,0,0];let{colorString:u}=l.groups;u.length===3&&(u=u.split("").map(d=>d+d).join(""));const c=Number.parseInt(u,16);return[c>>16&255,c>>8&255,c&255]},enumerable:!1},hexToAnsi256:{value:o=>a.rgbToAnsi256(...a.hexToRgb(o)),enumerable:!1}}),a}Object.defineProperty(t,"exports",{enumerable:!0,get:i})})(Zf);var dO=Zf.exports;const U_=vo(dO);function td(t,e){return t&&!Array.isArray(t)&&typeof t=="object"?t:{[e]:t}}class oc extends jo{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}_addChildRun(e,r){e.child_runs.push(r)}async _startTrace(e){var r;if(e.parent_run_id!==void 0){const n=this.runMap.get(e.parent_run_id);n&&(this._addChildRun(n,e),n.child_execution_order=Math.max(n.child_execution_order,e.child_execution_order))}this.runMap.set(e.id,e),await((r=this.onRunCreate)==null?void 0:r.call(this,e))}async _endTrace(e){var n;const r=e.parent_run_id!==void 0&&this.runMap.get(e.parent_run_id);r?r.child_execution_order=Math.max(r.child_execution_order,e.child_execution_order):await this.persistRun(e),this.runMap.delete(e.id),await((n=this.onRunUpdate)==null?void 0:n.call(this,e))}_getExecutionOrder(e){const r=e!==void 0&&this.runMap.get(e);return r?r.child_execution_order+1:1}async handleLLMStart(e,r,n,i,s,a,o,l){var b;const u=this._getExecutionOrder(i),c=Date.now(),d=o?{...s,metadata:o}:s,h={id:n,name:l??e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{prompts:r},execution_order:u,child_runs:[],child_execution_order:u,run_type:"llm",extra:d??{},tags:a||[]};return await this._startTrace(h),await((b=this.onLLMStart)==null?void 0:b.call(this,h)),h}async handleChatModelStart(e,r,n,i,s,a,o,l){var b;const u=this._getExecutionOrder(i),c=Date.now(),d=o?{...s,metadata:o}:s,h={id:n,name:l??e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{messages:r},execution_order:u,child_runs:[],child_execution_order:u,run_type:"llm",extra:d??{},tags:a||[]};return await this._startTrace(h),await((b=this.onLLMStart)==null?void 0:b.call(this,h)),h}async handleLLMEnd(e,r){var i;const n=this.runMap.get(r);if(!n||(n==null?void 0:n.run_type)!=="llm")throw new Error("No LLM run to end.");return n.end_time=Date.now(),n.outputs=e,n.events.push({name:"end",time:new Date(n.end_time).toISOString()}),await((i=this.onLLMEnd)==null?void 0:i.call(this,n)),await this._endTrace(n),n}async handleLLMError(e,r){var i;const n=this.runMap.get(r);if(!n||(n==null?void 0:n.run_type)!=="llm")throw new Error("No LLM run to end.");return n.end_time=Date.now(),n.error=e.message,n.events.push({name:"error",time:new Date(n.end_time).toISOString()}),await((i=this.onLLMError)==null?void 0:i.call(this,n)),await this._endTrace(n),n}async handleChainStart(e,r,n,i,s,a,o,l){var h;const u=this._getExecutionOrder(i),c=Date.now(),d={id:n,name:l??e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:r,execution_order:u,child_execution_order:u,run_type:o??"chain",child_runs:[],extra:a?{metadata:a}:{},tags:s||[]};return await this._startTrace(d),await((h=this.onChainStart)==null?void 0:h.call(this,d)),d}async handleChainEnd(e,r,n,i,s){var o;const a=this.runMap.get(r);if(!a)throw new Error("No chain run to end.");return a.end_time=Date.now(),a.outputs=td(e,"output"),a.events.push({name:"end",time:new Date(a.end_time).toISOString()}),(s==null?void 0:s.inputs)!==void 0&&(a.inputs=td(s.inputs,"input")),await((o=this.onChainEnd)==null?void 0:o.call(this,a)),await this._endTrace(a),a}async handleChainError(e,r,n,i,s){var o;const a=this.runMap.get(r);if(!a)throw new Error("No chain run to end.");return a.end_time=Date.now(),a.error=e.message,a.events.push({name:"error",time:new Date(a.end_time).toISOString()}),(s==null?void 0:s.inputs)!==void 0&&(a.inputs=td(s.inputs,"input")),await((o=this.onChainError)==null?void 0:o.call(this,a)),await this._endTrace(a),a}async handleToolStart(e,r,n,i,s,a,o){var d;const l=this._getExecutionOrder(i),u=Date.now(),c={id:n,name:o??e.id[e.id.length-1],parent_run_id:i,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{input:r},execution_order:l,child_execution_order:l,run_type:"tool",child_runs:[],extra:a?{metadata:a}:{},tags:s||[]};return await this._startTrace(c),await((d=this.onToolStart)==null?void 0:d.call(this,c)),c}async handleToolEnd(e,r){var i;const n=this.runMap.get(r);if(!n||(n==null?void 0:n.run_type)!=="tool")throw new Error("No tool run to end");return n.end_time=Date.now(),n.outputs={output:e},n.events.push({name:"end",time:new Date(n.end_time).toISOString()}),await((i=this.onToolEnd)==null?void 0:i.call(this,n)),await this._endTrace(n),n}async handleToolError(e,r){var i;const n=this.runMap.get(r);if(!n||(n==null?void 0:n.run_type)!=="tool")throw new Error("No tool run to end");return n.end_time=Date.now(),n.error=e.message,n.events.push({name:"error",time:new Date(n.end_time).toISOString()}),await((i=this.onToolError)==null?void 0:i.call(this,n)),await this._endTrace(n),n}async handleAgentAction(e,r){var s;const n=this.runMap.get(r);if(!n||(n==null?void 0:n.run_type)!=="chain")return;const i=n;i.actions=i.actions||[],i.actions.push(e),i.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:e}}),await((s=this.onAgentAction)==null?void 0:s.call(this,n))}async handleAgentEnd(e,r){var i;const n=this.runMap.get(r);!n||(n==null?void 0:n.run_type)!=="chain"||(n.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:e}}),await((i=this.onAgentEnd)==null?void 0:i.call(this,n)))}async handleRetrieverStart(e,r,n,i,s,a,o){var d;const l=this._getExecutionOrder(i),u=Date.now(),c={id:n,name:o??e.id[e.id.length-1],parent_run_id:i,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{query:r},execution_order:l,child_execution_order:l,run_type:"retriever",child_runs:[],extra:a?{metadata:a}:{},tags:s||[]};return await this._startTrace(c),await((d=this.onRetrieverStart)==null?void 0:d.call(this,c)),c}async handleRetrieverEnd(e,r){var i;const n=this.runMap.get(r);if(!n||(n==null?void 0:n.run_type)!=="retriever")throw new Error("No retriever run to end");return n.end_time=Date.now(),n.outputs={documents:e},n.events.push({name:"end",time:new Date(n.end_time).toISOString()}),await((i=this.onRetrieverEnd)==null?void 0:i.call(this,n)),await this._endTrace(n),n}async handleRetrieverError(e,r){var i;const n=this.runMap.get(r);if(!n||(n==null?void 0:n.run_type)!=="retriever")throw new Error("No retriever run to end");return n.end_time=Date.now(),n.error=e.message,n.events.push({name:"error",time:new Date(n.end_time).toISOString()}),await((i=this.onRetrieverError)==null?void 0:i.call(this,n)),await this._endTrace(n),n}async handleText(e,r){var i;const n=this.runMap.get(r);!n||(n==null?void 0:n.run_type)!=="chain"||(n.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:e}}),await((i=this.onText)==null?void 0:i.call(this,n)))}async handleLLMNewToken(e,r,n,i,s,a){var l;const o=this.runMap.get(n);if(!o||(o==null?void 0:o.run_type)!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return o.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:e,idx:r,chunk:a==null?void 0:a.chunk}}),await((l=this.onLLMNewToken)==null?void 0:l.call(this,o,e)),o}}function kt(t,e){return`${t.open}${e}${t.close}`}function fr(t,e){try{return JSON.stringify(t,null,2)}catch{return e}}function gn(t){if(!t.end_time)return"";const e=t.end_time-t.start_time;return e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`}const{color:At}=U_;class wg extends oc{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){const r=[];let n=e;for(;n.parent_run_id;){const i=this.runMap.get(n.parent_run_id);if(i)r.push(i),n=i;else break}return r}getBreadcrumbs(e){const n=[...this.getParents(e).reverse(),e].map((i,s,a)=>{const o=`${i.execution_order}:${i.run_type}:${i.name}`;return s===a.length-1?kt(U_.bold,o):o}).join(" > ");return kt(At.grey,n)}onChainStart(e){const r=this.getBreadcrumbs(e);console.log(`${kt(At.green,"[chain/start]")} [${r}] Entering Chain run with input: ${fr(e.inputs,"[inputs]")}`)}onChainEnd(e){const r=this.getBreadcrumbs(e);console.log(`${kt(At.cyan,"[chain/end]")} [${r}] [${gn(e)}] Exiting Chain run with output: ${fr(e.outputs,"[outputs]")}`)}onChainError(e){const r=this.getBreadcrumbs(e);console.log(`${kt(At.red,"[chain/error]")} [${r}] [${gn(e)}] Chain run errored with error: ${fr(e.error,"[error]")}`)}onLLMStart(e){const r=this.getBreadcrumbs(e),n="prompts"in e.inputs?{prompts:e.inputs.prompts.map(i=>i.trim())}:e.inputs;console.log(`${kt(At.green,"[llm/start]")} [${r}] Entering LLM run with input: ${fr(n,"[inputs]")}`)}onLLMEnd(e){const r=this.getBreadcrumbs(e);console.log(`${kt(At.cyan,"[llm/end]")} [${r}] [${gn(e)}] Exiting LLM run with output: ${fr(e.outputs,"[response]")}`)}onLLMError(e){const r=this.getBreadcrumbs(e);console.log(`${kt(At.red,"[llm/error]")} [${r}] [${gn(e)}] LLM run errored with error: ${fr(e.error,"[error]")}`)}onToolStart(e){var n;const r=this.getBreadcrumbs(e);console.log(`${kt(At.green,"[tool/start]")} [${r}] Entering Tool run with input: "${(n=e.inputs.input)==null?void 0:n.trim()}"`)}onToolEnd(e){var n,i;const r=this.getBreadcrumbs(e);console.log(`${kt(At.cyan,"[tool/end]")} [${r}] [${gn(e)}] Exiting Tool run with output: "${(i=(n=e.outputs)==null?void 0:n.output)==null?void 0:i.trim()}"`)}onToolError(e){const r=this.getBreadcrumbs(e);console.log(`${kt(At.red,"[tool/error]")} [${r}] [${gn(e)}] Tool run errored with error: ${fr(e.error,"[error]")}`)}onRetrieverStart(e){const r=this.getBreadcrumbs(e);console.log(`${kt(At.green,"[retriever/start]")} [${r}] Entering Retriever run with input: ${fr(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){const r=this.getBreadcrumbs(e);console.log(`${kt(At.cyan,"[retriever/end]")} [${r}] [${gn(e)}] Exiting Retriever run with output: ${fr(e.outputs,"[outputs]")}`)}onRetrieverError(e){const r=this.getBreadcrumbs(e);console.log(`${kt(At.red,"[retriever/error]")} [${r}] [${gn(e)}] Retriever run errored with error: ${fr(e.error,"[error]")}`)}onAgentAction(e){const r=e,n=this.getBreadcrumbs(e);console.log(`${kt(At.blue,"[agent/action]")} [${n}] Agent selected action: ${fr(r.actions[r.actions.length-1],"[action]")}`)}}const hO=[400,401,403,404,405,406,407,408,409];class fO{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6;const r="default"in Yr?Yr.default:Yr;this.queue=new r({concurrency:this.maxConcurrency})}call(e,...r){return this.queue.add(()=>cu(()=>e(...r).catch(n=>{throw n instanceof Error?n:new Error(n)}),{onFailedAttempt(n){var s;if(n.message.startsWith("Cancel")||n.message.startsWith("TimeoutError")||n.message.startsWith("AbortError")||(n==null?void 0:n.code)==="ECONNABORTED")throw n;const i=(s=n==null?void 0:n.response)==null?void 0:s.status;if(i&&hO.includes(+i))throw n},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,r,...n){return e.signal?Promise.race([this.call(r,...n),new Promise((i,s)=>{var a;(a=e.signal)==null||a.addEventListener("abort",()=>{s(new Error("AbortError"))})})]):this.call(r,...n)}fetch(...e){return this.call(()=>fetch(...e).then(r=>r.ok?r:Promise.reject(r)))}}function bg(t){return typeof(t==null?void 0:t._getType)=="function"}function xg(t){const e={type:t._getType(),data:{content:t.content}};return t!=null&&t.additional_kwargs&&Object.keys(t.additional_kwargs).length>0&&(e.data.additional_kwargs={...t.additional_kwargs}),e}const pO=()=>typeof window<"u"&&typeof window.document<"u",mO=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",gO=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),z_=()=>typeof Deno<"u",yO=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!z_(),vO=()=>{let t;return pO()?t="browser":yO()?t="node":mO()?t="webworker":gO()?t="jsdom":z_()?t="deno":t="other",t};let rd;async function _O(){if(rd===void 0){const t=vO(),e=wO();rd={library:"langsmith",runtime:t,...e}}return rd}function cs(t){var e;try{return typeof process<"u"?(e=process.env)==null?void 0:e[t]:void 0}catch{return}}let nd;function wO(){if(nd!==void 0)return nd;const t=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],e={};for(const r of t){const n=cs(r);n!==void 0&&(e[r]=n)}return nd=e,e}const kg=t=>{const r=t.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return r==="localhost"||r==="127.0.0.1"||r==="::1"},ei=async(t,e)=>{const r=await t.text();if(!t.ok)throw new Error(`Failed to ${e}: ${t.status} ${t.statusText} ${r}`)};async function bO(t){const e=[];for await(const r of t)e.push(r);return e}function id(t){if(t!==void 0)return t.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}function Sg(t){return cs("LANGCHAIN_HIDE_INPUTS")==="true"?{}:t}function Eg(t){return cs("LANGCHAIN_HIDE_OUTPUTS")==="true"?{}:t}function Be(t){if(!oO(t))throw new Error(`Invalid UUID: ${t}`)}class Kf{constructor(e={}){Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null});const r=Kf.getDefaultClientConfig();this.apiUrl=id(e.apiUrl??r.apiUrl)??"",this.apiKey=id(e.apiKey??r.apiKey),this.webUrl=id(e.webUrl??r.webUrl),this.validateApiKeyIfHosted(),this.timeout_ms=e.timeout_ms??4e3,this.caller=new fO(e.callerOptions??{})}static getDefaultClientConfig(){const e=cs("LANGCHAIN_API_KEY");return{apiUrl:cs("LANGCHAIN_ENDPOINT")??(e?"https://api.smith.langchain.com":"http://localhost:1984"),apiKey:e,webUrl:void 0}}validateApiKeyIfHosted(){if(!kg(this.apiUrl)&&!this.apiKey)throw new Error("API key must be provided when using hosted LangSmith API")}getHostUrl(){return this.webUrl?this.webUrl:kg(this.apiUrl)?(this.webUrl="http://localhost","http://localhost"):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com","https://dev.smith.langchain.com"):(this.webUrl="https://smith.langchain.com","https://smith.langchain.com")}get headers(){const e={};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),e}async _getResponse(e,r){const n=(r==null?void 0:r.toString())??"",i=`${this.apiUrl}${e}?${n}`,s=await this.caller.call(fetch,i,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!s.ok)throw new Error(`Failed to fetch ${e}: ${s.status} ${s.statusText}`);return s}async _get(e,r){return(await this._getResponse(e,r)).json()}async*_getPaginated(e,r=new URLSearchParams){let n=Number(r.get("offset"))||0;const i=Number(r.get("limit"))||100;for(;;){r.set("offset",String(n)),r.set("limit",String(i));const s=`${this.apiUrl}${e}?${r}`,a=await this.caller.call(fetch,s,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!a.ok)throw new Error(`Failed to fetch ${e}: ${a.status} ${a.statusText}`);const o=await a.json();if(o.length===0||(yield o,o.length<i))break;n+=o.length}}async createRun(e){const r={...this.headers,"Content-Type":"application/json"},n=e.extra??{},i=await _O(),s=e.project_name;delete e.project_name;const a={session_name:s,...e,extra:{...e.extra,runtime:{...i,...n.runtime}}};a.inputs=Sg(a.inputs),a.outputs&&(a.outputs=Eg(a.outputs));const o=await this.caller.call(fetch,`${this.apiUrl}/runs`,{method:"POST",headers:r,body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms)});await ei(o,"create run")}async updateRun(e,r){Be(e),r.inputs&&(r.inputs=Sg(r.inputs)),r.outputs&&(r.outputs=Eg(r.outputs));const n={...this.headers,"Content-Type":"application/json"},i=await this.caller.call(fetch,`${this.apiUrl}/runs/${e}`,{method:"PATCH",headers:n,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms)});await ei(i,"update run")}async readRun(e,{loadChildRuns:r}={loadChildRuns:!1}){Be(e);let n=await this._get(`/runs/${e}`);return r&&n.child_run_ids&&(n=await this._loadChildRuns(n)),n}async getRunUrl({runId:e,run:r,projectOpts:n}){if(r!==void 0){let i;r.session_id?i=r.session_id:n!=null&&n.projectName?i=(await this.readProject({projectName:n==null?void 0:n.projectName})).id:n!=null&&n.projectId?i=n==null?void 0:n.projectId:i=(await this.readProject({projectName:cs("LANGCHAIN_PROJECT")||"default"})).id;const s=await this._getTenantId();return`${this.getHostUrl()}/o/${s}/projects/p/${i}/r/${r.id}?poll=true`}else if(e!==void 0){const i=await this.readRun(e);if(!i.app_path)throw new Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${i.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(e){const r=await bO(this.listRuns({id:e.child_run_ids})),n={},i={};r.sort((s,a)=>((s==null?void 0:s.dotted_order)??"").localeCompare((a==null?void 0:a.dotted_order)??""));for(const s of r){if(s.parent_run_id===null||s.parent_run_id===void 0)throw new Error(`Child run ${s.id} has no parent`);s.parent_run_id in n||(n[s.parent_run_id]=[]),n[s.parent_run_id].push(s),i[s.id]=s}e.child_runs=n[e.id]||[];for(const s in n)s!==e.id&&(i[s].child_runs=n[s]);return e}async*listRuns({projectId:e,projectName:r,parentRunId:n,referenceExampleId:i,startTime:s,executionOrder:a,runType:o,error:l,id:u,limit:c,offset:d,query:h,filter:b}){const v=new URLSearchParams;let P=e;if(r){if(e)throw new Error("Only one of projectId or projectName may be given");P=(await this.readProject({projectName:r})).id}if(P&&v.append("session",P),n&&v.append("parent_run",n),i&&v.append("reference_example",i),s&&v.append("start_time",s.toISOString()),a&&v.append("execution_order",a.toString()),o&&v.append("run_type",o),l!==void 0&&v.append("error",l.toString()),u!==void 0)for(const x of u)v.append("id",x);c!==void 0&&v.append("limit",c.toString()),d!==void 0&&v.append("offset",d.toString()),h!==void 0&&v.append("query",h),b!==void 0&&v.append("filter",b);for await(const x of this._getPaginated("/runs",v))yield*x}async shareRun(e,{shareId:r}={}){const n={run_id:e,share_token:r||Kr()};Be(e);const s=await(await this.caller.call(fetch,`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(n),signal:AbortSignal.timeout(this.timeout_ms)})).json();if(s===null||!("share_token"in s))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${s.share_token}/r`}async unshareRun(e){Be(e);const r=await this.caller.call(fetch,`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});await ei(r,"unshare run")}async readRunSharedLink(e){Be(e);const n=await(await this.caller.call(fetch,`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)})).json();if(!(n===null||!("share_token"in n)))return`${this.getHostUrl()}/public/${n.share_token}/r`}async listSharedRuns(e,{runIds:r}={}){const n=new URLSearchParams({share_token:e});if(r!==void 0)for(const a of r)n.append("id",a);return Be(e),await(await this.caller.call(fetch,`${this.apiUrl}/public/${e}/runs${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)})).json()}async readDatasetSharedSchema(e,r){if(!e&&!r)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:r})).id),Be(e);const i=await(await this.caller.call(fetch,`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)})).json();return i.url=`${this.getHostUrl()}/public/${i.share_token}/d`,i}async shareDataset(e,r){if(!e&&!r)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:r})).id);const n={dataset_id:e};Be(e);const s=await(await this.caller.call(fetch,`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(n),signal:AbortSignal.timeout(this.timeout_ms)})).json();return s.url=`${this.getHostUrl()}/public/${s.share_token}/d`,s}async unshareDataset(e){Be(e);const r=await this.caller.call(fetch,`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});await ei(r,"unshare dataset")}async readSharedDataset(e){return Be(e),await(await this.caller.call(fetch,`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)})).json()}async createProject({projectName:e,projectExtra:r,upsert:n,referenceDatasetId:i}){const s=n?"?upsert=true":"",a=`${this.apiUrl}/sessions${s}`,o={name:e};r!==void 0&&(o.extra=r),i!==void 0&&(o.reference_dataset_id=i);const l=await this.caller.call(fetch,a,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms)}),u=await l.json();if(!l.ok)throw new Error(`Failed to create session ${e}: ${l.status} ${l.statusText}`);return u}async readProject({projectId:e,projectName:r}){let n="/sessions";const i=new URLSearchParams;if(e!==void 0&&r!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)Be(e),n+=`/${e}`;else if(r!==void 0)i.append("name",r);else throw new Error("Must provide projectName or projectId");const s=await this._get(n,i);let a;if(Array.isArray(s)){if(s.length===0)throw new Error(`Project[id=${e}, name=${r}] not found`);a=s[0]}else a=s;return a}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;const e=new URLSearchParams({limit:"1"});for await(const r of this._getPaginated("/sessions",e))return this._tenantId=r[0].tenant_id,r[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:e,name:r,nameContains:n,referenceDatasetId:i,referenceDatasetName:s,referenceFree:a}={}){const o=new URLSearchParams;if(e!==void 0)for(const l of e)o.append("id",l);if(r!==void 0&&o.append("name",r),n!==void 0&&o.append("name_contains",n),i!==void 0)o.append("reference_dataset",i);else if(s!==void 0){const l=await this.readDataset({datasetName:s});o.append("reference_dataset",l.id)}a!==void 0&&o.append("reference_free",a.toString());for await(const l of this._getPaginated("/sessions",o))yield*l}async deleteProject({projectId:e,projectName:r}){let n;if(e===void 0&&r===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&r!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?n=(await this.readProject({projectName:r})).id:n=e,Be(n);const i=await this.caller.call(fetch,`${this.apiUrl}/sessions/${n}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});await ei(i,`delete session ${n} (${r})`)}async uploadCsv({csvFile:e,fileName:r,inputKeys:n,outputKeys:i,description:s,dataType:a,name:o}){const l=`${this.apiUrl}/datasets/upload`,u=new FormData;u.append("file",e,r),n.forEach(h=>{u.append("input_keys",h)}),i.forEach(h=>{u.append("output_keys",h)}),s&&u.append("description",s),a&&u.append("data_type",a),o&&u.append("name",o);const c=await this.caller.call(fetch,l,{method:"POST",headers:this.headers,body:u,signal:AbortSignal.timeout(this.timeout_ms)});if(!c.ok){const h=await c.json();throw h.detail&&h.detail.includes("already exists")?new Error(`Dataset ${r} already exists`):new Error(`Failed to upload CSV: ${c.status} ${c.statusText}`)}return await c.json()}async createDataset(e,{description:r,dataType:n}={}){const i={name:e,description:r};n&&(i.data_type=n);const s=await this.caller.call(fetch,`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(i),signal:AbortSignal.timeout(this.timeout_ms)});if(!s.ok){const o=await s.json();throw o.detail&&o.detail.includes("already exists")?new Error(`Dataset ${e} already exists`):new Error(`Failed to create dataset ${s.status} ${s.statusText}`)}return await s.json()}async readDataset({datasetId:e,datasetName:r}){let n="/datasets";const i=new URLSearchParams({limit:"1"});if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)Be(e),n+=`/${e}`;else if(r!==void 0)i.append("name",r);else throw new Error("Must provide datasetName or datasetId");const s=await this._get(n,i);let a;if(Array.isArray(s)){if(s.length===0)throw new Error(`Dataset[id=${e}, name=${r}] not found`);a=s[0]}else a=s;return a}async readDatasetOpenaiFinetuning({datasetId:e,datasetName:r}){const n="/datasets";if(e===void 0)if(r!==void 0)e=(await this.readDataset({datasetName:r})).id;else throw new Error("Must provide datasetName or datasetId");return(await(await this._getResponse(`${n}/${e}/openai_ft`)).text()).trim().split(`
`).map(o=>JSON.parse(o))}async*listDatasets({limit:e=100,offset:r=0,datasetIds:n,datasetName:i,datasetNameContains:s}={}){const a="/datasets",o=new URLSearchParams({limit:e.toString(),offset:r.toString()});if(n!==void 0)for(const l of n)o.append("id",l);i!==void 0&&o.append("name",i),s!==void 0&&o.append("name_contains",s);for await(const l of this._getPaginated(a,o))yield*l}async deleteDataset({datasetId:e,datasetName:r}){let n="/datasets",i=e;if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(r!==void 0&&(i=(await this.readDataset({datasetName:r})).id),i!==void 0)Be(i),n+=`/${i}`;else throw new Error("Must provide datasetName or datasetId");const s=await this.caller.call(fetch,this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!s.ok)throw new Error(`Failed to delete ${n}: ${s.status} ${s.statusText}`);await s.json()}async createExample(e,r,{datasetId:n,datasetName:i,createdAt:s,exampleId:a}){let o=n;if(o===void 0&&i===void 0)throw new Error("Must provide either datasetName or datasetId");if(o!==void 0&&i!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");o===void 0&&(o=(await this.readDataset({datasetName:i})).id);const u={dataset_id:o,inputs:e,outputs:r,created_at:(s||new Date).toISOString(),id:a},c=await this.caller.call(fetch,`${this.apiUrl}/examples`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms)});if(!c.ok)throw new Error(`Failed to create example: ${c.status} ${c.statusText}`);return await c.json()}async createLLMExample(e,r,n){return this.createExample({input:e},{output:r},n)}async createChatExample(e,r,n){const i=e.map(a=>bg(a)?xg(a):a),s=bg(r)?xg(r):r;return this.createExample({input:i},{output:s},n)}async readExample(e){Be(e);const r=`/examples/${e}`;return await this._get(r)}async*listExamples({datasetId:e,datasetName:r,exampleIds:n}={}){let i;if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)i=e;else if(r!==void 0)i=(await this.readDataset({datasetName:r})).id;else throw new Error("Must provide a datasetName or datasetId");const s=new URLSearchParams({dataset:i});if(n!==void 0)for(const a of n)s.append("id",a);for await(const a of this._getPaginated("/examples",s))yield*a}async deleteExample(e){Be(e);const r=`/examples/${e}`,n=await this.caller.call(fetch,this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!n.ok)throw new Error(`Failed to delete ${r}: ${n.status} ${n.statusText}`);await n.json()}async updateExample(e,r){Be(e);const n=await this.caller.call(fetch,`${this.apiUrl}/examples/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms)});if(!n.ok)throw new Error(`Failed to update example ${e}: ${n.status} ${n.statusText}`);return await n.json()}async evaluateRun(e,r,{sourceInfo:n,loadChildRuns:i}={loadChildRuns:!1}){let s;if(typeof e=="string")s=await this.readRun(e,{loadChildRuns:i});else if(typeof e=="object"&&"id"in e)s=e;else throw new Error(`Invalid run type: ${typeof e}`);let a;s.reference_example_id!==null&&s.reference_example_id!==void 0&&(a=await this.readExample(s.reference_example_id));const o=await r.evaluateRun(s,a);let l=n??{};return o.evaluatorInfo&&(l={...l,...o.evaluatorInfo}),await this.createFeedback(s.id,o.key,{score:o.score,value:o.value,comment:o.comment,correction:o.correction,sourceInfo:l,feedbackSourceType:"model"})}async createFeedback(e,r,{score:n,value:i,correction:s,comment:a,sourceInfo:o,feedbackSourceType:l="api",sourceRunId:u,feedbackId:c,eager:d=!1}){var x;const h={type:l??"api",metadata:o??{}};u!==void 0&&(h==null?void 0:h.metadata)!==void 0&&!h.metadata.__run&&(h.metadata.__run={run_id:u}),(h==null?void 0:h.metadata)!==void 0&&((x=h.metadata.__run)==null?void 0:x.run_id)!==void 0&&Be(h.metadata.__run.run_id);const b={id:c??Kr(),run_id:e,key:r,score:n,value:i,correction:s,comment:a,feedback_source:h},v=`${this.apiUrl}/feedback`+(d?"/eager":""),P=await this.caller.call(fetch,v,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(b),signal:AbortSignal.timeout(this.timeout_ms)});return await ei(P,"create feedback"),b}async updateFeedback(e,{score:r,value:n,correction:i,comment:s}){const a={};r!=null&&(a.score=r),n!=null&&(a.value=n),i!=null&&(a.correction=i),s!=null&&(a.comment=s),Be(e);const o=await this.caller.call(fetch,`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms)});await ei(o,"update feedback")}async readFeedback(e){Be(e);const r=`/feedback/${e}`;return await this._get(r)}async deleteFeedback(e){Be(e);const r=`/feedback/${e}`,n=await this.caller.call(fetch,this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!n.ok)throw new Error(`Failed to delete ${r}: ${n.status} ${n.statusText}`);await n.json()}async*listFeedback({runIds:e,feedbackKeys:r,feedbackSourceTypes:n}={}){const i=new URLSearchParams;if(e&&i.append("run",e.join(",")),r)for(const s of r)i.append("key",s);if(n)for(const s of n)i.append("source",s);for await(const s of this._getPaginated("/feedback",i))yield*s}}class xO extends oc{constructor(e={}){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{exampleId:r,projectName:n,client:i}=e;this.projectName=n??gt("LANGCHAIN_PROJECT")??gt("LANGCHAIN_SESSION"),this.exampleId=r,this.client=i??new Kf({})}async _convertToCreate(e,r=void 0){return{...e,extra:{...e.extra,runtime:await rO()},child_runs:void 0,session_name:this.projectName,reference_example_id:e.parent_run_id?void 0:r}}async persistRun(e){}async _persistRunSingle(e){const r=await this._convertToCreate(e,this.exampleId);await this.client.createRun(r)}async _updateRunSingle(e){const r={end_time:e.end_time,error:e.error,outputs:e.outputs,events:e.events,inputs:e.inputs};await this.client.updateRun(e.id,r)}async onRetrieverStart(e){await this._persistRunSingle(e)}async onRetrieverEnd(e){await this._updateRunSingle(e)}async onRetrieverError(e){await this._updateRunSingle(e)}async onLLMStart(e){await this._persistRunSingle(e)}async onLLMEnd(e){await this._updateRunSingle(e)}async onLLMError(e){await this._updateRunSingle(e)}async onChainStart(e){await this._persistRunSingle(e)}async onChainEnd(e){await this._updateRunSingle(e)}async onChainError(e){await this._updateRunSingle(e)}async onToolStart(e){await this._persistRunSingle(e)}async onToolEnd(e){await this._updateRunSingle(e)}async onToolError(e){await this._updateRunSingle(e)}}class kO{}const F_=(t,e)=>{if(e!==void 0)return t[e];const r=Object.keys(t);if(r.length===1)return t[r[0]]},SO=(t,e)=>{const r=F_(t,e);if(!r){const n=Object.keys(t);throw new Error(`input values have ${n.length} keys, you must specify an input key or pass only 1 key as input`)}return r},EO=(t,e)=>{const r=F_(t,e);if(!r){const n=Object.keys(t);throw new Error(`output values have ${n.length} keys, you must specify an output key or pass only 1 key as output`)}return r};function qf(t,e="Human",r="AI"){const n=[];for(const i of t){let s;if(i._getType()==="human")s=e;else if(i._getType()==="ai")s=r;else if(i._getType()==="system")s="System";else if(i._getType()==="function")s="Function";else if(i._getType()==="generic")s=i.role;else throw new Error(`Got unsupported message type: ${i}`);const a=i.name?`${i.name}, `:"";n.push(`${s}: ${a}${i.content}`)}return n.join(`
`)}class OO extends oc{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"endpoint",{enumerable:!0,configurable:!0,writable:!0,value:gt("LANGCHAIN_ENDPOINT")||"http://localhost:1984"}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:{"Content-Type":"application/json"}}),Object.defineProperty(this,"session",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const e=gt("LANGCHAIN_API_KEY");e&&(this.headers["x-api-key"]=e)}async newSession(e){const r={start_time:Date.now(),name:e},n=await this.persistSession(r);return this.session=n,n}async loadSession(e){const r=`${this.endpoint}/sessions?name=${e}`;return this._handleSessionResponse(r)}async loadDefaultSession(){const e=`${this.endpoint}/sessions?name=default`;return this._handleSessionResponse(e)}async convertV2RunToRun(e){var s;const r=this.session??await this.loadDefaultSession(),n=e.serialized;let i;if(e.run_type==="llm"){const a=e.inputs.prompts?e.inputs.prompts:e.inputs.messages.map(l=>qf(l));i={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:n,type:e.run_type,session_id:r.id,prompts:a,response:e.outputs}}else if(e.run_type==="chain"){const a=await Promise.all(e.child_runs.map(l=>this.convertV2RunToRun(l)));i={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:n,type:e.run_type,session_id:r.id,inputs:e.inputs,outputs:e.outputs,child_llm_runs:a.filter(l=>l.type==="llm"),child_chain_runs:a.filter(l=>l.type==="chain"),child_tool_runs:a.filter(l=>l.type==="tool")}}else if(e.run_type==="tool"){const a=await Promise.all(e.child_runs.map(l=>this.convertV2RunToRun(l)));i={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:n,type:e.run_type,session_id:r.id,tool_input:e.inputs.input,output:(s=e.outputs)==null?void 0:s.output,action:JSON.stringify(n),child_llm_runs:a.filter(l=>l.type==="llm"),child_chain_runs:a.filter(l=>l.type==="chain"),child_tool_runs:a.filter(l=>l.type==="tool")}}else throw new Error(`Unknown run type: ${e.run_type}`);return i}async persistRun(e){let r,n;e.run_type!==void 0?n=await this.convertV2RunToRun(e):n=e,n.type==="llm"?r=`${this.endpoint}/llm-runs`:n.type==="chain"?r=`${this.endpoint}/chain-runs`:r=`${this.endpoint}/tool-runs`;const i=await fetch(r,{method:"POST",headers:this.headers,body:JSON.stringify(n)});i.ok||console.error(`Failed to persist run: ${i.status} ${i.statusText}`)}async persistSession(e){const r=`${this.endpoint}/sessions`,n=await fetch(r,{method:"POST",headers:this.headers,body:JSON.stringify(e)});return n.ok?{id:(await n.json()).id,...e}:(console.error(`Failed to persist session: ${n.status} ${n.statusText}, using default session.`),{id:1,...e})}async _handleSessionResponse(e){const r=await fetch(e,{method:"GET",headers:this.headers});let n;if(!r.ok)return console.error(`Failed to load session: ${r.status} ${r.statusText}`),n={id:1,start_time:Date.now()},this.session=n,n;const i=await r.json();return i.length===0?(n={id:1,start_time:Date.now()},this.session=n,n):([n]=i,this.session=n,n)}}async function PO(t){const e=new OO;return t?await e.loadSession(t):await e.loadDefaultSession(),e}async function TO(){return new xO}let sd;function jO(){const t="default"in Yr?Yr.default:Yr;return new t({autoStart:!0,concurrency:1})}async function st(t,e){e===!0?await t():(typeof sd>"u"&&(sd=jO()),sd.add(t))}function CO(t){return t?Array.isArray(t)||"name"in t?{callbacks:t}:t:{}}class AO{setHandler(e){return this.setHandlers([e])}}class lc{constructor(e,r,n,i,s,a,o,l){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:l})}async handleText(e){await Promise.all(this.handlers.map(r=>st(async()=>{var n;try{await((n=r.handleText)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch(i){console.error(`Error in handler ${r.constructor.name}, handleText: ${i}`)}},r.awaitHandlers)))}}class IO extends lc{getChild(e){const r=new Vt(this.runId);return r.setHandlers(this.inheritableHandlers),r.addTags(this.inheritableTags),r.addMetadata(this.inheritableMetadata),e&&r.addTags([e],!1),r}async handleRetrieverEnd(e){await Promise.all(this.handlers.map(r=>st(async()=>{var n;if(!r.ignoreRetriever)try{await((n=r.handleRetrieverEnd)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch{console.error(`Error in handler ${r.constructor.name}, handleRetriever`)}},r.awaitHandlers)))}async handleRetrieverError(e){await Promise.all(this.handlers.map(r=>st(async()=>{var n;if(!r.ignoreRetriever)try{await((n=r.handleRetrieverError)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch(i){console.error(`Error in handler ${r.constructor.name}, handleRetrieverError: ${i}`)}},r.awaitHandlers)))}}class Og extends lc{async handleLLMNewToken(e,r,n,i,s,a){await Promise.all(this.handlers.map(o=>st(async()=>{var l;if(!o.ignoreLLM)try{await((l=o.handleLLMNewToken)==null?void 0:l.call(o,e,r??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,a))}catch(u){console.error(`Error in handler ${o.constructor.name}, handleLLMNewToken: ${u}`)}},o.awaitHandlers)))}async handleLLMError(e){await Promise.all(this.handlers.map(r=>st(async()=>{var n;if(!r.ignoreLLM)try{await((n=r.handleLLMError)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch(i){console.error(`Error in handler ${r.constructor.name}, handleLLMError: ${i}`)}},r.awaitHandlers)))}async handleLLMEnd(e){await Promise.all(this.handlers.map(r=>st(async()=>{var n;if(!r.ignoreLLM)try{await((n=r.handleLLMEnd)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch(i){console.error(`Error in handler ${r.constructor.name}, handleLLMEnd: ${i}`)}},r.awaitHandlers)))}}class RO extends lc{getChild(e){const r=new Vt(this.runId);return r.setHandlers(this.inheritableHandlers),r.addTags(this.inheritableTags),r.addMetadata(this.inheritableMetadata),e&&r.addTags([e],!1),r}async handleChainError(e,r,n,i,s){await Promise.all(this.handlers.map(a=>st(async()=>{var o;if(!a.ignoreChain)try{await((o=a.handleChainError)==null?void 0:o.call(a,e,this.runId,this._parentRunId,this.tags,s))}catch(l){console.error(`Error in handler ${a.constructor.name}, handleChainError: ${l}`)}},a.awaitHandlers)))}async handleChainEnd(e,r,n,i,s){await Promise.all(this.handlers.map(a=>st(async()=>{var o;if(!a.ignoreChain)try{await((o=a.handleChainEnd)==null?void 0:o.call(a,e,this.runId,this._parentRunId,this.tags,s))}catch(l){console.error(`Error in handler ${a.constructor.name}, handleChainEnd: ${l}`)}},a.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(r=>st(async()=>{var n;if(!r.ignoreAgent)try{await((n=r.handleAgentAction)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch(i){console.error(`Error in handler ${r.constructor.name}, handleAgentAction: ${i}`)}},r.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(r=>st(async()=>{var n;if(!r.ignoreAgent)try{await((n=r.handleAgentEnd)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch(i){console.error(`Error in handler ${r.constructor.name}, handleAgentEnd: ${i}`)}},r.awaitHandlers)))}}class NO extends lc{getChild(e){const r=new Vt(this.runId);return r.setHandlers(this.inheritableHandlers),r.addTags(this.inheritableTags),r.addMetadata(this.inheritableMetadata),e&&r.addTags([e],!1),r}async handleToolError(e){await Promise.all(this.handlers.map(r=>st(async()=>{var n;if(!r.ignoreAgent)try{await((n=r.handleToolError)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch(i){console.error(`Error in handler ${r.constructor.name}, handleToolError: ${i}`)}},r.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(r=>st(async()=>{var n;if(!r.ignoreAgent)try{await((n=r.handleToolEnd)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch(i){console.error(`Error in handler ${r.constructor.name}, handleToolEnd: ${i}`)}},r.awaitHandlers)))}}class Vt extends AO{constructor(e){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=[],this.inheritableHandlers=[],this._parentRunId=e}async handleLLMStart(e,r,n=void 0,i=void 0,s=void 0){return Promise.all(r.map(async a=>{const o=Kr();return await Promise.all(this.handlers.map(l=>st(async()=>{var u;if(!l.ignoreLLM)try{await((u=l.handleLLMStart)==null?void 0:u.call(l,e,[a],o,this._parentRunId,s,this.tags,this.metadata))}catch(c){console.error(`Error in handler ${l.constructor.name}, handleLLMStart: ${c}`)}},l.awaitHandlers))),new Og(o,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(e,r,n=void 0,i=void 0,s=void 0){return Promise.all(r.map(async a=>{const o=Kr();return await Promise.all(this.handlers.map(l=>st(async()=>{var u,c;if(!l.ignoreLLM)try{if(l.handleChatModelStart)await((u=l.handleChatModelStart)==null?void 0:u.call(l,e,[a],o,this._parentRunId,s,this.tags,this.metadata));else if(l.handleLLMStart){const d=qf(a);await((c=l.handleLLMStart)==null?void 0:c.call(l,e,[d],o,this._parentRunId,s,this.tags,this.metadata))}}catch(d){console.error(`Error in handler ${l.constructor.name}, handleLLMStart: ${d}`)}},l.awaitHandlers))),new Og(o,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(e,r,n=Kr(),i=void 0){return await Promise.all(this.handlers.map(s=>st(async()=>{var a;if(!s.ignoreChain)try{await((a=s.handleChainStart)==null?void 0:a.call(s,e,r,n,this._parentRunId,this.tags,this.metadata,i))}catch(o){console.error(`Error in handler ${s.constructor.name}, handleChainStart: ${o}`)}},s.awaitHandlers))),new RO(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,r,n=Kr()){return await Promise.all(this.handlers.map(i=>st(async()=>{var s;if(!i.ignoreAgent)try{await((s=i.handleToolStart)==null?void 0:s.call(i,e,r,n,this._parentRunId,this.tags,this.metadata))}catch(a){console.error(`Error in handler ${i.constructor.name}, handleToolStart: ${a}`)}},i.awaitHandlers))),new NO(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,r,n=Kr(),i=void 0){return await Promise.all(this.handlers.map(s=>st(async()=>{var a;if(!s.ignoreRetriever)try{await((a=s.handleRetrieverStart)==null?void 0:a.call(s,e,r,n,this._parentRunId,this.tags,this.metadata))}catch(o){console.error(`Error in handler ${s.constructor.name}, handleRetrieverStart: ${o}`)}},s.awaitHandlers))),new IO(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}addHandler(e,r=!0){this.handlers.push(e),r&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(r=>r!==e),this.inheritableHandlers=this.inheritableHandlers.filter(r=>r!==e)}setHandlers(e,r=!0){this.handlers=[],this.inheritableHandlers=[];for(const n of e)this.addHandler(n,r)}addTags(e,r=!0){this.removeTags(e),this.tags.push(...e),r&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(r=>!e.includes(r)),this.inheritableTags=this.inheritableTags.filter(r=>!e.includes(r))}addMetadata(e,r=!0){this.metadata={...this.metadata,...e},r&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(const r of Object.keys(e))delete this.metadata[r],delete this.inheritableMetadata[r]}copy(e=[],r=!0){const n=new Vt(this._parentRunId);for(const i of this.handlers){const s=this.inheritableHandlers.includes(i);n.addHandler(i,s)}for(const i of this.tags){const s=this.inheritableTags.includes(i);n.addTags([i],s)}for(const i of Object.keys(this.metadata)){const s=Object.keys(this.inheritableMetadata).includes(i);n.addMetadata({[i]:this.metadata[i]},s)}for(const i of e)n.handlers.filter(s=>s.name==="console_callback_handler").some(s=>s.name===i.name)||n.addHandler(i,r);return n}static fromHandlers(e){class r extends jo{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Kr()}),Object.assign(this,e)}}const n=new this;return n.addHandler(new r),n}static async configure(e,r,n,i,s,a,o){let l;(e||r)&&(Array.isArray(e)||!e?(l=new Vt,l.setHandlers((e==null?void 0:e.map(Pg))??[],!0)):l=e,l=l.copy(Array.isArray(r)?r.map(Pg):r==null?void 0:r.handlers,!1));const u=gt("LANGCHAIN_VERBOSE")||(o==null?void 0:o.verbose),c=gt("LANGCHAIN_TRACING_V2")==="true",d=c||(gt("LANGCHAIN_TRACING")??!1);if(u||d){if(l||(l=new Vt),u&&!l.handlers.some(h=>h.name===wg.prototype.name)){const h=new wg;l.addHandler(h,!0)}if(d&&!l.handlers.some(h=>h.name==="langchain_tracer"))if(c)l.addHandler(await TO(),!0);else{const h=gt("LANGCHAIN_PROJECT")&&gt("LANGCHAIN_SESSION");l.addHandler(await PO(h),!0)}}return(n||i)&&l&&(l.addTags(n??[]),l.addTags(i??[],!1)),(s||a)&&l&&(l.addMetadata(s??{}),l.addMetadata(a??{},!1)),l}}function Pg(t){return"name"in t?t:jo.fromMethods(t)}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */const LO=Object.prototype.hasOwnProperty;function $O(t,e){return LO.call(t,e)}function DO(t){if(Array.isArray(t)){const r=new Array(t.length);for(let n=0;n<r.length;n++)r[n]=""+n;return r}if(Object.keys)return Object.keys(t);let e=[];for(let r in t)$O(t,r)&&e.push(r);return e}function Is(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function ch(t){let e=0;const r=t.length;let n;for(;e<r;){if(n=t.charCodeAt(e),n>=48&&n<=57){e++;continue}return!1}return!0}function MO(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function dh(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(let r=0,n=t.length;r<n;r++)if(dh(t[r]))return!0}else if(typeof t=="object"){const r=DO(t),n=r.length;for(var e=0;e<n;e++)if(dh(t[r[e]]))return!0}}return!1}function Tg(t,e){const r=[t];for(const n in e){const i=typeof e[n]=="object"?JSON.stringify(e[n],null,2):e[n];typeof i<"u"&&r.push(`${n}: ${i}`)}return r.join(`
`)}class UO extends Error{constructor(e,r,n,i,s){super(Tg(e,{name:r,index:n,operation:i,tree:s})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.setPrototypeOf(this,new.target.prototype),this.message=Tg(e,{name:r,index:n,operation:i,tree:s})}}const He=UO,ts={add:function(t,e,r){return t[e]=this.value,{newDocument:r}},remove:function(t,e,r){var n=t[e];return delete t[e],{newDocument:r,removed:n}},replace:function(t,e,r){var n=t[e];return t[e]=this.value,{newDocument:r,removed:n}},move:function(t,e,r){let n=hh(r,this.path);n&&(n=Is(n));const i=Ra(r,{op:"remove",path:this.from}).removed;return Ra(r,{op:"add",path:this.path,value:i}),{newDocument:r,removed:n}},copy:function(t,e,r){const n=hh(r,this.from);return Ra(r,{op:"add",path:this.path,value:Is(n)}),{newDocument:r}},test:function(t,e,r){return{newDocument:r,test:wu(t[e],this.value)}},_get:function(t,e,r){return this.value=t[e],{newDocument:r}}};var zO={add:function(t,e,r){return ch(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:r,index:e}},remove:function(t,e,r){var n=t.splice(e,1);return{newDocument:r,removed:n[0]}},replace:function(t,e,r){var n=t[e];return t[e]=this.value,{newDocument:r,removed:n}},move:ts.move,copy:ts.copy,test:ts.test,_get:ts._get};function hh(t,e){if(e=="")return t;var r={op:"_get",path:e};return Ra(t,r),r.value}function Ra(t,e,r=!1,n=!0,i=!0,s=0){if(r&&(typeof r=="function"?r(e,0,t,e.path):fh(e,0)),e.path===""){let a={newDocument:t};if(e.op==="add")return a.newDocument=e.value,a;if(e.op==="replace")return a.newDocument=e.value,a.removed=t,a;if(e.op==="move"||e.op==="copy")return a.newDocument=hh(t,e.from),e.op==="move"&&(a.removed=t),a;if(e.op==="test"){if(a.test=wu(t,e.value),a.test===!1)throw new He("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return a.newDocument=t,a}else{if(e.op==="remove")return a.removed=t,a.newDocument=null,a;if(e.op==="_get")return e.value=t,a;if(r)throw new He("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,e,t);return a}}else{n||(t=Is(t));const o=(e.path||"").split("/");let l=t,u=1,c=o.length,d,h,b;for(typeof r=="function"?b=r:b=fh;;){if(h=o[u],h&&h.indexOf("~")!=-1&&(h=MO(h)),i&&(h=="__proto__"||h=="prototype"&&u>0&&o[u-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(r&&d===void 0&&(l[h]===void 0?d=o.slice(0,u).join("/"):u==c-1&&(d=e.path),d!==void 0&&b(e,0,t,d)),u++,Array.isArray(l)){if(h==="-")h=l.length;else{if(r&&!ch(h))throw new He("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,e,t);ch(h)&&(h=~~h)}if(u>=c){if(r&&e.op==="add"&&h>l.length)throw new He("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,e,t);const v=zO[e.op].call(e,l,h,t);if(v.test===!1)throw new He("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return v}}else if(u>=c){const v=ts[e.op].call(e,l,h,t);if(v.test===!1)throw new He("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return v}if(l=l[h],r&&u<c&&(!l||typeof l!="object"))throw new He("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,e,t)}}}function Wf(t,e,r,n=!0,i=!0){if(r&&!Array.isArray(e))throw new He("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");n||(t=Is(t));const s=new Array(e.length);for(let a=0,o=e.length;a<o;a++)s[a]=Ra(t,e[a],r,!0,i,a),t=s[a].newDocument;return s.newDocument=t,s}function fh(t,e,r,n){if(typeof t!="object"||t===null||Array.isArray(t))throw new He("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,r);if(ts[t.op]){if(typeof t.path!="string")throw new He("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,r);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new He('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,r);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new He("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,r);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new He("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,r);if((t.op==="add"||t.op==="replace"||t.op==="test")&&dh(t.value))throw new He("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,r);if(r){if(t.op=="add"){var i=t.path.split("/").length,s=n.split("/").length;if(i!==s+1&&i!==s)throw new He("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,r)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==n)throw new He("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,r)}else if(t.op==="move"||t.op==="copy"){var a={op:"_get",path:t.from,value:void 0},o=FO([a],r);if(o&&o.name==="OPERATION_PATH_UNRESOLVABLE")throw new He("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,r)}}}else throw new He("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,r)}function FO(t,e,r){try{if(!Array.isArray(t))throw new He("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)Wf(Is(e),Is(t),r||!0);else{r=r||fh;for(var n=0;n<t.length;n++)r(t[n],n,e,void 0)}}catch(i){if(i instanceof He)return i;throw i}}function wu(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var r=Array.isArray(t),n=Array.isArray(e),i,s,a;if(r&&n){if(s=t.length,s!=e.length)return!1;for(i=s;i--!==0;)if(!wu(t[i],e[i]))return!1;return!0}if(r!=n)return!1;var o=Object.keys(t);if(s=o.length,s!==Object.keys(e).length)return!1;for(i=s;i--!==0;)if(!e.hasOwnProperty(o[i]))return!1;for(i=s;i--!==0;)if(a=o[i],!wu(t[a],e[a]))return!1;return!0}return t!==t&&e!==e}class go extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const e=await this.reader.read();return e.done&&this.reader.releaseLock(),e}catch(e){throw this.reader.releaseLock(),e}}async return(){this.ensureReader();const e=this.reader.cancel();return this.reader.releaseLock(),await e,{done:!0,value:void 0}}[Symbol.asyncIterator](){return this}static fromReadableStream(e){const r=e.getReader();return new go({start(n){return i();function i(){return r.read().then(({done:s,value:a})=>{if(s){n.close();return}return n.enqueue(a),i()})}}})}static fromAsyncGenerator(e){return new go({async pull(r){const{value:n,done:i}=await e.next();i?r.close():n&&r.enqueue(n)}})}}class ai{constructor(e){Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=e.ops}concat(e){const r=this.ops.concat(e.ops),n=Wf({},r);return new Jf({ops:r,state:n[n.length-1].newDocument})}}class Jf extends ai{constructor(e){super(e),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=e.state}concat(e){const r=this.ops.concat(e.ops),n=Wf(this.state,e.ops);return new Jf({ops:r,state:n[n.length-1].newDocument})}}class BO extends oc{constructor(e){super(e),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"indexMap",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=go.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.parent_run_id===void 0)return!1;const r=e.tags??[];let n=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(n=n||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(n=n||this.includeTypes.includes(e.run_type)),this.includeTags!==void 0&&(n=n||r.find(i=>{var s;return(s=this.includeTags)==null?void 0:s.includes(i)})!==void 0),this.excludeNames!==void 0&&(n=n&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(n=n&&!this.excludeTypes.includes(e.run_type)),this.excludeTags!==void 0&&(n=n&&r.every(i=>{var s;return!((s=this.excludeTags)!=null&&s.includes(i))})),n}async onRunCreate(e){var n;if(e.parent_run_id===void 0&&await this.writer.write(new ai({ops:[{op:"replace",path:"",value:{id:e.id,streamed_output:[],final_output:void 0,logs:[]}}]})),!this._includeRun(e))return;this.indexMap[e.id]=Math.max(...Object.values(this.indexMap),-1)+1;const r={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:((n=e.extra)==null?void 0:n.metadata)??{},start_time:new Date(e.start_time).toISOString(),streamed_output_str:[],final_output:void 0,end_time:void 0};await this.writer.write(new ai({ops:[{op:"add",path:`/logs/${this.indexMap[e.id]}`,value:r}]}))}async onRunUpdate(e){try{const r=this.indexMap[e.id];if(r===void 0)return;const n=[{op:"add",path:`/logs/${r}/final_output`,value:e.outputs}];e.end_time!==void 0&&n.push({op:"add",path:`/logs/${r}/end_time`,value:new Date(e.end_time).toISOString()});const i=new ai({ops:n});await this.writer.write(i)}finally{if(e.parent_run_id===void 0){const r=new ai({ops:[{op:"replace",path:"/final_output",value:e.outputs}]});await this.writer.write(r),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,r){const n=this.indexMap[e.id];if(n===void 0)return;const i=new ai({ops:[{op:"add",path:`/logs/${n}/streamed_output_str/-`,value:r}]});await this.writer.write(i)}}async function vi(t){return Vt.configure(t==null?void 0:t.callbacks,void 0,t==null?void 0:t.tags,void 0,t==null?void 0:t.metadata)}function vt(t,e){return t&&!Array.isArray(t)&&typeof t=="object"?t:{[e]:t}}class _t extends zn{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}bind(e){return new bu({bound:this,kwargs:e,config:{}})}map(){return new Gf({bound:this})}withRetry(e){return new VO({bound:this,kwargs:{},config:{},maxAttemptNumber:e==null?void 0:e.stopAfterAttempt,...e})}withConfig(e){return new bu({bound:this,config:e,kwargs:{}})}withFallbacks(e){return new KO({runnable:this,fallbacks:e.fallbacks})}_getOptionsList(e,r=0){if(Array.isArray(e)){if(e.length!==r)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${r} inputs`);return e}return Array.from({length:r},()=>e)}async batch(e,r,n){const i=this._getOptionsList(r??{},e.length),s=new Rf({maxConcurrency:n==null?void 0:n.maxConcurrency,onFailedAttempt:o=>{throw o}}),a=e.map((o,l)=>s.call(async()=>{try{return await this.invoke(o,i[l])}catch(u){if(n!=null&&n.returnExceptions)return u;throw u}}));return Promise.all(a)}async*_streamIterator(e,r){yield this.invoke(e,r)}async stream(e,r){return go.fromAsyncGenerator(this._streamIterator(e,r))}_separateRunnableConfigFromCallOptions(e={}){const r={callbacks:e.callbacks,tags:e.tags,metadata:e.metadata},n={...e};return delete n.callbacks,delete n.tags,delete n.metadata,[r,n]}async _callWithConfig(e,r,n){const i=await vi(n),s=await(i==null?void 0:i.handleChainStart(this.toJSON(),vt(r,"input"),void 0,n==null?void 0:n.runType));let a;try{a=await e.bind(this)(r,n,s)}catch(o){throw await(s==null?void 0:s.handleChainError(o)),o}return await(s==null?void 0:s.handleChainEnd(vt(a,"output"))),a}async _batchWithConfig(e,r,n,i){const s=this._getOptionsList(n??{},r.length),a=await Promise.all(s.map(vi)),o=await Promise.all(a.map((u,c)=>u==null?void 0:u.handleChainStart(this.toJSON(),vt(r[c],"input"))));let l;try{l=await e(r,s,o,i)}catch(u){throw await Promise.all(o.map(c=>c==null?void 0:c.handleChainError(u))),u}return await Promise.all(o.map(u=>u==null?void 0:u.handleChainEnd(vt(l,"output")))),l}async*_transformStreamWithConfig(e,r,n){let i,s=!0,a,o=!0;const l=await vi(n);let u;const c=this.toJSON();async function*d(){for await(const b of e){if(u||(u=await(l==null?void 0:l.handleChainStart(c,{input:""},void 0,n==null?void 0:n.runType))),s)if(i===void 0)i=b;else try{i=i.concat(b)}catch{i=void 0,s=!1}yield b}}const h=d();try{const b=r(h,u,n);for await(const v of b)if(yield v,o)if(a===void 0)a=v;else try{a=a.concat(v)}catch{a=void 0,o=!1}}catch(b){throw await(u==null?void 0:u.handleChainError(b,void 0,void 0,void 0,{inputs:vt(i,"input")})),b}await(u==null?void 0:u.handleChainEnd(a??{},void 0,void 0,void 0,{inputs:vt(i,"input")}))}_patchConfig(e={},r=void 0){return{...e,callbacks:r}}pipe(e){return new rs({first:this,last:fi(e)})}async*transform(e,r){let n;for await(const i of e)n===void 0?n=i:n=n.concat(i);yield*this._streamIterator(n,r)}async*streamLog(e,r,n){const i=new BO({...n,autoClose:!1}),s=r??{},{callbacks:a}=s;if(a===void 0)s.callbacks=[i];else if(Array.isArray(a))s.callbacks=a.concat([i]);else{const c=a.copy();c.inheritableHandlers.push(i),s.callbacks=c}const o=await this.stream(e,s);async function l(){try{for await(const c of o){const d=new ai({ops:[{op:"add",path:"/streamed_output/-",value:c}]});await i.writer.write(d)}}finally{await i.writer.close()}}const u=l();try{for await(const c of i)yield c}finally{await u}}static isRunnable(e){return e.lc_runnable}}class bu extends _t{static lc_name(){return"RunnableBinding"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","schema","runnable"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound,this.kwargs=e.kwargs,this.config=e.config}_mergeConfig(e){const r={...this.config};if(e)for(const n of Object.keys(e))n==="metadata"?r[n]={...r[n],...e[n]}:n==="tags"?r[n]=(r[n]??[]).concat(e[n]??[]):r[n]=e[n]??r[n];return r}bind(e){return this.constructor({bound:this.bound,kwargs:{...this.kwargs,...e},config:this.config})}withConfig(e){return this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...e}})}withRetry(e){return this.constructor({bound:this.bound.withRetry(e),kwargs:this.kwargs,config:this.config})}async invoke(e,r){return this.bound.invoke(e,this._mergeConfig({...r,...this.kwargs}))}async batch(e,r,n){const i=Array.isArray(r)?r.map(s=>this._mergeConfig({...s,...this.kwargs})):this._mergeConfig({...r,...this.kwargs});return this.bound.batch(e,i,n)}async*_streamIterator(e,r){yield*this.bound._streamIterator(e,this._mergeConfig({...r,...this.kwargs}))}async stream(e,r){return this.bound.stream(e,this._mergeConfig({...r,...this.kwargs}))}async*transform(e,r){yield*this.bound.transform(e,this._mergeConfig({...r,...this.kwargs}))}static isRunnableBinding(e){return e.bound&&_t.isRunnable(e.bound)}}class Gf extends _t{static lc_name(){return"RunnableEach"}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","schema","runnable"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound}bind(e){return new Gf({bound:this.bound.bind(e)})}async invoke(e,r){return this._callWithConfig(this._invoke,e,r)}async _invoke(e,r,n){return this.bound.batch(e,this._patchConfig(r,n==null?void 0:n.getChild()))}}class VO extends bu{static lc_name(){return"RunnableRetry"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","schema","runnable"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(e,r,n){const i=e>1?`retry:attempt:${e}`:void 0;return this._patchConfig(r,n==null?void 0:n.getChild(i))}async _invoke(e,r,n){return cu(i=>super.invoke(e,this._patchConfigForRetry(i,r,n)),{onFailedAttempt:this.onFailedAttempt,retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,r){return this._callWithConfig(this._invoke,e,r)}async _batch(e,r,n,i){const s={};try{await cu(async a=>{const o=e.map((h,b)=>b).filter(h=>s[h.toString()]===void 0||s[h.toString()]instanceof Error),l=o.map(h=>e[h]),u=o.map(h=>this._patchConfigForRetry(a,r==null?void 0:r[h],n==null?void 0:n[h])),c=await super.batch(l,u,{...i,returnExceptions:!0});let d;for(let h=0;h<c.length;h+=1){const b=c[h],v=o[h];b instanceof Error&&d===void 0&&(d=b),s[v.toString()]=b}if(d)throw d;return c},{onFailedAttempt:this.onFailedAttempt,retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(a){if((i==null?void 0:i.returnExceptions)!==!0)throw a}return Object.keys(s).sort((a,o)=>parseInt(a,10)-parseInt(o,10)).map(a=>s[parseInt(a,10)])}async batch(e,r,n){return this._batchWithConfig(this._batch.bind(this),e,r,n)}}class rs extends _t{static lc_name(){return"RunnableSequence"}constructor(e){super(e),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","schema","runnable"]}),this.first=e.first,this.middle=e.middle??this.middle,this.last=e.last}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,r){const n=await vi(r),i=await(n==null?void 0:n.handleChainStart(this.toJSON(),vt(e,"input")));let s=e,a;try{const o=[this.first,...this.middle];for(let l=0;l<o.length;l+=1)s=await o[l].invoke(s,this._patchConfig(r,i==null?void 0:i.getChild(`seq:step:${l+1}`)));a=await this.last.invoke(s,this._patchConfig(r,i==null?void 0:i.getChild(`seq:step:${this.steps.length}`)))}catch(o){throw await(i==null?void 0:i.handleChainError(o)),o}return await(i==null?void 0:i.handleChainEnd(vt(a,"output"))),a}async batch(e,r,n){const i=this._getOptionsList(r??{},e.length),s=await Promise.all(i.map(vi)),a=await Promise.all(s.map((u,c)=>u==null?void 0:u.handleChainStart(this.toJSON(),vt(e[c],"input"))));let o=e,l;try{const u=[this.first,...this.middle];for(let c=0;c<u.length;c+=1)o=await u[c].batch(o,a.map((h,b)=>this._patchConfig(i[b],h==null?void 0:h.getChild(`seq:step:${c+1}`))),n);l=await this.last.batch(o,a.map(c=>this._patchConfig(i[this.steps.length-1],c==null?void 0:c.getChild(`seq:step:${this.steps.length}`))),n)}catch(u){throw await Promise.all(a.map(c=>c==null?void 0:c.handleChainError(u))),u}return await Promise.all(a.map((u,c)=>u==null?void 0:u.handleChainEnd(vt(l[c],"output")))),l}async*_streamIterator(e,r){const n=await vi(r),i=await(n==null?void 0:n.handleChainStart(this.toJSON(),vt(e,"input")));let s=e;const a=[this.first,...this.middle,this.last],o=Math.min(a.length-1,a.length-[...a].reverse().findIndex(c=>{var b;const d=c.transform===_t.prototype.transform,h=bu.isRunnableBinding(c)&&((b=c.bound)==null?void 0:b.transform)===_t.prototype.transform;return d||h})-1);try{const c=a.slice(0,o);for(let d=0;d<c.length;d+=1)s=await c[d].invoke(s,this._patchConfig(r,i==null?void 0:i.getChild(`seq:step:${d+1}`)))}catch(c){throw await(i==null?void 0:i.handleChainError(c)),c}let l=!0,u;try{let c=await a[o]._streamIterator(s,this._patchConfig(r,i==null?void 0:i.getChild(`seq:step:${o+1}`)));const d=a.slice(o+1);for(let h=0;h<d.length;h+=1)c=await d[h].transform(c,this._patchConfig(r,i==null?void 0:i.getChild(`seq:step:${o+h+2}`)));for await(const h of c)if(yield h,l)if(u===void 0)u=h;else try{u=u.concat(h)}catch{u=void 0,l=!1}}catch(c){throw await(i==null?void 0:i.handleChainError(c)),c}await(i==null?void 0:i.handleChainEnd(vt(u,"output")))}pipe(e){return rs.isRunnableSequence(e)?new rs({first:this.first,middle:this.middle.concat([this.last,e.first,...e.middle]),last:e.last}):new rs({first:this.first,middle:[...this.middle,this.last],last:fi(e)})}static isRunnableSequence(e){return Array.isArray(e.middle)&&_t.isRunnable(e)}static from([e,...r]){return new rs({first:fi(e),middle:r.slice(0,-1).map(fi),last:fi(r[r.length-1])})}}class HO extends _t{static lc_name(){return"RunnableMap"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","schema","runnable"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(const[r,n]of Object.entries(e.steps))this.steps[r]=fi(n)}async invoke(e,r){const n=await vi(r),i=await(n==null?void 0:n.handleChainStart(this.toJSON(),{input:e})),s={};try{await Promise.all(Object.entries(this.steps).map(async([a,o])=>{s[a]=await o.invoke(e,this._patchConfig(r,i==null?void 0:i.getChild(a)))}))}catch(a){throw await(i==null?void 0:i.handleChainError(a)),a}return await(i==null?void 0:i.handleChainEnd(s)),s}}class ZO extends _t{static lc_name(){return"RunnableLambda"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","schema","runnable"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.func=e.func}async _invoke(e,r,n){let i=await this.func(e);return i&&_t.isRunnable(i)&&(i=await i.invoke(e,this._patchConfig(r,n==null?void 0:n.getChild()))),i}async invoke(e,r){return this._callWithConfig(this._invoke,e,r)}}class KO extends _t{static lc_name(){return"RunnableWithFallbacks"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","schema","runnable"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){yield this.runnable;for(const e of this.fallbacks)yield e}async invoke(e,r){const n=await Vt.configure(r==null?void 0:r.callbacks,void 0,r==null?void 0:r.tags,void 0,r==null?void 0:r.metadata),i=await(n==null?void 0:n.handleChainStart(this.toJSON(),vt(e,"input")));let s;for(const a of this.runnables())try{const o=await a.invoke(e,this._patchConfig(r,i==null?void 0:i.getChild()));return await(i==null?void 0:i.handleChainEnd(vt(o,"output"))),o}catch(o){s===void 0&&(s=o)}throw s===void 0?new Error("No error stored at end of fallback."):(await(i==null?void 0:i.handleChainError(s)),s)}async batch(e,r,n){if(n!=null&&n.returnExceptions)throw new Error("Not implemented.");const i=this._getOptionsList(r??{},e.length),s=await Promise.all(i.map(l=>Vt.configure(l==null?void 0:l.callbacks,void 0,l==null?void 0:l.tags,void 0,l==null?void 0:l.metadata))),a=await Promise.all(s.map((l,u)=>l==null?void 0:l.handleChainStart(this.toJSON(),vt(e[u],"input"))));let o;for(const l of this.runnables())try{const u=await l.batch(e,a.map((c,d)=>this._patchConfig(i[d],c==null?void 0:c.getChild())),n);return await Promise.all(a.map((c,d)=>c==null?void 0:c.handleChainEnd(vt(u[d],"output")))),u}catch(u){o===void 0&&(o=u)}throw o?(await Promise.all(a.map(l=>l==null?void 0:l.handleChainError(o))),o):new Error("No error stored at end of fallbacks.")}}function fi(t){if(typeof t=="function")return new ZO({func:t});if(_t.isRunnable(t))return t;if(!Array.isArray(t)&&typeof t=="object"){const e={};for(const[r,n]of Object.entries(t))e[r]=fi(n);return new HO({steps:e})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}class B_ extends H0{constructor(e){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts","base"]}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new Si(this.value)]}}class Yf extends _t{get lc_attributes(){return{partialVariables:void 0}}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts",this._getPromptType()]}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"partialVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{inputVariables:r}=e;if(r.includes("stop"))throw new Error("Cannot have an input variable named 'stop', as it is used internally, please rename.");Object.assign(this,e)}async mergePartialAndUserVariables(e){const r=this.partialVariables??{},n={};for(const[s,a]of Object.entries(r))typeof a=="string"?n[s]=a:n[s]=await a();return{...n,...e}}async invoke(e,r){return this._callWithConfig(n=>this.formatPromptValue(n),e,{...r,runType:"prompt"})}serialize(){throw new Error("Use .toJSON() instead")}static async deserialize(e){switch(e._type){case"prompt":{const{PromptTemplate:r}=await it(()=>Promise.resolve().then(()=>jg),void 0,import.meta.url);return r.deserialize(e)}case void 0:{const{PromptTemplate:r}=await it(()=>Promise.resolve().then(()=>jg),void 0,import.meta.url);return r.deserialize({...e,_type:"prompt"})}case"few_shot":{const{FewShotPromptTemplate:r}=await it(()=>import("./few_shot-efdacceb.js"),["./few_shot-efdacceb.js","./embed-e406f2b7.css"],import.meta.url);return r.deserialize(e)}default:throw new Error(`Invalid prompt type in config: ${e._type}`)}}}class qO extends Yf{async formatPromptValue(e){const r=await this.format(e);return new B_(r)}}const V_=t=>{const e=t.split(""),r=[],n=(s,a)=>{for(let o=a;o<e.length;o+=1)if(s.includes(e[o]))return o;return-1};let i=0;for(;i<e.length;)if(e[i]==="{"&&i+1<e.length&&e[i+1]==="{")r.push({type:"literal",text:"{"}),i+=2;else if(e[i]==="}"&&i+1<e.length&&e[i+1]==="}")r.push({type:"literal",text:"}"}),i+=2;else if(e[i]==="{"){const s=n("}",i);if(s<0)throw new Error("Unclosed '{' in template.");r.push({type:"variable",name:e.slice(i+1,s).join("")}),i=s+1}else{if(e[i]==="}")throw new Error("Single '}' in template.");{const s=n("{}",i),a=(s<0?e.slice(i):e.slice(i,s)).join("");r.push({type:"literal",text:a}),i=s<0?e.length:s}}return r},WO=(t,e)=>V_(t).reduce((r,n)=>{if(n.type==="variable"){if(n.name in e)return r+e[n.name];throw new Error(`Missing value for input ${n.name}`)}return r+n.text},""),ph={"f-string":WO,jinja2:(t,e)=>""},JO={"f-string":V_,jinja2:t=>[]},H_=(t,e,r)=>ph[e](t,r),GO=(t,e)=>JO[e](t),YO=(t,e,r)=>{if(!(e in ph)){const n=Object.keys(ph);throw new Error(`Invalid template format. Got \`${e}\`;
                         should be one of ${n}`)}try{const n=r.reduce((i,s)=>(i[s]="foo",i),{});H_(t,e,n)}catch(n){throw new Error(`Invalid prompt schema: ${n.message}`)}};class Ir extends qO{static lc_name(){return"PromptTemplate"}constructor(e){if(super(e),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign(this,e),this.validateTemplate){let r=this.inputVariables;this.partialVariables&&(r=r.concat(Object.keys(this.partialVariables))),YO(this.template,this.templateFormat,r)}}_getPromptType(){return"prompt"}async format(e){const r=await this.mergePartialAndUserVariables(e);return H_(this.template,this.templateFormat,r)}static fromExamples(e,r,n,i=`

`,s=""){const a=[s,...e,r].join(i);return new Ir({inputVariables:n,template:a})}static fromTemplate(e,{templateFormat:r="f-string",...n}={}){if(r==="jinja2")throw new Error("jinja2 templates are not currently supported.");const i=new Set;return GO(e,r).forEach(s=>{s.type==="variable"&&i.add(s.name)}),new Ir({inputVariables:[...i],templateFormat:r,template:e,...n})}async partial(e){const r=this.inputVariables.filter(s=>!(s in e)),n={...this.partialVariables??{},...e},i={...this,inputVariables:r,partialVariables:n};return new Ir(i)}serialize(){if(this.outputParser!==void 0)throw new Error("Cannot serialize a prompt template with an output parser");return{_type:this._getPromptType(),input_variables:this.inputVariables,template:this.template,template_format:this.templateFormat}}static async deserialize(e){if(!e.template)throw new Error("Prompt template must have a template");return new Ir({inputVariables:e.input_variables,template:e.template,templateFormat:e.template_format})}}const jg=Object.freeze(Object.defineProperty({__proto__:null,PromptTemplate:Ir},Symbol.toStringTag,{value:"Module"}));class QO extends _t{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts","chat"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}async invoke(e,r){return this._callWithConfig(n=>this.formatMessages(n),e,{...r,runType:"prompt"})}}class Z_ extends H0{static lc_name(){return"ChatPromptValue"}constructor(e){Array.isArray(e)&&(e={messages:e}),super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts","chat"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return JSON.stringify(this.messages)}toChatMessages(){return this.messages}}class uc extends QO{constructor(e){"prompt"in e||(e={prompt:e}),super(e),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt}get inputVariables(){return this.prompt.inputVariables}async formatMessages(e){return[await this.format(e)]}}class XO extends Yf{constructor(e){super(e)}async format(e){return(await this.formatPromptValue(e)).toString()}async formatPromptValue(e){const r=await this.formatMessages(e);return new Z_(r)}}class eP extends uc{static lc_name(){return"ChatMessagePromptTemplate"}constructor(e,r){"prompt"in e||(e={prompt:e,role:r}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}async format(e){return new Ku(await this.prompt.format(e),this.role)}static fromTemplate(e,r){return new this(Ir.fromTemplate(e),r)}}class tP extends uc{static lc_name(){return"HumanMessagePromptTemplate"}async format(e){return new Si(await this.prompt.format(e))}static fromTemplate(e){return new this(Ir.fromTemplate(e))}}class rP extends uc{static lc_name(){return"AIMessagePromptTemplate"}async format(e){return new Zu(await this.prompt.format(e))}static fromTemplate(e){return new this(Ir.fromTemplate(e))}}class K_ extends uc{static lc_name(){return"SystemMessagePromptTemplate"}async format(e){return new Lf(await this.prompt.format(e))}static fromTemplate(e){return new this(Ir.fromTemplate(e))}}function nP(t){return typeof t.formatMessages=="function"}function iP(t){if(nP(t)||V0(t))return t;const e=Ia(t);if(e._getType()==="human")return tP.fromTemplate(e.content);if(e._getType()==="ai")return rP.fromTemplate(e.content);if(e._getType()==="system")return K_.fromTemplate(e.content);if(Ku.isInstance(e))return eP.fromTemplate(e.content,e.role);throw new Error(`Could not coerce message prompt template from input. Received message type: "${e._getType()}".`)}class ns extends XO{static lc_name(){return"ChatPromptTemplate"}get lc_aliases(){return{promptMessages:"messages"}}constructor(e){if(super(e),Object.defineProperty(this,"promptMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign(this,e),this.validateTemplate){const r=new Set;for(const o of this.promptMessages)if(!(o instanceof Ln))for(const l of o.inputVariables)r.add(l);const n=this.inputVariables,i=new Set(this.partialVariables?n.concat(Object.keys(this.partialVariables)):n),s=new Set([...i].filter(o=>!r.has(o)));if(s.size>0)throw new Error(`Input variables \`${[...s]}\` are not used in any of the prompt messages.`);const a=new Set([...r].filter(o=>!i.has(o)));if(a.size>0)throw new Error(`Input variables \`${[...a]}\` are used in prompt messages but not in the prompt template.`)}}_getPromptType(){return"chat"}async formatMessages(e){const r=await this.mergePartialAndUserVariables(e);let n=[];for(const i of this.promptMessages)if(i instanceof Ln)n.push(i);else{const s=i.inputVariables.reduce((o,l)=>{if(!(l in r))throw new Error(`Missing value for input variable \`${l.toString()}\``);return o[l]=r[l],o},{}),a=await i.formatMessages(s);n=n.concat(a)}return n}async partial(e){const r=this.inputVariables.filter(s=>!(s in e)),n={...this.partialVariables??{},...e},i={...this,inputVariables:r,partialVariables:n};return new ns(i)}static fromMessages(e){const r=e.reduce((s,a)=>s.concat(a instanceof ns?a.promptMessages:[iP(a)]),[]),n=e.reduce((s,a)=>a instanceof ns?Object.assign(s,a.partialVariables):s,Object.create(null)),i=new Set;for(const s of r)if(!(s instanceof Ln))for(const a of s.inputVariables)a in n||i.add(a);return new ns({inputVariables:[...i],promptMessages:r,partialVariables:n})}static fromPromptMessages(e){return this.fromMessages(e)}}function sl(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var q_={exports:{}};(function(t,e){(function(r){t.exports=r()})(function(){return function r(n,i,s){function a(u,c){if(!i[u]){if(!n[u]){var d=typeof sl=="function"&&sl;if(!c&&d)return d(u,!0);if(o)return o(u,!0);throw new Error("Cannot find module '"+u+"'")}c=i[u]={exports:{}},n[u][0].call(c.exports,function(h){var b=n[u][1][h];return a(b||h)},c,c.exports,r,n,i,s)}return i[u].exports}for(var o=typeof sl=="function"&&sl,l=0;l<s.length;l++)a(s[l]);return a}({1:[function(r,n,i){(function(s,a,o,l,u,c,d,h,b){var v=r("crypto");function P(k,j){j=m(k,j);var _;return(_=j.algorithm!=="passthrough"?v.createHash(j.algorithm):new A).write===void 0&&(_.write=_.update,_.end=_.update),S(j,_).dispatch(k),_.update||_.end(""),_.digest?_.digest(j.encoding==="buffer"?void 0:j.encoding):(k=_.read(),j.encoding!=="buffer"?k.toString(j.encoding):k)}(i=n.exports=P).sha1=function(k){return P(k)},i.keys=function(k){return P(k,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},i.MD5=function(k){return P(k,{algorithm:"md5",encoding:"hex"})},i.keysMD5=function(k){return P(k,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var x=v.getHashes?v.getHashes().slice():["sha1","md5"],p=(x.push("passthrough"),["buffer","hex","binary","base64"]);function m(k,j){var _={};if(_.algorithm=(j=j||{}).algorithm||"sha1",_.encoding=j.encoding||"hex",_.excludeValues=!!j.excludeValues,_.algorithm=_.algorithm.toLowerCase(),_.encoding=_.encoding.toLowerCase(),_.ignoreUnknown=j.ignoreUnknown===!0,_.respectType=j.respectType!==!1,_.respectFunctionNames=j.respectFunctionNames!==!1,_.respectFunctionProperties=j.respectFunctionProperties!==!1,_.unorderedArrays=j.unorderedArrays===!0,_.unorderedSets=j.unorderedSets!==!1,_.unorderedObjects=j.unorderedObjects!==!1,_.replacer=j.replacer||void 0,_.excludeKeys=j.excludeKeys||void 0,k===void 0)throw new Error("Object argument required.");for(var O=0;O<x.length;++O)x[O].toLowerCase()===_.algorithm.toLowerCase()&&(_.algorithm=x[O]);if(x.indexOf(_.algorithm)===-1)throw new Error('Algorithm "'+_.algorithm+'"  not supported. supported values: '+x.join(", "));if(p.indexOf(_.encoding)===-1&&_.algorithm!=="passthrough")throw new Error('Encoding "'+_.encoding+'"  not supported. supported values: '+p.join(", "));return _}function f(k){if(typeof k=="function")return/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(k))!=null}function S(k,j,_){_=_||[];function O(w){return j.update?j.update(w,"utf8"):j.write(w,"utf8")}return{dispatch:function(w){return this["_"+((w=k.replacer?k.replacer(w):w)===null?"null":typeof w)](w)},_object:function(w){var R,L=Object.prototype.toString.call(w),te=/\[object (.*)\]/i.exec(L);if(te=(te=te?te[1]:"unknown:["+L+"]").toLowerCase(),0<=(L=_.indexOf(w)))return this.dispatch("[CIRCULAR:"+L+"]");if(_.push(w),o!==void 0&&o.isBuffer&&o.isBuffer(w))return O("buffer:"),O(w);if(te==="object"||te==="function"||te==="asyncfunction")return L=Object.keys(w),k.unorderedObjects&&(L=L.sort()),k.respectType===!1||f(w)||L.splice(0,0,"prototype","__proto__","constructor"),k.excludeKeys&&(L=L.filter(function(X){return!k.excludeKeys(X)})),O("object:"+L.length+":"),R=this,L.forEach(function(X){R.dispatch(X),O(":"),k.excludeValues||R.dispatch(w[X]),O(",")});if(!this["_"+te]){if(k.ignoreUnknown)return O("["+te+"]");throw new Error('Unknown object type "'+te+'"')}this["_"+te](w)},_array:function(w,X){X=X!==void 0?X:k.unorderedArrays!==!1;var L=this;if(O("array:"+w.length+":"),!X||w.length<=1)return w.forEach(function(ie){return L.dispatch(ie)});var te=[],X=w.map(function(ie){var G=new A,ge=_.slice();return S(k,G,ge).dispatch(ie),te=te.concat(ge.slice(_.length)),G.read().toString()});return _=_.concat(te),X.sort(),this._array(X,!1)},_date:function(w){return O("date:"+w.toJSON())},_symbol:function(w){return O("symbol:"+w.toString())},_error:function(w){return O("error:"+w.toString())},_boolean:function(w){return O("bool:"+w.toString())},_string:function(w){O("string:"+w.length+":"),O(w.toString())},_function:function(w){O("fn:"),f(w)?this.dispatch("[native]"):this.dispatch(w.toString()),k.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(w.name)),k.respectFunctionProperties&&this._object(w)},_number:function(w){return O("number:"+w.toString())},_xml:function(w){return O("xml:"+w.toString())},_null:function(){return O("Null")},_undefined:function(){return O("Undefined")},_regexp:function(w){return O("regex:"+w.toString())},_uint8array:function(w){return O("uint8array:"),this.dispatch(Array.prototype.slice.call(w))},_uint8clampedarray:function(w){return O("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(w))},_int8array:function(w){return O("int8array:"),this.dispatch(Array.prototype.slice.call(w))},_uint16array:function(w){return O("uint16array:"),this.dispatch(Array.prototype.slice.call(w))},_int16array:function(w){return O("int16array:"),this.dispatch(Array.prototype.slice.call(w))},_uint32array:function(w){return O("uint32array:"),this.dispatch(Array.prototype.slice.call(w))},_int32array:function(w){return O("int32array:"),this.dispatch(Array.prototype.slice.call(w))},_float32array:function(w){return O("float32array:"),this.dispatch(Array.prototype.slice.call(w))},_float64array:function(w){return O("float64array:"),this.dispatch(Array.prototype.slice.call(w))},_arraybuffer:function(w){return O("arraybuffer:"),this.dispatch(new Uint8Array(w))},_url:function(w){return O("url:"+w.toString())},_map:function(w){return O("map:"),w=Array.from(w),this._array(w,k.unorderedSets!==!1)},_set:function(w){return O("set:"),w=Array.from(w),this._array(w,k.unorderedSets!==!1)},_file:function(w){return O("file:"),this.dispatch([w.name,w.size,w.type,w.lastModfied])},_blob:function(){if(k.ignoreUnknown)return O("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return O("domwindow")},_bigint:function(w){return O("bigint:"+w.toString())},_process:function(){return O("process")},_timer:function(){return O("timer")},_pipe:function(){return O("pipe")},_tcp:function(){return O("tcp")},_udp:function(){return O("udp")},_tty:function(){return O("tty")},_statwatcher:function(){return O("statwatcher")},_securecontext:function(){return O("securecontext")},_connection:function(){return O("connection")},_zlib:function(){return O("zlib")},_context:function(){return O("context")},_nodescript:function(){return O("nodescript")},_httpparser:function(){return O("httpparser")},_dataview:function(){return O("dataview")},_signal:function(){return O("signal")},_fsevent:function(){return O("fsevent")},_tlswrap:function(){return O("tlswrap")}}}function A(){return{buf:"",write:function(k){this.buf+=k},end:function(k){this.buf+=k},read:function(){return this.buf}}}i.writeToStream=function(k,j,_){return _===void 0&&(_=j,j={}),S(j=m(k,j),_).dispatch(k)}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(r,n,i){(function(s,a,o,l,u,c,d,h,b){(function(v){var P=typeof Uint8Array<"u"?Uint8Array:Array,x="+".charCodeAt(0),p="/".charCodeAt(0),m="0".charCodeAt(0),f="a".charCodeAt(0),S="A".charCodeAt(0),A="-".charCodeAt(0),k="_".charCodeAt(0);function j(_){return _=_.charCodeAt(0),_===x||_===A?62:_===p||_===k?63:_<m?-1:_<m+10?_-m+26+26:_<S+26?_-S:_<f+26?_-f+26:void 0}v.toByteArray=function(_){var O,w;if(0<_.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var R=_.length,R=_.charAt(R-2)==="="?2:_.charAt(R-1)==="="?1:0,L=new P(3*_.length/4-R),te=0<R?_.length-4:_.length,X=0;function ie(G){L[X++]=G}for(O=0;O<te;O+=4,0)ie((16711680&(w=j(_.charAt(O))<<18|j(_.charAt(O+1))<<12|j(_.charAt(O+2))<<6|j(_.charAt(O+3))))>>16),ie((65280&w)>>8),ie(255&w);return R==2?ie(255&(w=j(_.charAt(O))<<2|j(_.charAt(O+1))>>4)):R==1&&(ie((w=j(_.charAt(O))<<10|j(_.charAt(O+1))<<4|j(_.charAt(O+2))>>2)>>8&255),ie(255&w)),L},v.fromByteArray=function(_){var O,w,R,L,te=_.length%3,X="";function ie(G){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(G)}for(O=0,R=_.length-te;O<R;O+=3)w=(_[O]<<16)+(_[O+1]<<8)+_[O+2],X+=ie((L=w)>>18&63)+ie(L>>12&63)+ie(L>>6&63)+ie(63&L);switch(te){case 1:X=(X+=ie((w=_[_.length-1])>>2))+ie(w<<4&63)+"==";break;case 2:X=(X=(X+=ie((w=(_[_.length-2]<<8)+_[_.length-1])>>10))+ie(w>>4&63))+ie(w<<2&63)+"="}return X}})(i===void 0?this.base64js={}:i)}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(r,n,i){(function(s,a,x,l,u,c,d,h,b){var v=r("base64-js"),P=r("ieee754");function x(y,E,C){if(!(this instanceof x))return new x(y,E,C);var U,M,K,ue,ke=typeof y;if(E==="base64"&&ke=="string")for(y=(ue=y).trim?ue.trim():ue.replace(/^\s+|\s+$/g,"");y.length%4!=0;)y+="=";if(ke=="number")U=V(y);else if(ke=="string")U=x.byteLength(y,E);else{if(ke!="object")throw new Error("First argument needs to be a number, array or string.");U=V(y.length)}if(x._useTypedArrays?M=x._augment(new Uint8Array(U)):((M=this).length=U,M._isBuffer=!0),x._useTypedArrays&&typeof y.byteLength=="number")M._set(y);else if($(ue=y)||x.isBuffer(ue)||ue&&typeof ue=="object"&&typeof ue.length=="number")for(K=0;K<U;K++)x.isBuffer(y)?M[K]=y.readUInt8(K):M[K]=y[K];else if(ke=="string")M.write(y,0,E);else if(ke=="number"&&!x._useTypedArrays&&!C)for(K=0;K<U;K++)M[K]=0;return M}function p(y,E,C,U){return x._charsWritten=jt(function(M){for(var K=[],ue=0;ue<M.length;ue++)K.push(255&M.charCodeAt(ue));return K}(E),y,C,U)}function m(y,E,C,U){return x._charsWritten=jt(function(M){for(var K,ue,ke=[],Ue=0;Ue<M.length;Ue++)ue=M.charCodeAt(Ue),K=ue>>8,ue=ue%256,ke.push(ue),ke.push(K);return ke}(E),y,C,U)}function f(y,E,C){var U="";C=Math.min(y.length,C);for(var M=E;M<C;M++)U+=String.fromCharCode(y[M]);return U}function S(y,E,C,K){K||(Z(typeof C=="boolean","missing or invalid endian"),Z(E!=null,"missing offset"),Z(E+1<y.length,"Trying to read beyond buffer length"));var M,K=y.length;if(!(K<=E))return C?(M=y[E],E+1<K&&(M|=y[E+1]<<8)):(M=y[E]<<8,E+1<K&&(M|=y[E+1])),M}function A(y,E,C,K){K||(Z(typeof C=="boolean","missing or invalid endian"),Z(E!=null,"missing offset"),Z(E+3<y.length,"Trying to read beyond buffer length"));var M,K=y.length;if(!(K<=E))return C?(E+2<K&&(M=y[E+2]<<16),E+1<K&&(M|=y[E+1]<<8),M|=y[E],E+3<K&&(M+=y[E+3]<<24>>>0)):(E+1<K&&(M=y[E+1]<<16),E+2<K&&(M|=y[E+2]<<8),E+3<K&&(M|=y[E+3]),M+=y[E]<<24>>>0),M}function k(y,E,C,U){if(U||(Z(typeof C=="boolean","missing or invalid endian"),Z(E!=null,"missing offset"),Z(E+1<y.length,"Trying to read beyond buffer length")),!(y.length<=E))return U=S(y,E,C,!0),32768&U?-1*(65535-U+1):U}function j(y,E,C,U){if(U||(Z(typeof C=="boolean","missing or invalid endian"),Z(E!=null,"missing offset"),Z(E+3<y.length,"Trying to read beyond buffer length")),!(y.length<=E))return U=A(y,E,C,!0),2147483648&U?-1*(4294967295-U+1):U}function _(y,E,C,U){return U||(Z(typeof C=="boolean","missing or invalid endian"),Z(E+3<y.length,"Trying to read beyond buffer length")),P.read(y,E,C,23,4)}function O(y,E,C,U){return U||(Z(typeof C=="boolean","missing or invalid endian"),Z(E+7<y.length,"Trying to read beyond buffer length")),P.read(y,E,C,52,8)}function w(y,E,C,U,M){if(M||(Z(E!=null,"missing value"),Z(typeof U=="boolean","missing or invalid endian"),Z(C!=null,"missing offset"),Z(C+1<y.length,"trying to write beyond buffer length"),Jt(E,65535)),M=y.length,!(M<=C))for(var K=0,ue=Math.min(M-C,2);K<ue;K++)y[C+K]=(E&255<<8*(U?K:1-K))>>>8*(U?K:1-K)}function R(y,E,C,U,M){if(M||(Z(E!=null,"missing value"),Z(typeof U=="boolean","missing or invalid endian"),Z(C!=null,"missing offset"),Z(C+3<y.length,"trying to write beyond buffer length"),Jt(E,4294967295)),M=y.length,!(M<=C))for(var K=0,ue=Math.min(M-C,4);K<ue;K++)y[C+K]=E>>>8*(U?K:3-K)&255}function L(y,E,C,U,M){M||(Z(E!=null,"missing value"),Z(typeof U=="boolean","missing or invalid endian"),Z(C!=null,"missing offset"),Z(C+1<y.length,"Trying to write beyond buffer length"),Dt(E,32767,-32768)),y.length<=C||w(y,0<=E?E:65535+E+1,C,U,M)}function te(y,E,C,U,M){M||(Z(E!=null,"missing value"),Z(typeof U=="boolean","missing or invalid endian"),Z(C!=null,"missing offset"),Z(C+3<y.length,"Trying to write beyond buffer length"),Dt(E,2147483647,-2147483648)),y.length<=C||R(y,0<=E?E:4294967295+E+1,C,U,M)}function X(y,E,C,U,M){M||(Z(E!=null,"missing value"),Z(typeof U=="boolean","missing or invalid endian"),Z(C!=null,"missing offset"),Z(C+3<y.length,"Trying to write beyond buffer length"),Mr(E,34028234663852886e22,-34028234663852886e22)),y.length<=C||P.write(y,E,C,U,23,4)}function ie(y,E,C,U,M){M||(Z(E!=null,"missing value"),Z(typeof U=="boolean","missing or invalid endian"),Z(C!=null,"missing offset"),Z(C+7<y.length,"Trying to write beyond buffer length"),Mr(E,17976931348623157e292,-17976931348623157e292)),y.length<=C||P.write(y,E,C,U,52,8)}i.Buffer=x,i.SlowBuffer=x,i.INSPECT_MAX_BYTES=50,x.poolSize=8192,x._useTypedArrays=function(){try{var y=new ArrayBuffer(0),E=new Uint8Array(y);return E.foo=function(){return 42},E.foo()===42&&typeof E.subarray=="function"}catch{return!1}}(),x.isEncoding=function(y){switch(String(y).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},x.isBuffer=function(y){return!(y==null||!y._isBuffer)},x.byteLength=function(y,E){var C;switch(y+="",E||"utf8"){case"hex":C=y.length/2;break;case"utf8":case"utf-8":C=H(y).length;break;case"ascii":case"binary":case"raw":C=y.length;break;case"base64":C=ve(y).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":C=2*y.length;break;default:throw new Error("Unknown encoding")}return C},x.concat=function(y,E){if(Z($(y),`Usage: Buffer.concat(list, [totalLength])
list should be an Array.`),y.length===0)return new x(0);if(y.length===1)return y[0];if(typeof E!="number")for(M=E=0;M<y.length;M++)E+=y[M].length;for(var C=new x(E),U=0,M=0;M<y.length;M++){var K=y[M];K.copy(C,U),U+=K.length}return C},x.prototype.write=function(y,E,C,U){isFinite(E)?isFinite(C)||(U=C,C=void 0):(Ue=U,U=E,E=C,C=Ue),E=Number(E)||0;var M,K,ue,ke,Ue=this.length-E;switch((!C||Ue<(C=Number(C)))&&(C=Ue),U=String(U||"utf8").toLowerCase()){case"hex":M=function(Ke,tt,dt,ze){dt=Number(dt)||0;var De=Ke.length-dt;(!ze||De<(ze=Number(ze)))&&(ze=De),Z((De=tt.length)%2==0,"Invalid hex string"),De/2<ze&&(ze=De/2);for(var on=0;on<ze;on++){var Us=parseInt(tt.substr(2*on,2),16);Z(!isNaN(Us),"Invalid hex string"),Ke[dt+on]=Us}return x._charsWritten=2*on,on}(this,y,E,C);break;case"utf8":case"utf-8":K=this,ue=E,ke=C,M=x._charsWritten=jt(H(y),K,ue,ke);break;case"ascii":case"binary":M=p(this,y,E,C);break;case"base64":K=this,ue=E,ke=C,M=x._charsWritten=jt(ve(y),K,ue,ke);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":M=m(this,y,E,C);break;default:throw new Error("Unknown encoding")}return M},x.prototype.toString=function(y,E,C){var U,M,K,ue,ke=this;if(y=String(y||"utf8").toLowerCase(),E=Number(E)||0,(C=C!==void 0?Number(C):ke.length)===E)return"";switch(y){case"hex":U=function(Ue,Ke,tt){var dt=Ue.length;(!Ke||Ke<0)&&(Ke=0),(!tt||tt<0||dt<tt)&&(tt=dt);for(var ze="",De=Ke;De<tt;De++)ze+=F(Ue[De]);return ze}(ke,E,C);break;case"utf8":case"utf-8":U=function(Ue,Ke,tt){var dt="",ze="";tt=Math.min(Ue.length,tt);for(var De=Ke;De<tt;De++)Ue[De]<=127?(dt+=et(ze)+String.fromCharCode(Ue[De]),ze=""):ze+="%"+Ue[De].toString(16);return dt+et(ze)}(ke,E,C);break;case"ascii":case"binary":U=f(ke,E,C);break;case"base64":M=ke,ue=C,U=(K=E)===0&&ue===M.length?v.fromByteArray(M):v.fromByteArray(M.slice(K,ue));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":U=function(Ue,Ke,tt){for(var dt=Ue.slice(Ke,tt),ze="",De=0;De<dt.length;De+=2)ze+=String.fromCharCode(dt[De]+256*dt[De+1]);return ze}(ke,E,C);break;default:throw new Error("Unknown encoding")}return U},x.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},x.prototype.copy=function(y,E,C,U){if(E=E||0,(U=U||U===0?U:this.length)!==(C=C||0)&&y.length!==0&&this.length!==0){Z(C<=U,"sourceEnd < sourceStart"),Z(0<=E&&E<y.length,"targetStart out of bounds"),Z(0<=C&&C<this.length,"sourceStart out of bounds"),Z(0<=U&&U<=this.length,"sourceEnd out of bounds"),U>this.length&&(U=this.length);var M=(U=y.length-E<U-C?y.length-E+C:U)-C;if(M<100||!x._useTypedArrays)for(var K=0;K<M;K++)y[K+E]=this[K+C];else y._set(this.subarray(C,C+M),E)}},x.prototype.slice=function(y,E){var C=this.length;if(y=ge(y,C,0),E=ge(E,C,C),x._useTypedArrays)return x._augment(this.subarray(y,E));for(var U=E-y,M=new x(U,void 0,!0),K=0;K<U;K++)M[K]=this[K+y];return M},x.prototype.get=function(y){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(y)},x.prototype.set=function(y,E){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(y,E)},x.prototype.readUInt8=function(y,E){if(E||(Z(y!=null,"missing offset"),Z(y<this.length,"Trying to read beyond buffer length")),!(y>=this.length))return this[y]},x.prototype.readUInt16LE=function(y,E){return S(this,y,!0,E)},x.prototype.readUInt16BE=function(y,E){return S(this,y,!1,E)},x.prototype.readUInt32LE=function(y,E){return A(this,y,!0,E)},x.prototype.readUInt32BE=function(y,E){return A(this,y,!1,E)},x.prototype.readInt8=function(y,E){if(E||(Z(y!=null,"missing offset"),Z(y<this.length,"Trying to read beyond buffer length")),!(y>=this.length))return 128&this[y]?-1*(255-this[y]+1):this[y]},x.prototype.readInt16LE=function(y,E){return k(this,y,!0,E)},x.prototype.readInt16BE=function(y,E){return k(this,y,!1,E)},x.prototype.readInt32LE=function(y,E){return j(this,y,!0,E)},x.prototype.readInt32BE=function(y,E){return j(this,y,!1,E)},x.prototype.readFloatLE=function(y,E){return _(this,y,!0,E)},x.prototype.readFloatBE=function(y,E){return _(this,y,!1,E)},x.prototype.readDoubleLE=function(y,E){return O(this,y,!0,E)},x.prototype.readDoubleBE=function(y,E){return O(this,y,!1,E)},x.prototype.writeUInt8=function(y,E,C){C||(Z(y!=null,"missing value"),Z(E!=null,"missing offset"),Z(E<this.length,"trying to write beyond buffer length"),Jt(y,255)),E>=this.length||(this[E]=y)},x.prototype.writeUInt16LE=function(y,E,C){w(this,y,E,!0,C)},x.prototype.writeUInt16BE=function(y,E,C){w(this,y,E,!1,C)},x.prototype.writeUInt32LE=function(y,E,C){R(this,y,E,!0,C)},x.prototype.writeUInt32BE=function(y,E,C){R(this,y,E,!1,C)},x.prototype.writeInt8=function(y,E,C){C||(Z(y!=null,"missing value"),Z(E!=null,"missing offset"),Z(E<this.length,"Trying to write beyond buffer length"),Dt(y,127,-128)),E>=this.length||(0<=y?this.writeUInt8(y,E,C):this.writeUInt8(255+y+1,E,C))},x.prototype.writeInt16LE=function(y,E,C){L(this,y,E,!0,C)},x.prototype.writeInt16BE=function(y,E,C){L(this,y,E,!1,C)},x.prototype.writeInt32LE=function(y,E,C){te(this,y,E,!0,C)},x.prototype.writeInt32BE=function(y,E,C){te(this,y,E,!1,C)},x.prototype.writeFloatLE=function(y,E,C){X(this,y,E,!0,C)},x.prototype.writeFloatBE=function(y,E,C){X(this,y,E,!1,C)},x.prototype.writeDoubleLE=function(y,E,C){ie(this,y,E,!0,C)},x.prototype.writeDoubleBE=function(y,E,C){ie(this,y,E,!1,C)},x.prototype.fill=function(y,E,C){if(E=E||0,C=C||this.length,Z(typeof(y=typeof(y=y||0)=="string"?y.charCodeAt(0):y)=="number"&&!isNaN(y),"value is not a number"),Z(E<=C,"end < start"),C!==E&&this.length!==0){Z(0<=E&&E<this.length,"start out of bounds"),Z(0<=C&&C<=this.length,"end out of bounds");for(var U=E;U<C;U++)this[U]=y}},x.prototype.inspect=function(){for(var y=[],E=this.length,C=0;C<E;C++)if(y[C]=F(this[C]),C===i.INSPECT_MAX_BYTES){y[C+1]="...";break}return"<Buffer "+y.join(" ")+">"},x.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(x._useTypedArrays)return new x(this).buffer;for(var y=new Uint8Array(this.length),E=0,C=y.length;E<C;E+=1)y[E]=this[E];return y.buffer};var G=x.prototype;function ge(y,E,C){return typeof y!="number"?C:E<=(y=~~y)?E:0<=y||0<=(y+=E)?y:0}function V(y){return(y=~~Math.ceil(+y))<0?0:y}function $(y){return(Array.isArray||function(E){return Object.prototype.toString.call(E)==="[object Array]"})(y)}function F(y){return y<16?"0"+y.toString(16):y.toString(16)}function H(y){for(var E=[],C=0;C<y.length;C++){var U=y.charCodeAt(C);if(U<=127)E.push(y.charCodeAt(C));else for(var M=C,K=(55296<=U&&U<=57343&&C++,encodeURIComponent(y.slice(M,C+1)).substr(1).split("%")),ue=0;ue<K.length;ue++)E.push(parseInt(K[ue],16))}return E}function ve(y){return v.toByteArray(y)}function jt(y,E,C,U){for(var M=0;M<U&&!(M+C>=E.length||M>=y.length);M++)E[M+C]=y[M];return M}function et(y){try{return decodeURIComponent(y)}catch{return String.fromCharCode(65533)}}function Jt(y,E){Z(typeof y=="number","cannot write a non-number as a number"),Z(0<=y,"specified a negative value for writing an unsigned value"),Z(y<=E,"value is larger than maximum value for type"),Z(Math.floor(y)===y,"value has a fractional component")}function Dt(y,E,C){Z(typeof y=="number","cannot write a non-number as a number"),Z(y<=E,"value larger than maximum allowed value"),Z(C<=y,"value smaller than minimum allowed value"),Z(Math.floor(y)===y,"value has a fractional component")}function Mr(y,E,C){Z(typeof y=="number","cannot write a non-number as a number"),Z(y<=E,"value larger than maximum allowed value"),Z(C<=y,"value smaller than minimum allowed value")}function Z(y,E){if(!y)throw new Error(E||"Failed assertion")}x._augment=function(y){return y._isBuffer=!0,y._get=y.get,y._set=y.set,y.get=G.get,y.set=G.set,y.write=G.write,y.toString=G.toString,y.toLocaleString=G.toString,y.toJSON=G.toJSON,y.copy=G.copy,y.slice=G.slice,y.readUInt8=G.readUInt8,y.readUInt16LE=G.readUInt16LE,y.readUInt16BE=G.readUInt16BE,y.readUInt32LE=G.readUInt32LE,y.readUInt32BE=G.readUInt32BE,y.readInt8=G.readInt8,y.readInt16LE=G.readInt16LE,y.readInt16BE=G.readInt16BE,y.readInt32LE=G.readInt32LE,y.readInt32BE=G.readInt32BE,y.readFloatLE=G.readFloatLE,y.readFloatBE=G.readFloatBE,y.readDoubleLE=G.readDoubleLE,y.readDoubleBE=G.readDoubleBE,y.writeUInt8=G.writeUInt8,y.writeUInt16LE=G.writeUInt16LE,y.writeUInt16BE=G.writeUInt16BE,y.writeUInt32LE=G.writeUInt32LE,y.writeUInt32BE=G.writeUInt32BE,y.writeInt8=G.writeInt8,y.writeInt16LE=G.writeInt16LE,y.writeInt16BE=G.writeInt16BE,y.writeInt32LE=G.writeInt32LE,y.writeInt32BE=G.writeInt32BE,y.writeFloatLE=G.writeFloatLE,y.writeFloatBE=G.writeFloatBE,y.writeDoubleLE=G.writeDoubleLE,y.writeDoubleBE=G.writeDoubleBE,y.fill=G.fill,y.inspect=G.inspect,y.toArrayBuffer=G.toArrayBuffer,y}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(r,n,i){(function(s,a,v,l,u,c,d,h,b){var v=r("buffer").Buffer,P=4,x=new v(P);x.fill(0),n.exports={hash:function(p,m,f,S){for(var A=m(function(w,R){w.length%P!=0&&(L=w.length+(P-w.length%P),w=v.concat([w,x],L));for(var L,te=[],X=R?w.readInt32BE:w.readInt32LE,ie=0;ie<w.length;ie+=P)te.push(X.call(w,ie));return te}(p=v.isBuffer(p)?p:new v(p),S),8*p.length),m=S,k=new v(f),j=m?k.writeInt32BE:k.writeInt32LE,_=0;_<A.length;_++)j.call(k,A[_],4*_,!0);return k}}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(r,n,i){(function(s,a,v,l,u,c,d,h,b){var v=r("buffer").Buffer,P=r("./sha"),x=r("./sha256"),p=r("./rng"),m={sha1:P,sha256:x,md5:r("./md5")},f=64,S=new v(f);function A(w,R){var L=m[w=w||"sha1"],te=[];return L||k("algorithm:",w,"is not yet supported"),{update:function(X){return v.isBuffer(X)||(X=new v(X)),te.push(X),X.length,this},digest:function(X){var ie=v.concat(te),ie=R?function(G,ge,V){v.isBuffer(ge)||(ge=new v(ge)),v.isBuffer(V)||(V=new v(V)),ge.length>f?ge=G(ge):ge.length<f&&(ge=v.concat([ge,S],f));for(var $=new v(f),F=new v(f),H=0;H<f;H++)$[H]=54^ge[H],F[H]=92^ge[H];return V=G(v.concat([$,V])),G(v.concat([F,V]))}(L,R,ie):L(ie);return te=null,X?ie.toString(X):ie}}}function k(){var w=[].slice.call(arguments).join(" ");throw new Error([w,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join(`
`))}S.fill(0),i.createHash=function(w){return A(w)},i.createHmac=A,i.randomBytes=function(w,R){if(!R||!R.call)return new v(p(w));try{R.call(this,void 0,new v(p(w)))}catch(L){R(L)}};var j,_=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],O=function(w){i[w]=function(){k("sorry,",w,"is not implemented yet")}};for(j in _)O(_[j])}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(r,n,i){(function(s,a,o,l,u,c,d,h,b){var v=r("./helpers");function P(k,j){k[j>>5]|=128<<j%32,k[14+(j+64>>>9<<4)]=j;for(var _=1732584193,O=-271733879,w=-1732584194,R=271733878,L=0;L<k.length;L+=16){var te=_,X=O,ie=w,G=R,_=p(_,O,w,R,k[L+0],7,-680876936),R=p(R,_,O,w,k[L+1],12,-389564586),w=p(w,R,_,O,k[L+2],17,606105819),O=p(O,w,R,_,k[L+3],22,-1044525330);_=p(_,O,w,R,k[L+4],7,-176418897),R=p(R,_,O,w,k[L+5],12,1200080426),w=p(w,R,_,O,k[L+6],17,-1473231341),O=p(O,w,R,_,k[L+7],22,-45705983),_=p(_,O,w,R,k[L+8],7,1770035416),R=p(R,_,O,w,k[L+9],12,-1958414417),w=p(w,R,_,O,k[L+10],17,-42063),O=p(O,w,R,_,k[L+11],22,-1990404162),_=p(_,O,w,R,k[L+12],7,1804603682),R=p(R,_,O,w,k[L+13],12,-40341101),w=p(w,R,_,O,k[L+14],17,-1502002290),_=m(_,O=p(O,w,R,_,k[L+15],22,1236535329),w,R,k[L+1],5,-165796510),R=m(R,_,O,w,k[L+6],9,-1069501632),w=m(w,R,_,O,k[L+11],14,643717713),O=m(O,w,R,_,k[L+0],20,-373897302),_=m(_,O,w,R,k[L+5],5,-701558691),R=m(R,_,O,w,k[L+10],9,38016083),w=m(w,R,_,O,k[L+15],14,-660478335),O=m(O,w,R,_,k[L+4],20,-405537848),_=m(_,O,w,R,k[L+9],5,568446438),R=m(R,_,O,w,k[L+14],9,-1019803690),w=m(w,R,_,O,k[L+3],14,-187363961),O=m(O,w,R,_,k[L+8],20,1163531501),_=m(_,O,w,R,k[L+13],5,-1444681467),R=m(R,_,O,w,k[L+2],9,-51403784),w=m(w,R,_,O,k[L+7],14,1735328473),_=f(_,O=m(O,w,R,_,k[L+12],20,-1926607734),w,R,k[L+5],4,-378558),R=f(R,_,O,w,k[L+8],11,-2022574463),w=f(w,R,_,O,k[L+11],16,1839030562),O=f(O,w,R,_,k[L+14],23,-35309556),_=f(_,O,w,R,k[L+1],4,-1530992060),R=f(R,_,O,w,k[L+4],11,1272893353),w=f(w,R,_,O,k[L+7],16,-155497632),O=f(O,w,R,_,k[L+10],23,-1094730640),_=f(_,O,w,R,k[L+13],4,681279174),R=f(R,_,O,w,k[L+0],11,-358537222),w=f(w,R,_,O,k[L+3],16,-722521979),O=f(O,w,R,_,k[L+6],23,76029189),_=f(_,O,w,R,k[L+9],4,-640364487),R=f(R,_,O,w,k[L+12],11,-421815835),w=f(w,R,_,O,k[L+15],16,530742520),_=S(_,O=f(O,w,R,_,k[L+2],23,-995338651),w,R,k[L+0],6,-198630844),R=S(R,_,O,w,k[L+7],10,1126891415),w=S(w,R,_,O,k[L+14],15,-1416354905),O=S(O,w,R,_,k[L+5],21,-57434055),_=S(_,O,w,R,k[L+12],6,1700485571),R=S(R,_,O,w,k[L+3],10,-1894986606),w=S(w,R,_,O,k[L+10],15,-1051523),O=S(O,w,R,_,k[L+1],21,-2054922799),_=S(_,O,w,R,k[L+8],6,1873313359),R=S(R,_,O,w,k[L+15],10,-30611744),w=S(w,R,_,O,k[L+6],15,-1560198380),O=S(O,w,R,_,k[L+13],21,1309151649),_=S(_,O,w,R,k[L+4],6,-145523070),R=S(R,_,O,w,k[L+11],10,-1120210379),w=S(w,R,_,O,k[L+2],15,718787259),O=S(O,w,R,_,k[L+9],21,-343485551),_=A(_,te),O=A(O,X),w=A(w,ie),R=A(R,G)}return Array(_,O,w,R)}function x(k,j,_,O,w,R){return A((j=A(A(j,k),A(O,R)))<<w|j>>>32-w,_)}function p(k,j,_,O,w,R,L){return x(j&_|~j&O,k,j,w,R,L)}function m(k,j,_,O,w,R,L){return x(j&O|_&~O,k,j,w,R,L)}function f(k,j,_,O,w,R,L){return x(j^_^O,k,j,w,R,L)}function S(k,j,_,O,w,R,L){return x(_^(j|~O),k,j,w,R,L)}function A(k,j){var _=(65535&k)+(65535&j);return(k>>16)+(j>>16)+(_>>16)<<16|65535&_}n.exports=function(k){return v.hash(k,P,16)}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(r,n,i){(function(s,a,o,l,u,c,d,h,b){n.exports=function(v){for(var P,x=new Array(v),p=0;p<v;p++)!(3&p)&&(P=4294967296*Math.random()),x[p]=P>>>((3&p)<<3)&255;return x}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(r,n,i){(function(s,a,o,l,u,c,d,h,b){var v=r("./helpers");function P(m,f){m[f>>5]|=128<<24-f%32,m[15+(f+64>>9<<4)]=f;for(var S,A,k,j=Array(80),_=1732584193,O=-271733879,w=-1732584194,R=271733878,L=-1009589776,te=0;te<m.length;te+=16){for(var X=_,ie=O,G=w,ge=R,V=L,$=0;$<80;$++){j[$]=$<16?m[te+$]:p(j[$-3]^j[$-8]^j[$-14]^j[$-16],1);var F=x(x(p(_,5),(F=O,A=w,k=R,(S=$)<20?F&A|~F&k:!(S<40)&&S<60?F&A|F&k|A&k:F^A^k)),x(x(L,j[$]),(S=$)<20?1518500249:S<40?1859775393:S<60?-1894007588:-899497514)),L=R,R=w,w=p(O,30),O=_,_=F}_=x(_,X),O=x(O,ie),w=x(w,G),R=x(R,ge),L=x(L,V)}return Array(_,O,w,R,L)}function x(m,f){var S=(65535&m)+(65535&f);return(m>>16)+(f>>16)+(S>>16)<<16|65535&S}function p(m,f){return m<<f|m>>>32-f}n.exports=function(m){return v.hash(m,P,20,!0)}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(r,n,i){(function(s,a,o,l,u,c,d,h,b){function v(f,S){var A=(65535&f)+(65535&S);return(f>>16)+(S>>16)+(A>>16)<<16|65535&A}function P(f,S){var A,k=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),j=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),_=new Array(64);f[S>>5]|=128<<24-S%32,f[15+(S+64>>9<<4)]=S;for(var O,w,R=0;R<f.length;R+=16){for(var L=j[0],te=j[1],X=j[2],ie=j[3],G=j[4],ge=j[5],V=j[6],$=j[7],F=0;F<64;F++)_[F]=F<16?f[F+R]:v(v(v((w=_[F-2],p(w,17)^p(w,19)^m(w,10)),_[F-7]),(w=_[F-15],p(w,7)^p(w,18)^m(w,3))),_[F-16]),A=v(v(v(v($,p(w=G,6)^p(w,11)^p(w,25)),G&ge^~G&V),k[F]),_[F]),O=v(p(O=L,2)^p(O,13)^p(O,22),L&te^L&X^te&X),$=V,V=ge,ge=G,G=v(ie,A),ie=X,X=te,te=L,L=v(A,O);j[0]=v(L,j[0]),j[1]=v(te,j[1]),j[2]=v(X,j[2]),j[3]=v(ie,j[3]),j[4]=v(G,j[4]),j[5]=v(ge,j[5]),j[6]=v(V,j[6]),j[7]=v($,j[7])}return j}var x=r("./helpers"),p=function(f,S){return f>>>S|f<<32-S},m=function(f,S){return f>>>S};n.exports=function(f){return x.hash(f,P,32,!0)}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(r,n,i){(function(s,a,o,l,u,c,d,h,b){i.read=function(v,P,x,p,R){var f,S,A=8*R-p-1,k=(1<<A)-1,j=k>>1,_=-7,O=x?R-1:0,w=x?-1:1,R=v[P+O];for(O+=w,f=R&(1<<-_)-1,R>>=-_,_+=A;0<_;f=256*f+v[P+O],O+=w,_-=8);for(S=f&(1<<-_)-1,f>>=-_,_+=p;0<_;S=256*S+v[P+O],O+=w,_-=8);if(f===0)f=1-j;else{if(f===k)return S?NaN:1/0*(R?-1:1);S+=Math.pow(2,p),f-=j}return(R?-1:1)*S*Math.pow(2,f-p)},i.write=function(v,P,x,p,m,L){var S,A,k=8*L-m-1,j=(1<<k)-1,_=j>>1,O=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=p?0:L-1,R=p?1:-1,L=P<0||P===0&&1/P<0?1:0;for(P=Math.abs(P),isNaN(P)||P===1/0?(A=isNaN(P)?1:0,S=j):(S=Math.floor(Math.log(P)/Math.LN2),P*(p=Math.pow(2,-S))<1&&(S--,p*=2),2<=(P+=1<=S+_?O/p:O*Math.pow(2,1-_))*p&&(S++,p/=2),j<=S+_?(A=0,S=j):1<=S+_?(A=(P*p-1)*Math.pow(2,m),S+=_):(A=P*Math.pow(2,_-1)*Math.pow(2,m),S=0));8<=m;v[x+w]=255&A,w+=R,A/=256,m-=8);for(S=S<<m|A,k+=m;0<k;v[x+w]=255&S,w+=R,S/=256,k-=8);v[x+w-R]|=128*L}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(r,n,i){(function(s,a,o,l,u,c,d,h,b){var v,P,x;function p(){}(s=n.exports={}).nextTick=(P=typeof window<"u"&&window.setImmediate,x=typeof window<"u"&&window.postMessage&&window.addEventListener,P?function(m){return window.setImmediate(m)}:x?(v=[],window.addEventListener("message",function(m){var f=m.source;f!==window&&f!==null||m.data!=="process-tick"||(m.stopPropagation(),0<v.length&&v.shift()())},!0),function(m){v.push(m),window.postMessage("process-tick","*")}):function(m){setTimeout(m,0)}),s.title="browser",s.browser=!0,s.env={},s.argv=[],s.on=p,s.addListener=p,s.once=p,s.off=p,s.removeListener=p,s.removeAllListeners=p,s.emit=p,s.binding=function(m){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(m){throw new Error("process.chdir is not supported")}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)})})(q_);var sP=q_.exports;const aP=vo(sP),Cg=(...t)=>aP(t.join("_")),oP=new Map;class Qf extends n2{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,r){return Promise.resolve(this.cache.get(Cg(e,r))??null)}async update(e,r,n){this.cache.set(Cg(e,r),n)}static global(){return new Qf(oP)}}const lP=()=>!1;class W_ extends _t{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??lP(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}}class J_ extends W_{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor({callbacks:e,callbackManager:r,...n}){super({callbacks:e??r,...n}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof n.cache=="object"?this.cache=n.cache:n.cache?this.cache=Qf.global():this.cache=void 0,this.caller=new Rf(n??{})}async getNumTokens(e){let r=Math.ceil(e.length/4);if(!this._encoding)try{this._encoding=await HE("modelName"in this?lh(this.modelName):"gpt2")}catch(n){console.warn("Failed to calculate number of tokens, falling back to approximate count",n)}return this._encoding&&(r=this._encoding.encode(e).length),r}static _convertInputToPromptValue(e){return typeof e=="string"?new B_(e):Array.isArray(e)?new Z_(e.map(Ia)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall(e){const r={...this._identifyingParams(),...e,_type:this._llmType(),_model:this._modelType()};return Object.entries(r).filter(([s,a])=>a!==void 0).map(([s,a])=>`${s}:${JSON.stringify(a)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){const{_type:r,_model:n,...i}=e;if(n&&n!=="base_chat_model")throw new Error(`Cannot load LLM with model ${n}`);const s={openai:(await it(()=>Promise.resolve().then(()=>pP),void 0,import.meta.url)).ChatOpenAI}[r];if(s===void 0)throw new Error(`Cannot load LLM with type ${r}`);return new s(i)}}class oi extends J_{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models",this._llmType()]})}_separateRunnableConfigFromCallOptions(e){const[r,n]=super._separateRunnableConfigFromCallOptions(e);return n!=null&&n.timeout&&!n.signal&&(n.signal=AbortSignal.timeout(n.timeout)),[r,n]}async invoke(e,r){const n=oi._convertInputToPromptValue(e);return(await this.generatePrompt([n],r,r==null?void 0:r.callbacks)).generations[0][0].message}async*_streamResponseChunks(e,r,n){throw new Error("Not implemented.")}async*_streamIterator(e,r){if(this._streamResponseChunks===oi.prototype._streamResponseChunks)yield this.invoke(e,r);else{const i=oi._convertInputToPromptValue(e).toChatMessages(),[s,a]=this._separateRunnableConfigFromCallOptions(r),o=await Vt.configure(s.callbacks,this.callbacks,s.tags,this.tags,s.metadata,this.metadata,{verbose:this.verbose}),l={options:a,invocation_params:this==null?void 0:this.invocationParams(a)},u=await(o==null?void 0:o.handleChatModelStart(this.toJSON(),[i],void 0,void 0,l));let c;try{for await(const d of this._streamResponseChunks(i,a,u==null?void 0:u[0]))yield d.message,c?c=c.concat(d):c=d}catch(d){throw await Promise.all((u??[]).map(h=>h==null?void 0:h.handleLLMError(d))),d}await Promise.all((u??[]).map(d=>d==null?void 0:d.handleLLMEnd({generations:[[c]]})))}}async _generateUncached(e,r,n){var h;const i=e.map(b=>b.map(Ia)),s=await Vt.configure(n.callbacks,this.callbacks,n.tags,this.tags,n.metadata,this.metadata,{verbose:this.verbose}),a={options:r,invocation_params:this==null?void 0:this.invocationParams(r)},o=await(s==null?void 0:s.handleChatModelStart(this.toJSON(),i,void 0,void 0,a)),l=await Promise.allSettled(i.map((b,v)=>this._generate(b,{...r,promptIndex:v},o==null?void 0:o[v]))),u=[],c=[];await Promise.all(l.map(async(b,v)=>{var P,x;if(b.status==="fulfilled"){const p=b.value;return u[v]=p.generations,c[v]=p.llmOutput,(P=o==null?void 0:o[v])==null?void 0:P.handleLLMEnd({generations:[p.generations],llmOutput:p.llmOutput})}else return await((x=o==null?void 0:o[v])==null?void 0:x.handleLLMError(b.reason)),Promise.reject(b.reason)}));const d={generations:u,llmOutput:c.length?(h=this._combineLLMOutput)==null?void 0:h.call(this,...c):void 0};return Object.defineProperty(d,B0,{value:o?{runIds:o==null?void 0:o.map(b=>b.runId)}:void 0,configurable:!0}),d}async generate(e,r,n){let i;Array.isArray(r)?i={stop:r}:i=r;const s=e.map(b=>b.map(Ia)),[a,o]=this._separateRunnableConfigFromCallOptions(i);if(a.callbacks=a.callbacks??n,!this.cache)return this._generateUncached(s,o,a);const{cache:l}=this,u=this._getSerializedCacheKeyParametersForCall(o),c=[],d=await Promise.all(s.map(async(b,v)=>{const P=oi._convertInputToPromptValue(b).toString(),x=await l.lookup(P,u);return x||c.push(v),x}));let h={};if(c.length>0){const b=await this._generateUncached(c.map(v=>s[v]),o,a);await Promise.all(b.generations.map(async(v,P)=>{const x=c[P];d[x]=v;const p=oi._convertInputToPromptValue(s[x]).toString();return l.update(p,u,v)})),h=b.llmOutput??{}}return{generations:d,llmOutput:h}}invocationParams(e){return{}}_modelType(){return"base_chat_model"}serialize(){return{...this.invocationParams(),_type:this._llmType(),_model:this._modelType()}}async generatePrompt(e,r,n){const i=e.map(s=>s.toChatMessages());return this.generate(i,r,n)}async call(e,r,n){return(await this.generate([e.map(Ia)],r,n)).generations[0][0].message}async callPrompt(e,r,n){const i=e.toChatMessages();return this.call(i,r,n)}async predictMessages(e,r,n){return this.call(e,r,n)}async predict(e,r,n){const i=new Si(e);return(await this.call([i],r,n)).content}}function uP(t){let e;return t.constructor.name===sE.name?(e=new Error(t.message),e.name="TimeoutError"):t.constructor.name===aE.name?(e=new Error(t.message),e.name="AbortError"):e=t,e}function cP(t){return t.role!=="system"&&t.role!=="assistant"&&t.role!=="user"&&t.role!=="function"&&console.warn(`Unknown message role: ${t.role}`),t.role}function wl(t){const e=t._getType();switch(e){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"generic":{if(!Ku.isInstance(t))throw new Error("Invalid generic chat message");return cP(t)}default:throw new Error(`Unknown message type: ${e}`)}}function dP(t){switch(t.role){case"user":return new Si(t.content||"");case"assistant":return new Zu(t.content||"",{function_call:t.function_call});case"system":return new Lf(t.content||"");default:return new Ku(t.content||"",t.role??"unknown")}}function hP(t,e){const r=t.role??e,n=t.content??"";let i;return t.function_call?i={function_call:t.function_call}:i={},r==="user"?new du({content:n}):r==="assistant"?new hu({content:n,additional_kwargs:i}):r==="system"?new fu({content:n}):r==="function"?new pu({content:n,additional_kwargs:i,name:t.name}):new mu({content:n,role:r})}class Xf extends oi{static lc_name(){return"ChatOpenAI"}get callKeys(){return[...super.callKeys,"options","function_call","functions","tools","promptIndex"]}get lc_secrets(){return{openAIApiKey:"OPENAI_API_KEY",azureOpenAIApiKey:"AZURE_OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{modelName:"model",openAIApiKey:"openai_api_key",azureOpenAIApiVersion:"azure_openai_api_version",azureOpenAIApiKey:"azure_openai_api_key",azureOpenAIApiInstanceName:"azure_openai_api_instance_name",azureOpenAIApiDeploymentName:"azure_openai_api_deployment_name"}}constructor(e,r){var n,i,s,a,o,l,u,c;if(super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"openAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.openAIApiKey=(e==null?void 0:e.openAIApiKey)??gt("OPENAI_API_KEY"),this.azureOpenAIApiKey=(e==null?void 0:e.azureOpenAIApiKey)??gt("AZURE_OPENAI_API_KEY"),!this.azureOpenAIApiKey&&!this.openAIApiKey)throw new Error("OpenAI or Azure OpenAI API key not found");if(this.azureOpenAIApiInstanceName=(e==null?void 0:e.azureOpenAIApiInstanceName)??gt("AZURE_OPENAI_API_INSTANCE_NAME"),this.azureOpenAIApiDeploymentName=(e==null?void 0:e.azureOpenAIApiDeploymentName)??gt("AZURE_OPENAI_API_DEPLOYMENT_NAME"),this.azureOpenAIApiVersion=(e==null?void 0:e.azureOpenAIApiVersion)??gt("AZURE_OPENAI_API_VERSION"),this.azureOpenAIBasePath=(e==null?void 0:e.azureOpenAIBasePath)??gt("AZURE_OPENAI_BASE_PATH"),this.organization=((n=e==null?void 0:e.configuration)==null?void 0:n.organization)??gt("OPENAI_ORGANIZATION"),this.modelName=(e==null?void 0:e.modelName)??this.modelName,this.modelKwargs=(e==null?void 0:e.modelKwargs)??{},this.timeout=e==null?void 0:e.timeout,this.temperature=(e==null?void 0:e.temperature)??this.temperature,this.topP=(e==null?void 0:e.topP)??this.topP,this.frequencyPenalty=(e==null?void 0:e.frequencyPenalty)??this.frequencyPenalty,this.presencePenalty=(e==null?void 0:e.presencePenalty)??this.presencePenalty,this.maxTokens=e==null?void 0:e.maxTokens,this.n=(e==null?void 0:e.n)??this.n,this.logitBias=e==null?void 0:e.logitBias,this.stop=e==null?void 0:e.stop,this.user=e==null?void 0:e.user,this.streaming=(e==null?void 0:e.streaming)??!1,this.azureOpenAIApiKey){if(!this.azureOpenAIApiInstanceName&&!this.azureOpenAIBasePath)throw new Error("Azure OpenAI API instance name not found");if(!this.azureOpenAIApiDeploymentName)throw new Error("Azure OpenAI API deployment name not found");if(!this.azureOpenAIApiVersion)throw new Error("Azure OpenAI API version not found");this.openAIApiKey=this.openAIApiKey??""}this.clientConfig={apiKey:this.openAIApiKey,organization:this.organization,baseURL:(r==null?void 0:r.basePath)??((i=e==null?void 0:e.configuration)==null?void 0:i.basePath),dangerouslyAllowBrowser:!0,defaultHeaders:((s=r==null?void 0:r.baseOptions)==null?void 0:s.headers)??((o=(a=e==null?void 0:e.configuration)==null?void 0:a.baseOptions)==null?void 0:o.headers),defaultQuery:((l=r==null?void 0:r.baseOptions)==null?void 0:l.params)??((c=(u=e==null?void 0:e.configuration)==null?void 0:u.baseOptions)==null?void 0:c.params),...r,...e==null?void 0:e.configuration}}invocationParams(e){return{model:this.modelName,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,max_tokens:this.maxTokens===-1?void 0:this.maxTokens,n:this.n,logit_bias:this.logitBias,stop:(e==null?void 0:e.stop)??this.stop,user:this.user,stream:this.streaming,functions:(e==null?void 0:e.functions)??(e!=null&&e.tools?e==null?void 0:e.tools.map(J2):void 0),function_call:e==null?void 0:e.function_call,...this.modelKwargs}}_identifyingParams(){return{model_name:this.modelName,...this.invocationParams(),...this.clientConfig}}async*_streamResponseChunks(e,r,n){var l;const i=e.map(u=>({role:wl(u),content:u.content,name:u.name,function_call:u.additional_kwargs.function_call})),s={...this.invocationParams(r),messages:i,stream:!0};let a;const o=await this.completionWithRetry(s,r);for await(const u of o){const c=u==null?void 0:u.choices[0];if(!c)continue;const{delta:d}=c,h=hP(d,a);a=d.role??a;const b={prompt:r.promptIndex??0,completion:c.index??0},v=new $f({message:h,text:h.content,generationInfo:b});yield v,n==null||n.handleLLMNewToken(v.text??"",b,void 0,void 0,void 0,{chunk:v})}if((l=r.signal)!=null&&l.aborted)throw new Error("AbortError")}identifyingParams(){return this._identifyingParams()}async _generate(e,r,n){var o,l;const i={},s=this.invocationParams(r),a=e.map(u=>({role:wl(u),content:u.content,name:u.name,function_call:u.additional_kwargs.function_call}));if(s.stream){const u=await this._streamResponseChunks(e,r,n),c={};for await(const h of u){const b=((o=h.generationInfo)==null?void 0:o.completion)??0;c[b]===void 0?c[b]=h:c[b]=c[b].concat(h)}return{generations:Object.entries(c).sort(([h],[b])=>parseInt(h,10)-parseInt(b,10)).map(([h,b])=>b)}}else{const u=await this.completionWithRetry({...s,stream:!1,messages:a},{signal:r==null?void 0:r.signal,...r==null?void 0:r.options}),{completion_tokens:c,prompt_tokens:d,total_tokens:h}=(u==null?void 0:u.usage)??{};c&&(i.completionTokens=(i.completionTokens??0)+c),d&&(i.promptTokens=(i.promptTokens??0)+d),h&&(i.totalTokens=(i.totalTokens??0)+h);const b=[];for(const v of(u==null?void 0:u.choices)??[]){const x={text:((l=v.message)==null?void 0:l.content)??"",message:dP(v.message??{role:"assistant"})};v.finish_reason&&(x.generationInfo={finish_reason:v.finish_reason}),b.push(x)}return{generations:b,llmOutput:{tokenUsage:i}}}}async getNumTokensFromMessages(e){let r=0,n=0,i=0;lh(this.modelName)==="gpt-3.5-turbo"?(n=4,i=-1):lh(this.modelName).startsWith("gpt-4")&&(n=3,i=1);const s=await Promise.all(e.map(async a=>{const o=await this.getNumTokens(a.content),l=await this.getNumTokens(wl(a)),u=a.name!==void 0?i+await this.getNumTokens(a.name):0,c=o+n+l+u;return r+=c,c}));return r+=3,{totalCount:r,countPerMessage:s}}async completionWithRetry(e,r){const n=this._getClientOptions(r);return this.caller.call(async()=>{try{return await this.client.chat.completions.create(e,n)}catch(i){throw uP(i)}})}_getClientOptions(e){if(!this.client){const n={azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,baseURL:this.clientConfig.baseURL},i=G2(n),s={...this.clientConfig,baseURL:i,timeout:this.timeout,maxRetries:0};s.baseURL||delete s.baseURL,this.client=new lt(s)}const r={...this.clientConfig,...e};return this.azureOpenAIApiKey&&(r.headers={"api-key":this.azureOpenAIApiKey,...r.headers},r.query={"api-version":this.azureOpenAIApiVersion,...r.query}),r}_llmType(){return"openai"}_combineLLMOutput(...e){return e.reduce((r,n)=>(n&&n.tokenUsage&&(r.tokenUsage.completionTokens+=n.tokenUsage.completionTokens??0,r.tokenUsage.promptTokens+=n.tokenUsage.promptTokens??0,r.tokenUsage.totalTokens+=n.tokenUsage.totalTokens??0),r),{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}}class fP extends Xf{constructor(e){var r;super(e),Object.defineProperty(this,"promptLayerApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"plTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnPromptLayerId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.promptLayerApiKey=(e==null?void 0:e.promptLayerApiKey)??(typeof process<"u"?(r=process.env)==null?void 0:r.PROMPTLAYER_API_KEY:void 0),this.plTags=(e==null?void 0:e.plTags)??[],this.returnPromptLayerId=(e==null?void 0:e.returnPromptLayerId)??!1}async _generate(e,r,n){const i=Date.now();let s;Array.isArray(r)?s={stop:r}:r!=null&&r.timeout&&!r.signal?s={...r,signal:AbortSignal.timeout(r.timeout)}:s=r??{};const a=await super._generate(e,s,n),o=Date.now(),l=c=>{let d;if(c._getType()==="human")d={role:"user",content:c.content};else if(c._getType()==="ai")d={role:"assistant",content:c.content};else if(c._getType()==="function")d={role:"assistant",content:c.content};else if(c._getType()==="system")d={role:"system",content:c.content};else if(c._getType()==="generic")d={role:c.role,content:c.content};else throw new Error(`Got unknown type ${c}`);return d},u=(c,d)=>{const h={...this.invocationParams(),model:this.modelName};if(d!=null&&d.stop&&Object.keys(h).includes("stop"))throw new Error("`stop` found in both the input and default params.");return c.map(v=>l(v))};for(let c=0;c<a.generations.length;c+=1){const d=a.generations[c],h=u(e,s);let b;const v=[{content:d.text,role:wl(d.message)}],P=await nO(this.caller,"langchain.PromptLayerChatOpenAI",{...this._identifyingParams(),messages:h,stream:!1},this.plTags,v,i,o,this.promptLayerApiKey);this.returnPromptLayerId===!0&&(P.success===!0&&(b=P.request_id),(!d.generationInfo||typeof d.generationInfo!="object")&&(d.generationInfo={}),d.generationInfo.promptLayerRequestId=b)}return a}}const pP=Object.freeze(Object.defineProperty({__proto__:null,ChatOpenAI:Xf,PromptLayerChatOpenAI:fP},Symbol.toStringTag,{value:"Module"}));class mP extends r2{constructor(e){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","stores","message","in_memory"]}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.messages=e??[]}async getMessages(){return this.messages}async addMessage(e){this.messages.push(e)}async clear(){this.messages=[]}}class gP extends kO{constructor(e){super(),Object.defineProperty(this,"chatHistory",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnMessages",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.chatHistory=(e==null?void 0:e.chatHistory)??new mP,this.returnMessages=(e==null?void 0:e.returnMessages)??this.returnMessages,this.inputKey=(e==null?void 0:e.inputKey)??this.inputKey,this.outputKey=(e==null?void 0:e.outputKey)??this.outputKey}async saveContext(e,r){await this.chatHistory.addUserMessage(SO(e,this.inputKey)),await this.chatHistory.addAIChatMessage(EO(r,this.outputKey))}async clear(){await this.chatHistory.clear()}}class yP extends W_{get lc_namespace(){return["langchain","chains",this._chainType()]}constructor(e,r,n){if(arguments.length===1&&typeof e=="object"&&!("saveContext"in e)){const{memory:i,callbackManager:s,...a}=e;super({...a,callbacks:s??a.callbacks}),this.memory=i}else super({verbose:r,callbacks:n}),this.memory=e}_selectMemoryInputs(e){const r={...e};return"signal"in r&&delete r.signal,"timeout"in r&&delete r.timeout,r}async invoke(e,r){return this.call(e,r)}serialize(){throw new Error("Method not implemented.")}async run(e,r){const n=this.inputKeys.filter(l=>{var u;return!((u=this.memory)!=null&&u.memoryKeys.includes(l))});if(!(n.length<=1))throw new Error(`Chain ${this._chainType()} expects multiple inputs, cannot use 'run' `);const s=n.length?{[n[0]]:e}:{},a=await this.call(s,r),o=Object.keys(a);if(o.length===1)return a[o[0]];throw new Error("return values have multiple keys, `run` only supported when one key currently")}async _formatValues(e){const r={...e};if(r.timeout&&!r.signal&&(r.signal=AbortSignal.timeout(r.timeout),delete r.timeout),this.memory!=null){const n=await this.memory.loadMemoryVariables(this._selectMemoryInputs(e));for(const[i,s]of Object.entries(n))r[i]=s}return r}async call(e,r,n){const i=await this._formatValues(e),s=CO(r),a=await Vt.configure(s.callbacks,this.callbacks,s.tags||n,this.tags,s.metadata,this.metadata,{verbose:this.verbose}),o=await(a==null?void 0:a.handleChainStart(this.toJSON(),i));let l;try{l=await(e.signal?Promise.race([this._call(i,o),new Promise((u,c)=>{var d;(d=e.signal)==null||d.addEventListener("abort",()=>{c(new Error("AbortError"))})})]):this._call(i,o))}catch(u){throw await(o==null?void 0:o.handleChainError(u)),u}return this.memory!=null&&await this.memory.saveContext(this._selectMemoryInputs(e),l),await(o==null?void 0:o.handleChainEnd(l)),Object.defineProperty(l,B0,{value:o?{runId:o==null?void 0:o.runId}:void 0,configurable:!0}),l}async apply(e,r){return Promise.all(e.map(async(n,i)=>this.call(n,r==null?void 0:r[i])))}static async deserialize(e,r={}){switch(e._type){case"llm_chain":{const{LLMChain:n}=await it(()=>Promise.resolve().then(()=>bP),void 0,import.meta.url);return n.deserialize(e)}case"sequential_chain":{const{SequentialChain:n}=await it(()=>import("./sequential_chain-5744ca8d.js"),["./sequential_chain-5744ca8d.js","./embed-e406f2b7.css"],import.meta.url);return n.deserialize(e)}case"simple_sequential_chain":{const{SimpleSequentialChain:n}=await it(()=>import("./sequential_chain-5744ca8d.js"),["./sequential_chain-5744ca8d.js","./embed-e406f2b7.css"],import.meta.url);return n.deserialize(e)}case"stuff_documents_chain":{const{StuffDocumentsChain:n}=await it(()=>import("./combine_docs_chain-5de26143.js"),["./combine_docs_chain-5de26143.js","./embed-e406f2b7.css"],import.meta.url);return n.deserialize(e)}case"map_reduce_documents_chain":{const{MapReduceDocumentsChain:n}=await it(()=>import("./combine_docs_chain-5de26143.js"),["./combine_docs_chain-5de26143.js","./embed-e406f2b7.css"],import.meta.url);return n.deserialize(e)}case"refine_documents_chain":{const{RefineDocumentsChain:n}=await it(()=>import("./combine_docs_chain-5de26143.js"),["./combine_docs_chain-5de26143.js","./embed-e406f2b7.css"],import.meta.url);return n.deserialize(e)}case"vector_db_qa":{const{VectorDBQAChain:n}=await it(()=>import("./vector_db_qa-7bbf82d3.js"),["./vector_db_qa-7bbf82d3.js","./combine_docs_chain-5de26143.js","./embed-e406f2b7.css"],import.meta.url);return n.deserialize(e,r)}case"api_chain":{const{APIChain:n}=await it(()=>import("./api_chain-0683000f.js"),["./api_chain-0683000f.js","./embed-e406f2b7.css"],import.meta.url);return n.deserialize(e)}default:throw new Error(`Invalid prompt type in config: ${e._type}`)}}}class vP extends _t{parseResultWithPrompt(e,r,n){return this.parseResult(e,n)}async invoke(e,r){return typeof e=="string"?this._callWithConfig(async n=>this.parseResult([{text:n}]),e,{...r,runType:"parser"}):this._callWithConfig(async n=>this.parseResult([{message:n,text:n.content}]),e,{...r,runType:"parser"})}}class _P extends vP{parseResult(e,r){return this.parse(e[0].text,r)}async parseWithPrompt(e,r,n){return this.parse(e,n)}_type(){throw new Error("_type not implemented")}}class wP extends _P{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","default"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"NoOpOutputParser"}parse(e){return Promise.resolve(e)}getFormatInstructions(){return""}}class cc extends yP{static lc_name(){return"LLMChain"}get inputKeys(){return this.prompt.inputVariables}get outputKeys(){return[this.outputKey]}constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"llm",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"llmKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputKey",{enumerable:!0,configurable:!0,writable:!0,value:"text"}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt,this.llm=e.llm,this.llmKwargs=e.llmKwargs,this.outputKey=e.outputKey??this.outputKey,this.outputParser=e.outputParser??new wP,this.prompt.outputParser){if(e.outputParser)throw new Error("Cannot set both outputParser and prompt.outputParser");this.outputParser=this.prompt.outputParser}}_selectMemoryInputs(e){const r=super._selectMemoryInputs(e);for(const n of this.llm.callKeys)n in e&&delete r[n];return r}async _getFinalOutput(e,r,n){let i;return this.outputParser?i=await this.outputParser.parseResultWithPrompt(e,r,n==null?void 0:n.getChild()):i=e[0].text,i}call(e,r){return super.call(e,r)}async _call(e,r){const n={...e},i={...this.llmKwargs};for(const o of this.llm.callKeys)o in e&&(i[o]=e[o],delete n[o]);const s=await this.prompt.formatPromptValue(n),{generations:a}=await this.llm.generatePrompt([s],i,r==null?void 0:r.getChild());return{[this.outputKey]:await this._getFinalOutput(a[0],s,r)}}async predict(e,r){return(await this.call(e,r))[this.outputKey]}_chainType(){return"llm"}static async deserialize(e){const{llm:r,prompt:n}=e;if(!r)throw new Error("LLMChain must have llm");if(!n)throw new Error("LLMChain must have prompt");return new cc({llm:await J_.deserialize(r),prompt:await Yf.deserialize(n)})}serialize(){return{_type:`${this._chainType()}_chain`,llm:this.llm.serialize(),prompt:this.prompt.serialize()}}}const bP=Object.freeze(Object.defineProperty({__proto__:null,LLMChain:cc},Symbol.toStringTag,{value:"Module"}));class xP extends gP{constructor(e){super({returnMessages:(e==null?void 0:e.returnMessages)??!1,chatHistory:e==null?void 0:e.chatHistory,inputKey:e==null?void 0:e.inputKey,outputKey:e==null?void 0:e.outputKey}),Object.defineProperty(this,"humanPrefix",{enumerable:!0,configurable:!0,writable:!0,value:"Human"}),Object.defineProperty(this,"aiPrefix",{enumerable:!0,configurable:!0,writable:!0,value:"AI"}),Object.defineProperty(this,"memoryKey",{enumerable:!0,configurable:!0,writable:!0,value:"history"}),Object.defineProperty(this,"k",{enumerable:!0,configurable:!0,writable:!0,value:5}),this.humanPrefix=(e==null?void 0:e.humanPrefix)??this.humanPrefix,this.aiPrefix=(e==null?void 0:e.aiPrefix)??this.aiPrefix,this.memoryKey=(e==null?void 0:e.memoryKey)??this.memoryKey,this.k=(e==null?void 0:e.k)??this.k}get memoryKeys(){return[this.memoryKey]}async loadMemoryVariables(e){const r=await this.chatHistory.getMessages();return this.returnMessages?{[this.memoryKey]:r.slice(-this.k*2)}:{[this.memoryKey]:qf(r.slice(-this.k*2),this.humanPrefix,this.aiPrefix)}}}/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function G_(t){return typeof t>"u"||t===null}function kP(t){return typeof t=="object"&&t!==null}function SP(t){return Array.isArray(t)?t:G_(t)?[]:[t]}function EP(t,e){var r,n,i,s;if(e)for(s=Object.keys(e),r=0,n=s.length;r<n;r+=1)i=s[r],t[i]=e[i];return t}function OP(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function PP(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var TP=G_,jP=kP,CP=SP,AP=OP,IP=PP,RP=EP,ep={isNothing:TP,isObject:jP,toArray:CP,repeat:AP,isNegativeZero:IP,extend:RP};function Y_(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function yo(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=Y_(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}yo.prototype=Object.create(Error.prototype);yo.prototype.constructor=yo;yo.prototype.toString=function(e){return this.name+": "+Y_(this,e)};var li=yo,NP=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],LP=["scalar","sequence","mapping"];function $P(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function DP(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(NP.indexOf(r)===-1)throw new li('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=$P(e.styleAliases||null),LP.indexOf(this.kind)===-1)throw new li('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var wt=DP;function Ag(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(s,a){s.tag===n.tag&&s.kind===n.kind&&s.multi===n.multi&&(i=a)}),r[i]=n}),r}function MP(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function mh(t){return this.extend(t)}mh.prototype.extend=function(e){var r=[],n=[];if(e instanceof wt)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new li("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(s){if(!(s instanceof wt))throw new li("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new li("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new li("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(s){if(!(s instanceof wt))throw new li("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(mh.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=Ag(i,"implicit"),i.compiledExplicit=Ag(i,"explicit"),i.compiledTypeMap=MP(i.compiledImplicit,i.compiledExplicit),i};var UP=mh,zP=new wt("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),FP=new wt("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),BP=new wt("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),VP=new UP({explicit:[zP,FP,BP]});function HP(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function ZP(){return null}function KP(t){return t===null}var qP=new wt("tag:yaml.org,2002:null",{kind:"scalar",resolve:HP,construct:ZP,predicate:KP,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function WP(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function JP(t){return t==="true"||t==="True"||t==="TRUE"}function GP(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var YP=new wt("tag:yaml.org,2002:bool",{kind:"scalar",resolve:WP,construct:JP,predicate:GP,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function QP(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function XP(t){return 48<=t&&t<=55}function eT(t){return 48<=t&&t<=57}function tT(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!QP(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!XP(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!eT(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function rT(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function nT(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!ep.isNegativeZero(t)}var iT=new wt("tag:yaml.org,2002:int",{kind:"scalar",resolve:tT,construct:rT,predicate:nT,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),sT=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function aT(t){return!(t===null||!sT.test(t)||t[t.length-1]==="_")}function oT(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var lT=/^[-+]?[0-9]+e/;function uT(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(ep.isNegativeZero(t))return"-0.0";return r=t.toString(10),lT.test(r)?r.replace("e",".e"):r}function cT(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||ep.isNegativeZero(t))}var dT=new wt("tag:yaml.org,2002:float",{kind:"scalar",resolve:aT,construct:oT,predicate:cT,represent:uT,defaultStyle:"lowercase"}),hT=VP.extend({implicit:[qP,YP,iT,dT]}),fT=hT,Q_=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),X_=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function pT(t){return t===null?!1:Q_.exec(t)!==null||X_.exec(t)!==null}function mT(t){var e,r,n,i,s,a,o,l=0,u=null,c,d,h;if(e=Q_.exec(t),e===null&&(e=X_.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(s=+e[4],a=+e[5],o=+e[6],e[7]){for(l=e[7].slice(0,3);l.length<3;)l+="0";l=+l}return e[9]&&(c=+e[10],d=+(e[11]||0),u=(c*60+d)*6e4,e[9]==="-"&&(u=-u)),h=new Date(Date.UTC(r,n,i,s,a,o,l)),u&&h.setTime(h.getTime()-u),h}function gT(t){return t.toISOString()}var yT=new wt("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:pT,construct:mT,instanceOf:Date,represent:gT});function vT(t){return t==="<<"||t===null}var _T=new wt("tag:yaml.org,2002:merge",{kind:"scalar",resolve:vT}),tp=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function wT(t){if(t===null)return!1;var e,r,n=0,i=t.length,s=tp;for(r=0;r<i;r++)if(e=s.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function bT(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,s=tp,a=0,o=[];for(e=0;e<i;e++)e%4===0&&e&&(o.push(a>>16&255),o.push(a>>8&255),o.push(a&255)),a=a<<6|s.indexOf(n.charAt(e));return r=i%4*6,r===0?(o.push(a>>16&255),o.push(a>>8&255),o.push(a&255)):r===18?(o.push(a>>10&255),o.push(a>>2&255)):r===12&&o.push(a>>4&255),new Uint8Array(o)}function xT(t){var e="",r=0,n,i,s=t.length,a=tp;for(n=0;n<s;n++)n%3===0&&n&&(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]),r=(r<<8)+t[n];return i=s%3,i===0?(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]):i===2?(e+=a[r>>10&63],e+=a[r>>4&63],e+=a[r<<2&63],e+=a[64]):i===1&&(e+=a[r>>2&63],e+=a[r<<4&63],e+=a[64],e+=a[64]),e}function kT(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var ST=new wt("tag:yaml.org,2002:binary",{kind:"scalar",resolve:wT,construct:bT,predicate:kT,represent:xT}),ET=Object.prototype.hasOwnProperty,OT=Object.prototype.toString;function PT(t){if(t===null)return!0;var e=[],r,n,i,s,a,o=t;for(r=0,n=o.length;r<n;r+=1){if(i=o[r],a=!1,OT.call(i)!=="[object Object]")return!1;for(s in i)if(ET.call(i,s))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}function TT(t){return t!==null?t:[]}var jT=new wt("tag:yaml.org,2002:omap",{kind:"sequence",resolve:PT,construct:TT}),CT=Object.prototype.toString;function AT(t){if(t===null)return!0;var e,r,n,i,s,a=t;for(s=new Array(a.length),e=0,r=a.length;e<r;e+=1){if(n=a[e],CT.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;s[e]=[i[0],n[i[0]]]}return!0}function IT(t){if(t===null)return[];var e,r,n,i,s,a=t;for(s=new Array(a.length),e=0,r=a.length;e<r;e+=1)n=a[e],i=Object.keys(n),s[e]=[i[0],n[i[0]]];return s}var RT=new wt("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:AT,construct:IT}),NT=Object.prototype.hasOwnProperty;function LT(t){if(t===null)return!0;var e,r=t;for(e in r)if(NT.call(r,e)&&r[e]!==null)return!1;return!0}function $T(t){return t!==null?t:{}}var DT=new wt("tag:yaml.org,2002:set",{kind:"mapping",resolve:LT,construct:$T});fT.extend({implicit:[yT,_T],explicit:[ST,jT,RT,DT]});function Ig(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"":t===95?"":t===76?"\u2028":t===80?"\u2029":""}var MT=new Array(256),UT=new Array(256);for(var Mi=0;Mi<256;Mi++)MT[Mi]=Ig(Mi)?1:0,UT[Mi]=Ig(Mi);const ew=async t=>{try{return fetch(window.Shopify.routes.root+t).then(e=>e.json()).then(e=>e)}catch(e){return console.error(`Error fetching endpoint ${t}: with message %s`,e.message),null}},zT=t=>{const{title:e,body_html:r,id:n}=t;return JSON.stringify({title:e,description:r,id:n})},FT=async t=>{var r,n;const e=await ew(`search/suggest.json?q=${t}&resources[type]=product&resources[options][unavailable_products]=hide&resources[options][fields]=title,product_type,variants.title`);return(n=(r=e==null?void 0:e.resources)==null?void 0:r.results)==null?void 0:n.products},BT=async()=>{var e;const t=await ew("products.json?limit=250&status=active");return console.log(t),(e=t==null?void 0:t.products)==null?void 0:e.map(r=>zT(r)).join(`\r
`)},gh=async t=>{let e=[];const r=await vS(t.clientId);e.push(r[1]);const n=await BT();if(console.log("Catalog is ",n),r[0]===!1){const x=await _S(t.clientId),p=await wS(t.clientId);x[0]===!0&&(e.push(x[1]),e.push(x[2])),p[0]===!0&&(e.push(p[1]),e.push(p[2]))}const i=await bS(t.clientId),s=x=>{if(typeof x=="string")return x;switch(x.name){case"page_viewed":return r[0]===!0?"Hi, this is my first time visiting this store.":"Hi, welcome me back to the store and ask for any help I may need.";case"cart_viewed":return i===!0?"I am back at my cart again. I will consider purchasing if you give me a coupon.":"Encourage me to checkout.";case"product_viewed":return`I am looking at ${x.detail.productVariant.product.title}. Suggest for me another product in your catalog for me to look at. `;case"search_submitted":const m=x.detail.query;return q,`I am searching for ${m}. Ask me if I found what I was looking for.`;default:return"Hello."}},a=`You are a helpful online sales assistant. Your goal is to help customers in their shopping experience whether it's by answering questions, recommending products, or helping them checkout. Be friendly, helpful, and concise in your responses. The below is relevent context for this customer:
{context}
Given that context, here are some suggestions to give the customer a great experience:
If the customer has items in their cart, encourage them to go to their cart and complete the purchase. You are provided the link for the cart. 
If the customer has viewed a product multiple times, encourage them to revisit the product by giving them the product link.
If the customer asks for a coupon, give them a coupon link at www.claimcoupon.com
If the customer asks you how their search experience was, ask them if they found what they're looking for and offer to help refine search.
If the customer is viewing a product, recommend a similar product they may also enjoy. Here's the whole product catalog, where each line is a json object containing the title, description, and id:
{catalog}`,l=await K_.fromTemplate(a).format({context:e,catalog:n}),u="{message}",c=ns.fromMessages([l,u]),d=new Xf({openAIApiKey:"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",temperature:.7,streaming:!0}),h=new xP({k:3}),b=new cc({llm:d,prompt:c,memory:h}),v=s(t);return await b.call({message:v})};function VT({props:t}){const[e,r]=Ne.useState(""),n=Ne.useRef(null),i=t.iconSize;Ne.useEffect(()=>{f0().then(a=>{a==null||a.forEach(o=>{gh(o).then(l=>{r(l.text)}).catch(l=>console.error(l))})})},[]);const s=()=>{const a=t.overlayDiv;a.style.display=a.style.display==="none"?"block":"none"};return T.jsxs("div",{className:"mt-4",style:{position:"relative"},onClick:s,children:[T.jsx("div",{ref:n,children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:i+"em",viewBox:"0 0 512 512",style:{fill:"black"},children:T.jsx("path",{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"})})}),t.mountDiv==="embed"&&n.current&&T.jsx("div",{className:"talk-bubble tri-right round border btm-right-in",style:{position:"absolute",bottom:n.current.offsetTop+i/4+"em",right:n.current.offsetLeft-i+"em",height:"auto",width:"500px",background:"white",color:"black"},children:T.jsx("div",{className:"talktext",children:T.jsx("p",{style:{overflow:"hidden",margin:0},children:e})})})]})}var tw={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Rg=pi.createContext&&pi.createContext(tw),Dn=function(){return Dn=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Dn.apply(this,arguments)},HT=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r};function rw(t){return t&&t.map(function(e,r){return pi.createElement(e.tag,Dn({key:r},e.attr),rw(e.child))})}function Xe(t){return function(e){return pi.createElement(ZT,Dn({attr:Dn({},t.attr)},e),rw(t.child))}}function ZT(t){var e=function(r){var n,i=t.attr,s=t.size,a=t.title,o=HT(t,["attr","size","title"]),l=s||r.size||"1em";return r.className&&(n=r.className),t.className&&(n=(n?n+" ":"")+t.className),pi.createElement("svg",Dn({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,i,o,{className:n,style:Dn(Dn({color:t.color||r.color},r.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&pi.createElement("title",null,a),t.children)};return Rg!==void 0?pi.createElement(Rg.Consumer,null,function(r){return e(r)}):e(tw)}function KT(t){return Xe({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M12 192h424c6.6 0 12 5.4 12 12v260c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V204c0-6.6 5.4-12 12-12zm436-44v-36c0-26.5-21.5-48-48-48h-48V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H160V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H48C21.5 64 0 85.5 0 112v36c0 6.6 5.4 12 12 12h424c6.6 0 12-5.4 12-12z"}}]})(t)}function qT(t){return Xe({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z"}}]})(t)}function WT(t){return Xe({tag:"svg",attr:{viewBox:"0 0 192 512"},child:[{tag:"path",attr:{d:"M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"}}]})(t)}function JT(t){return Xe({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"}}]})(t)}function rp(t){return Xe({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4zm-132.9 88.7L299.3 420.7c-6.2 6.2-16.4 6.2-22.6 0L171.3 315.3c-10.1-10.1-2.9-27.3 11.3-27.3H248V176c0-8.8 7.2-16 16-16h48c8.8 0 16 7.2 16 16v112h65.4c14.2 0 21.4 17.2 11.3 27.3z"}}]})(t)}function np(t){return Xe({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"}}]})(t)}function GT(t){return Xe({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm160-14.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"}}]})(t)}var Ng,YT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},nw={exports:{}};Ng=function(){return(()=>{var t={720:(n,i,s)=>{s.r(i),s.d(i,{Scene:()=>Dw,Tweenable:()=>Gt,interpolate:()=>Rw,processTweens:()=>op,setBezierFunction:()=>Uw,shouldScheduleUpdate:()=>lp,tween:()=>mw,unsetBezierFunction:()=>zw});var a={};s.r(a),s.d(a,{bounce:()=>jt,bouncePast:()=>et,easeFrom:()=>Dt,easeFromTo:()=>Jt,easeInBack:()=>G,easeInCirc:()=>L,easeInCubic:()=>b,easeInExpo:()=>O,easeInOutBack:()=>V,easeInOutCirc:()=>X,easeInOutCubic:()=>P,easeInOutExpo:()=>R,easeInOutQuad:()=>h,easeInOutQuart:()=>m,easeInOutQuint:()=>A,easeInOutSine:()=>_,easeInQuad:()=>c,easeInQuart:()=>x,easeInQuint:()=>f,easeInSine:()=>k,easeOutBack:()=>ge,easeOutBounce:()=>ie,easeOutCirc:()=>te,easeOutCubic:()=>v,easeOutExpo:()=>w,easeOutQuad:()=>d,easeOutQuart:()=>p,easeOutQuint:()=>S,easeOutSine:()=>j,easeTo:()=>Mr,elastic:()=>$,linear:()=>u,swingFrom:()=>H,swingFromTo:()=>F,swingTo:()=>ve});var o={};s.r(o),s.d(o,{afterTween:()=>Cw,beforeTween:()=>jw,doesApply:()=>Pw,tweenCreated:()=>Tw});/*!
	 * All equations are adapted from Thomas Fuchs'
	 * [Scripty2](https://github.com/madrobby/scripty2/blob/master/src/effects/transitions/penner.js).
	 *
	 * Based on Easing Equations (c) 2003 [Robert
	 * Penner](http://www.robertpenner.com/), all rights reserved. This work is
	 * [subject to terms](http://www.robertpenner.com/easing_terms_of_use.html).
	 *//*!
	 *  TERMS OF USE - EASING EQUATIONS
	 *  Open source under the BSD License.
	 *  Easing Equations (c) 2003 Robert Penner, all rights reserved.
	 */var l,u=function(g){return g},c=function(g){return Math.pow(g,2)},d=function(g){return-(Math.pow(g-1,2)-1)},h=function(g){return(g/=.5)<1?.5*Math.pow(g,2):-.5*((g-=2)*g-2)},b=function(g){return Math.pow(g,3)},v=function(g){return Math.pow(g-1,3)+1},P=function(g){return(g/=.5)<1?.5*Math.pow(g,3):.5*(Math.pow(g-2,3)+2)},x=function(g){return Math.pow(g,4)},p=function(g){return-(Math.pow(g-1,4)-1)},m=function(g){return(g/=.5)<1?.5*Math.pow(g,4):-.5*((g-=2)*Math.pow(g,3)-2)},f=function(g){return Math.pow(g,5)},S=function(g){return Math.pow(g-1,5)+1},A=function(g){return(g/=.5)<1?.5*Math.pow(g,5):.5*(Math.pow(g-2,5)+2)},k=function(g){return 1-Math.cos(g*(Math.PI/2))},j=function(g){return Math.sin(g*(Math.PI/2))},_=function(g){return-.5*(Math.cos(Math.PI*g)-1)},O=function(g){return g===0?0:Math.pow(2,10*(g-1))},w=function(g){return g===1?1:1-Math.pow(2,-10*g)},R=function(g){return g===0?0:g===1?1:(g/=.5)<1?.5*Math.pow(2,10*(g-1)):.5*(2-Math.pow(2,-10*--g))},L=function(g){return-(Math.sqrt(1-g*g)-1)},te=function(g){return Math.sqrt(1-Math.pow(g-1,2))},X=function(g){return(g/=.5)<1?-.5*(Math.sqrt(1-g*g)-1):.5*(Math.sqrt(1-(g-=2)*g)+1)},ie=function(g){return g<1/2.75?7.5625*g*g:g<2/2.75?7.5625*(g-=1.5/2.75)*g+.75:g<2.5/2.75?7.5625*(g-=2.25/2.75)*g+.9375:7.5625*(g-=2.625/2.75)*g+.984375},G=function(g){var I=1.70158;return g*g*((I+1)*g-I)},ge=function(g){var I=1.70158;return(g-=1)*g*((I+1)*g+I)+1},V=function(g){var I=1.70158;return(g/=.5)<1?g*g*((1+(I*=1.525))*g-I)*.5:.5*((g-=2)*g*((1+(I*=1.525))*g+I)+2)},$=function(g){return-1*Math.pow(4,-8*g)*Math.sin((6*g-1)*(2*Math.PI)/2)+1},F=function(g){var I=1.70158;return(g/=.5)<1?g*g*((1+(I*=1.525))*g-I)*.5:.5*((g-=2)*g*((1+(I*=1.525))*g+I)+2)},H=function(g){var I=1.70158;return g*g*((I+1)*g-I)},ve=function(g){var I=1.70158;return(g-=1)*g*((I+1)*g+I)+1},jt=function(g){return g<1/2.75?7.5625*g*g:g<2/2.75?7.5625*(g-=1.5/2.75)*g+.75:g<2.5/2.75?7.5625*(g-=2.25/2.75)*g+.9375:7.5625*(g-=2.625/2.75)*g+.984375},et=function(g){return g<1/2.75?7.5625*g*g:g<2/2.75?2-(7.5625*(g-=1.5/2.75)*g+.75):g<2.5/2.75?2-(7.5625*(g-=2.25/2.75)*g+.9375):2-(7.5625*(g-=2.625/2.75)*g+.984375)},Jt=function(g){return(g/=.5)<1?.5*Math.pow(g,4):-.5*((g-=2)*Math.pow(g,3)-2)},Dt=function(g){return Math.pow(g,4)},Mr=function(g){return Math.pow(g,.25)};function Z(g,I){if(!(g instanceof I))throw new TypeError("Cannot call a class as a function")}function y(g,I){for(var D=0;D<I.length;D++){var N=I[D];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(g,N.key,N)}}function E(g){return E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},E(g)}function C(g,I){var D=Object.keys(g);if(Object.getOwnPropertySymbols){var N=Object.getOwnPropertySymbols(g);I&&(N=N.filter(function(W){return Object.getOwnPropertyDescriptor(g,W).enumerable})),D.push.apply(D,N)}return D}function U(g){for(var I=1;I<arguments.length;I++){var D=arguments[I]!=null?arguments[I]:{};I%2?C(Object(D),!0).forEach(function(N){M(g,N,D[N])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(D)):C(Object(D)).forEach(function(N){Object.defineProperty(g,N,Object.getOwnPropertyDescriptor(D,N))})}return g}function M(g,I,D){return I in g?Object.defineProperty(g,I,{value:D,enumerable:!0,configurable:!0,writable:!0}):g[I]=D,g}var K,ue,ke,Ue="linear",Ke=typeof window<"u"?window:YT,tt="afterTween",dt="afterTweenEnd",ze="beforeTween",De="tweenCreated",on="function",Us="string",sp=Ke.requestAnimationFrame||Ke.webkitRequestAnimationFrame||Ke.oRequestAnimationFrame||Ke.msRequestAnimationFrame||Ke.mozCancelRequestAnimationFrame&&Ke.mozRequestAnimationFrame||setTimeout,zs=function(){},qn=null,ln=null,Ao=U({},a),dc=function(g,I,D,N,W,ne,le){var ce,_e,Ce,be=g<ne?0:(g-ne)/W,Fe=!1;for(var qe in le&&le.call&&(Fe=!0,ce=le(be)),I)Fe||(ce=((_e=le[qe]).call?_e:Ao[_e])(be)),Ce=D[qe],I[qe]=Ce+(N[qe]-Ce)*ce;return I},ap=function(g,I){var D=g._timestamp,N=g._currentState,W=g._delay;if(!(I<D+W)){var ne=g._duration,le=g._targetState,ce=D+W+ne,_e=I>ce?ce:I;g._hasEnded=_e>=ce;var Ce=ne-(ce-_e),be=g._filters.length>0;if(g._hasEnded)return g._render(le,g._data,Ce),g.stop(!0);be&&g._applyFilter(ze),_e<D+W?D=ne=_e=1:D+=W,dc(_e,N,g._originalState,le,ne,D,g._easing),be&&g._applyFilter(tt),g._render(N,g._data,Ce)}},op=function(){for(var g,I=Gt.now(),D=qn;D;)g=D._next,ap(D,I),D=g},hw=Date.now||function(){return+new Date},hc=!1,lp=function(g){g&&hc||(hc=g,g&&fw())},fw=function g(){K=hw(),hc&&sp.call(Ke,g,16.666666666666668),op()},up=function(g){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ue,D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},N=E(I);if(Ao[I])return Ao[I];if(N===Us||N===on)for(var W in g)D[W]=I;else for(var ne in g)D[ne]=I[ne]||Ue;return D},cp=function(g){g===qn?(qn=g._next)?qn._previous=null:ln=null:g===ln?(ln=g._previous)?ln._next=null:qn=null:(ue=g._previous,ke=g._next,ue._next=ke,ke._previous=ue),g._previous=g._next=null},pw=typeof Promise=="function"?Promise:null;l=Symbol.toStringTag;var Gt=function(){function g(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;Z(this,g),M(this,l,"Promise"),this._config={},this._data={},this._delay=0,this._filters=[],this._next=null,this._previous=null,this._timestamp=null,this._hasEnded=!1,this._resolve=null,this._reject=null,this._currentState=N||{},this._originalState={},this._targetState={},this._start=zs,this._render=zs,this._promiseCtor=pw,W&&this.setConfig(W)}var I,D;return I=g,D=[{key:"_applyFilter",value:function(N){for(var W=this._filters.length;W>0;W--){var ne=this._filters[W-W][N];ne&&ne(this)}}},{key:"tween",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;return this._isPlaying&&this.stop(),!N&&this._config||this.setConfig(N),this._pausedAtTime=null,this._timestamp=g.now(),this._start(this.get(),this._data),this._delay&&this._render(this._currentState,this._data,0),this._resume(this._timestamp)}},{key:"setConfig",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},W=this._config;for(var ne in N)W[ne]=N[ne];var le=W.promise,ce=le===void 0?this._promiseCtor:le,_e=W.start,Ce=_e===void 0?zs:_e,be=W.finish,Fe=W.render,qe=Fe===void 0?this._config.step||zs:Fe,Ct=W.step,Ci=Ct===void 0?zs:Ct;this._data=W.data||W.attachment||this._data,this._isPlaying=!1,this._pausedAtTime=null,this._scheduleId=null,this._delay=N.delay||0,this._start=Ce,this._render=qe||Ci,this._duration=W.duration||500,this._promiseCtor=ce,be&&(this._resolve=be);var un=N.from,cn=N.to,Pe=cn===void 0?{}:cn,Ai=this._currentState,dn=this._originalState,Wn=this._targetState;for(var ht in un)Ai[ht]=un[ht];var Er=!1;for(var Ur in Ai){var Jn=Ai[Ur];Er||E(Jn)!==Us||(Er=!0),dn[Ur]=Jn,Wn[Ur]=Pe.hasOwnProperty(Ur)?Pe[Ur]:Jn}if(this._easing=up(this._currentState,W.easing,this._easing),this._filters.length=0,Er){for(var mp in g.filters)g.filters[mp].doesApply(this)&&this._filters.push(g.filters[mp]);this._applyFilter(De)}return this}},{key:"then",value:function(N,W){var ne=this;return this._promise=new this._promiseCtor(function(le,ce){ne._resolve=le,ne._reject=ce}),this._promise.then(N,W)}},{key:"catch",value:function(N){return this.then().catch(N)}},{key:"finally",value:function(N){return this.then().finally(N)}},{key:"get",value:function(){return U({},this._currentState)}},{key:"set",value:function(N){this._currentState=N}},{key:"pause",value:function(){if(this._isPlaying)return this._pausedAtTime=g.now(),this._isPlaying=!1,cp(this),this}},{key:"resume",value:function(){return this._resume()}},{key:"_resume",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g.now();return this._timestamp===null?this.tween():this._isPlaying?this._promise:(this._pausedAtTime&&(this._timestamp+=N-this._pausedAtTime,this._pausedAtTime=null),this._isPlaying=!0,qn===null?(qn=this,ln=this):(this._previous=ln,ln._next=this,ln=this),this)}},{key:"seek",value:function(N){N=Math.max(N,0);var W=g.now();return this._timestamp+N===0||(this._timestamp=W-N,ap(this,W)),this}},{key:"stop",value:function(){var N=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!this._isPlaying)return this;this._isPlaying=!1,cp(this);var W=this._filters.length>0;return N&&(W&&this._applyFilter(ze),dc(1,this._currentState,this._originalState,this._targetState,1,0,this._easing),W&&(this._applyFilter(tt),this._applyFilter(dt))),this._resolve&&this._resolve({data:this._data,state:this._currentState,tweenable:this}),this._resolve=null,this._reject=null,this}},{key:"cancel",value:function(){var N=arguments.length>0&&arguments[0]!==void 0&&arguments[0],W=this._currentState,ne=this._data,le=this._isPlaying;return le?(this._reject&&this._reject({data:ne,state:W,tweenable:this}),this._resolve=null,this._reject=null,this.stop(N)):this}},{key:"isPlaying",value:function(){return this._isPlaying}},{key:"hasEnded",value:function(){return this._hasEnded}},{key:"setScheduleFunction",value:function(N){g.setScheduleFunction(N)}},{key:"data",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return N&&(this._data=U({},N)),this._data}},{key:"dispose",value:function(){for(var N in this)delete this[N]}}],D&&y(I.prototype,D),g}();function mw(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},I=new Gt;return I.tween(g),I.tweenable=I,I}M(Gt,"now",function(){return K}),M(Gt,"setScheduleFunction",function(g){return sp=g}),M(Gt,"filters",{}),M(Gt,"formulas",Ao),lp(!0);var Fs,Io,gw=/(\d|-|\.)/,yw=/([^\-0-9.]+)/g,fc=/[0-9.-]+/g,vw=(Fs=fc.source,Io=/,\s*/.source,new RegExp("rgba?\\(".concat(Fs).concat(Io).concat(Fs).concat(Io).concat(Fs,"(").concat(Io).concat(Fs,")?\\)"),"g")),_w=/^.*\(/,dp=/#([0-9]|[a-f]){3,6}/gi,Ro="VAL",ww=function(g,I){return g.map(function(D,N){return"_".concat(I,"_").concat(N)})};function pc(g){return parseInt(g,16)}var bw=function(g){return"rgb(".concat((I=g,(I=I.replace(/#/,"")).length===3&&(I=(I=I.split(""))[0]+I[0]+I[1]+I[1]+I[2]+I[2]),[pc(I.substr(0,2)),pc(I.substr(2,2)),pc(I.substr(4,2))]).join(","),")");var I},hp=function(g,I,D){var N=I.match(g),W=I.replace(g,Ro);return N&&N.forEach(function(ne){return W=W.replace(Ro,D(ne))}),W},xw=function(g){for(var I in g){var D=g[I];typeof D=="string"&&D.match(dp)&&(g[I]=hp(dp,D,bw))}},kw=function(g){var I=g.match(fc),D=I.slice(0,3).map(Math.floor),N=g.match(_w)[0];if(I.length===3)return"".concat(N).concat(D.join(","),")");if(I.length===4)return"".concat(N).concat(D.join(","),",").concat(I[3],")");throw new Error("Invalid rgbChunk: ".concat(g))},fp=function(g){return g.match(fc)},Sw=function(g,I){var D={};return I.forEach(function(N){D[N]=g[N],delete g[N]}),D},Ew=function(g,I){return I.map(function(D){return g[D]})},Ow=function(g,I){return I.forEach(function(D){return g=g.replace(Ro,+D.toFixed(4))}),g},Pw=function(g){for(var I in g._currentState)if(typeof g._currentState[I]=="string")return!0;return!1};function Tw(g){var I=g._currentState;[I,g._originalState,g._targetState].forEach(xw),g._tokenData=function(D){var N,W,ne={};for(var le in D){var ce=D[le];typeof ce=="string"&&(ne[le]={formatString:(N=ce,W=void 0,W=N.match(yw),W?(W.length===1||N.charAt(0).match(gw))&&W.unshift(""):W=["",""],W.join(Ro)),chunkNames:ww(fp(ce),le)})}return ne}(I)}function jw(g){var I=g._currentState,D=g._originalState,N=g._targetState,W=g._easing,ne=g._tokenData;(function(le,ce){var _e=function(be){var Fe=ce[be].chunkNames,qe=le[be];if(typeof qe=="string"){var Ct=qe.split(" "),Ci=Ct[Ct.length-1];Fe.forEach(function(un,cn){return le[un]=Ct[cn]||Ci})}else Fe.forEach(function(un){return le[un]=qe});delete le[be]};for(var Ce in ce)_e(Ce)})(W,ne),[I,D,N].forEach(function(le){return function(ce,_e){var Ce=function(Fe){fp(ce[Fe]).forEach(function(qe,Ct){return ce[_e[Fe].chunkNames[Ct]]=+qe}),delete ce[Fe]};for(var be in _e)Ce(be)}(le,ne)})}function Cw(g){var I=g._currentState,D=g._originalState,N=g._targetState,W=g._easing,ne=g._tokenData;[I,D,N].forEach(function(le){return function(ce,_e){for(var Ce in _e){var be=_e[Ce],Fe=be.chunkNames,qe=be.formatString,Ct=Ow(qe,Ew(Sw(ce,Fe),Fe));ce[Ce]=hp(vw,Ct,kw)}}(le,ne)}),function(le,ce){for(var _e in ce){var Ce=ce[_e].chunkNames,be=le[Ce[0]];le[_e]=typeof be=="string"?Ce.map(function(Fe){var qe=le[Fe];return delete le[Fe],qe}).join(" "):be}}(W,ne)}function pp(g,I){var D=Object.keys(g);if(Object.getOwnPropertySymbols){var N=Object.getOwnPropertySymbols(g);I&&(N=N.filter(function(W){return Object.getOwnPropertyDescriptor(g,W).enumerable})),D.push.apply(D,N)}return D}function Aw(g){for(var I=1;I<arguments.length;I++){var D=arguments[I]!=null?arguments[I]:{};I%2?pp(Object(D),!0).forEach(function(N){Iw(g,N,D[N])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(D)):pp(Object(D)).forEach(function(N){Object.defineProperty(g,N,Object.getOwnPropertyDescriptor(D,N))})}return g}function Iw(g,I,D){return I in g?Object.defineProperty(g,I,{value:D,enumerable:!0,configurable:!0,writable:!0}):g[I]=D,g}var cr=new Gt,mc=Gt.filters,Rw=function(g,I,D,N){var W=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,ne=Aw({},g),le=up(g,N);for(var ce in cr._filters.length=0,cr.set({}),cr._currentState=ne,cr._originalState=g,cr._targetState=I,cr._easing=le,mc)mc[ce].doesApply(cr)&&cr._filters.push(mc[ce]);cr._applyFilter("tweenCreated"),cr._applyFilter("beforeTween");var _e=dc(D,ne,g,I,1,W,le);return cr._applyFilter("afterTween"),_e};function Nw(g){return function(I){if(Array.isArray(I))return gc(I)}(g)||function(I){if(typeof Symbol<"u"&&Symbol.iterator in Object(I))return Array.from(I)}(g)||function(I,D){if(I){if(typeof I=="string")return gc(I,D);var N=Object.prototype.toString.call(I).slice(8,-1);return N==="Object"&&I.constructor&&(N=I.constructor.name),N==="Map"||N==="Set"?Array.from(I):N==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N)?gc(I,D):void 0}}(g)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function gc(g,I){(I==null||I>g.length)&&(I=g.length);for(var D=0,N=new Array(I);D<I;D++)N[D]=g[D];return N}function Lw(g,I){if(!(g instanceof I))throw new TypeError("Cannot call a class as a function")}function $w(g,I){for(var D=0;D<I.length;D++){var N=I[D];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(g,N.key,N)}}function Sr(g,I){var D=I.get(g);if(!D)throw new TypeError("attempted to get private field on non-instance");return D.get?D.get.call(g):D.value}var dr=new WeakMap,Dw=function(){function g(){Lw(this,g),dr.set(this,{writable:!0,value:[]});for(var N=arguments.length,W=new Array(N),ne=0;ne<N;ne++)W[ne]=arguments[ne];W.forEach(this.add.bind(this))}var I,D;return I=g,(D=[{key:"add",value:function(N){return Sr(this,dr).push(N),N}},{key:"remove",value:function(N){var W=Sr(this,dr).indexOf(N);return~W&&Sr(this,dr).splice(W,1),N}},{key:"empty",value:function(){return this.tweenables.map(this.remove.bind(this))}},{key:"isPlaying",value:function(){return Sr(this,dr).some(function(N){return N.isPlaying()})}},{key:"play",value:function(){return Sr(this,dr).forEach(function(N){return N.tween()}),this}},{key:"pause",value:function(){return Sr(this,dr).forEach(function(N){return N.pause()}),this}},{key:"resume",value:function(){return Sr(this,dr).forEach(function(N){return N.resume()}),this}},{key:"stop",value:function(N){return Sr(this,dr).forEach(function(W){return W.stop(N)}),this}},{key:"tweenables",get:function(){return Nw(Sr(this,dr))}},{key:"promises",get:function(){return Sr(this,dr).map(function(N){return N.then()})}}])&&$w(I.prototype,D),g}();function Mw(g,I,D,N,W,ne){var le,ce,_e=0,Ce=0,be=0,Fe=0,qe=0,Ct=0,Ci=function(Pe){return((_e*Pe+Ce)*Pe+be)*Pe},un=function(Pe){return(3*_e*Pe+2*Ce)*Pe+be},cn=function(Pe){return Pe>=0?Pe:0-Pe};return _e=1-(be=3*I)-(Ce=3*(N-I)-be),Fe=1-(Ct=3*D)-(qe=3*(W-D)-Ct),le=g,ce=function(Pe){return 1/(200*Pe)}(ne),function(Pe){return((Fe*Pe+qe)*Pe+Ct)*Pe}(function(Pe,Ai){var dn,Wn,ht,Er,Ur,Jn;for(ht=Pe,Jn=0;Jn<8;Jn++){if(Er=Ci(ht)-Pe,cn(Er)<Ai)return ht;if(Ur=un(ht),cn(Ur)<1e-6)break;ht-=Er/Ur}if((ht=Pe)<(dn=0))return dn;if(ht>(Wn=1))return Wn;for(;dn<Wn;){if(Er=Ci(ht),cn(Er-Pe)<Ai)return ht;Pe>Er?dn=ht:Wn=ht,ht=.5*(Wn-dn)+dn}return ht}(le,ce))}var Uw=function(g,I,D,N,W){var ne=function(le,ce,_e,Ce){return function(be){return Mw(be,le,ce,_e,Ce,1)}}(I,D,N,W);return ne.displayName=g,ne.x1=I,ne.y1=D,ne.x2=N,ne.y2=W,Gt.formulas[g]=ne},zw=function(g){return delete Gt.formulas[g]};Gt.filters.token=o}},e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}return r.d=(n,i)=>{for(var s in i)r.o(i,s)&&!r.o(n,s)&&Object.defineProperty(n,s,{enumerable:!0,get:i[s]})},r.o=(n,i)=>Object.prototype.hasOwnProperty.call(n,i),r.r=n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r(720)})()},nw.exports=Ng();var Lg="Webkit Moz O ms".split(" ");function $g(t,e,r){for(var n=t.style,i=0;i<Lg.length;++i)n[Lg[i]+iw(e)]=r;n[e]=r}function iw(t){return t.charAt(0).toUpperCase()+t.slice(1)}function al(t){return!function(e){return Object.prototype.toString.call(e)==="[object Array]"}(t)&&typeof t=="object"&&!!t}function Dg(t,e){for(var r in t)t.hasOwnProperty(r)&&e(t[r],r)}var ji={extend:function t(e,r,n){for(var i in e=e||{},n=n||!1,r=r||{})if(r.hasOwnProperty(i)){var s=e[i],a=r[i];n&&al(s)&&al(a)?e[i]=t(s,a,n):e[i]=a}return e},render:function(t,e){var r=t;for(var n in e)if(e.hasOwnProperty(n)){var i=e[n],s=new RegExp("\\{"+n+"\\}","g");r=r.replace(s,i)}return r},setStyle:$g,setStyles:function(t,e){Dg(e,function(r,n){r!=null&&(al(r)&&r.prefix===!0?$g(t,n,r.value):t.style[n]=r)})},capitalize:iw,isString:function(t){return typeof t=="string"||t instanceof String},isFunction:function(t){return typeof t=="function"},isObject:al,forEachObject:Dg,floatEquals:function(t,e){return Math.abs(t-e)<.001},removeChildren:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)}},yh=nw.exports,Tr=ji,QT=yh.Tweenable,Mg={easeIn:"easeInCubic",easeOut:"easeOutCubic",easeInOut:"easeInOutCubic"},Qt=function t(e,r){if(!(this instanceof t))throw new Error("Constructor was called without new keyword");var n;r=Tr.extend({delay:0,duration:800,easing:"linear",from:{},to:{},step:function(){}},r),n=Tr.isString(e)?document.querySelector(e):e,this.path=n,this._opts=r,this._tweenable=null;var i=this.path.getTotalLength();this.path.style.strokeDasharray=i+" "+i,this.set(0)};Qt.prototype.value=function(){var t=this._getComputedDashOffset(),e=this.path.getTotalLength();return parseFloat((1-t/e).toFixed(6),10)},Qt.prototype.set=function(t){this.stop(),this.path.style.strokeDashoffset=this._progressToOffset(t);var e=this._opts.step;if(Tr.isFunction(e)){var r=this._easing(this._opts.easing);e(this._calculateTo(t,r),this._opts.shape||this,this._opts.attachment)}},Qt.prototype.stop=function(){this._stopTween(),this.path.style.strokeDashoffset=this._getComputedDashOffset()},Qt.prototype.animate=function(t,e,r){e=e||{},Tr.isFunction(e)&&(r=e,e={});var n=Tr.extend({},e),i=Tr.extend({},this._opts);e=Tr.extend(i,e);var s=this._easing(e.easing),a=this._resolveFromAndTo(t,s,n);this.stop(),this.path.getBoundingClientRect();var o=this._getComputedDashOffset(),l=this._progressToOffset(t),u=this;this._tweenable=new QT,this._tweenable.tween({from:Tr.extend({offset:o},a.from),to:Tr.extend({offset:l},a.to),duration:e.duration,delay:e.delay,easing:s,step:function(c){u.path.style.strokeDashoffset=c.offset;var d=e.shape||u;e.step(c,d,e.attachment)}}).then(function(c){Tr.isFunction(r)&&r()})},Qt.prototype._getComputedDashOffset=function(){var t=window.getComputedStyle(this.path,null);return parseFloat(t.getPropertyValue("stroke-dashoffset"),10)},Qt.prototype._progressToOffset=function(t){var e=this.path.getTotalLength();return e-t*e},Qt.prototype._resolveFromAndTo=function(t,e,r){return r.from&&r.to?{from:r.from,to:r.to}:{from:this._calculateFrom(e),to:this._calculateTo(t,e)}},Qt.prototype._calculateFrom=function(t){return yh.interpolate(this._opts.from,this._opts.to,this.value(),t)},Qt.prototype._calculateTo=function(t,e){return yh.interpolate(this._opts.from,this._opts.to,t,e)},Qt.prototype._stopTween=function(){this._tweenable!==null&&(this._tweenable.stop(),this._tweenable=null)},Qt.prototype._easing=function(t){return Mg.hasOwnProperty(t)?Mg[t]:t};var sw=Qt,XT=sw,zt=ji,yn="Object is destroyed",We=function t(e,r){if(!(this instanceof t))throw new Error("Constructor was called without new keyword");if(arguments.length!==0){this._opts=zt.extend({color:"#555",strokeWidth:1,trailColor:null,trailWidth:null,fill:null,text:{style:{color:null,position:"absolute",left:"50%",top:"50%",padding:0,margin:0,transform:{prefix:!0,value:"translate(-50%, -50%)"}},autoStyleContainer:!0,alignToBottom:!0,value:null,className:"progressbar-text"},svgStyle:{display:"block",width:"100%"},warnings:!1},r,!0),zt.isObject(r)&&r.svgStyle!==void 0&&(this._opts.svgStyle=r.svgStyle),zt.isObject(r)&&zt.isObject(r.text)&&r.text.style!==void 0&&(this._opts.text.style=r.text.style);var n,i=this._createSvgView(this._opts);if(!(n=zt.isString(e)?document.querySelector(e):e))throw new Error("Container does not exist: "+e);this._container=n,this._container.appendChild(i.svg),this._opts.warnings&&this._warnContainerAspectRatio(this._container),this._opts.svgStyle&&zt.setStyles(i.svg,this._opts.svgStyle),this.svg=i.svg,this.path=i.path,this.trail=i.trail,this.text=null;var s=zt.extend({attachment:void 0,shape:this},this._opts);this._progressPath=new XT(i.path,s),zt.isObject(this._opts.text)&&this._opts.text.value!==null&&this.setText(this._opts.text.value)}};We.prototype.animate=function(t,e,r){if(this._progressPath===null)throw new Error(yn);this._progressPath.animate(t,e,r)},We.prototype.stop=function(){if(this._progressPath===null)throw new Error(yn);this._progressPath!==void 0&&this._progressPath.stop()},We.prototype.pause=function(){if(this._progressPath===null)throw new Error(yn);this._progressPath!==void 0&&this._progressPath._tweenable&&this._progressPath._tweenable.pause()},We.prototype.resume=function(){if(this._progressPath===null)throw new Error(yn);this._progressPath!==void 0&&this._progressPath._tweenable&&this._progressPath._tweenable.resume()},We.prototype.destroy=function(){if(this._progressPath===null)throw new Error(yn);this.stop(),this.svg.parentNode.removeChild(this.svg),this.svg=null,this.path=null,this.trail=null,this._progressPath=null,this.text!==null&&(this.text.parentNode.removeChild(this.text),this.text=null)},We.prototype.set=function(t){if(this._progressPath===null)throw new Error(yn);this._progressPath.set(t)},We.prototype.value=function(){if(this._progressPath===null)throw new Error(yn);return this._progressPath===void 0?0:this._progressPath.value()},We.prototype.setText=function(t){if(this._progressPath===null)throw new Error(yn);this.text===null&&(this.text=this._createTextContainer(this._opts,this._container),this._container.appendChild(this.text)),zt.isObject(t)?(zt.removeChildren(this.text),this.text.appendChild(t)):this.text.innerHTML=t},We.prototype._createSvgView=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");this._initializeSvg(e,t);var r=null;(t.trailColor||t.trailWidth)&&(r=this._createTrail(t),e.appendChild(r));var n=this._createPath(t);return e.appendChild(n),{svg:e,path:n,trail:r}},We.prototype._initializeSvg=function(t,e){t.setAttribute("viewBox","0 0 100 100")},We.prototype._createPath=function(t){var e=this._pathString(t);return this._createPathElement(e,t)},We.prototype._createTrail=function(t){var e=this._trailString(t),r=zt.extend({},t);return r.trailColor||(r.trailColor="#eee"),r.trailWidth||(r.trailWidth=r.strokeWidth),r.color=r.trailColor,r.strokeWidth=r.trailWidth,r.fill=null,this._createPathElement(e,r)},We.prototype._createPathElement=function(t,e){var r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("d",t),r.setAttribute("stroke",e.color),r.setAttribute("stroke-width",e.strokeWidth),e.fill?r.setAttribute("fill",e.fill):r.setAttribute("fill-opacity","0"),r},We.prototype._createTextContainer=function(t,e){var r=document.createElement("div");r.className=t.text.className;var n=t.text.style;return n&&(t.text.autoStyleContainer&&(e.style.position="relative"),zt.setStyles(r,n),n.color||(r.style.color=t.color)),this._initializeTextContainer(t,e,r),r},We.prototype._initializeTextContainer=function(t,e,r){},We.prototype._pathString=function(t){throw new Error("Override this function for each progress bar")},We.prototype._trailString=function(t){throw new Error("Override this function for each progress bar")},We.prototype._warnContainerAspectRatio=function(t){if(this.containerAspectRatio){var e=window.getComputedStyle(t,null),r=parseFloat(e.getPropertyValue("width"),10),n=parseFloat(e.getPropertyValue("height"),10);zt.floatEquals(this.containerAspectRatio,r/n)||(console.warn("Incorrect aspect ratio of container","#"+t.id,"detected:",e.getPropertyValue("width")+"(width)","/",e.getPropertyValue("height")+"(height)","=",r/n),console.warn("Aspect ratio of should be",this.containerAspectRatio))}};var Co=We,aw=Co,ej=ji,Bi=function(t,e){this._pathTemplate="M 0,{center} L 100,{center}",aw.apply(this,arguments)};(Bi.prototype=new aw).constructor=Bi,Bi.prototype._initializeSvg=function(t,e){t.setAttribute("viewBox","0 0 100 "+e.strokeWidth),t.setAttribute("preserveAspectRatio","none")},Bi.prototype._pathString=function(t){return ej.render(this._pathTemplate,{center:t.strokeWidth/2})},Bi.prototype._trailString=function(t){return this._pathString(t)};var tj=Bi,ow=Co,rj=ji,va=function(t,e){this._pathTemplate="M 50,50 m 0,-{radius} a {radius},{radius} 0 1 1 0,{2radius} a {radius},{radius} 0 1 1 0,-{2radius}",this.containerAspectRatio=1,ow.apply(this,arguments)};(va.prototype=new ow).constructor=va,va.prototype._pathString=function(t){var e=t.strokeWidth;t.trailWidth&&t.trailWidth>t.strokeWidth&&(e=t.trailWidth);var r=50-e/2;return rj.render(this._pathTemplate,{radius:r,"2radius":2*r})},va.prototype._trailString=function(t){return this._pathString(t)};var lw=va,uw=Co,Ug=lw,zg=ji,ni=function(t,e){this._pathTemplate="M 50,50 m -{radius},0 a {radius},{radius} 0 1 1 {2radius},0",this.containerAspectRatio=2,uw.apply(this,arguments)};(ni.prototype=new uw).constructor=ni,ni.prototype._initializeSvg=function(t,e){t.setAttribute("viewBox","0 0 100 50")},ni.prototype._initializeTextContainer=function(t,e,r){t.text.style&&(r.style.top="auto",r.style.bottom="0",t.text.alignToBottom?zg.setStyle(r,"transform","translate(-50%, 0)"):zg.setStyle(r,"transform","translate(-50%, 50%)"))},ni.prototype._pathString=Ug.prototype._pathString,ni.prototype._trailString=Ug.prototype._trailString;var nj=ni,cw=Co,Fg=ji,_a=function(t,e){this._pathTemplate="M 0,{halfOfStrokeWidth} L {width},{halfOfStrokeWidth} L {width},{width} L {halfOfStrokeWidth},{width} L {halfOfStrokeWidth},{strokeWidth}",this._trailTemplate="M {startMargin},{halfOfStrokeWidth} L {width},{halfOfStrokeWidth} L {width},{width} L {halfOfStrokeWidth},{width} L {halfOfStrokeWidth},{halfOfStrokeWidth}",cw.apply(this,arguments)};(_a.prototype=new cw).constructor=_a,_a.prototype._pathString=function(t){var e=100-t.strokeWidth/2;return Fg.render(this._pathTemplate,{width:e,strokeWidth:t.strokeWidth,halfOfStrokeWidth:t.strokeWidth/2})},_a.prototype._trailString=function(t){var e=100-t.strokeWidth/2;return Fg.render(this._trailTemplate,{width:e,strokeWidth:t.strokeWidth,halfOfStrokeWidth:t.strokeWidth/2,startMargin:t.strokeWidth/2-t.trailWidth/2})};var ad,od,ij={Line:tj,Circle:lw,SemiCircle:nj,Square:_a,Path:sw,Shape:Co,utils:ji},ip=function(t){var e=t.animate,r=t.progressOptions,n=t.className,i=Ne.useMemo(function(){return ad=document.createElement("div"),new ij.Circle(ad,r)},[]),s=Ne.useCallback(function(a){a&&a.appendChild(ad)},[]);return Ne.useEffect(function(){i.animate(e)},[e,i]),T.jsx("div",{className:n,ref:s})},jr=function(){return jr=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},jr.apply(this,arguments)},sj=function(t){var e,r,n,i,s,a,o,l,u,c,d,h,b,v={strokeWidth:2.3,color:"#efe",trailColor:"#aaa",trailWidth:1,step:function(x,p){var m,f;p.path.setAttribute("trail",(m=x==null?void 0:x.state)===null||m===void 0?void 0:m.color),p.path.setAttribute("trailwidth-width",(f=x==null?void 0:x.state)===null||f===void 0?void 0:f.width);var S=Math.round(100*p.value());S===0?p.setText(""):p.setText(S)}},P=((e=t==null?void 0:t.data)===null||e===void 0?void 0:e.status)&&((r=t==null?void 0:t.data)===null||r===void 0?void 0:r.status.error)===!0;return T.jsxs("div",jr({className:"rce-mbox-photo"},{children:[T.jsxs("div",jr({className:"rce-mbox-photo--img",style:jr({},((n=t==null?void 0:t.data)===null||n===void 0?void 0:n.width)&&((i=t==null?void 0:t.data)===null||i===void 0?void 0:i.height)&&{width:t.data.width,height:t.data.height})},{children:[T.jsx("img",{src:(s=t==null?void 0:t.data)===null||s===void 0?void 0:s.uri,alt:(a=t==null?void 0:t.data)===null||a===void 0?void 0:a.alt,onClick:t.onOpen,onLoad:t.onLoad,onError:t.onPhotoError}),P&&T.jsx("div",jr({className:"rce-mbox-photo--img__block"},{children:T.jsx("span",jr({className:"rce-mbox-photo--img__block-item rce-mbox-photo--error"},{children:T.jsx(np,{})}))})),!P&&((o=t==null?void 0:t.data)===null||o===void 0?void 0:o.status)&&!(!((u=(l=t==null?void 0:t.data)===null||l===void 0?void 0:l.status)===null||u===void 0)&&u.download)&&T.jsxs("div",jr({className:"rce-mbox-photo--img__block"},{children:[!(!((c=t==null?void 0:t.data)===null||c===void 0)&&c.status.click)&&T.jsx("button",jr({onClick:t.onDownload,className:"rce-mbox-photo--img__block-item rce-mbox-photo--download"},{children:T.jsx(rp,{})})),typeof((d=t==null?void 0:t.data)===null||d===void 0?void 0:d.status.loading)=="number"&&((h=t==null?void 0:t.data)===null||h===void 0?void 0:h.status.loading)!==0&&T.jsx(ip,{animate:(b=t==null?void 0:t.data)===null||b===void 0?void 0:b.status.loading,progressOptions:v,className:"rce-mbox-photo--img__block-item"})]}))]})),(t==null?void 0:t.text)&&T.jsx("div",jr({className:"rce-mbox-text"},{children:t.text}))]}))},Br=function(){return Br=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Br.apply(this,arguments)},aj=function(t){var e,r,n,i,s,a,o,l,u,c={strokeWidth:5,color:"#333",trailColor:"#aaa",trailWidth:5,step:function(h,b){b.path.setAttribute("trail",h.color),b.path.setAttribute("trailwidth-width",h.width);var v=Math.round(100*b.value());v===0?b.setText(""):b.setText(v)}},d=((e=t==null?void 0:t.data)===null||e===void 0?void 0:e.status)&&((r=t==null?void 0:t.data)===null||r===void 0?void 0:r.status.error)===!0;return T.jsx("div",Br({className:"rce-mbox-file"},{children:T.jsxs("button",Br({onClick:function(h){var b,v,P;!((b=t==null?void 0:t.data)===null||b===void 0)&&b.status&&(!(!((v=t==null?void 0:t.data)===null||v===void 0)&&v.status.download)&&t.onDownload instanceof Function?t.onDownload(h):!((P=t==null?void 0:t.data)===null||P===void 0)&&P.status.download&&t.onOpen instanceof Function&&t.onOpen(h))}},{children:[T.jsxs("div",Br({className:"rce-mbox-file--icon"},{children:[T.jsx(GT,{color:"#aaa"}),T.jsx("div",Br({className:"rce-mbox-file--size"},{children:t==null?void 0:t.data.size}))]})),T.jsx("div",Br({className:"rce-mbox-file--text"},{children:t.text})),T.jsxs("div",Br({className:"rce-mbox-file--buttons"},{children:[d&&T.jsx("span",Br({className:"rce-error-button"},{children:T.jsx(np,{color:"#ff3d3d"})})),!d&&((n=t==null?void 0:t.data)===null||n===void 0?void 0:n.status)&&!(!((i=t==null?void 0:t.data)===null||i===void 0)&&i.status.download)&&!(!((s=t==null?void 0:t.data)===null||s===void 0)&&s.status.click)&&T.jsx(rp,{color:"#aaa"}),!d&&((a=t==null?void 0:t.data)===null||a===void 0?void 0:a.status)&&typeof((o=t==null?void 0:t.data)===null||o===void 0?void 0:o.status.loading)=="number"&&((l=t==null?void 0:t.data)===null||l===void 0?void 0:l.status.loading)!==0&&T.jsx(ip,{animate:(u=t==null?void 0:t.data)===null||u===void 0?void 0:u.status.loading,className:"rce-mbox-file--loading",progressOptions:c})]}))]}))}))},dw={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/od=dw,function(){var t={}.hasOwnProperty;function e(){for(var r=[],n=0;n<arguments.length;n++){var i=arguments[n];if(i){var s=typeof i;if(s==="string"||s==="number")r.push(i);else if(Array.isArray(i)){if(i.length){var a=e.apply(null,i);a&&r.push(a)}}else if(s==="object"){if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]")){r.push(i.toString());continue}for(var o in i)t.call(i,o)&&i[o]&&r.push(o)}}}return r.join(" ")}od.exports?(e.default=e,od.exports=e):window.classNames=e}();var xe=dw.exports,Na=function(){return Na=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Na.apply(this,arguments)},oj=function(t){return T.jsx("div",Na({className:xe("rce-container-smsg",t.className)},{children:T.jsx("div",Na({className:"rce-smsg"},{children:T.jsx("div",Na({className:"rce-smsg-text"},{children:t.text}))}))}))},La=function(){return La=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},La.apply(this,arguments)},lj=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r},uj=function(t){var e,r=t.markerColor,n=r===void 0?"red":r,i=t.target,s=i===void 0?"_blank":i,a=t.zoom,o=a===void 0?"14":a,l=lj(t,["markerColor","target","zoom"]),u=function(c){return c.replace(/LATITUDE/g,l==null?void 0:l.data.latitude).replace(/LONGITUDE/g,l==null?void 0:l.data.longitude).replace("MARKER_COLOR",n).replace("ZOOM",o).replace("KEY",l.apiKey)};return T.jsxs("div",La({className:"rce-container-lmsg"},{children:[T.jsx("a",La({onClick:l.onOpen,target:s,href:l.href||l.src||u(l.data.mapURL||"https://www.google.com/maps/search/?api=1&query=LATITUDE,LONGITUDE&zoom=ZOOM"),className:(e=xe("rce-mbox-location",l.className),l.text&&(e=xe(e,"rce-mbox-location-has-text")),e)},{children:T.jsx("img",{onError:l.onError,className:"rce-mbox-location-img",src:l.src||u(l.data.staticURL||"https://maps.googleapis.com/maps/api/staticmap?markers=color:MARKER_COLOR|LATITUDE,LONGITUDE&zoom=ZOOM&size=270x200&scale=2&key=KEY")})})),l.text&&T.jsx("div",La({className:"rce-mbox-text rce-mbox-location-text"},{children:l.text}))]}))},vh=function(){return vh=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},vh.apply(this,arguments)},cj=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r},dj=function(t){var e=t.width,r=e===void 0?300:e,n=t.height,i=n===void 0?380:n,s=cj(t,["width","height"]);return s.uri?T.jsx("div",vh({className:"rce-mbox-spotify"},{children:T.jsx("iframe",{src:"https://open.spotify.com/embed?"+function(){var a=[];for(var o in s){var l=encodeURIComponent(o),u=encodeURIComponent(s[o]);a.push(l+"="+u)}return a.join("&")}(),width:r,height:i,frameBorder:"0",allowTransparency:!0})})):null},Vr=function(){return Vr=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Vr.apply(this,arguments)},hj=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r},fj=function(t){var e=t.onClick,r=hj(t,["onClick"]);return T.jsxs("div",Vr({className:xe("rce-mbox-reply",{"rce-mbox-reply-border":!!r.titleColor}),style:Vr({},r.titleColor&&{borderColor:r.titleColor}),onClick:e},{children:[T.jsxs("div",Vr({className:"rce-mbox-reply-left"},{children:[T.jsx("div",Vr({style:Vr({},r.titleColor&&{color:r.titleColor}),className:"rce-mbox-reply-owner"},{children:r.title||"Unknown"})),T.jsx("div",Vr({className:"rce-mbox-reply-message"},{children:r.message||"..."}))]})),r.photoURL&&T.jsx("div",Vr({className:"rce-mbox-reply-right"},{children:T.jsx("img",{src:r.photoURL,alt:""})}))]}))};function pj(t){return Xe({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"}}]})(t)}function mj(t){return Xe({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M317.5 210.3c1.7-1.8 1.8-4.7 0-6.5l-19.8-21c-.8-.9-2-1.4-3.2-1.4-1.2 0-2.4.5-3.2 1.4l-66.5 69.1 26.4 27.1 66.3-68.7zM123.8 253.1c-.9-.9-2-1.4-3.2-1.4-1.2 0-2.3.5-3.2 1.4l-20.1 20.7c-1.8 1.8-1.8 4.8 0 6.6l63.2 65c4 4.2 9 6.6 13.2 6.6 6 0 11.1-4.5 13.1-6.4l.1-.1 13.4-13.8-76.5-78.6z"}},{tag:"path",attr:{d:"M414.7 182.4l-19.8-21c-.8-.9-2-1.4-3.2-1.4-1.2 0-2.4.5-3.2 1.4L250.7 304.1l-50.1-51.6c-.9-.9-2-1.4-3.2-1.4-1.2 0-2.3.5-3.2 1.4l-20.1 20.7c-1.8 1.8-1.8 4.8 0 6.6l63.2 65c4 4.2 9 6.6 13.2 6.6 6 0 11.1-4.5 13.1-6.4l.1-.1 151-156.1c1.7-1.7 1.7-4.6 0-6.4z"}}]})(t)}function gj(t){return Xe({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M391.553 64H57.607C53.131 64 48 67.745 48 72.159v214.217c0 4.413 5.131 8.624 9.607 8.624H115v88.894L205.128 295h186.425c4.477 0 7.447-4.211 7.447-8.624V72.159c0-4.414-2.971-8.159-7.447-8.159z"}},{tag:"path",attr:{d:"M456.396 127H424v166.57c0 15.987-6.915 26.43-25.152 26.43H218.096l-38.905 39h129.688L399 448v-89h57.396c4.478 0 7.604-4.262 7.604-8.682V136.103c0-4.414-3.126-9.103-7.604-9.103z"}}]})(t)}function yj(t){return Xe({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}}]})(t)}function vj(t){return Xe({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"}}]})(t)}function _j(t){return Xe({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"}}]})(t)}function wj(t){return Xe({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9A7.902 7.902 0 014 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1A7.902 7.902 0 0120 12c0 4.42-3.58 8-8 8z"}}]})(t)}function bj(t){return Xe({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}},{tag:"path",attr:{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"}}]})(t)}function xj(t){return Xe({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}}]})(t)}function kj(t){return Xe({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}}]})(t)}var Sj=["second","minute","hour","day","week","month","year"],Ej=["","","","","","",""],_h={},Bg=function(t,e){_h[t]=e},ld=[60,60,24,7,365/7/12,12];function Vg(t){return t instanceof Date?t:!isNaN(t)||/^\d+$/.test(t)?new Date(parseInt(t)):(t=(t||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(t))}var $a=function(t,e,r){var n=function(i,s){return(+(s?Vg(s):new Date)-+Vg(i))/1e3}(t,r&&r.relativeDate);return function(i,s){for(var a=i<0?1:0,o=i=Math.abs(i),l=0;i>=ld[l]&&l<ld.length;l++)i/=ld[l];return(i=Math.floor(i))>((l*=2)==0?9:1)&&(l+=1),s(i,l,o)[a].replace("%s",i.toString())}(n,function(i){return _h[i]||_h.en_US}(e))};Bg("en_US",function(t,e){if(e===0)return["just now","right now"];var r=Sj[Math.floor(e/2)];return t>1&&(r+="s"),[t+" "+r+" ago","in "+t+" "+r]}),Bg("zh_CN",function(t,e){if(e===0)return["",""];var r=Ej[~~(e/2)];return[t+" "+r+"",t+" "+r+""]});var Da=function(){return Da=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Da.apply(this,arguments)},Oj=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r},bl=function(t){var e=t.type,r=e===void 0?"default":e,n=t.size,i=n===void 0?"default":n,s=t.lazyLoadingImage,a=s===void 0?void 0:s,o=Oj(t,["type","size","lazyLoadingImage"]),l=[],u=!1,c=o.src,d=!1;Ne.useEffect(function(){a&&(d=!0,h(c)?d=!1:(c=a,u||b(o.src)))},[]);var h=function(v){return l.indexOf(v)!==-1},b=function(v){u=!0;var P=function(){l.push(v),u=!1},x=document.createElement("img");x.src=v,x.onload=P,x.onerror=P};return T.jsxs("div",Da({className:xe("rce-avatar-container",r,i,o.className)},{children:[o.letterItem?T.jsx("div",Da({className:"rce-avatar-letter-background",style:{backgroundColor:function(v){for(var P=0,x=0;x<v.length;x++)P=v.charCodeAt(x)+((P<<5)-P);var p="#";for(x=0;x<3;x++){var m=P>>8*x&255;p+=("00"+(m=m%150+50).toString(16)).substr(-2)}return p}(o.letterItem.id)}},{children:T.jsx("span",Da({className:"rce-avatar-letter"},{children:o.letterItem.letter}))})):T.jsx("img",{alt:o.alt,src:c,onError:o.onError,className:xe("rce-avatar",{"rce-avatar-lazy":d})}),o.sideElement]}))},Ma=function(){return Ma=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ma.apply(this,arguments)},Pj=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r},Tj=function(t){var e=t.disabled,r=e!==void 0&&e,n=t.backgroundColor,i=n===void 0?"#3979aa":n,s=t.color,a=s===void 0?"white":s,o=Pj(t,["disabled","backgroundColor","color"]);return T.jsx("button",Ma({ref:o.buttonRef,title:o.title,className:xe("rce-button",o.type,o.className),style:{backgroundColor:i,color:a,borderColor:i},disabled:r,onClick:o.onClick},{children:o.icon?T.jsxs("span",Ma({className:"rce-button-icon--container"},{children:[(o.icon.float==="right"||!o.icon.float)&&T.jsx("span",{children:o.text}),T.jsx("span",Ma({style:{float:o.icon.float,fontSize:o.icon.size||12},className:"rce-button-icon"},{children:o.icon.component})),o.icon.float==="left"&&T.jsx("span",{children:o.text})]})):T.jsx("span",{children:o.text})}))},Hr=function(){return Hr=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Hr.apply(this,arguments)},jj=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r},Cj=function(t){var e,r=t.animationPosition,n=r===void 0?"nortwest":r,i=t.animationType,s=i===void 0?"default":i,a=jj(t,["animationPosition","animationType"]),o=Ne.useState(void 0),l=o[0],u=o[1];return T.jsxs("div",Hr({className:xe("rce-dropdown-container",a.className),onBlur:function(){l===!0&&u(!1)}},{children:[T.jsx(Tj,Hr({},a.buttonProps,{onClick:function(){return u(!l)}})),T.jsx("div",Hr({className:xe("rce-dropdown",s,"rce-dropdown-open__"+n,{"dropdown-hide":l===!1},{"dropdown-show":l===!0})},{children:T.jsxs("ul",{children:[a.title&&T.jsx("span",Hr({className:"rce-dropdown-title"},{children:a.title})),(e=a.items)===null||e===void 0?void 0:e.map(function(c,d){return T.jsx("li",Hr({onMouseDown:function(h){return a.onSelect(d)}},{children:c instanceof Object?c.icon?T.jsxs("span",Hr({className:"rce-button-icon--container"},{children:[(c.icon.float==="right"||!c.icon.float)&&T.jsx("a",{children:c.text}),T.jsx("span",Hr({style:{float:c.icon.float,color:c.icon.color,fontSize:c.icon.size||12},className:xe("rce-button-icon",c.icon.className)},{children:c.icon.component})),c.icon.float==="left"&&T.jsx("a",{children:c.text})]})):T.jsx("a",{children:c.text}):T.jsx("a",{children:c})}),d)})]})}))]}))},de=function(){return de=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},de.apply(this,arguments)},Aj=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r},Ij=function(t){var e=t.date,r=t.dateString,n=t.title,i=t.subject,s=t.collapseTitle,a=t.moreItems,o=t.participants,l=t.dataSource,u=t.onClick,c=t.onMeetingTitleClick,d=t.onMeetingVideoLinkClick,h=t.onMeetingMoreSelect,b=Aj(t,["date","dateString","title","subject","collapseTitle","moreItems","participants","dataSource","onClick","onMeetingTitleClick","onMeetingVideoLinkClick","onMeetingMoreSelect"]),v=Ne.useState(!1),P=v[0],x=v[1],p=b.participantsLimit,m=r||e&&$a(e);return T.jsx("div",de({className:"rce-mbox-mtmg"},{children:T.jsxs("div",de({className:"rce-mtmg"},{children:[T.jsx("div",de({className:"rce-mtmg-subject"},{children:i||"Unknown Meeting"})),T.jsxs("div",de({className:"rce-mtmg-body",onClick:u},{children:[T.jsxs("div",de({className:"rce-mtmg-item"},{children:[T.jsx(KT,{}),T.jsxs("div",de({className:"rce-mtmg-content"},{children:[T.jsx("span",de({className:"rce-mtmg-title"},{children:n})),T.jsx("span",de({className:"rce-mtmg-date"},{children:m}))]}))]})),h&&a&&a.length>0&&T.jsx("div",{children:T.jsx(Cj,{animationType:"bottom",animationPosition:"norteast",buttonProps:{className:"rce-mtmg-right-icon",icon:{component:T.jsx(kj,{}),size:24}},items:a,onSelect:h})})]})),T.jsx("div",de({className:"rce-mtmg-body-bottom",onClick:function(){x(!P)}},{children:T.jsxs("div",P===!0?de({className:"rce-mtmg-bottom--tptitle"},{children:[T.jsx(qT,{}),T.jsx("span",{children:s})]}):de({className:"rce-mtmg-body-bottom--bttitle"},{children:[T.jsx(WT,{}),T.jsxs("span",{children:[o==null?void 0:o.slice(0,p).map(function(f){return f.title||"Unknow"}).join(", "),o&&p&&o.length>p&&", +".concat(o.length-p)]})]}))})),T.jsx("div",de({className:xe("rce-mtmg-toogleContent",{"rce-mtmg-toogleContent--click":P===!0})},{children:l&&l.map(function(f,S){return T.jsxs("div",{children:[!f.event&&T.jsxs("div",de({className:"rce-mitem"},{children:[T.jsx("div",de({className:xe("rce-mitem avatar",{"rce-mitem no-avatar":!f.avatar})},{children:f.avatar?T.jsx(bl,{src:f.avatar}):T.jsx(gj,{})})),T.jsxs("div",de({className:"rce-mitem-body"},{children:[T.jsxs("div",de({className:"rce-mitem-body--top"},{children:[T.jsx("div",de({className:"rce-mitem-body--top-title",onClick:function(A){return k=f,j=S,_=A,void(c instanceof Function&&c(k,j,_));var k,j,_}},{children:f.title})),T.jsx("div",de({className:"rce-mitem-body--top-time"},{children:f.dateString?f.dateString:f.date&&f.date&&$a(f.date)}))]})),T.jsx("div",de({className:"rce-mitem-body--bottom"},{children:T.jsx("div",de({className:"rce-mitem-body--bottom-title"},{children:f.message}))}))]}))]})),f.event&&T.jsx("div",de({className:"rce-mitem-event"},{children:T.jsxs("div",de({className:"rce-mitem-bottom-body"},{children:[T.jsx("div",de({className:"rce-mitem-body avatar"},{children:T.jsx(pj,{})})),T.jsxs("div",de({className:"rce-mitem-bottom-body-top"},{children:[f.event.title,T.jsx("div",de({className:"rce-mitem-body--top-time"},{children:f.dateString?f.dateString:f.date&&$a(f.date)})),T.jsx("div",de({className:"rce-mitem-avatar-content"},{children:T.jsxs("div",de({className:"rce-mitem-avatar"},{children:[f.event.avatars&&f.event.avatars.slice(0,f.event.avatarsLimit).map(function(A,k){return T.jsx(bl,{src:A.src},k)}),f.event.avatars&&f.event.avatarsLimit&&f.event.avatars.length>f.event.avatarsLimit&&T.jsx("div",de({className:"rce-mitem-length rce-mitem-tooltip",tooltip:f.event.avatars.slice(f.event.avatarsLimit,f.event.avatars.length).map(function(A){return A.title}).join(",").toString()},{children:T.jsx("span",de({className:"rce-mitem-tooltip-text"},{children:"+"+(f.event.avatars.length-f.event.avatarsLimit)}))}))]}))})),f.record&&T.jsx("div",de({className:"rce-mtmg-call-record"},{children:T.jsxs("div",de({className:"rce-mtmg-call-body"},{children:[T.jsxs("div",de({onClick:function(A){return k=f,j=S,_=A,void(d instanceof Function&&d(k,j,_));var k,j,_},className:"rce-mtmg-call-avatars"},{children:[T.jsx(bl,{className:"rce-mtmg-call-avatars",src:f.record.avatar}),T.jsx("div",de({className:"rce-mtmg-record-time"},{children:f.record.time}))]})),T.jsxs("div",de({className:"rce-mtmg-call-body-title"},{children:[T.jsx("span",{children:f.record.title}),T.jsx("div",de({className:"rce-mtmg-call-body-bottom"},{children:f.record.savedBy}))]}))]}))}))]}))]}))}))]},S)})}))]}))}))},pr=function(){return pr=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},pr.apply(this,arguments)},Rj=function(t){var e,r,n,i,s,a={strokeWidth:2.3,color:"#efe",trailColor:"#aaa",trailWidth:1,step:function(u,c){var d,h;c.path.setAttribute("trail",u.state!==void 0&&((d=u==null?void 0:u.state)===null||d===void 0?void 0:d.color)||""),c.path.setAttribute("trailwidth-width",u.state!==void 0&&((h=u==null?void 0:u.state)===null||h===void 0?void 0:h.width)||"");var b=Math.round(100*(c==null?void 0:c.value()));b===0?c==null||c.setText(""):c==null||c.setText(b)}},o=((e=t==null?void 0:t.data)===null||e===void 0?void 0:e.status)&&((r=t==null?void 0:t.data)===null||r===void 0?void 0:r.status.error)===!0,l=((n=t==null?void 0:t.data)===null||n===void 0?void 0:n.status)&&((i=t==null?void 0:t.data)===null||i===void 0?void 0:i.status.download);return T.jsxs("div",pr({className:xe("rce-mbox-video",{"padding-time":!(t!=null&&t.text)})},{children:[T.jsxs("div",pr({className:"rce-mbox-video--video",style:pr({},(t==null?void 0:t.data.width)&&(t==null?void 0:t.data.height)&&{width:t.data.width,height:t.data.height})},{children:[!l&&T.jsx("img",{src:t==null?void 0:t.data.uri,alt:t==null?void 0:t.data.alt,onClick:t.onOpen,onLoad:t.onLoad,onError:t.onPhotoError}),l&&T.jsxs("video",pr({controls:!0,controlsList:t.controlsList},{children:[T.jsx("source",{src:t==null?void 0:t.data.videoURL,type:"video/mp4"}),"Your browser does not support HTML video."]})),o&&T.jsx("div",pr({className:"rce-mbox-video--video__block"},{children:T.jsx("span",pr({className:"rce-mbox-video--video__block-item rce-mbox-video--error"},{children:T.jsx(np,{})}))})),!o&&((s=t==null?void 0:t.data)===null||s===void 0?void 0:s.status)&&!l&&T.jsxs("div",pr({className:"rce-mbox-video--video__block"},{children:[!t.data.status.click&&T.jsx("button",pr({onClick:t.onDownload,className:"rce-mbox-video--video__block-item rce-mbox-video--download"},{children:T.jsx(rp,{})})),typeof t.data.status.loading=="number"&&t.data.status.loading!==0&&T.jsx(ip,{animate:t.data.status.loading,className:"rce-mbox-video--video__block-item",progressOptions:a})]}))]})),(t==null?void 0:t.text)&&T.jsx("div",pr({className:"rce-mbox-text"},{children:t.text}))]}))},Ua=function(){return Ua=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ua.apply(this,arguments)},Nj=function(t){var e=t.data.controlsList;return T.jsxs("div",Ua({className:"rce-mbox-audio",style:t.customStyle},{children:[T.jsxs("audio",Ua({},t.audioProps,{controls:!0,controlsList:e||"nodownload"},{children:[T.jsx("source",{src:t.data.audioURL,type:t.data.audioType||"audio/mp3"}),"Your browser does not support the audio element."]})),t.text&&T.jsx("div",Ua({className:"rce-mbox-text"},{children:t.text}))]}))},bn=function(){return bn=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},bn.apply(this,arguments)},Lj=function(t){var e;return T.jsx("div",bn({className:"rce-mtlink"},{children:T.jsxs("div",bn({className:"rce-mtlink-content"},{children:[T.jsx("div",bn({className:"rce-mtlink-item"},{children:T.jsx("div",bn({className:"rce-mtlink-title"},{children:t.text}))})),T.jsx("div",bn({className:"rce-mtlink-btn"},{children:(e=t==null?void 0:t.actionButtons)===null||e===void 0?void 0:e.map(function(r){return T.jsx("div",bn({className:"rce-mtlink-btn-content",onClick:function(){var n;return r.onClickButton((n=t==null?void 0:t.meetingID)!==null&&n!==void 0?n:"")}},{children:T.jsx(r.Component,{})}))})}))]}))}))};function $j(t){return Xe({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M13 14h-2a8.999 8.999 0 0 0-7.968 4.81A10.136 10.136 0 0 1 3 18C3 12.477 7.477 8 13 8V3l10 8-10 8v-5z"}}]}]})(t)}var Ee=function(){return Ee=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ee.apply(this,arguments)},Dj=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r},Mj=function(t){var e=t.focus,r=e!==void 0&&e,n=t.notch,i=n===void 0||n,s=t.styles,a=Dj(t,["focus","notch","styles"]),o=Ne.useRef(r),l=Ne.useRef(null),u=xe("rce-mbox",{"rce-mbox-right":a.position==="right"}),c=!(/(text|video|file|meeting|audio)/g.test(a.type||"text")||a.type==="location"&&a.text),d=a.date&&(a.dateString||$a(a.date));return Ne.useEffect(function(){var h;o.current!==r&&r===!0&&l&&((h=l.current)===null||h===void 0||h.scrollIntoView({block:"center",behavior:"smooth"}),a.onMessageFocused(o)),o.current=r},[r,o]),T.jsxs("div",Ee({ref:l,className:xe("rce-container-mbox",a.className),onClick:a.onClick},{children:[a.renderAddCmp instanceof Function?a.renderAddCmp():a.renderAddCmp,a.type==="system"?T.jsx(oj,Ee({},a,{focus:r,notch:i})):T.jsxs("div",Ee({style:s,className:xe(u,{"rce-mbox--clear-padding":c},{"rce-mbox--clear-notch":!i},{"message-focus":r})},{children:[T.jsxs("div",Ee({className:"rce-mbox-body",onContextMenu:a.onContextMenu},{children:[!a.retracted&&a.forwarded===!0&&T.jsx("div",Ee({className:xe("rce-mbox-forward",{"rce-mbox-forward-right":a.position==="left"},{"rce-mbox-forward-left":a.position==="right"}),onClick:a.onForwardClick},{children:T.jsx($j,{})})),!a.retracted&&a.replyButton===!0&&T.jsx("div",Ee({className:a.forwarded!==!0?xe("rce-mbox-forward",{"rce-mbox-forward-right":a.position==="left"},{"rce-mbox-forward-left":a.position==="right"}):xe("rce-mbox-forward",{"rce-mbox-reply-btn-right":a.position==="left"},{"rce-mbox-reply-btn-left":a.position==="right"}),onClick:a.onReplyClick},{children:T.jsx(_j,{})})),!a.retracted&&a.removeButton===!0&&T.jsx("div",Ee({className:a.forwarded===!0?xe("rce-mbox-remove",{"rce-mbox-remove-right":a.position==="left"},{"rce-mbox-remove-left":a.position==="right"}):xe("rce-mbox-forward",{"rce-mbox-reply-btn-right":a.position==="left"},{"rce-mbox-reply-btn-left":a.position==="right"}),onClick:a.onRemoveMessageClick},{children:T.jsx(yj,{})})),(a.title||a.avatar)&&T.jsxs("div",Ee({style:Ee({},a.titleColor&&{color:a.titleColor}),onClick:a.onTitleClick,className:xe("rce-mbox-title",{"rce-mbox-title--clear":a.type==="text"})},{children:[a.avatar&&T.jsx(bl,{letterItem:a.letterItem,src:a.avatar}),a.title&&T.jsx("span",{children:a.title})]})),a.reply&&T.jsx(fj,Ee({onClick:a.onReplyMessageClick},a.reply)),a.type==="text"&&T.jsxs("div",Ee({className:xe("rce-mbox-text",{"rce-mbox-text-retracted":a.retracted,left:a.position==="left",right:a.position==="right"})},{children:[a.retracted&&T.jsx(wj,{}),a.text]})),a.type==="location"&&T.jsx(uj,Ee({focus:r,notch:i},a)),a.type==="photo"&&T.jsx(sj,Ee({focus:r,notch:i},a)),a.type==="video"&&T.jsx(Rj,Ee({focus:r,notch:i},a)),a.type==="file"&&T.jsx(aj,Ee({focus:r,notch:i},a)),a.type==="spotify"&&T.jsx(dj,Ee({focus:r,notch:i},a)),a.type==="meeting"&&T.jsx(Ij,Ee({focus:r,notch:i},a)),a.type==="audio"&&T.jsx(Nj,Ee({focus:r,notch:i},a)),a.type==="meetingLink"&&T.jsx(Lj,Ee({focus:r,notch:i},a,{actionButtons:a==null?void 0:a.actionButtons})),T.jsxs("div",Ee({title:a.statusTitle,className:xe("rce-mbox-time",{"rce-mbox-time-block":c},{"non-copiable":!a.copiableDate}),"data-text":a.copiableDate?void 0:d},{children:[a.copiableDate&&a.date&&(a.dateString||$a(a.date)),a.status&&T.jsxs("span",Ee({className:"rce-mbox-status"},{children:[a.status==="waiting"&&T.jsx(bj,{}),a.status==="sent"&&T.jsx(xj,{}),a.status==="received"&&T.jsx(mj,{}),a.status==="read"&&T.jsx(vj,{color:"#4FC3F7"})]}))]}))]})),i&&(a.position==="right"?T.jsx("svg",Ee({style:a.notchStyle,className:xe("rce-mbox-right-notch",{"message-focus":r}),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},{children:T.jsx("path",{d:"M0 0v20L20 0"})})):T.jsx("div",{children:T.jsxs("svg",Ee({style:a.notchStyle,className:xe("rce-mbox-left-notch",{"message-focus":r}),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},{children:[T.jsx("defs",{children:T.jsxs("filter",Ee({id:"filter1",x:"0",y:"0"},{children:[T.jsx("feOffset",{result:"offOut",in:"SourceAlpha",dx:"-2",dy:"-5"}),T.jsx("feGaussianBlur",{result:"blurOut",in:"offOut",stdDeviation:"3"}),T.jsx("feBlend",{in:"SourceGraphic",in2:"blurOut",mode:"normal"})]}))}),T.jsx("path",{d:"M20 0v20L0 0",filter:"url(#filter1)"})]}))}))]}))]}))},ui=function(){return ui=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ui.apply(this,arguments)},Uj=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r},zj=function(t){var e=t.referance,r=e===void 0?null:e,n=t.lockable,i=n!==void 0&&n,s=t.toBottomHeight,a=s===void 0?300:s,o=t.downButton,l=Uj(t,["referance","lockable","toBottomHeight","downButton"]),u=Ne.useState(0),c=u[0],d=u[1],h=Ne.useState(!1),b=h[0],v=h[1],P=Ne.useRef(l);Ne.useEffect(function(){var p;r&&(P.current.dataSource.length!==l.dataSource.length&&(d(x(r)),(p=r)&&p.current&&(a==="100%"||a&&c<a?p.current.scrollTop=p.current.scrollHeight:i===!0&&(p.current.scrollTop=p.current.scrollHeight-p.current.offsetHeight-c))),P.current=l)},[P,l]);var x=function(p){return p.current?p.current.scrollHeight-p.current.scrollTop-p.current.offsetHeight:p.scrollHeight-p.scrollTop-p.offsetHeight};return T.jsxs("div",ui({className:xe(["rce-container-mlist",l.className])},l.customProps,{children:[!!l.children&&l.isShowChild&&l.children,T.jsx("div",ui({ref:r,onScroll:function(p){var m=x(p.currentTarget);d(m),a==="100%"||a&&m>a?b!==!0&&(v(!0),d(m)):b!==!1&&(v(!1),d(m)),l.onScroll instanceof Function&&l.onScroll(p)},className:"rce-mlist"},{children:l.dataSource.map(function(p,m){return T.jsx(Mj,ui({},p,{onOpen:l.onOpen&&function(f){return S=p,A=m,k=f,void(l.onOpen instanceof Function&&l.onOpen(S,A,k));var S,A,k},onPhotoError:l.onPhotoError&&function(f){return S=p,A=m,k=f,void(l.onPhotoError instanceof Function&&l.onPhotoError(S,A,k));var S,A,k},onDownload:l.onDownload&&function(f){return S=p,A=m,k=f,void(l.onDownload instanceof Function&&l.onDownload(S,A,k));var S,A,k},onTitleClick:l.onTitleClick&&function(f){return S=p,A=m,k=f,void(l.onTitleClick instanceof Function&&l.onTitleClick(S,A,k));var S,A,k},onForwardClick:l.onForwardClick&&function(f){return S=p,A=m,k=f,void(l.onForwardClick instanceof Function&&l.onForwardClick(S,A,k));var S,A,k},onReplyClick:l.onReplyClick&&function(f){return S=p,A=m,k=f,void(l.onReplyClick instanceof Function&&l.onReplyClick(S,A,k));var S,A,k},onReplyMessageClick:l.onReplyMessageClick&&function(f){return S=p,A=m,k=f,void(l.onReplyMessageClick instanceof Function&&l.onReplyMessageClick(S,A,k));var S,A,k},onRemoveMessageClick:l.onRemoveMessageClick&&function(f){return S=p,A=m,k=f,void(l.onRemoveMessageClick instanceof Function&&l.onRemoveMessageClick(S,A,k));var S,A,k},onClick:l.onClick&&function(f){return S=p,A=m,k=f,void(l.onClick instanceof Function&&l.onClick(S,A,k));var S,A,k},onContextMenu:l.onContextMenu&&function(f){return S=p,A=m,k=f,void(l.onContextMenu instanceof Function&&l.onContextMenu(S,A,k));var S,A,k},onMeetingMoreSelect:l.onMeetingMoreSelect&&function(f){return function(S,A,k){l.onMeetingMoreSelect instanceof Function&&l.onMeetingMoreSelect(S,A,k)}(p,m,f)},onMessageFocused:l.onMessageFocused&&function(f){return S=p,A=m,k=f,void(l.onMessageFocused instanceof Function&&l.onMessageFocused(S,A,k));var S,A,k},onMeetingMessageClick:l.onMeetingMessageClick&&function(f){return S=p,A=m,k=f,void(l.onMeetingMessageClick instanceof Function&&l.onMeetingMessageClick(S,A,k));var S,A,k},onMeetingTitleClick:l.onMeetingTitleClick,onMeetingVideoLinkClick:l.onMeetingVideoLinkClick,onMeetingLinkClick:l.onMeetingLinkClick&&function(f){return function(S,A,k){l.onMeetingLinkClick instanceof Function&&l.onMeetingLinkClick(S,A,k)}(p,m,f)},actionButtons:l.actionButtons,styles:l.messageBoxStyles,notchStyle:l.notchStyle}),m)})})),o===!0&&b&&a!=="100%"&&T.jsxs("div",ui({className:"rce-mlist-down-button",onClick:function(p){r&&(r.current.scrollTop=r.current.scrollHeight,l.onDownButtonClick instanceof Function&&l.onDownButtonClick(p))}},{children:[T.jsx(JT,{}),l.downButtonBadge!==void 0?T.jsx("span",ui({className:"rce-mlist-down-button--badge"},{children:l.downButtonBadge.toString()})):null]}))]}))};function Fj(){const[t,e]=Ne.useState(""),[r,n]=Ne.useState([]),[i,s]=Ne.useState([]);Ne.useEffect(()=>{f0().then(c=>{c==null||c.forEach(d=>{gh(d).then(h=>{console.log(h.text);const b=a(h.text,"system");s([...i,b])}).catch(h=>console.error(h))})})},[]);const a=(c,d)=>({position:d==="system"?"left":"right",type:"text",title:d==="system"?"Sales Associate":"User",text:c}),o=async c=>{if(e(c.target.value),console.log(c.target.value),c.target.value!=""){const d=await FT(c.target.value);n(d)}else n([])},l=c=>{c.preventDefault();const d=a(t,"user"),h=[...i,d];s(h),console.log("message before",i),gh(t).then(b=>{console.log(b.text);const v=a(b.text,"system");s([...h,v]),console.log("message after openai",i)}).catch(b=>console.error(b)),e("")},u=c=>{console.log("Selected suggestion:",c)};return T.jsx("div",{id:"boi",style:{height:"500px"},children:T.jsx("section",{style:{position:"relative",overflow:"hidden",backgroundColor:"black",backgroundSize:"cover"},children:T.jsx("div",{style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},children:T.jsxs("div",{style:{maxWidth:"1200px",width:"100%",margin:"auto",overflow:"hidden",transition:"all",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",backgroundColor:"white",backdropFilter:"blur(10px)",borderRadius:"1rem"},children:[T.jsx("div",{style:{position:"relative"},children:T.jsxs("form",{onSubmit:l,children:[T.jsx("input",{type:"text",value:t,onChange:o,onSubmit:l,style:{width:"100%",height:"3rem",paddingRight:"1rem",color:"black",border:"none",borderRadius:"0.625rem 0.625rem 0 0",paddingLeft:"2.75rem"},placeholder:"Ask me anything! I am not your typical search bar",role:"combobox","aria-expanded":"false","aria-controls":"options"}),T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",style:{position:"absolute",top:"50%",right:"10px",transform:"translateY(-50%)",height:"1.5rem",width:"1.5rem",color:"black"},children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),T.jsxs("div",{style:{display:"flex",borderTop:"1px solid rgba(17, 16, 16, 0.2)",flexDirection:"row"},children:[T.jsx("div",{style:{flex:"1",minWidth:"0",padding:"1.5rem",overflowY:"auto",maxHeight:"24rem"},children:r&&r.map((c,d)=>T.jsx("a",{href:c.url,onClick:()=>u(c),style:{textDecoration:"none",color:"inherit"},children:T.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"8px",borderBottom:"1px solid #ccc",boxSizing:"border-box",cursor:"pointer"},children:[T.jsx("img",{src:c.featured_image.url,alt:c.featured_image.alt,style:{width:"50px",marginRight:"8px"}}),T.jsx("div",{style:{textAlign:"center"},children:c.title})]})},d))}),T.jsx("div",{style:{flex:"1",minWidth:"0",padding:"1.5rem",overflowY:"auto",maxHeight:"24rem"},children:T.jsx(zj,{className:"message-list",lockable:!0,toBottomHeight:"100%",dataSource:i})})]})]})})})})}function pC(t,e,r,n=1){xl.createRoot(document.getElementById(e)).render(T.jsx(VT,{props:{home:t,mountDiv:e,overlayDiv:r,iconSize:n}}))}function mC(){const t="overlay";let e=document.getElementById(t);return e||(e=document.createElement("div"),e.id=t,e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.backgroundColor="rgba(0, 0, 0, 0.5)",e.style.zIndex="1000",e.style.display="none",document.body.appendChild(e),xl.createRoot(document.getElementById(t)).render(T.jsx(Fj,{}))),e}export{qO as B,ns as C,tP as H,cc as L,Ir as P,K_ as S,mC as a,YO as b,pC as c,yP as d,H_ as r};
